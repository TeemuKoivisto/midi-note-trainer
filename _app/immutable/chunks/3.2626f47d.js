import{_ as ve}from"./preload-helper.a4192956.js";import{S as ze,i as $e,s as We,e as b,n as V,a as k,b as C,p as O,d as m,f as h,Z as we,N as J,g as U,h as f,_ as Ye,q as z,t as F,F as xe,l as $,y as He,$ as tt,Q as Ie,R as Ae,c as Ss,a0 as ue,u as Ns,j as Ls,k as Ds,V as es,W as Et,X as ts,a1 as ss,a2 as Ve,x as Pe,H as Ps,B as ee,C as te,D as de,r as pe,O as Je,J as be,K as ke,L as ye,M as Ee,m as Se,T as It,w as Ge,a3 as An,o as ae,P as Ce,a4 as cs,v as hn,a5 as Sn,a6 as ls,a7 as Nn,a8 as Ln,I as Dn}from"./vendor_svelte.99087177.js";import{w as Qt,c as Pn,e as Vn,f as Ws,g as qs,h as Rt,i as ns,j as as,k as On,a as Js,l as ys}from"./vendor.e74270f4.js";import{a as jn}from"./modal.3667e877.js";function Qs(s,e,t){const l=s.slice();return l[22]=e[t].key,l[23]=e[t].value,l[24]=e[t].icon,l[26]=t,l}const Bn=s=>({}),Ys=s=>({});function Xs(s){let e,t,l,n,r,a,o,i,c,d,u;const _=s[17].header,p=Ss(_,s,s[16],Ys);let g=ue(s[0]),v=[];for(let y=0;y<g.length;y+=1)v[y]=el(Qs(s,g,y));const N=y=>$(v[y],1,1,()=>{v[y]=null});return{c(){e=b("button"),l=V(),n=b("ul"),r=b("li"),p&&p.c(),a=V();for(let y=0;y<v.length;y+=1)v[y].c();this.h()},l(y){e=k(y,"BUTTON",{class:!0,tabindex:!0}),C(e).forEach(m),l=O(y),n=k(y,"UL",{class:!0});var I=C(n);r=k(I,"LI",{});var A=C(r);p&&p.l(A),A.forEach(m),a=O(I);for(let E=0;E<v.length;E+=1)v[E].l(I);I.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",o=we(`items-list bg-white py-1.5 py-2 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(y,I){U(y,e,I),U(y,l,I),U(y,n,I),f(n,r),p&&p.m(r,null),f(n,a);for(let A=0;A<v.length;A+=1)v[A]&&v[A].m(n,null);c=!0,d||(u=z(e,"click",s[11]),d=!0)},p(y,I){if(s=y,p&&p.p&&(!c||I&65536)&&Ns(p,_,s,s[16],c?Ds(_,s[16],I,Bn):Ls(s[16]),Ys),I&8457){g=ue(s[0]);let A;for(A=0;A<g.length;A+=1){const E=Qs(s,g,A);v[A]?(v[A].p(E,I),F(v[A],1)):(v[A]=el(E),v[A].c(),F(v[A],1),v[A].m(n,null))}for(xe(),A=g.length;A<v.length;A+=1)N(A);He()}(!c||I&4&&o!==(o=we(`items-list bg-white py-1.5 py-2 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",o)},i(y){if(!c){y&&es(()=>{c&&(t||(t=Et(e,ts,{duration:Yt},!0)),t.run(1))}),F(p,y);for(let I=0;I<g.length;I+=1)F(v[I]);y&&es(()=>{c&&(i||(i=Et(n,ss,{duration:Yt},!0)),i.run(1))}),c=!0}},o(y){y&&(t||(t=Et(e,ts,{duration:Yt},!1)),t.run(0)),$(p,y),v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)$(v[I]);y&&(i||(i=Et(n,ss,{duration:Yt},!1)),i.run(0)),c=!1},d(y){y&&(m(e),m(l),m(n)),y&&t&&t.end(),p&&p.d(y),Ve(v,y),y&&i&&i.end(),d=!1,u()}}}function Zs(s){let e,t,l,n,r,a,o=s[23]+"",i,c,d,u,_;const p=[Mn,Gn],g=[];function v(y,I){return y[24]?0:1}l=v(s),n=g[l]=p[l](s);function N(){return s[20](s[22])}return{c(){e=b("li"),t=b("button"),n.c(),r=V(),a=b("div"),i=ee(o),c=V(),this.h()},l(y){e=k(y,"LI",{});var I=C(e);t=k(I,"BUTTON",{class:!0});var A=C(t);n.l(A),r=O(A),a=k(A,"DIV",{});var E=C(a);i=te(E,o),E.forEach(m),A.forEach(m),c=O(I),I.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),J(t,"selected",s[22]===s[3])},m(y,I){U(y,e,I),f(e,t),g[l].m(t,null),f(t,r),f(t,a),f(a,i),f(e,c),d=!0,u||(_=z(t,"click",N),u=!0)},p(y,I){s=y;let A=l;l=v(s),l===A?g[l].p(s,I):(xe(),$(g[A],1,1,()=>{g[A]=null}),He(),n=g[l],n?n.p(s,I):(n=g[l]=p[l](s),n.c()),F(n,1),n.m(t,r)),(!d||I&1)&&o!==(o=s[23]+"")&&de(i,o),(!d||I&9)&&J(t,"selected",s[22]===s[3])},i(y){d||(F(n),d=!0)},o(y){$(n),d=!1},d(y){y&&m(e),g[l].d(),u=!1,_()}}}function Gn(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){U(t,e,l)},p:pe,i:pe,o:pe,d(t){t&&m(e)}}}function Mn(s){let e,t;return e=new Je({props:{class:"mr-2",icon:s[24],width:16}}),{c(){be(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.icon=l[24]),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function el(s){let e,t,l=!s[8][s[26]]&&Zs(s);return{c(){l&&l.c(),e=Pe()},l(n){l&&l.l(n),e=Pe()},m(n,r){l&&l.m(n,r),U(n,e,r),t=!0},p(n,r){n[8][n[26]]?l&&(xe(),$(l,1,1,()=>{l=null}),He()):l?(l.p(n,r),r&256&&F(l,1)):(l=Zs(n),l.c(),F(l,1),l.m(e.parentNode,e))},i(n){t||(F(l),t=!0)},o(n){$(l),t=!1},d(n){n&&m(e),l&&l.d(n)}}}function Un(s){let e,t,l,n,r,a,o,i,c,d=s[6]&&Xs(s);return{c(){e=b("div"),t=b("input"),r=V(),d&&d.c(),this.h()},l(u){e=k(u,"DIV",{class:!0,id:!0});var _=C(e);t=k(_,"INPUT",{class:!0,title:!0}),r=O(_),d&&d.l(_),_.forEach(m),this.h()},h(){h(t,"class",l=we(`${s[14].class||""} open-btn text-justify text-sm rounded`)+" svelte-h65upg"),h(t,"title",n=s[14].title||""),J(t,"disabled",s[4]),J(t,"open",s[6]),h(e,"class",a=we(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(u,_){U(u,e,_),f(e,t),Ye(t,s[7]),f(e,r),d&&d.m(e,null),s[21](e),o=!0,i||(c=[z(t,"input",s[18]),z(t,"click",s[9]),z(t,"focus",s[19]),z(t,"input",s[10]),z(t,"keydown",s[12])],i=!0)},p(u,[_]){(!o||_&16384&&l!==(l=we(`${u[14].class||""} open-btn text-justify text-sm rounded`)+" svelte-h65upg"))&&h(t,"class",l),(!o||_&16384&&n!==(n=u[14].title||""))&&h(t,"title",n),_&128&&t.value!==u[7]&&Ye(t,u[7]),(!o||_&16400)&&J(t,"disabled",u[4]),(!o||_&16448)&&J(t,"open",u[6]),u[6]?d?(d.p(u,_),_&64&&F(d,1)):(d=Xs(u),d.c(),F(d,1),d.m(e,null)):d&&(xe(),$(d,1,1,()=>{d=null}),He()),(!o||_&4&&a!==(a=we(`relative ${u[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!o||_&2)&&h(e,"id",u[1])},i(u){o||(F(d),o=!0)},o(u){$(d),o=!1},d(u){u&&m(e),d&&d.d(),s[21](null),i=!1,tt(c)}}}const Yt=400;function Rn(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:r,id:a=void 0,containerClass:o=void 0,selected:i,disabled:c=void 0,onSelect:d}=e,u,_=!1,p=i,g=r.map(D=>!1);function v(){c||t(6,_=!_)}function N(D){t(8,g=r.map(T=>!T.value.toLowerCase().includes(D.currentTarget.value.toLowerCase())))}function y(){t(7,p=i),t(6,_=!1),t(8,g=r.map(D=>!1))}function I(D){if(D.key==="Enter"){const T=g.findIndex(M=>!M);p===i?y():T>-1&&t(6,_=d(r[T].key)),_||(t(8,g=r.map(M=>!1)),D.currentTarget instanceof HTMLElement&&D.currentTarget.blur())}else D.key==="Escape"&&(y(),D.currentTarget instanceof HTMLElement&&D.currentTarget.blur())}function A(D){t(6,_=d(D))}function E(){p=this.value,t(7,p),t(3,i)}const G=()=>t(6,_=!0),P=D=>A(D);function S(D){Ps[D?"unshift":"push"](()=>{u=D,t(5,u)})}return s.$$set=D=>{t(14,e=Ie(Ie({},e),Ae(D))),"options"in D&&t(0,r=D.options),"id"in D&&t(1,a=D.id),"containerClass"in D&&t(2,o=D.containerClass),"selected"in D&&t(3,i=D.selected),"disabled"in D&&t(4,c=D.disabled),"onSelect"in D&&t(15,d=D.onSelect),"$$scope"in D&&t(16,n=D.$$scope)},s.$$.update=()=>{s.$$.dirty&8&&t(7,p=i),s.$$.dirty&1&&t(8,g=r.map(D=>!1))},e=Ae(e),[r,a,o,i,c,u,_,p,g,v,N,y,I,A,e,d,n,l,E,G,P,S]}class mn extends ze{constructor(e){super(),$e(this,e,Rn,Un,We,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:15})}}const tl={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function Qe(s,e=0,t=0){return{interval:`${s}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:s,semitones:_n(s,e,t),flats:e,sharps:t}}function _n(s,e,t){return(s<8?tl[s]:tl[s%7])-e+t+Math.floor(s/8)*12}function pn(s){let e,t=0,l=0;s<0?(t=1+Math.floor(-s/100),e=-s%100):s>100?(l=Math.floor(s/100),e=s%100):e=s;const n=_n(e,t,l);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(l)}`,interval_seq:e,semitones:n,flats:t,sharps:l}}const Kn=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let gs=[];function gn(){return Kn.map(s=>{const e=s[3].map(pn);return{suffixes:s[0],name:s[1][0],type:s[2],intervals:e}})}function Gt(s){gs.length===0&&(gs=gn());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return gs.find(t=>t.suffixes.find(l=>l===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function Fn(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const r=(s.semitones+e)%12;return{...s,semitones:r<0?r+12:r,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function Es(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=s+r.semitones,o=e.scaleNotes.find(_=>_.semitones===a%12),i=r.flats>0,c=r.sharps>0,d=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(Fn(o??e.notesMap.get(d),o?0:u,a))}return l}const sl=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],xn=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],ll=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function Hn(s){let e=0,t=0;for(let l=0;l<sl.length;l+=1){const n=s.find(a=>a.note.slice(0,2)===sl[l]),r=s.find(a=>a.note.slice(0,2)===xn[l]);if(n)e+=1;else if(r)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:ll.get(e*-1)}:{flats:0,sharps:t,majorSignature:ll.get(t)}}function zn(s){return s>=9?`${s>=10?"X":""}${s===9?"IX":"I".repeat(s%10)}`:`${s>=5?"V":""}${s===4?"IV":"I".repeat(s%5)}`}function vn(s){return s.map(e=>{const t=[Qe(1)];let l;return e.major?(t.push(Qe(3)),e.suffix.startsWith("+")?t.push(Qe(5,0,1)):e.suffix.startsWith("6")?t.push(Qe(6)):e.suffix.startsWith("7")?t.push(Qe(7,1)):e.suffix.startsWith("maj7")?t.push(Qe(7)):l=Gt("maj")):e.minor?(t.push(Qe(3,1)),e.suffix.startsWith("°")?t.push(Qe(5,1)):e.suffix.startsWith("6")?(t.push(Qe(6)),l=Gt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push(Qe(7,1)),l=Gt("m"+e.suffix)):l=Gt("m")):e.suffix.startsWith("sus2")?t.push(Qe(2)):e.suffix.startsWith("sus4")&&t.push(Qe(4)),t.length<=2&&t.push(Qe(5)),t.length<=2&&t.push(Qe(8)),l||(l=Gt(e.suffix)),{...l,intervals:t}})}function $n(s,e){let t=e.has(4)&&e.has(7),l=e.has(3)&&e.has(7);const n=zn(s);let r="";return t||l||(e.has(3)&&e.has(6)?(r="°",l=!0):e.has(4)&&e.has(8)?(r="+",t=!0):e.has(3)&&e.has(10)?(l=!0,r="7"):e.has(4)&&e.has(10)?(r="7",t=!0):e.has(4)&&e.has(11)?(r="maj7",t=!0):e.has(3)&&e.has(8)?(r="6",l=!0):e.has(4)&&e.has(9)?(r="6",t=!0):e.has(2)?r="sus2":e.has(5)?r="sus4":e.has(7)?r="5":r="?"),{degree:s,roman:l?n.toLowerCase():n,suffix:r,major:t,minor:l,semitones:e}}function Wn(s){const e=s.length;return s.map((t,l)=>{const n=t.semitones,r=new Set;for(let a=1;a<e;a+=1){const o=s[(l+a)%e].semitones,i=o<=n?o+12-n:o-n;r.add(i)}return $n(t.interval_seq,r)})}const qn=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let vs=[];function us(){return qn.map(s=>{const e=s[0],t=s[1].map(pn),l=Wn(t);return{names:e,intervals:t,triads:l}})}function Jn(s){vs.length===0&&(vs=us());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return vs.find(t=>t.names.find(l=>l.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const Qn=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,Yn=/^[0-9]$/,at=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Vs(s){const e=s.midi+s.flats-s.sharps;return e===12?1:Math.floor((e-12)/12)}function st(s){return`${s.note}${Vs(s)}`}function Ot(s){const t=(s-12)%12;return{...at[t],semitones:t,midi:s}}function Xn(s,e=!0,t=!1){if(e&&!Qn.test(s))return{err:`Unrecognized note "${s}"`,code:400};const l=s.trim(),n=l.charAt(0).toUpperCase(),r=at.find(u=>u.note.charAt(0)===n&&u.note.length===1);if(!r)return{err:`Unable to find note ${l}`,code:500};const a=l.slice(1).split("").reduce((u,_)=>u+(_.toLowerCase()==="b"||_==="♭"?-1:_==="#"||_==="♯"?1:0),0);let o;if(Yn.test(l.charAt(l.length-1)))try{o=parseInt(l.charAt(l.length-1),10)}catch{}if(t&&o===void 0)return{err:`No octave provided: ${s}`,code:400};o===void 0&&(o=0);let i=(r.semitones+a)%12;i=i<0?i+12:i;const c=a<0?-a:0,d=a>0?a:0;return{data:{note:`${n}${"♭".repeat(c)}${"♯".repeat(d)}`,semitones:i,midi:12+o*12+i,flats:c,sharps:d}}}function bn(s){const e=at.find(t=>t.note.charAt(0)===s.charAt(0)&&t.note.length===1);if(e){const t=s.slice(1).split("").reduce((n,r)=>n+(r.toLowerCase()==="b"||r==="♭"?-1:r==="#"||r==="♯"?1:0),0),l=(e.semitones+t)%12;return{note:s,semitones:l<0?l+12:l,flats:t<0?-t:0,sharps:t>0?t:0}}}const Zn=/^[a-gA-G][♭b#♯]?$/,bs="ABCDEFG";function ea(s,e){return e.map(t=>bs.charAt((bs.indexOf(s)+t.interval_seq-1)%bs.length))}function ta(s,e,t){return t.map((l,n)=>{const r=e[n],a=(s+l.semitones)%12,o=at[a],i=o.note.charAt(0);if(i<r&&(i!=="A"||r!=="G")||i==="G"&&r==="A"){let c=1,d=at[(a+c)%12];for(;d.note.charAt(0)!==r;)c+=1,d=at[(a+c)%12];return{semitones:a,note:d.note+"♭".repeat(c),flats:c+(d.note.includes("♭")?1:0),sharps:0}}else if(i>r||i==="A"&&r==="G"){let c=1,d=a===0?at.length-1:a-c,u=at[d];for(;u.note.charAt(0)!==r;)c+=1,d=d===0?at.length-1:d-1,u=at[d];return{semitones:a,note:u.note+"♯".repeat(c),flats:0,sharps:c+(u.note.includes("♯")?1:0)}}else return{semitones:a,note:o.note,flats:o.flats,sharps:o.sharps}})}function Mt(s,e){if(!Zn.test(s))return{err:`Unknown key: ${s}`,code:400};const t=Jn(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const l=`${s.charAt(0).toUpperCase()}${s.charAt(1).replace("b","♭").replace("#","♯")}`,n=bn(l);if(!n)return{err:`Unable to find root for note: ${l}`,code:404};const r=ea(l.charAt(0),t.intervals),a=ta(n.semitones,r,t.intervals),o=new Map(at.map(i=>{const c=a.find(d=>d.semitones===i.semitones);return c?[i.semitones,c]:[i.semitones,{...i}]}));return{data:{key:l,scale:t.names[0],names:t.names,...Hn(a),intervals:t.intervals.map(i=>({...i})),triads:t.triads.map(i=>({...i})),scaleNotes:a,notesMap:o}}}const ws=new Map;function sa(s,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(s)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function la(s,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(s)),{data:void 0}}catch(l){return{err:`Failed to store the value: ${l}`,code:400}}}function mt(s,e){const{key:t,storage:l="local",namespace:n="default"}=e,r=sa(t,l),a=Se(s);"data"in r?s.set(e.deserialize?e.deserialize(r.data):r.data):"err"in r&&(e!=null&&e.debug)&&console.info(r.err);const o=s.subscribe(c=>{const d=la(e.serialize?e.serialize(c):c,t,l);"err"in d&&(e!=null&&e.debug)&&console.error(d.err)}),i=ws.get(n);return i?i.push({key:t,storage:l,value:s,defaultValue:a,unsubscribe:o}):ws.set(n,[{key:t,storage:l,value:s,defaultValue:a,unsubscribe:o}]),s}function na(s=["default"],e){s.forEach(t=>{var l;(l=ws.get(t))==null||l.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function aa(s,e){const t=await fetch(s);if(!t.ok)return{err:t.statusText,code:t.status};const l=await t.arrayBuffer();return{data:await e.decodeAudioData(l)}}async function ra(s,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],l=await Promise.all(t.map(r=>aa(`${s}${r}`,e))),n=[];return l.forEach(r=>{"err"in r?console.error(`Failed to load audio: ${r.err}`):n.push(r.data)}),n}class oa{constructor(e,t,l,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(l),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(l))}on(e,t,l,n,r,a,o,i){this.noteA.buffer=e,this.noteA.playbackRate.value=l,this.biquadFilter.frequency.value=r,this.gainA.gain.value=a,this.gain.gain.value=i,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=o,this.noteB.start(0)),this.noteA.start(0)}off(e,t,l){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(l),this.noteB.stop(l),(n=this.damp)==null||n.start(0)}}class ia{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,l)=>{this.bufferlists.push(t),l===8?this.damper=t:l===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(l=>{this.noteOn(l,t)})}noteOn(e,t=80){if(e<109&&e>20){const l=this.notes.get(e);l&&(l.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),r=n+1,a=n*12+21,o=2**((e-69)/12)*440,i=t/127;let c=o*(2-(e-21)/50)+3*o*i;e<60&&(c=440*(3-(60-21)/50)+3*o*i);const d=1-(e%12/12+1)/12,u=Math.pow(2,(e-a)/12),_=0,p=0,g=i**1.4,v=new oa(e,this.context,this.directGain,this.damper);v.on(this.bufferlists[n],this.bufferlists[r],u,_,c,d,p,g),this.notes.set(e,v)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const ca="/midi-note-trainer/",Cs=mt(Ge(!1),{key:"midi-access"}),rs=Ge(void 0),fs=mt(Ge([60,84]),{key:"midi-range",storage:"session"}),os=It(fs,s=>[Ot(s[0]),Ot(s[1])]),nl=Ge(void 0),rt=Ge(void 0),ot=mt(Ge({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),je={async openMidi(){return Qt.enable().then(()=>(Cs.set(!0),Qt.inputs.length>0?(rs.set(Qt.inputs[0]),{data:Qt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(s=>({err:s.toString(),code:403}))},disableMidi(){Cs.set(!1),rs.set(void 0)},setMidiRange(s){fs.set(s)},setInputValue(s,e){ot.update(t=>({...t,[s]:e})),s==="useSound"&&!e?rt.set(void 0):s==="useSound"&&!Se(rt)&&this.initAudio()},async initAudio(){let s=Se(nl);if(s||(s=new AudioContext,nl.set(s)),!Se(rt)){const e=new ia(s),t=await ra(`${ca}audio`,s);e.load(t),rt.set(e)}}};let nt;An({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}});const Tt=Ge(["C","Major"]),Bt=It(Tt,s=>{const e=Mt(s[0],s[1]);return"data"in e?e.data:{key:s[0],scale:s[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),al=Ge([]),kt=Ge([]);function Ts(s,e){if(s.length>0){const t=Date.now();let l=t;const n=s.filter(r=>(r.started+e>t&&(l=Math.min(l,r.started)),r.started+e>t));return!nt&&n.length>0&&(nt=setTimeout(()=>{nt=void 0,kt.update(r=>Ts(r,e))},e-(t-l)+100)),n}return s}const Ne={setKey(s){Tt.update(e=>[s,e[1]])},setScale(s){Tt.update(e=>[e[0],s])},setKeyAndScale(s,e){Tt.set([s,e])},setTarget(s=[]){al.set(s)},getNote(s){return{...Se(Bt).notesMap.get(s%12),midi:s}},pushPlayed(s,e,t){const n={...Se(Bt).notesMap.get(s%12),midi:s},r=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(kt.update(o=>{const i=o.findIndex(c=>c.midi===s);return i>=0&&o.splice(i,1),[...o,{...n,color:a,started:r}]}),!nt&&t!==-1){const o=t??Se(ot).keyFadeTimeout;nt=setTimeout(()=>{nt=void 0,kt.update(i=>Ts(i,o))},o)}},setPlayed(s,e,t){const l=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(kt.update(r=>[...s.map(a=>({...a,color:n,started:l}))]),!nt&&t!==-1){const r=t??Se(ot).keyFadeTimeout;nt=setTimeout(()=>{nt=void 0,kt.update(a=>Ts(a,r))},r)}},clearPlayed(){kt.set([]),clearTimeout(nt),nt=void 0},clearScore(s=!1){s&&Tt.set(["C","Major"]),al.set([]),kt.set([])}};class Os{constructor(e,t,l){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=l;const n=[],{count:r}=l,a=t.map(i=>typeof i=="object"&&i!==null?{...i}:i);let o=l.duplicates;!l.duplicates&&r>a.length&&(console.warn(`Trying to create game with count ${r} larger than available unique values ${t.length}`),o=!0);for(let i=0;i<r;i+=1){const c=Math.floor(Math.random()*a.length);if(o)n.push(a[c]);else{const d=a.splice(c,1);d.length>0&&n.push(d[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function ua(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const r=(s.semitones+e)%12;return{...s,semitones:r<0?r+12:r,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function fa(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=s+r.semitones,o=e.scaleNotes.find(_=>_.semitones===a%12),i=r.flats>0,c=r.sharps>0,d=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(ua(o??e.notesMap.get(d),o?0:u,a))}return l}const da=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function ha(s){const t=(s-12)%12;return{...da[t],semitones:t,midi:s}}function ma(s){return`${s.note.trim().charAt(0).toUpperCase()}${"♭".repeat(s.flats)}${"♯".repeat(s.sharps)}`}class dt extends Os{constructor(e,t,l){const n=t.range[0],r=t.range[1],a=new Set(t.scale.scaleNotes.map(i=>i.semitones)),o=l.chords.flatMap(i=>{const c=[],d=i.intervals.reduce((u,_)=>_.semitones>u?_.semitones:u,0);for(let u=n;u<=r-d;u+=1)if((!l.onlyScale||a.has(u%12))&&(!i.allowed||i.allowed.has(u%12))){const _=fa(u,t.scale,i.intervals);c.push({...i,rootNote:_[0].note,chord:`${_[0].note}${i.suffixes[0]}`,notes:_})}return c});super(e,o,t),this.played=new Set,this.opts=l}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${ma(e)}${e.chord.toLowerCase()}`,notes:[]};let l=this.current.chord===t.chord;return this.current.chord.slice(-3)==="maj"&&!l&&(l=this.current.chord.slice(0,-3)===t.chord),this.addGuessed(t,l)}guess(){const e=Array.from(this.played.values()).map(n=>ha(n)).sort((n,r)=>n.midi-r.midi);this.played.clear();const t={chord:"",notes:e},l=this.current.notes.every(n=>e.find(r=>r.midi%12===n.midi%12));return this.addGuessed(t,l)}}const _a={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Ut extends Os{constructor(e,t){const l=e==="keys-major"?"major":"minor";super(e,Object.keys(_a[l]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class jt extends Os{constructor(e,t){const l=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-l+1)).map((r,a)=>l+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const kn={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},yt=Ge("waiting"),ht=mt(Ge(kn),{key:"game-options"}),wt=Ge(void 0),js=Ge(gn().map(s=>({...s,selected:!0}))),De={play(...[s,e]){var i,c,d;let t;const l=Se(Bt),n=Se(fs),r=Se(ht),a={scale:l,range:n,duplicates:r.duplicates,count:r.count};let o=[l.key,l.scale];if(s==="notes")t=new jt(s,a),Ne.setTarget([Ne.getNote(t.current)]),(i=Se(rt))==null||i.noteOn(t.current);else if(s==="pitches")t=new jt(s,a),Ne.setTarget(),je.setInputValue("useSound",!0),(c=Se(rt))==null||c.noteOn(t.current);else if(s==="keys-major"||s=="keys-minor")t=new Ut(s,a),o=[t.current,s==="keys-major"?"major":"minor"];else if(s==="chords-play"||s==="chords-write")t=new dt(s,a,e);else if(s==="chords-diatonic"){const u=vn(l.triads).map((_,p)=>({..._,allowed:new Set([l.scaleNotes[p].semitones])}));t=new dt(s,a,{chords:u})}else throw Error("Unknown game type: "+s);return typeof t.current!="number"&&typeof t.current!="string"&&((d=Se(rt))==null||d.playChord(t.current.notes.map(u=>u.midi)),Ne.setTarget(t.current.notes)),Ne.setKeyAndScale(o[0],o[1]),Ne.clearPlayed(),yt.set("waiting"),wt.set(t),t},updateState(s){yt.set(s)},setOptionValue(s,e){ht.update(t=>({...t,[s]:e}))},toggleChords(s){js.update(e=>e.map(t=>({...t,selected:s(t)})))},nextGuess(){var e,t;const s=Se(wt);s!=null&&s.ended?yt.set("ended"):s instanceof jt?(s.type==="notes"?Ne.setTarget([Ne.getNote(s.current)]):Ne.setTarget(),Ne.clearPlayed(),(e=Se(rt))==null||e.noteOn(s.current),De.updateState("waiting"),s.startTime()):s instanceof dt?(Ne.setTarget(s.current.notes),Ne.clearPlayed(),(t=Se(rt))==null||t.playChord(s==null?void 0:s.current.notes.map(l=>l.midi)),yt.set("waiting"),s.startTime()):s instanceof Ut&&(Ne.setKey(s.current),yt.set("waiting"),s.startTime())},clearGame(s=!1){const e=Se(wt);e&&Ne.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),s&&ht.set(kn),wt.set(void 0),yt.set("waiting"),Ne.clearScore()}};function rl(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function ol(s,e,t){const l=s.slice();return l[34]=e[t],l}function il(s,e,t){const l=s.slice();return l[9]=e[t],l}function cl(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function ul(s,e,t){const l=s.slice();return l[34]=e[t],l}function fl(s,e,t){const l=s.slice();return l[9]=e[t],l}function pa(s){let e,t=ue(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=dl(ul(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r[0]&128){t=ue(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const o=ul(n,t,a);l[a]?l[a].p(o,r):(l[a]=dl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function ga(s){let e,t=ue(s[3][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=hl(fl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r[0]&8){t=ue(n[3][n[31]]);let a;for(a=0;a<t.length;a+=1){const o=fl(n,t,a);l[a]?l[a].p(o,r):(l[a]=hl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function dl(s){let e,t=s[34].interval+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&128&&t!==(t=n[34].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function hl(s){let e,t=s[9].note+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&8&&t!==(t=n[9].note+"")&&de(l,t)},d(n){n&&m(e)}}}function ml(s){let e,t,l,n,r,a,o=s[29].suffixes[0]+"",i,c,d,u,_,p,g=s[29].name+"",v,N,y,I;n=new Je({props:{icon:s[29].selected?ns:as,width:12}});function A(){return s[24](s[29])}function E(S,D){return S[3][S[31]]&&S[3][S[31]].length>0?ga:pa}let G=E(s),P=G(s);return{c(){e=b("li"),t=b("button"),l=b("span"),be(n.$$.fragment),r=V(),a=b("div"),i=ee(o),c=V(),d=b("li"),P.c(),_=V(),p=b("li"),v=ee(g),this.h()},l(S){e=k(S,"LI",{});var D=C(e);t=k(D,"BUTTON",{class:!0});var T=C(t);l=k(T,"SPAN",{class:!0});var M=C(l);ke(n.$$.fragment,M),M.forEach(m),r=O(T),a=k(T,"DIV",{class:!0});var B=C(a);i=te(B,o),B.forEach(m),T.forEach(m),D.forEach(m),c=O(S),d=k(S,"LI",{class:!0,title:!0});var w=C(d);P.l(w),w.forEach(m),_=O(S),p=k(S,"LI",{class:!0});var L=C(p);v=te(L,g),L.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),J(l,"text-green-500",s[29].selected),J(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1rg0xw5"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1rg0xw5"),J(t,"hidden",s[8]),h(d,"class","intervals svelte-1rg0xw5"),h(d,"title",u=s[29].intervals.map(vl).join("-")),h(p,"class","text-xs")},m(S,D){U(S,e,D),f(e,t),f(t,l),ye(n,l,null),f(t,r),f(t,a),f(a,i),U(S,c,D),U(S,d,D),P.m(d,null),U(S,_,D),U(S,p,D),f(p,v),N=!0,y||(I=z(t,"click",A),y=!0)},p(S,D){s=S;const T={};D[0]&128&&(T.icon=s[29].selected?ns:as),n.$set(T),(!N||D[0]&128)&&J(l,"text-green-500",s[29].selected),(!N||D[0]&128)&&J(l,"text-gray-400",!s[29].selected),(!N||D[0]&128)&&o!==(o=s[29].suffixes[0]+"")&&de(i,o),(!N||D[0]&256)&&J(t,"hidden",s[8]),G===(G=E(s))&&P?P.p(s,D):(P.d(1),P=G(s),P&&(P.c(),P.m(d,null))),(!N||D[0]&128&&u!==(u=s[29].intervals.map(vl).join("-")))&&h(d,"title",u),(!N||D[0]&128)&&g!==(g=s[29].name+"")&&de(v,g)},i(S){N||(F(n.$$.fragment,S),N=!0)},o(S){$(n.$$.fragment,S),N=!1},d(S){S&&(m(e),m(c),m(d),m(_),m(p)),Ee(n),P.d(),y=!1,I()}}}function va(s){let e,t=ue(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=_l(ol(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r[0]&64){t=ue(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const o=ol(n,t,a);l[a]?l[a].p(o,r):(l[a]=_l(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function ba(s){let e,t=ue(s[4][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=pl(il(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r[0]&16){t=ue(n[4][n[31]]);let a;for(a=0;a<t.length;a+=1){const o=il(n,t,a);l[a]?l[a].p(o,r):(l[a]=pl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function _l(s){let e,t=s[34].interval+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&64&&t!==(t=n[34].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function pl(s){let e,t=s[9].note+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&16&&t!==(t=n[9].note+"")&&de(l,t)},d(n){n&&m(e)}}}function gl(s){let e,t,l,n,r,a,o=s[29].suffixes[0]+"",i,c,d,u,_,p,g=s[29].name+"",v,N,y,I;n=new Je({props:{icon:s[29].selected?ns:as,width:12}});function A(){return s[25](s[29])}function E(S,D){return S[4][S[31]]&&S[4][S[31]].length>0?ba:va}let G=E(s),P=G(s);return{c(){e=b("li"),t=b("button"),l=b("span"),be(n.$$.fragment),r=V(),a=b("div"),i=ee(o),c=V(),d=b("li"),P.c(),_=V(),p=b("li"),v=ee(g),this.h()},l(S){e=k(S,"LI",{});var D=C(e);t=k(D,"BUTTON",{class:!0});var T=C(t);l=k(T,"SPAN",{class:!0});var M=C(l);ke(n.$$.fragment,M),M.forEach(m),r=O(T),a=k(T,"DIV",{class:!0});var B=C(a);i=te(B,o),B.forEach(m),T.forEach(m),D.forEach(m),c=O(S),d=k(S,"LI",{class:!0,title:!0});var w=C(d);P.l(w),w.forEach(m),_=O(S),p=k(S,"LI",{class:!0});var L=C(p);v=te(L,g),L.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),J(l,"text-green-500",s[29].selected),J(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1rg0xw5"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1rg0xw5"),J(t,"hidden",s[8]),h(d,"class","intervals svelte-1rg0xw5"),h(d,"title",u=s[29].intervals.map(bl).join("-")),h(p,"class","text-xs")},m(S,D){U(S,e,D),f(e,t),f(t,l),ye(n,l,null),f(t,r),f(t,a),f(a,i),U(S,c,D),U(S,d,D),P.m(d,null),U(S,_,D),U(S,p,D),f(p,v),N=!0,y||(I=z(t,"click",A),y=!0)},p(S,D){s=S;const T={};D[0]&64&&(T.icon=s[29].selected?ns:as),n.$set(T),(!N||D[0]&64)&&J(l,"text-green-500",s[29].selected),(!N||D[0]&64)&&J(l,"text-gray-400",!s[29].selected),(!N||D[0]&64)&&o!==(o=s[29].suffixes[0]+"")&&de(i,o),(!N||D[0]&256)&&J(t,"hidden",s[8]),G===(G=E(s))&&P?P.p(s,D):(P.d(1),P=G(s),P&&(P.c(),P.m(d,null))),(!N||D[0]&64&&u!==(u=s[29].intervals.map(bl).join("-")))&&h(d,"title",u),(!N||D[0]&64)&&g!==(g=s[29].name+"")&&de(v,g)},i(S){N||(F(n.$$.fragment,S),N=!0)},o(S){$(n.$$.fragment,S),N=!1},d(S){S&&(m(e),m(c),m(d),m(_),m(p)),Ee(n),P.d(),y=!1,I()}}}function ka(s){let e,t,l,n,r="Chords",a,o,i,c,d,u,_,p,g,v,N,y,I,A,E,G,P,S="Key",D,T,M,B,w="Scale",L,K,j,R,q="Note",me,Y,H,W,Te,X,le,oe,ge,ne;c=new Je({props:{icon:Pn,width:20}}),_=new Je({props:{icon:Vn,width:16}}),v=new Je({props:{icon:s[5]?Ws:qs,width:16}}),I=new Je({props:{icon:Rt,width:16}}),K=new mn({props:{class:"bg-gray-100 w-48",containerClass:"input w-48",selected:s[1],options:s[10],onSelect:s[20]}});let fe=ue(s[7]),Q=[];for(let x=0;x<fe.length;x+=1)Q[x]=ml(cl(s,fe,x));const ie=x=>$(Q[x],1,1,()=>{Q[x]=null});let _e=ue(s[6]),ce=[];for(let x=0;x<_e.length;x+=1)ce[x]=gl(rl(s,_e,x));const Re=x=>$(ce[x],1,1,()=>{ce[x]=null});return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=r,a=V(),o=b("div"),i=b("button"),be(c.$$.fragment),d=V(),u=b("button"),be(_.$$.fragment),p=V(),g=b("button"),be(v.$$.fragment),N=V(),y=b("button"),be(I.$$.fragment),A=V(),E=b("div"),G=b("div"),P=b("label"),P.textContent=S,D=V(),T=b("input"),M=V(),B=b("label"),B.textContent=w,L=V(),be(K.$$.fragment),j=V(),R=b("label"),R.textContent=q,me=V(),Y=b("input"),H=V(),W=b("ul");for(let x=0;x<Q.length;x+=1)Q[x].c();Te=V(),X=b("ul");for(let x=0;x<ce.length;x+=1)ce[x].c();this.h()},l(x){e=k(x,"DIV",{class:!0});var re=C(e);t=k(re,"FIELDSET",{class:!0});var he=C(t);l=k(he,"LEGEND",{class:!0});var Xe=C(l);n=k(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-1knqzl6"&&(n.textContent=r),Xe.forEach(m),a=O(he),o=k(he,"DIV",{class:!0});var se=C(o);i=k(se,"BUTTON",{class:!0});var Oe=C(i);ke(c.$$.fragment,Oe),Oe.forEach(m),d=O(se),u=k(se,"BUTTON",{class:!0});var Me=C(u);ke(_.$$.fragment,Me),Me.forEach(m),p=O(se),g=k(se,"BUTTON",{class:!0});var _t=C(g);ke(v.$$.fragment,_t),_t.forEach(m),N=O(se),y=k(se,"BUTTON",{class:!0});var At=C(y);ke(I.$$.fragment,At),At.forEach(m),se.forEach(m),A=O(he),E=k(he,"DIV",{class:!0});var Ke=C(E);G=k(Ke,"DIV",{class:!0});var Ue=C(G);P=k(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(P)!=="svelte-14m38zf"&&(P.textContent=S),D=O(Ue),T=k(Ue,"INPUT",{class:!0,id:!0}),M=O(Ue),B=k(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(B)!=="svelte-bxhcb0"&&(B.textContent=w),L=O(Ue),ke(K.$$.fragment,Ue),j=O(Ue),R=k(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(R)!=="svelte-dmbfli"&&(R.textContent=q),me=O(Ue),Y=k(Ue,"INPUT",{class:!0,id:!0}),Ue.forEach(m),H=O(Ke),W=k(Ke,"UL",{class:!0});var St=C(W);for(let qe=0;qe<Q.length;qe+=1)Q[qe].l(St);St.forEach(m),Te=O(Ke),X=k(Ke,"UL",{class:!0});var Ze=C(X);for(let qe=0;qe<ce.length;qe+=1)ce[qe].l(Ze);Ze.forEach(m),Ke.forEach(m),he.forEach(m),re.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),J(i,"hidden",s[8]),h(u,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),J(u,"hidden",s[8]),h(g,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),J(g,"hidden",s[8]),h(y,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),J(y,"hidden",s[8]),h(o,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),h(P,"class","mr-4 font-bold svelte-1rg0xw5"),h(P,"for","scale-key"),h(T,"class","input bg-gray-100 w-12 px-1 rounded"),h(T,"id","scale-key"),T.value=s[0],h(B,"class","font-bold svelte-1rg0xw5"),h(B,"for","scale-key"),h(R,"class","font-bold svelte-1rg0xw5"),h(R,"for","scale-key"),h(Y,"class","input bg-gray-100 w-12 px-1 rounded"),h(Y,"id","scale-key"),Y.value=s[2],h(G,"class","flex mb-2 options svelte-1rg0xw5"),h(W,"class","chord-list w-full svelte-1rg0xw5"),h(X,"class","chord-list w-full svelte-1rg0xw5"),h(E,"class","body svelte-1rg0xw5"),J(E,"hidden",s[8]),h(t,"class","flex flex-col relative rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1rg0xw5"),J(t,"collapsed",s[8]),h(e,"class",le=we(`${s[21].class||""}`)+" svelte-1rg0xw5")},m(x,re){U(x,e,re),f(e,t),f(t,l),f(l,n),f(t,a),f(t,o),f(o,i),ye(c,i,null),f(o,d),f(o,u),ye(_,u,null),f(o,p),f(o,g),ye(v,g,null),f(o,N),f(o,y),ye(I,y,null),f(t,A),f(t,E),f(E,G),f(G,P),f(G,D),f(G,T),f(G,M),f(G,B),f(G,L),ye(K,G,null),f(G,j),f(G,R),f(G,me),f(G,Y),f(E,H),f(E,W);for(let he=0;he<Q.length;he+=1)Q[he]&&Q[he].m(W,null);f(E,Te),f(E,X);for(let he=0;he<ce.length;he+=1)ce[he]&&ce[he].m(X,null);oe=!0,ge||(ne=[z(n,"click",s[12]),z(i,"click",s[16]),z(u,"click",s[17]),z(g,"click",s[18]),z(y,"click",s[19]),z(T,"input",s[13]),z(Y,"input",s[14])],ge=!0)},p(x,re){(!oe||re[0]&256)&&J(i,"hidden",x[8]),(!oe||re[0]&256)&&J(u,"hidden",x[8]);const he={};re[0]&32&&(he.icon=x[5]?Ws:qs),v.$set(he),(!oe||re[0]&256)&&J(g,"hidden",x[8]),(!oe||re[0]&256)&&J(y,"hidden",x[8]),(!oe||re[0]&1&&T.value!==x[0])&&(T.value=x[0]);const Xe={};if(re[0]&2&&(Xe.selected=x[1]),K.$set(Xe),(!oe||re[0]&4&&Y.value!==x[2])&&(Y.value=x[2]),re[0]&33160){fe=ue(x[7]);let se;for(se=0;se<fe.length;se+=1){const Oe=cl(x,fe,se);Q[se]?(Q[se].p(Oe,re),F(Q[se],1)):(Q[se]=ml(Oe),Q[se].c(),F(Q[se],1),Q[se].m(W,null))}for(xe(),se=fe.length;se<Q.length;se+=1)ie(se);He()}if(re[0]&33104){_e=ue(x[6]);let se;for(se=0;se<_e.length;se+=1){const Oe=rl(x,_e,se);ce[se]?(ce[se].p(Oe,re),F(ce[se],1)):(ce[se]=gl(Oe),ce[se].c(),F(ce[se],1),ce[se].m(X,null))}for(xe(),se=_e.length;se<ce.length;se+=1)Re(se);He()}(!oe||re[0]&256)&&J(E,"hidden",x[8]),(!oe||re[0]&256)&&J(t,"collapsed",x[8]),(!oe||re[0]&2097152&&le!==(le=we(`${x[21].class||""}`)+" svelte-1rg0xw5"))&&h(e,"class",le)},i(x){if(!oe){F(c.$$.fragment,x),F(_.$$.fragment,x),F(v.$$.fragment,x),F(I.$$.fragment,x),F(K.$$.fragment,x);for(let re=0;re<fe.length;re+=1)F(Q[re]);for(let re=0;re<_e.length;re+=1)F(ce[re]);oe=!0}},o(x){$(c.$$.fragment,x),$(_.$$.fragment,x),$(v.$$.fragment,x),$(I.$$.fragment,x),$(K.$$.fragment,x),Q=Q.filter(Boolean);for(let re=0;re<Q.length;re+=1)$(Q[re]);ce=ce.filter(Boolean);for(let re=0;re<ce.length;re+=1)$(ce[re]);oe=!1},d(x){x&&m(e),Ee(c),Ee(_),Ee(v),Ee(I),Ee(K),Ve(Q,x),Ve(ce,x),ge=!1,tt(ne)}}}const vl=s=>s.interval,bl=s=>s.interval;function ya(s,e,t){let l,n,r,a,o,i;Ce(s,js,j=>t(23,o=j));let c="C",d="Major",u=Mt(c,d),_="",p,g=[],v=[];const y=us().map(j=>({key:j.names[0],value:j.names[0]})),I=mt(Ge(!0),{key:"chords-hidden"});Ce(s,I,j=>t(8,i=j));function A(){I.update(j=>!j)}function E(){const j=p&&60+p.semitones;if("err"in u||!j)t(3,g=[]),t(4,v=[]);else{const R=u.data;t(3,g=n.map(q=>Es(j,R,q.intervals))),t(4,v=r.map(q=>Es(j,R,q.intervals)))}}function G({currentTarget:{value:j}}){t(0,c=`${j.charAt(0).toUpperCase()}${j.charAt(1).toLowerCase()}`),u=Mt(c,d),E()}function P({currentTarget:{value:j}}){t(2,_=`${j.charAt(0).toUpperCase()}${j.charAt(1).toLowerCase()}`),t(9,p=bn(_)),E()}function S(j){De.toggleChords(R=>R.name===j.name?!R.selected:R.selected)}function D(){const j=q=>q.suffixes[0]==="maj"||q.suffixes[0]==="m",R=o.filter(j).every(q=>q.selected);De.toggleChords(q=>j(q)?!R:q.selected)}function T(){const j=q=>q.suffixes[0]==="maj7"||q.suffixes[0]==="m7"||q.suffixes[0]==="7"||q.suffixes[0]==="dim7"||q.suffixes[0]==="aug7",R=o.filter(j).every(q=>q.selected);De.toggleChords(q=>j(q)?!R:q.selected)}function M(){De.toggleChords(j=>!a)}function B(){De.toggleChords(j=>!0)}function w(j){var R;return t(1,d=(R=y.find(q=>j===q.key))==null?void 0:R.value),u=Mt(c,d),E(),!1}const L=j=>S(j),K=j=>S(j);return s.$$set=j=>{t(21,e=Ie(Ie({},e),Ae(j)))},s.$$.update=()=>{s.$$.dirty[0]&8388608&&t(22,l=o),s.$$.dirty[0]&4194304&&t(7,n=l.filter((j,R)=>R<l.length/2)),s.$$.dirty[0]&4194304&&t(6,r=l.filter((j,R)=>R>=l.length/2)),s.$$.dirty[0]&4194304&&t(5,a=l.every(j=>j.selected))},e=Ae(e),[c,d,_,g,v,a,r,n,i,p,y,I,A,G,P,S,D,T,M,B,w,e,l,o,L,K]}class Ea extends ze{constructor(e){super(),$e(this,e,ya,ka,We,{},null,[-1,-1])}}function kl(s,e,t){const l=s.slice();return l[10]=e[t],l}function wa(s){let e;return{c(){e=ee(" ")},l(t){e=te(t," ")},m(t,l){U(t,e,l)},p:pe,d(t){t&&m(e)}}}function Ca(s){let e,t,l="Played:",n,r=ue(s[2]),a=[];for(let o=0;o<r.length;o+=1)a[o]=yl(kl(s,r,o));return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V();for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=k(o,"DIV",{});var i=C(e);t=k(i,"SPAN",{"data-svelte-h":!0}),ae(t)!=="svelte-1g6xxhn"&&(t.textContent=l),n=O(i);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(m)},m(o,i){U(o,e,i),f(e,t),f(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,i){if(i&4){r=ue(o[2]);let c;for(c=0;c<r.length;c+=1){const d=kl(o,r,c);a[c]?a[c].p(d,i):(a[c]=yl(d),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}},d(o){o&&m(e),Ve(a,o)}}}function Ta(s){let e,t,l="Result:",n,r,a,o=s[0].correct+"",i,c,d=s[0].sampled.length+"",u,_,p,g,v,N=s[0].avgTime+"",y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),r=b("span"),a=ee("["),i=ee(o),c=ee(" / "),u=ee(d),_=ee("]"),p=V(),g=b("span"),v=ee("avg "),y=ee(N),I=ee("s"),this.h()},l(A){e=k(A,"DIV",{class:!0});var E=C(e);t=k(E,"SPAN",{"data-svelte-h":!0}),ae(t)!=="svelte-1eqfbgx"&&(t.textContent=l),n=O(E),r=k(E,"SPAN",{class:!0});var G=C(r);a=te(G,"["),i=te(G,o),c=te(G," / "),u=te(G,d),_=te(G,"]"),G.forEach(m),p=O(E),g=k(E,"SPAN",{});var P=C(g);v=te(P,"avg "),y=te(P,N),I=te(P,"s"),P.forEach(m),E.forEach(m),this.h()},h(){h(r,"class","mx-2"),h(e,"class","flex")},m(A,E){U(A,e,E),f(e,t),f(e,n),f(e,r),f(r,a),f(r,i),f(r,c),f(r,u),f(r,_),f(e,p),f(e,g),f(g,v),f(g,y),f(g,I)},p(A,E){E&1&&o!==(o=A[0].correct+"")&&de(i,o),E&1&&d!==(d=A[0].sampled.length+"")&&de(u,d),E&1&&N!==(N=A[0].avgTime+"")&&de(y,N)},d(A){A&&m(e)}}}function Ia(s){var S,D,T,M;let e,t,l="Target:",n,r,a=((S=s[0].latestGuess.target)==null?void 0:S.chord)+"",o,i,c,d=((D=s[0].latestGuess.target)==null?void 0:D.notes.map(El).join(" "))+"",u,_,p,g="Guessed:",v,N,y=((T=s[0].latestGuess.guessed)==null?void 0:T.chord)+"",I,A,E,G=((M=s[0].latestGuess.guessed)==null?void 0:M.notes.map(wl).join(" "))+"",P;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),r=b("span"),o=ee(a),i=V(),c=b("span"),u=ee(d),_=V(),p=b("span"),p.textContent=g,v=V(),N=b("span"),I=ee(y),A=V(),E=b("span"),P=ee(G),this.h()},l(B){e=k(B,"DIV",{class:!0});var w=C(e);t=k(w,"SPAN",{"data-svelte-h":!0}),ae(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=O(w),r=k(w,"SPAN",{});var L=C(r);o=te(L,a),L.forEach(m),i=O(w),c=k(w,"SPAN",{});var K=C(c);u=te(K,d),K.forEach(m),_=O(w),p=k(w,"SPAN",{"data-svelte-h":!0}),ae(p)!=="svelte-104368"&&(p.textContent=g),v=O(w),N=k(w,"SPAN",{});var j=C(N);I=te(j,y),j.forEach(m),A=O(w),E=k(w,"SPAN",{});var R=C(E);P=te(R,G),R.forEach(m),w.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(B,w){U(B,e,w),f(e,t),f(e,n),f(e,r),f(r,o),f(e,i),f(e,c),f(c,u),f(e,_),f(e,p),f(e,v),f(e,N),f(N,I),f(e,A),f(e,E),f(E,P)},p(B,w){var L,K,j,R;w&1&&a!==(a=((L=B[0].latestGuess.target)==null?void 0:L.chord)+"")&&de(o,a),w&1&&d!==(d=((K=B[0].latestGuess.target)==null?void 0:K.notes.map(El).join(" "))+"")&&de(u,d),w&1&&y!==(y=((j=B[0].latestGuess.guessed)==null?void 0:j.chord)+"")&&de(I,y),w&1&&G!==(G=((R=B[0].latestGuess.guessed)==null?void 0:R.notes.map(wl).join(" "))+"")&&de(P,G)},d(B){B&&m(e)}}}function Aa(s){let e,t,l="Target:",n,r,a=s[0].latestGuess.target+"",o,i,c,d,u,_="Guessed:",p,g,v=s[0].latestGuess.guessed+"",N,y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),r=b("span"),o=ee(a),i=V(),c=b("span"),d=V(),u=b("span"),u.textContent=_,p=V(),g=b("span"),N=ee(v),y=V(),I=b("span"),this.h()},l(A){e=k(A,"DIV",{class:!0});var E=C(e);t=k(E,"SPAN",{"data-svelte-h":!0}),ae(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=O(E),r=k(E,"SPAN",{});var G=C(r);o=te(G,a),G.forEach(m),i=O(E),c=k(E,"SPAN",{}),C(c).forEach(m),d=O(E),u=k(E,"SPAN",{"data-svelte-h":!0}),ae(u)!=="svelte-104368"&&(u.textContent=_),p=O(E),g=k(E,"SPAN",{});var P=C(g);N=te(P,v),P.forEach(m),y=O(E),I=k(E,"SPAN",{}),C(I).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(A,E){U(A,e,E),f(e,t),f(e,n),f(e,r),f(r,o),f(e,i),f(e,c),f(e,d),f(e,u),f(e,p),f(e,g),f(g,N),f(e,y),f(e,I)},p(A,E){E&1&&a!==(a=A[0].latestGuess.target+"")&&de(o,a),E&1&&v!==(v=A[0].latestGuess.guessed+"")&&de(N,v)},d(A){A&&m(e)}}}function Sa(s){let e,t,l="Target:",n,r,a=st(Ot(s[0].latestGuess.target||0))+"",o,i,c,d,u,_="Guessed:",p,g,v=st(Ot(s[0].latestGuess.guessed||0))+"",N,y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),r=b("span"),o=ee(a),i=V(),c=b("span"),d=V(),u=b("span"),u.textContent=_,p=V(),g=b("span"),N=ee(v),y=V(),I=b("span"),this.h()},l(A){e=k(A,"DIV",{class:!0});var E=C(e);t=k(E,"SPAN",{"data-svelte-h":!0}),ae(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=O(E),r=k(E,"SPAN",{});var G=C(r);o=te(G,a),G.forEach(m),i=O(E),c=k(E,"SPAN",{}),C(c).forEach(m),d=O(E),u=k(E,"SPAN",{"data-svelte-h":!0}),ae(u)!=="svelte-104368"&&(u.textContent=_),p=O(E),g=k(E,"SPAN",{});var P=C(g);N=te(P,v),P.forEach(m),y=O(E),I=k(E,"SPAN",{}),C(I).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(A,E){U(A,e,E),f(e,t),f(e,n),f(e,r),f(r,o),f(e,i),f(e,c),f(e,d),f(e,u),f(e,p),f(e,g),f(g,N),f(e,y),f(e,I)},p(A,E){E&1&&a!==(a=st(Ot(A[0].latestGuess.target||0))+"")&&de(o,a),E&1&&v!==(v=st(Ot(A[0].latestGuess.guessed||0))+"")&&de(N,v)},d(A){A&&m(e)}}}function yl(s){let e,t=st(s[10])+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","mx-1")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r&4&&t!==(t=st(n[10])+"")&&de(l,t)},d(n){n&&m(e)}}}function Na(s){let e;return{c(){e=ee(" ")},l(t){e=te(t," ")},m(t,l){U(t,e,l)},p:pe,d(t){t&&m(e)}}}function La(s){let e,t="Next",l,n,r="Autoplay",a,o;return{c(){e=b("button"),e.textContent=t,l=V(),n=b("button"),n.textContent=r,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1nvnoba"&&(e.textContent=t),l=O(i),n=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-1cfj1sl"&&(n.textContent=r),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){U(i,e,c),U(i,l,c),U(i,n,c),a||(o=[z(e,"click",s[4]),z(n,"click",s[5])],a=!0)},p:pe,d(i){i&&(m(e),m(l),m(n)),a=!1,tt(o)}}}function Da(s){let e,t="Stop autoplay",l,n;return{c(){e=b("button"),e.textContent=t,this.h()},l(r){e=k(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){h(e,"class","btn primary")},m(r,a){U(r,e,a),l||(n=z(e,"click",s[9]),l=!0)},p:pe,d(r){r&&m(e),l=!1,n()}}}function Pa(s){let e,t="Try Again",l,n,r="Clear",a,o;return{c(){e=b("button"),e.textContent=t,l=V(),n=b("button"),n.textContent=r,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-y911ux"&&(e.textContent=t),l=O(i),n=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-11mnk9v"&&(n.textContent=r),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){U(i,e,c),U(i,l,c),U(i,n,c),a||(o=[z(e,"click",s[6]),z(n,"click",s[7])],a=!0)},p:pe,d(i){i&&(m(e),m(l),m(n)),a=!1,tt(o)}}}function Va(s){let e,t,l,n;function r(u,_){return u[0]instanceof jt&&(u[1]==="correct"||u[1]==="wrong")?Sa:u[0]instanceof Ut&&(u[1]==="correct"||u[1]==="wrong")?Aa:u[0]instanceof dt&&(u[1]==="correct"||u[1]==="wrong")?Ia:u[0]&&u[1]==="ended"?Ta:u[2].length>0?Ca:wa}let a=r(s),o=a(s);function i(u,_){return u[0]&&u[1]==="ended"?Pa:u[0]&&u[3].autoplay?Da:u[0]?La:Na}let c=i(s),d=c(s);return{c(){e=b("div"),o.c(),l=V(),n=b("div"),d.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var _=C(e);o.l(_),_.forEach(m),l=O(u),n=k(u,"DIV",{class:!0});var p=C(n);d.l(p),p.forEach(m),this.h()},h(){h(e,"class",t=we(`${s[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),h(n,"class","mt-2 h-8")},m(u,_){U(u,e,_),o.m(e,null),U(u,l,_),U(u,n,_),d.m(n,null)},p(u,[_]){a===(a=r(u))&&o?o.p(u,_):(o.d(1),o=a(u),o&&(o.c(),o.m(e,null))),_&256&&t!==(t=we(`${u[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&h(e,"class",t),c===(c=i(u))&&d?d.p(u,_):(d.d(1),d=c(u),d&&(d.c(),d.m(n,null)))},i:pe,o:pe,d(u){u&&(m(e),m(l),m(n)),o.d(),d.d()}}}const El=s=>s.note,wl=s=>s.note;function Oa(s,e,t){let l,n,r;Ce(s,yt,_=>t(1,l=_)),Ce(s,kt,_=>t(2,n=_)),Ce(s,ht,_=>t(3,r=_));let{game:a}=e;function o(){De.nextGuess()}function i(){De.setOptionValue("autoplay",!0),De.nextGuess()}function c(){a instanceof dt?De.play(a.type,a.opts):a&&De.play(a.type,void 0)}function d(){De.clearGame()}const u=()=>De.setOptionValue("autoplay",!1);return s.$$set=_=>{t(8,e=Ie(Ie({},e),Ae(_))),"game"in _&&t(0,a=_.game)},e=Ae(e),[a,l,n,r,o,i,c,d,e,u]}class ja extends ze{constructor(e){super(),$e(this,e,Oa,Va,We,{game:0})}}const Is={ar:{name:"Arabic",import:ve(()=>import("./arabic-TJdw9TqS.cd2ea0d3.js"),[],import.meta.url)},hye:{name:"Armenian Eastern",import:ve(()=>import("./armenianEastern-LNw2V_Kb.e28a3752.js"),[],import.meta.url)},hyw:{name:"Armenian Western",import:ve(()=>import("./armenianWestern-zmIyLd1o.38785f27.js"),[],import.meta.url)},be:{name:"Belarusian",import:ve(()=>import("./belarusian--mjombxK.1fcd2897.js"),[],import.meta.url)},bn:{name:"Bengali",import:ve(()=>import("./bengali-2-qmZ9ZL.b883376f.js"),[],import.meta.url)},pt:{name:"Brazilian",import:ve(()=>import("./brazilian-_aUR_EdS.2b1b1fd9.js"),[],import.meta.url)},my:{name:"Burmese",import:ve(()=>import("./burmese-DNLMDG0C.87e404a2.js"),[],import.meta.url)},zh:{name:"Chinese",import:ve(()=>import("./chinese-Vv6o_huT.c292fc41.js"),[],import.meta.url)},cs:{name:"Czech",import:ve(()=>import("./czech-AAz70GMU.0cffa7b5.js"),[],import.meta.url)},en:{name:"English",import:Promise.resolve().then(()=>Ga)},fa:{name:"Farsi",import:ve(()=>import("./farsi-akNUiiy1.62727da0.js"),[],import.meta.url)},fr:{name:"French",import:ve(()=>import("./french-GKHnJmdK.94658ac4.js"),[],import.meta.url)},ka:{name:"Georgian",import:ve(()=>import("./georgian-SQFgQD3n.89ef2935.js"),[],import.meta.url)},de:{name:"German",import:ve(()=>import("./german-Wy-4wNPv.fa6f994f.js"),[],import.meta.url)},el:{name:"Greek",import:ve(()=>import("./greek-lay7OJjb.9c2c2556.js"),[],import.meta.url)},he:{name:"Hebrew",import:ve(()=>import("./hebrew-V6ZtD_jG.48875cb9.js"),[],import.meta.url)},hi:{name:"Hindi",import:ve(()=>import("./hindi-uNDpRlqm.76d6c741.js"),[],import.meta.url)},hu:{name:"Hungarian",import:ve(()=>import("./hungarian-Wnxix6n4.45652951.js"),[],import.meta.url)},it:{name:"Italian",import:ve(()=>import("./italian-eDgp6wHT.50798155.js"),[],import.meta.url)},ja:{name:"Japanese",import:ve(()=>import("./japanese-Zv_Q1DDl.d78f358a.js"),[],import.meta.url)},mk:{name:"Macedonian",import:ve(()=>import("./macedonian-Dot-tKLH.04517113.js"),[],import.meta.url)},yo:{name:"Nigerian",import:ve(()=>import("./nigerian-IYPkF_j3.5b26cce3.js"),[],import.meta.url)},nko:{name:"Nko",import:ve(()=>import("./nko-EI8QPheE.3268d6cd.js"),[],import.meta.url)},no:{name:"Norwegian",import:ve(()=>import("./norwegian-sal6SH2s.847bc0b5.js"),[],import.meta.url)},pl:{name:"Polish",import:ve(()=>import("./polish-yYQdl0aw.936f6a15.js"),[],import.meta.url)},pa:{name:"Punjabi",import:ve(()=>import("./punjabi-0AIiTj_p.01c98b73.js"),[],import.meta.url)},ru:{name:"Russian",import:ve(()=>import("./russian-sQ885m4A.ff7543fb.js"),[],import.meta.url)},es:{name:"Spanish",import:ve(()=>import("./spanish-Ww3zYGV_.0ed27470.js"),[],import.meta.url)},sv:{name:"Swedish",import:ve(()=>import("./swedish-RpPWxHx_.af07bd5e.js"),[],import.meta.url)},te:{name:"Telugu",import:ve(()=>import("./telugu-WPb3GXn5.f8d401d9.js"),[],import.meta.url)},th:{name:"Thai",import:ve(()=>import("./thai-Q-LTk3Id.1148f3d0.js"),[],import.meta.url)},tr:{name:"Turkish",import:ve(()=>import("./turkish-qQEi80RS.cb967a2e.js"),[],import.meta.url)},uk:{name:"Ukrainian",import:ve(()=>import("./ukrainian-CLoogq0p.3e4781c0.js"),[],import.meta.url)},ug:{name:"Uyghur",import:ve(()=>import("./uyghur-eF-99IjK.066cbfdb.js"),[],import.meta.url)}};function yn(s){if(!("default"in s.layout)||!("shift"in s.layout))throw console.error(s),Error("Invalid layout import");return{default:s.layout.default,shift:s.layout.shift}}async function Ba(s=["en"]){let e={code:"en",layout:Is.en,index:99};Object.entries(Is).forEach(([l,n])=>{for(let r=0;r<s.length;r+=1)l===s[r]&&(!e||e.index>r)&&(e={code:l,layout:n,index:r})});const t=await e.layout.import;return{code:e.code,name:e.layout.name,imported:yn(t.default)}}const En={layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},Ga=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"}));function Vt(s,e,t,l=0){const n=t?[0,2,4,5,7,9,11]:[-1,1,3,-1,6,8,10];let r=-1,a=0;return s.forEach((o,i)=>{const c=o.key.charAt(0)==="{";!c&&r===-1&&(r=i);const d=n[(i-r+l)%n.length];if(r!==-1&&i!==0&&!c&&d>=0){const u=e[d],_=Math.floor((l+i-r)/n.length);o.note={...u,semitones:u.semitones+(_>0?_:0)*12},o.note,a=i-r}}),a}const Xt=[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Enter"],["Capslock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"]];function Ma(s){let e=[];const t=s.default.map((l,n)=>{if(n===0){const r=l.split(" ").filter(a=>a!=="{bksp}");for(;r.length!==13;)r.length<13?r.unshift("{empty}"):r.shift();return[...r,"{bksp}"]}else if(n===1){const r=l.split(" ");return e=r.slice(13),[...r.slice(0,13),"{enter}"]}else{if(n===2)return[...l.split(" ").slice(0,13).filter(r=>r!=="{enter}"),...e].slice(0,13);if(n===3){const r=["{shift}",...l.split(" ").slice(1,12).filter(o=>o!=="{shift}"),"{shift}"];let a=1;for(;r.length<13;)r.splice(a,0,"{empty}"),a=a===1?-1:1;return r}else return l.split(" ")}});return[t[0].map((l,n)=>({key:l,code:Xt[0][n]})),t[1].map((l,n)=>({key:l,code:Xt[1][n]})),t[2].map((l,n)=>({key:l,code:Xt[2][n]})),t[3].map((l,n)=>({key:l,code:Xt[3][n]}))]}class is{constructor(e){return this.rows=[[],[],[],[]],this.opts={hotkeydRows:"middle-row",layout:{code:"en",name:"English",imported:yn(En)},...e},this.loadRowsFromImport(this.opts.layout.imported)}setOptions(e){this.opts={...this.opts,...e}}loadRowsFromImport(e){return this.rows=Ma(e),this}setRows(e){return this.rows=e,this}setRowHotkeys(e,t){}setNotes(e){if(this.opts.hotkeydRows==="middle-row")Vt(this.rows[1],e,!1),Vt(this.rows[2],e,!0);else{Vt(this.rows[2],e,!1);const t=Vt(this.rows[3],e,!0);Vt(this.rows[0],e,!1,t),Vt(this.rows[1],e,!0,t+1)}}static createWithRows(e,t){return new is(e).setRows(t)}}function Cl(s,e,t){const l=s.slice();return l[15]=e[t].key,l[16]=e[t].value,l[17]=e[t].icon,l[19]=t,l}const Ua=s=>({}),Tl=s=>({}),Ra=s=>({}),Il=s=>({});function Al(s){let e,t,l,n,r,a,o,i,c,d,u;const _=s[12].header,p=Ss(_,s,s[11],Tl);let g=ue(s[0]),v=[];for(let y=0;y<g.length;y+=1)v[y]=Sl(Cl(s,g,y));const N=y=>$(v[y],1,1,()=>{v[y]=null});return{c(){e=b("button"),l=V(),n=b("ul"),r=b("li"),p&&p.c(),a=V();for(let y=0;y<v.length;y+=1)v[y].c();this.h()},l(y){e=k(y,"BUTTON",{class:!0,tabindex:!0}),C(e).forEach(m),l=O(y),n=k(y,"UL",{class:!0});var I=C(n);r=k(I,"LI",{});var A=C(r);p&&p.l(A),A.forEach(m),a=O(I);for(let E=0;E<v.length;E+=1)v[E].l(I);I.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",o=we(`items-list bg-white py-1.5 py-2 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(y,I){U(y,e,I),U(y,l,I),U(y,n,I),f(n,r),p&&p.m(r,null),f(n,a);for(let A=0;A<v.length;A+=1)v[A]&&v[A].m(n,null);c=!0,d||(u=z(e,"click",s[7]),d=!0)},p(y,I){if(s=y,p&&p.p&&(!c||I&2048)&&Ns(p,_,s,s[11],c?Ds(_,s[11],I,Ua):Ls(s[11]),Tl),I&265){g=ue(s[0]);let A;for(A=0;A<g.length;A+=1){const E=Cl(s,g,A);v[A]?(v[A].p(E,I),F(v[A],1)):(v[A]=Sl(E),v[A].c(),F(v[A],1),v[A].m(n,null))}for(xe(),A=g.length;A<v.length;A+=1)N(A);He()}(!c||I&4&&o!==(o=we(`items-list bg-white py-1.5 py-2 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",o)},i(y){if(!c){y&&es(()=>{c&&(t||(t=Et(e,ts,{duration:Zt},!0)),t.run(1))}),F(p,y);for(let I=0;I<g.length;I+=1)F(v[I]);y&&es(()=>{c&&(i||(i=Et(n,ss,{duration:Zt},!0)),i.run(1))}),c=!0}},o(y){y&&(t||(t=Et(e,ts,{duration:Zt},!1)),t.run(0)),$(p,y),v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)$(v[I]);y&&(i||(i=Et(n,ss,{duration:Zt},!1)),i.run(0)),c=!1},d(y){y&&(m(e),m(l),m(n)),y&&t&&t.end(),p&&p.d(y),Ve(v,y),y&&i&&i.end(),d=!1,u()}}}function Ka(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){U(t,e,l)},p:pe,i:pe,o:pe,d(t){t&&m(e)}}}function Fa(s){let e,t;return e=new Je({props:{class:"mr-2",icon:s[17],width:16}}),{c(){be(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.icon=l[17]),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function Sl(s){let e,t,l,n,r,a,o=s[16]+"",i,c,d,u,_;const p=[Fa,Ka],g=[];function v(y,I){return y[17]?0:1}l=v(s),n=g[l]=p[l](s);function N(){return s[13](s[15])}return{c(){e=b("li"),t=b("button"),n.c(),r=V(),a=b("div"),i=ee(o),c=V(),this.h()},l(y){e=k(y,"LI",{});var I=C(e);t=k(I,"BUTTON",{class:!0});var A=C(t);n.l(A),r=O(A),a=k(A,"DIV",{});var E=C(a);i=te(E,o),E.forEach(m),A.forEach(m),c=O(I),I.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),J(t,"selected",s[15]===s[3])},m(y,I){U(y,e,I),f(e,t),g[l].m(t,null),f(t,r),f(t,a),f(a,i),f(e,c),d=!0,u||(_=z(t,"click",N),u=!0)},p(y,I){s=y;let A=l;l=v(s),l===A?g[l].p(s,I):(xe(),$(g[A],1,1,()=>{g[A]=null}),He(),n=g[l],n?n.p(s,I):(n=g[l]=p[l](s),n.c()),F(n,1),n.m(t,r)),(!d||I&1)&&o!==(o=s[16]+"")&&de(i,o),(!d||I&9)&&J(t,"selected",s[15]===s[3])},i(y){d||(F(n),d=!0)},o(y){$(n),d=!1},d(y){y&&m(e),g[l].d(),u=!1,_()}}}function xa(s){let e,t,l,n,r,a,o,i,c;const d=s[12].value,u=Ss(d,s,s[11],Il);let _=s[6]&&Al(s);return{c(){e=b("div"),t=b("button"),u&&u.c(),r=V(),_&&_.c(),this.h()},l(p){e=k(p,"DIV",{class:!0,id:!0});var g=C(e);t=k(g,"BUTTON",{class:!0,title:!0});var v=C(t);u&&u.l(v),v.forEach(m),r=O(g),_&&_.l(g),g.forEach(m),this.h()},h(){h(t,"class",l=we(`${s[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),h(t,"title",n=s[9].title||""),J(t,"disabled",s[4]),J(t,"open",s[6]),h(e,"class",a=we(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(p,g){U(p,e,g),f(e,t),u&&u.m(t,null),f(e,r),_&&_.m(e,null),s[14](e),o=!0,i||(c=z(t,"click",s[7]),i=!0)},p(p,[g]){u&&u.p&&(!o||g&2048)&&Ns(u,d,p,p[11],o?Ds(d,p[11],g,Ra):Ls(p[11]),Il),(!o||g&512&&l!==(l=we(`${p[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&h(t,"class",l),(!o||g&512&&n!==(n=p[9].title||""))&&h(t,"title",n),(!o||g&528)&&J(t,"disabled",p[4]),(!o||g&576)&&J(t,"open",p[6]),p[6]?_?(_.p(p,g),g&64&&F(_,1)):(_=Al(p),_.c(),F(_,1),_.m(e,null)):_&&(xe(),$(_,1,1,()=>{_=null}),He()),(!o||g&4&&a!==(a=we(`relative ${p[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!o||g&2)&&h(e,"id",p[1])},i(p){o||(F(u,p),F(_),o=!0)},o(p){$(u,p),$(_),o=!1},d(p){p&&m(e),u&&u.d(p),_&&_.d(),s[14](null),i=!1,c()}}}const Zt=400;function Ha(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:r,id:a=void 0,containerClass:o=void 0,selected:i=void 0,disabled:c=void 0,onSelect:d}=e,u,_=!1;function p(){c||t(6,_=!_)}function g(y){t(6,_=d(y))}const v=y=>g(y);function N(y){Ps[y?"unshift":"push"](()=>{u=y,t(5,u)})}return s.$$set=y=>{t(9,e=Ie(Ie({},e),Ae(y))),"options"in y&&t(0,r=y.options),"id"in y&&t(1,a=y.id),"containerClass"in y&&t(2,o=y.containerClass),"selected"in y&&t(3,i=y.selected),"disabled"in y&&t(4,c=y.disabled),"onSelect"in y&&t(10,d=y.onSelect),"$$scope"in y&&t(11,n=y.$$scope)},e=Ae(e),[r,a,o,i,c,u,_,p,g,e,d,n,l,v,N]}class za extends ze{constructor(e){super(),$e(this,e,Ha,xa,We,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:10})}}function $a(s){let e,t,l,n,r,a,o;return{c(){e=b("label"),t=b("input"),l=V(),n=b("div"),this.h()},l(i){e=k(i,"LABEL",{class:!0});var c=C(e);t=k(c,"INPUT",{type:!0,class:!0}),l=O(c),n=k(c,"DIV",{class:!0}),C(n).forEach(m),c.forEach(m),this.h()},h(){t.checked=s[0],h(t,"type","checkbox"),h(t,"class","svelte-k5zciy"),h(n,"class","slider svelte-k5zciy"),h(e,"class",r=we(`${s[3].class||""} toggle`)+" svelte-k5zciy")},m(i,c){U(i,e,c),f(e,t),s[5](t),f(e,l),f(e,n),a||(o=[z(t,"change",s[4]),z(t,"keydown",s[2])],a=!0)},p(i,[c]){c&1&&(t.checked=i[0]),c&8&&r!==(r=we(`${i[3].class||""} toggle`)+" svelte-k5zciy")&&h(e,"class",r)},i:pe,o:pe,d(i){i&&m(e),s[5](null),a=!1,tt(o)}}}function Wa(s,e,t){let{checked:l}=e,n;function r(i){i.key==="Enter"&&n.click()}function a(i){cs.call(this,s,i)}function o(i){Ps[i?"unshift":"push"](()=>{n=i,t(1,n)})}return s.$$set=i=>{t(3,e=Ie(Ie({},e),Ae(i))),"checked"in i&&t(0,l=i.checked)},e=Ae(e),[l,n,r,e,a,o]}class qa extends ze{constructor(e){super(),$e(this,e,Wa,$a,We,{checked:0})}}function Nl(s){let e;return{c(){e=b("li"),this.h()},l(t){e=k(t,"LI",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","m-[0.175rem] mr-0")},m(t,l){U(t,e,l)},d(t){t&&m(e)}}}function Ll(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-1479mcy")},m(t,l){U(t,e,l)},d(t){t&&m(e)}}}function Dl(s){let e,t=s[0].note.note+"",l,n;return{c(){e=b("div"),l=ee(t),n=ee(s[2]),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=C(e);l=te(a,t),n=te(a,s[2]),a.forEach(m),this.h()},h(){h(e,"class","absolute top-0 left-0")},m(r,a){U(r,e,a),f(e,l),f(e,n)},p(r,a){a&1&&t!==(t=r[0].note.note+"")&&de(l,t),a&4&&de(n,r[2])},d(r){r&&m(e)}}}function Ja(s){let e,t,l,n,r,a,o=Vl(s[0].key)+"",i,c,d,u,_=s[0].key==="{enter}"&&Nl(),p=s[0].key==="{enter}"&&Ll(),g=s[0].note&&Dl(s);return{c(){_&&_.c(),e=V(),t=b("li"),l=b("button"),p&&p.c(),n=V(),g&&g.c(),r=V(),a=b("div"),i=ee(o),this.h()},l(v){_&&_.l(v),e=O(v),t=k(v,"LI",{class:!0});var N=C(t);l=k(N,"BUTTON",{class:!0});var y=C(l);p&&p.l(y),n=O(y),g&&g.l(y),r=O(y),a=k(y,"DIV",{});var I=C(a);i=te(I,o),I.forEach(m),y.forEach(m),N.forEach(m),this.h()},h(){h(l,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex justify-center svelte-1479mcy"),J(l,"items-center",!s[0].note),J(l,"items-end",s[0].note),h(t,"class",c=we(`${s[3].class||""} m-[0.175rem] ${Pl(s[0].size)}`)+" svelte-1479mcy"),J(t,"enter",s[0].key==="{enter}"),J(t,"captured",s[1])},m(v,N){_&&_.m(v,N),U(v,e,N),U(v,t,N),f(t,l),p&&p.m(l,null),f(l,n),g&&g.m(l,null),f(l,r),f(l,a),f(a,i),d||(u=z(l,"click",s[5]),d=!0)},p(v,[N]){v[0].key==="{enter}"?_||(_=Nl(),_.c(),_.m(e.parentNode,e)):_&&(_.d(1),_=null),v[0].key==="{enter}"?p||(p=Ll(),p.c(),p.m(l,n)):p&&(p.d(1),p=null),v[0].note?g?g.p(v,N):(g=Dl(v),g.c(),g.m(l,r)):g&&(g.d(1),g=null),N&1&&o!==(o=Vl(v[0].key)+"")&&de(i,o),N&1&&J(l,"items-center",!v[0].note),N&1&&J(l,"items-end",v[0].note),N&9&&c!==(c=we(`${v[3].class||""} m-[0.175rem] ${Pl(v[0].size)}`)+" svelte-1479mcy")&&h(t,"class",c),N&9&&J(t,"enter",v[0].key==="{enter}"),N&11&&J(t,"captured",v[1])},i:pe,o:pe,d(v){v&&(m(e),m(t)),_&&_.d(v),p&&p.d(),g&&g.d(),d=!1,u()}}}function Pl(s){return s&&Number.isInteger(s)?`size-${s}`:s?`size-${Math.floor(s)}-${Math.floor(s*10)-Math.floor(s)*10}`:"size-1"}function Vl(s){return s==="{empty}"?"":s==="{bksp}"?"Backspace":s==="{tab}"?"Tab":s==="{enter}"?"Enter":s==="{lock}"?"Capslock":s==="{shift}"?"Shift":s}function Qa(s,e,t){let l,n;Ce(s,fs,i=>t(4,n=i));let{value:r,captured:a}=e;function o(i){cs.call(this,s,i)}return s.$$set=i=>{t(3,e=Ie(Ie({},e),Ae(i))),"value"in i&&t(0,r=i.value),"captured"in i&&t(1,a=i.captured)},s.$$.update=()=>{s.$$.dirty&17&&t(2,l=r.note?Vs({midi:r.note.semitones+n[0],flats:0,sharps:0}):0)},e=Ae(e),[r,a,l,e,n,o]}class Ya extends ze{constructor(e){super(),$e(this,e,Qa,Ja,We,{value:0,captured:1})}}const Bs=/^[a-gA-G]$/,wn=/^[♭Bb#♯sS]$/,Xa=/^[0-9]$/;let Z="",ct;function Za(s,e){const{useHotkeys:t}=Se(ot),l=Se(Ms).get(s);if(t&&Z.length===0&&l&&l.note)return Z="",{e:"guessed-key",data:l.note.note};if(!t&&Z.length===0&&Bs.test(e))return Z+=e.toUpperCase(),{e:"string",data:Z};if(!t&&Z.length>0&&wn.test(e))return e==="b"||e==="B"?Z+="♭":Z+="♯",{e:"string",data:Z};if(s==="Backspace"&&Z.length>0)return Z=Z.slice(0,-1),{e:"string",data:Z};if(s==="Enter"&&Z.length>0){const n=Z;return Z="",{e:"guessed-key",data:n}}return!1}function er(s,e){if(s==="Enter"&&Z.length>0){const t={note:"",flats:0,sharps:0,chord:""};for(let l=0;l<Z.length;l+=1)l===0?t.note+=Z[l]:t.chord.length>0?t.chord+=Z[l].toLowerCase():Z[l]==="♭"?(t.note+=Z[l],t.flats+=1):Z[l]==="♯"?(t.note+=Z[l],t.sharps+=1):t.chord+=Z[l].toLowerCase();return Z="",{e:"guessed-chord",data:t}}else{if(s==="Backspace"&&Z.length>0)return Z=Z.slice(0,-1),{e:"string",data:Z};if(Z.length===0&&Bs.test(e))return Z+=e.toUpperCase(),{e:"string",data:Z};if(Z.length>0&&e.length===1)return Z.length===1&&(e==="b"||e==="B")?Z+="♭":Z.length===1&&e==="#"?Z+="♯":Z+=e,{e:"string",data:Z}}return!1}function tr(s,e,t){const{useAutoOctave:l,useHotkeys:n}=Se(ot);let r;const o=Se(Ms).get(s),i=(o==null?void 0:o.key)||"";let c=!1;if(!ct&&n&&(o!=null&&o.note)?(ct=o.note,l&&(r=Vs({midi:Se(os)[0].midi,flats:0,sharps:0})),c="note"):!n&&Z.length===0&&Bs.test(e)?(Z+=e.toUpperCase(),c="input"):!n&&Z.length>0&&wn.test(e)&&(e==="b"||e==="B"?Z+="♭":Z+="♯",c="input"),!c&&Xa.test(i))try{r=parseInt(i)}catch{}if(ct&&r!==void 0){const d=ct.semitones+(r+1+(t?1:0))*12;return ct=void 0,{e:"guessed-note",data:d}}else if(Z&&r!==void 0){const d=ft.findNote(Z),u=d?d.semitones+(r+1)*12:void 0;return ct=void 0,Z="",u!==void 0?{e:"guessed-note",data:u}:{e:"string",data:Z}}else if(s==="Backspace"&&(ct||Z.length>0))return ct=void 0,Z=Z.slice(0,-1),{e:"string",data:Z};return c==="note"?{e:"note",data:ct}:c==="input"?{e:"string",data:Z}:!1}const Cn={code:"en",name:"English",imported:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},ks=[],Ct=Ge(void 0);It(Ct,s=>s?[s.rowIndex,s.nextIndex]:[-1,-1]);const ut=mt(Ge({useCustom:!1,customLayout:[[],[],[],[]],kbdOpts:{layout:Cn,hotkeydRows:"middle-row"}}),{key:"keyboard-settings"}),Gs=It([Bt,ut],([s,e])=>{let t;return e.useCustom&&e.customLayout?t=is.createWithRows(e.kbdOpts,e.customLayout):t=new is(e.kbdOpts),t.setNotes(Array.from(s.notesMap.values())),t}),sr=It(Gs,s=>s.rows.map(e=>e.map((t,l)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&l===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t}))),Ms=It(Gs,s=>new Map([...s.rows[0].map(e=>[e.code,e]),...s.rows[1].map(e=>[e.code,e]),...s.rows[2].map(e=>[e.code,e]),...s.rows[3].map(e=>[e.code,e])])),lr=It(Ms,s=>Array.from(s.values()).map(e=>e.note).filter(e=>e!==void 0)),ft={async setLayout(s){const e=await Ba(s);ut.update(t=>({...t,kbdOpts:{...t.kbdOpts,layout:e}}))},setCustomLayout(s){if(s){const e=Se(Gs);ut.update(t=>({...t,useCustom:s,customLayout:t.customLayout.map((l,n)=>l.length===0?e.rows[n].map(r=>({...r})):l)}))}else ut.update(e=>({...e,useCustom:s}))},toggleRows(s){ut.update(e=>({...e,kbdOpts:{...e.kbdOpts,hotkeydRows:s??(e.kbdOpts.hotkeydRows==="middle-row"?"two-rows":"middle-row")}}))},captureHotkeyRow(s){let e=-1,t=0;const l=Se(ut).customLayout[s].map((n,r)=>(n.key.charAt(0)!=="{"&&e===-1&&(e=r),t+=n.key.charAt(0)!=="{"?1:0,n));console.log("count",t),Ct.set({row:l,nextIndex:e,rowIndex:s,count:t})},findNote(s){return Se(lr).find(e=>{if(e.note.charAt(0)===s.charAt(0)){const t=s.slice(1).split("").reduce((l,n)=>l+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},handleInput(s,e,t=!1){const l=Se(wt),n=Se(Ct);if(n){console.log("capturing ",ks.length);const{nextIndex:r,row:a}=n;return s==="Escape"?Ct.set(void 0):ks.find(i=>i.code===s)||(ks.push({code:s,key:e}),a[r]={...a[r],code:s,key:e},r===n.count?(ut.update(i=>({...i,customLayout:i.customLayout.map((c,d)=>d!==n.rowIndex?c:a)})),Ct.set(void 0)):Ct.set({...n,nextIndex:r+1,row:a})),!1}else{if(l instanceof Ut)return Za(s,e.toUpperCase());if(l instanceof dt&&l.type==="chords-write")return er(s,e);if(Se(ot).useKeyboard)return tr(s,e.toUpperCase(),t)}return!1},reset(){ut.set({useCustom:!1,customLayout:[[],[],[],[]],kbdOpts:{layout:Cn,hotkeydRows:"middle-row"}})}};function Ol(s,e,t){const l=s.slice();return l[13]=e[t],l[15]=t,l}function jl(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function nr(s){let e,t=s[0].kbdOpts.layout.name+"",l;return{c(){e=b("div"),l=ee(t),this.h()},l(n){e=k(n,"DIV",{slot:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"slot","value")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r&1&&t!==(t=n[0].kbdOpts.layout.name+"")&&de(l,t)},d(n){n&&m(e)}}}function Bl(s){let e,t,l,n,r;t=new Je({props:{icon:On,width:20}});function a(){return s[12](s[15])}return{c(){e=b("button"),be(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{class:!0});var i=C(e);ke(t.$$.fragment,i),i.forEach(m),this.h()},h(){h(e,"class","flex items-center justify-center rounded w-full h-full hover:bg-gray-300")},m(o,i){U(o,e,i),ye(t,e,null),l=!0,n||(r=z(e,"click",a),n=!0)},p(o,i){s=o},i(o){l||(F(t.$$.fragment,o),l=!0)},o(o){$(t.$$.fragment,o),l=!1},d(o){o&&m(e),Ee(t),n=!1,r()}}}function Gl(s){let e,t;return e=new Ya({props:{value:s[16],captured:s[4]&&s[4].rowIndex===s[15]&&s[4].nextIndex===s[18]||!1}}),{c(){be(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},p(l,n){const r={};n&2&&(r.value=l[16]),n&16&&(r.captured=l[4]&&l[4].rowIndex===l[15]&&l[4].nextIndex===l[18]||!1),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function Ml(s){let e,t,l,n,r=s[3][s[15]]&&Bl(s),a=ue(s[13]),o=[];for(let c=0;c<a.length;c+=1)o[c]=Gl(jl(s,a,c));const i=c=>$(o[c],1,1,()=>{o[c]=null});return{c(){e=b("li"),r&&r.c(),t=V();for(let c=0;c<o.length;c+=1)o[c].c();l=Pe(),this.h()},l(c){e=k(c,"LI",{class:!0});var d=C(e);r&&r.l(d),d.forEach(m),t=O(c);for(let u=0;u<o.length;u+=1)o[u].l(c);l=Pe(),this.h()},h(){h(e,"class","col-span-2 svelte-1av9wwd")},m(c,d){U(c,e,d),r&&r.m(e,null),U(c,t,d);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(c,d);U(c,l,d),n=!0},p(c,d){if(c[3][c[15]]?r?(r.p(c,d),d&8&&F(r,1)):(r=Bl(c),r.c(),F(r,1),r.m(e,null)):r&&(xe(),$(r,1,1,()=>{r=null}),He()),d&18){a=ue(c[13]);let u;for(u=0;u<a.length;u+=1){const _=jl(c,a,u);o[u]?(o[u].p(_,d),F(o[u],1)):(o[u]=Gl(_),o[u].c(),F(o[u],1),o[u].m(l.parentNode,l))}for(xe(),u=a.length;u<o.length;u+=1)i(u);He()}},i(c){if(!n){F(r);for(let d=0;d<a.length;d+=1)F(o[d]);n=!0}},o(c){$(r),o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)$(o[d]);n=!1},d(c){c&&(m(e),m(t),m(l)),r&&r.d(),Ve(o,c)}}}function ar(s){let e,t,l,n,r,a="Layout",o,i,c,d,u,_="Custom",p,g,v,N,y,I,A="One row",E,G,P,S,D="Two rows",T,M,B,w,L,K,j,R,q,me,Y;i=new za({props:{id:"keyboard-lang",containerClass:"w-36",class:"p-1 w-36",options:s[5],onSelect:s[7],$$slots:{value:[nr]},$$scope:{ctx:s}}}),G=new qa({props:{checked:!s[2]}}),G.$on("change",s[10]),w=new Je({props:{icon:Rt,width:16}});let H=ue(s[1]),W=[];for(let X=0;X<H.length;X+=1)W[X]=Ml(Ol(s,H,X));const Te=X=>$(W[X],1,1,()=>{W[X]=null});return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),r=b("label"),r.textContent=a,o=V(),be(i.$$.fragment),c=V(),d=b("div"),u=b("label"),u.textContent=_,p=V(),g=b("input"),N=V(),y=b("div"),I=b("label"),I.textContent=A,E=V(),be(G.$$.fragment),P=V(),S=b("label"),S.textContent=D,T=V(),M=b("div"),B=b("button"),be(w.$$.fragment),L=V(),K=b("div"),j=b("ul");for(let X=0;X<W.length;X+=1)W[X].c();this.h()},l(X){e=k(X,"DIV",{class:!0});var le=C(e);t=k(le,"DIV",{class:!0});var oe=C(t);l=k(oe,"DIV",{class:!0});var ge=C(l);n=k(ge,"DIV",{class:!0});var ne=C(n);r=k(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(r)!=="svelte-1xsr9lq"&&(r.textContent=a),o=O(ne),ke(i.$$.fragment,ne),ne.forEach(m),c=O(ge),d=k(ge,"DIV",{class:!0});var fe=C(d);u=k(fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(u)!=="svelte-11aw8ub"&&(u.textContent=_),p=O(fe),g=k(fe,"INPUT",{class:!0,id:!0,type:!0}),fe.forEach(m),N=O(ge),y=k(ge,"DIV",{class:!0});var Q=C(y);I=k(Q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(I)!=="svelte-17p0yvw"&&(I.textContent=A),E=O(Q),ke(G.$$.fragment,Q),P=O(Q),S=k(Q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(S)!=="svelte-1wr3nwv"&&(S.textContent=D),Q.forEach(m),ge.forEach(m),T=O(oe),M=k(oe,"DIV",{class:!0});var ie=C(M);B=k(ie,"BUTTON",{class:!0});var _e=C(B);ke(w.$$.fragment,_e),_e.forEach(m),ie.forEach(m),oe.forEach(m),L=O(le),K=k(le,"DIV",{class:!0});var ce=C(K);j=k(ce,"UL",{class:!0});var Re=C(j);for(let x=0;x<W.length;x+=1)W[x].l(Re);Re.forEach(m),ce.forEach(m),le.forEach(m),this.h()},h(){h(r,"class","font-bold mr-4"),h(r,"for","middle-row"),h(n,"class","my-1 flex items-center justify-between mr-2"),h(u,"class","font-bold mr-4"),h(u,"for","custom-layout"),h(g,"class","h-[20px]"),h(g,"id","custom-layout"),h(g,"type","checkbox"),g.checked=v=s[0].useCustom,h(d,"class","my-1 flex items-center"),h(I,"class","font-bold mr-4"),h(I,"for","two-rows"),h(S,"class","font-bold ml-4"),h(S,"for","two-rows"),h(y,"class","my-1 flex items-center"),h(l,"class","options svelte-1av9wwd"),h(B,"class","rounded px-1 py-1 hover:bg-gray-200"),h(M,"class","flex items-center justify-center"),h(t,"class","flex justify-between"),h(j,"class","keyboard svelte-1av9wwd"),h(K,"class","flex flex-col gap-1.5"),h(e,"class",R=we(`${s[11].class||""} relative`)+" svelte-1av9wwd")},m(X,le){U(X,e,le),f(e,t),f(t,l),f(l,n),f(n,r),f(n,o),ye(i,n,null),f(l,c),f(l,d),f(d,u),f(d,p),f(d,g),f(l,N),f(l,y),f(y,I),f(y,E),ye(G,y,null),f(y,P),f(y,S),f(t,T),f(t,M),f(M,B),ye(w,B,null),f(e,L),f(e,K),f(K,j);for(let oe=0;oe<W.length;oe+=1)W[oe]&&W[oe].m(j,null);q=!0,me||(Y=[z(g,"change",s[8]),z(B,"click",s[6])],me=!0)},p(X,[le]){const oe={};le&524289&&(oe.$$scope={dirty:le,ctx:X}),i.$set(oe),(!q||le&1&&v!==(v=X[0].useCustom))&&(g.checked=v);const ge={};if(le&4&&(ge.checked=!X[2]),G.$set(ge),le&538){H=ue(X[1]);let ne;for(ne=0;ne<H.length;ne+=1){const fe=Ol(X,H,ne);W[ne]?(W[ne].p(fe,le),F(W[ne],1)):(W[ne]=Ml(fe),W[ne].c(),F(W[ne],1),W[ne].m(j,null))}for(xe(),ne=H.length;ne<W.length;ne+=1)Te(ne);He()}(!q||le&2048&&R!==(R=we(`${X[11].class||""} relative`)+" svelte-1av9wwd"))&&h(e,"class",R)},i(X){if(!q){F(i.$$.fragment,X),F(G.$$.fragment,X),F(w.$$.fragment,X);for(let le=0;le<H.length;le+=1)F(W[le]);q=!0}},o(X){$(i.$$.fragment,X),$(G.$$.fragment,X),$(w.$$.fragment,X),W=W.filter(Boolean);for(let le=0;le<W.length;le+=1)$(W[le]);q=!1},d(X){X&&m(e),Ee(i),Ee(G),Ee(w),Ve(W,X),me=!1,tt(Y)}}}function rr(s,e,t){let l,n,r,a,o;Ce(s,ut,v=>t(0,r=v)),Ce(s,sr,v=>t(1,a=v)),Ce(s,Ct,v=>t(4,o=v)),hn(()=>{ft.setLayout(navigator.languages)});const i=Object.entries(Is).map(([v,N])=>({key:v,value:N.name}));function c(){ft.reset(),ft.setLayout(navigator.languages)}function d(v){return ft.setLayout([v]),!1}function u(v){ft.setCustomLayout(v.currentTarget.checked)}function _(v){ft.captureHotkeyRow(v)}function p(){ft.toggleRows()}const g=v=>_(v);return s.$$set=v=>{t(11,e=Ie(Ie({},e),Ae(v)))},s.$$.update=()=>{s.$$.dirty&3&&t(3,l=a.map((v,N)=>r.kbdOpts.hotkeydRows==="middle-row"?N===1||N===2:!0)),s.$$.dirty&1&&t(2,n=r.kbdOpts.hotkeydRows==="middle-row")},e=Ae(e),[r,a,n,l,o,i,c,d,u,_,p,e,g]}class or extends ze{constructor(e){super(),$e(this,e,rr,ar,We,{})}}function Ul(s){let e,t;return e=new or({props:{class:"mt-4"}}),{c(){be(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,n){ye(e,l,n),t=!0},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function ir(s){let e,t,l,n,r="I/O",a,o,i,c,d,u,_,p,g="Device",v,N,y,I,A,E,G="Prompt",P,S,D="Disable",T,M,B,w,L="Sound",K,j,R,q,me,Y,H="Fixed velocity",W,Te,X,le,oe,ge,ne="Keyboard",fe,Q,ie,_e,ce,Re,x="Hotkeys",re,he,Xe,se,Oe,Me,_t="Auto-octave",At,Ke,Ue,St,Ze,qe,Us=" ",ds,Nt,pt,Rs="Set hotkeys",hs,gt,vt,Ks="Fade timeout",ms,it,_s,Kt,et,ps,Fs;c=new Je({props:{icon:Rt,width:16}});let Be=s[2]&&!s[4]&&Ul();return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=r,a=V(),o=b("div"),i=b("button"),be(c.$$.fragment),d=V(),u=b("div"),_=b("div"),p=b("label"),p.textContent=g,v=V(),N=b("input"),I=V(),A=b("div"),E=b("button"),E.textContent=G,P=V(),S=b("button"),S.textContent=D,T=V(),M=b("div"),B=b("div"),w=b("label"),w.textContent=L,K=V(),j=b("input"),q=V(),me=b("div"),Y=b("label"),Y.textContent=H,W=V(),Te=b("input"),X=V(),le=b("div"),oe=b("div"),ge=b("label"),ge.textContent=ne,fe=V(),Q=b("input"),_e=V(),ce=b("div"),Re=b("label"),Re.textContent=x,re=V(),he=b("input"),se=V(),Oe=b("div"),Me=b("label"),Me.textContent=_t,At=V(),Ke=b("input"),St=V(),Ze=b("div"),qe=b("div"),qe.textContent=Us,ds=V(),Nt=b("div"),pt=b("button"),pt.textContent=Rs,hs=V(),gt=b("div"),vt=b("label"),vt.textContent=Ks,ms=V(),it=b("input"),_s=V(),Be&&Be.c(),this.h()},l(Le){e=k(Le,"DIV",{class:!0});var Fe=C(e);t=k(Fe,"FIELDSET",{class:!0});var lt=C(t);l=k(lt,"LEGEND",{class:!0});var xs=C(l);n=k(xs,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-1jbbsti"&&(n.textContent=r),xs.forEach(m),a=O(lt),o=k(lt,"DIV",{class:!0});var Hs=C(o);i=k(Hs,"BUTTON",{class:!0});var zs=C(i);ke(c.$$.fragment,zs),zs.forEach(m),Hs.forEach(m),d=O(lt),u=k(lt,"DIV",{class:!0});var bt=C(u);_=k(bt,"DIV",{class:!0});var Lt=C(_);p=k(Lt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(p)!=="svelte-crpa7y"&&(p.textContent=g),v=O(Lt),N=k(Lt,"INPUT",{class:!0,id:!0}),I=O(Lt),A=k(Lt,"DIV",{class:!0});var Ft=C(A);E=k(Ft,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(E)!=="svelte-mj6mct"&&(E.textContent=G),P=O(Ft),S=k(Ft,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(S)!=="svelte-1sl6oxh"&&(S.textContent=D),Ft.forEach(m),Lt.forEach(m),T=O(bt),M=k(bt,"DIV",{class:!0});var xt=C(M);B=k(xt,"DIV",{class:!0});var Ht=C(B);w=k(Ht,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(w)!=="svelte-wgxtkw"&&(w.textContent=L),K=O(Ht),j=k(Ht,"INPUT",{class:!0,id:!0,type:!0}),Ht.forEach(m),q=O(xt),me=k(xt,"DIV",{class:!0});var zt=C(me);Y=k(zt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(Y)!=="svelte-1tm2bth"&&(Y.textContent=H),W=O(zt),Te=k(zt,"INPUT",{class:!0,id:!0,placeholder:!0}),zt.forEach(m),xt.forEach(m),X=O(bt),le=k(bt,"DIV",{class:!0});var Dt=C(le);oe=k(Dt,"DIV",{class:!0});var $t=C(oe);ge=k($t,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(ge)!=="svelte-1js269u"&&(ge.textContent=ne),fe=O($t),Q=k($t,"INPUT",{class:!0,id:!0,type:!0}),$t.forEach(m),_e=O(Dt),ce=k(Dt,"DIV",{class:!0});var Wt=C(ce);Re=k(Wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(Re)!=="svelte-21h39k"&&(Re.textContent=x),re=O(Wt),he=k(Wt,"INPUT",{class:!0,id:!0,type:!0}),Wt.forEach(m),se=O(Dt),Oe=k(Dt,"DIV",{class:!0});var qt=C(Oe);Me=k(qt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(Me)!=="svelte-33lczu"&&(Me.textContent=_t),At=O(qt),Ke=k(qt,"INPUT",{class:!0,id:!0,type:!0}),qt.forEach(m),Dt.forEach(m),St=O(bt),Ze=k(bt,"DIV",{class:!0});var Pt=C(Ze);qe=k(Pt,"DIV",{class:!0,"data-svelte-h":!0}),ae(qe)!=="svelte-dgefms"&&(qe.textContent=Us),ds=O(Pt),Nt=k(Pt,"DIV",{class:!0});var $s=C(Nt);pt=k($s,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(pt)!=="svelte-1v9okg9"&&(pt.textContent=Rs),$s.forEach(m),hs=O(Pt),gt=k(Pt,"DIV",{class:!0});var Jt=C(gt);vt=k(Jt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(vt)!=="svelte-vd5i27"&&(vt.textContent=Ks),ms=O(Jt),it=k(Jt,"INPUT",{class:!0,id:!0}),Jt.forEach(m),Pt.forEach(m),bt.forEach(m),_s=O(lt),Be&&Be.l(lt),lt.forEach(m),Fe.forEach(m),this.h()},h(){var Le;h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","rounded px-1 py-1 hover:bg-gray-200"),h(o,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center"),h(p,"class","font-bold"),h(p,"for","device"),h(N,"class","px-1 my-1 rounded w-50"),h(N,"id","device"),N.disabled=!0,N.value=y=((Le=s[5])==null?void 0:Le.name)??"No device",h(E,"class","btn-sm primary mr-2"),h(S,"class","btn-sm primary"),h(A,"class","flex my-[auto]"),h(_,"class","h-full flex flex-col"),h(w,"class","font-bold"),h(w,"for","sound"),h(j,"class","h-[20px]"),h(j,"id","sound"),h(j,"type","checkbox"),j.checked=R=s[3].useSound,h(B,"class","my-1 flex justify-between mr-12"),h(Y,"class","font-bold"),h(Y,"for","fixed-velocity"),h(Te,"class","h-[20px] w-16"),h(Te,"id","fixed-velocity"),h(Te,"placeholder","0-127"),h(me,"class","flex justify-between"),h(M,"class","flex flex-col h-full"),h(ge,"class","font-bold"),h(ge,"for","keyboard"),h(Q,"class","h-[20px]"),h(Q,"id","keyboard"),h(Q,"type","checkbox"),Q.checked=ie=s[3].useKeyboard,h(oe,"class","my-1 flex justify-between mr-12"),h(Re,"class","font-bold"),h(Re,"for","hotkeys"),h(he,"class","h-[20px]"),h(he,"id","hotkeys"),h(he,"type","checkbox"),he.checked=Xe=s[3].useHotkeys,h(ce,"class","my-1 flex justify-between mr-12"),h(Me,"class","font-bold"),h(Me,"for","auto-octave"),h(Ke,"class","h-[20px]"),h(Ke,"id","auto-octave"),h(Ke,"type","checkbox"),Ke.checked=Ue=s[3].useAutoOctave,h(Oe,"class","my-1 flex justify-between mr-12"),h(le,"class","flex flex-col h-full"),h(qe,"class","h-[28px]"),h(pt,"class","w-full btn-sm primary"),h(Nt,"class","my-[2px] flex justify-between"),h(vt,"class","font-bold"),h(vt,"for","fade-timeout"),h(it,"class","h-[20px] w-16"),h(it,"id","fade-timeout"),it.value=s[1],h(gt,"class","my-1 flex justify-between"),h(Ze,"class","flex flex-col h-full"),h(u,"class","body svelte-1bpw69s"),J(u,"hidden",s[4]),h(t,"class","relative flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1bpw69s"),J(t,"collapsed",s[4]),h(e,"class",Kt=we(`${s[11].class||""}`)+" svelte-1bpw69s")},m(Le,Fe){U(Le,e,Fe),f(e,t),f(t,l),f(l,n),f(t,a),f(t,o),f(o,i),ye(c,i,null),f(t,d),f(t,u),f(u,_),f(_,p),f(_,v),f(_,N),f(_,I),f(_,A),f(A,E),f(A,P),f(A,S),f(u,T),f(u,M),f(M,B),f(B,w),f(B,K),f(B,j),f(M,q),f(M,me),f(me,Y),f(me,W),f(me,Te),Ye(Te,s[0]),f(u,X),f(u,le),f(le,oe),f(oe,ge),f(oe,fe),f(oe,Q),f(le,_e),f(le,ce),f(ce,Re),f(ce,re),f(ce,he),f(le,se),f(le,Oe),f(Oe,Me),f(Oe,At),f(Oe,Ke),f(u,St),f(u,Ze),f(Ze,qe),f(Ze,ds),f(Ze,Nt),f(Nt,pt),f(Ze,hs),f(Ze,gt),f(gt,vt),f(gt,ms),f(gt,it),f(t,_s),Be&&Be.m(t,null),et=!0,ps||(Fs=[z(n,"click",s[7]),z(i,"click",s[10]),z(E,"click",je.openMidi),z(S,"click",je.disableMidi),z(j,"change",s[12]),z(Te,"input",s[13]),z(Te,"change",s[8]),z(Q,"change",s[14]),z(he,"change",s[15]),z(Ke,"change",s[16]),z(pt,"click",s[17]),z(it,"input",s[9])],ps=!0)},p(Le,[Fe]){var lt;(!et||Fe&32&&y!==(y=((lt=Le[5])==null?void 0:lt.name)??"No device")&&N.value!==y)&&(N.value=y),(!et||Fe&8&&R!==(R=Le[3].useSound))&&(j.checked=R),Fe&1&&Te.value!==Le[0]&&Ye(Te,Le[0]),(!et||Fe&8&&ie!==(ie=Le[3].useKeyboard))&&(Q.checked=ie),(!et||Fe&8&&Xe!==(Xe=Le[3].useHotkeys))&&(he.checked=Xe),(!et||Fe&8&&Ue!==(Ue=Le[3].useAutoOctave))&&(Ke.checked=Ue),(!et||Fe&2&&it.value!==Le[1])&&(it.value=Le[1]),(!et||Fe&16)&&J(u,"hidden",Le[4]),Le[2]&&!Le[4]?Be?Fe&20&&F(Be,1):(Be=Ul(),Be.c(),F(Be,1),Be.m(t,null)):Be&&(xe(),$(Be,1,1,()=>{Be=null}),He()),(!et||Fe&16)&&J(t,"collapsed",Le[4]),(!et||Fe&2048&&Kt!==(Kt=we(`${Le[11].class||""}`)+" svelte-1bpw69s"))&&h(e,"class",Kt)},i(Le){et||(F(c.$$.fragment,Le),F(Be),et=!0)},o(Le){$(c.$$.fragment,Le),$(Be),et=!1},d(Le){Le&&m(e),Ee(c),Be&&Be.d(),ps=!1,tt(Fs)}}}function cr(s,e,t){let l,n,r;Ce(s,ot,E=>t(3,l=E)),Ce(s,rs,E=>t(5,r=E));const a=mt(Ge(!1),{key:"inputs-hidden"});Ce(s,a,E=>t(4,n=E));let o=l.fixedVelocity??"",i=l.keyFadeTimeout,c=!1;ot.subscribe(E=>{t(0,o=E.fixedVelocity??""),t(1,i=E.keyFadeTimeout)});function d(){a.update(E=>!E)}function u(E){const{value:G}=E.currentTarget;let P;if(G)try{P=parseInt(G)}catch{}P!==void 0&&P>=0&&P<=127?je.setInputValue("fixedVelocity",P):G?t(0,o=l.fixedVelocity||""):je.setInputValue("fixedVelocity",void 0)}function _(E){try{const G=parseInt(E.currentTarget.value);je.setInputValue("keyFadeTimeout",G)}catch{t(1,i=l.keyFadeTimeout)}}function p(){je.setInputValue("useSound",!0),je.setInputValue("fixedVelocity",void 0),je.setInputValue("useKeyboard",!0),je.setInputValue("useHotkeys",!0),je.setInputValue("useAutoOctave",!0),je.setInputValue("keyFadeTimeout",1500)}const g=E=>je.setInputValue("useSound",E.currentTarget.checked);function v(){o=this.value,t(0,o)}const N=E=>je.setInputValue("useKeyboard",E.currentTarget.checked),y=E=>je.setInputValue("useHotkeys",E.currentTarget.checked),I=E=>je.setInputValue("useAutoOctave",E.currentTarget.checked),A=()=>t(2,c=!c);return s.$$set=E=>{t(11,e=Ie(Ie({},e),Ae(E)))},e=Ae(e),[o,i,c,l,n,r,a,d,u,_,p,e,g,v,N,y,I,A]}class ur extends ze{constructor(e){super(),$e(this,e,cr,ir,We,{})}}function fr(s){let e;return{c(){e=ee(" ")},l(t){e=te(t," ")},m(t,l){U(t,e,l)},p:pe,d(t){t&&m(e)}}}function dr(s){let e,t=s[1].note+"",l;return{c(){e=ee("Input: "),l=ee(t)},l(n){e=te(n,"Input: "),l=te(n,t)},m(n,r){U(n,e,r),U(n,l,r)},p(n,r){r&2&&t!==(t=n[1].note+"")&&de(l,t)},d(n){n&&(m(e),m(l))}}}function hr(s){let e,t;return{c(){e=ee("Input: "),t=ee(s[0])},l(l){e=te(l,"Input: "),t=te(l,s[0])},m(l,n){U(l,e,n),U(l,t,n)},p(l,n){n&1&&de(t,l[0])},d(l){l&&(m(e),m(t))}}}function mr(s){let e;return{c(){e=ee(As)},l(t){e=te(t,As)},m(t,l){U(t,e,l)},p:pe,d(t){t&&m(e)}}}function _r(s){let e,t,l,n;function r(i,c){return i[2].useKeyboard&&As?mr:i[2].useKeyboard&&i[0]?hr:i[2].useKeyboard&&i[1]?dr:fr}let a=r(s),o=a(s);return{c(){e=b("div"),o.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=C(e);o.l(c),c.forEach(m),this.h()},h(){h(e,"class",t=`${s[4].class||""}`)},m(i,c){U(i,e,c),o.m(e,null),l||(n=z(window,"keydown",s[3]),l=!0)},p(i,[c]){a===(a=r(i))&&o?o.p(i,c):(o.d(1),o=a(i),o&&(o.c(),o.m(e,null))),c&16&&t!==(t=`${i[4].class||""}`)&&h(e,"class",t)},i:pe,o:pe,d(i){i&&m(e),o.d(),l=!1,n()}}}let As="";function pr(s,e,t){let l;Ce(s,ot,c=>t(2,l=c));let{debounced:n}=e,r="",a;const o=Sn();function i(c){const d=c.target;if(n||!(d instanceof HTMLElement)||d.tagName==="INPUT")return;const u=ft.handleInput(c.code,c.key,c.shiftKey);u&&u.e==="note"?t(1,a=u.data):u&&u.e==="string"?t(0,r=u.data):u&&(t(0,r=""),t(1,a=void 0),o(u.e,u.data))}return s.$$set=c=>{t(4,e=Ie(Ie({},e),Ae(c))),"debounced"in c&&t(5,n=c.debounced)},e=Ae(e),[r,a,l,i,e,n]}class gr extends ze{constructor(e){super(),$e(this,e,pr,_r,We,{debounced:5})}}function vr(s){let e,t,l,n="Count",r,a,o,i,c,d="Duplicates",u,_,p,g,v,N,y="Autoplay",I,A,E,G,P,S,D="Wait seconds",T,M,B,w,L;return{c(){e=b("ul"),t=b("li"),l=b("label"),l.textContent=n,r=V(),a=b("input"),o=V(),i=b("li"),c=b("label"),c.textContent=d,u=V(),_=b("input"),g=V(),v=b("li"),N=b("label"),N.textContent=y,I=V(),A=b("input"),G=V(),P=b("li"),S=b("label"),S.textContent=D,T=V(),M=b("input"),this.h()},l(K){e=k(K,"UL",{class:!0});var j=C(e);t=k(j,"LI",{class:!0});var R=C(t);l=k(R,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(l)!=="svelte-wgq9fc"&&(l.textContent=n),r=O(R),a=k(R,"INPUT",{class:!0,id:!0,type:!0}),R.forEach(m),o=O(j),i=k(j,"LI",{class:!0});var q=C(i);c=k(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(c)!=="svelte-hcg9dq"&&(c.textContent=d),u=O(q),_=k(q,"INPUT",{class:!0,id:!0,type:!0}),q.forEach(m),g=O(j),v=k(j,"LI",{class:!0});var me=C(v);N=k(me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(N)!=="svelte-lr68n2"&&(N.textContent=y),I=O(me),A=k(me,"INPUT",{class:!0,id:!0,type:!0}),me.forEach(m),G=O(j),P=k(j,"LI",{class:!0});var Y=C(P);S=k(Y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(S)!=="svelte-1qj2vcy"&&(S.textContent=D),T=O(Y),M=k(Y,"INPUT",{class:!0,id:!0,type:!0}),Y.forEach(m),j.forEach(m),this.h()},h(){h(l,"class","font-bold"),h(l,"for","guess-count"),h(a,"class","h-[20px] w-10"),h(a,"id","guess-count"),h(a,"type","number"),h(t,"class","flex items-center justify-between svelte-1elvih2"),h(c,"class","font-bold"),h(c,"for","duplicates"),h(_,"class","h-[20px]"),h(_,"id","duplicates"),h(_,"type","checkbox"),_.checked=p=s[2].duplicates,h(i,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(N,"class","font-bold"),h(N,"for","autoplay"),h(A,"class","h-[20px]"),h(A,"id","autoplay"),h(A,"type","checkbox"),A.checked=E=s[2].autoplay,h(v,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(S,"class","font-bold"),h(S,"for","wait-ms"),h(M,"class","h-[20px] w-10"),h(M,"id","wait-ms"),h(M,"type","number"),h(P,"class","flex items-center justify-between svelte-1elvih2"),h(e,"class",B=we(`${s[5].class||""}`)+" svelte-1elvih2")},m(K,j){U(K,e,j),f(e,t),f(t,l),f(t,r),f(t,a),Ye(a,s[0]),f(e,o),f(e,i),f(i,c),f(i,u),f(i,_),f(e,g),f(e,v),f(v,N),f(v,I),f(v,A),f(e,G),f(e,P),f(P,S),f(P,T),f(P,M),Ye(M,s[1]),w||(L=[z(a,"input",s[6]),z(a,"input",s[3]),z(_,"input",s[7]),z(A,"input",s[8]),z(M,"input",s[9]),z(M,"input",s[4])],w=!0)},p(K,[j]){j&1&&ls(a.value)!==K[0]&&Ye(a,K[0]),j&4&&p!==(p=K[2].duplicates)&&(_.checked=p),j&4&&E!==(E=K[2].autoplay)&&(A.checked=E),j&2&&ls(M.value)!==K[1]&&Ye(M,K[1]),j&32&&B!==(B=we(`${K[5].class||""}`)+" svelte-1elvih2")&&h(e,"class",B)},i:pe,o:pe,d(K){K&&m(e),w=!1,tt(L)}}}function br(s,e,t){let l;Ce(s,ht,_=>t(2,l=_));let n=l.count||"",r=l.waitSeconds||"";ht.subscribe(_=>{t(0,n=_.count||""),t(1,r=_.waitSeconds||"")});function a({currentTarget:{value:_}}){let p;try{p=parseInt(_),p<=0&&(p=1),De.setOptionValue("count",p)}catch{t(0,n=l.count)}}function o({currentTarget:{value:_}}){let p;try{p=parseInt(_),p<0&&(p=0),De.setOptionValue("waitSeconds",p)}catch{t(1,r=l.waitSeconds)}}function i(){n=ls(this.value),t(0,n)}const c=_=>De.setOptionValue("duplicates",_.currentTarget.checked),d=_=>De.setOptionValue("autoplay",_.currentTarget.checked);function u(){r=ls(this.value),t(1,r)}return s.$$set=_=>{t(5,e=Ie(Ie({},e),Ae(_)))},e=Ae(e),[n,r,l,a,o,e,i,c,d,u]}class kr extends ze{constructor(e){super(),$e(this,e,br,vr,We,{})}}function Rl(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Kl(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Fl(s){let e,t,l=s[21]+"",n,r,a,o,i,c,d,u;function _(){return s[13](s[20])}o=new Je({props:{icon:ys,width:20}});function p(...g){return s[14](s[20],...g)}return{c(){e=b("li"),t=b("button"),n=ee(l),r=V(),a=b("button"),be(o.$$.fragment),i=V(),this.h()},l(g){e=k(g,"LI",{class:!0});var v=C(e);t=k(v,"BUTTON",{class:!0});var N=C(t);n=te(N,l),N.forEach(m),r=O(v),a=k(v,"BUTTON",{class:!0});var y=C(a);ke(o.$$.fragment,y),y.forEach(m),i=O(v),v.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),J(t,"selected",s[20]===s[0]),h(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),h(e,"class","flex svelte-1okhpct")},m(g,v){U(g,e,v),f(e,t),f(t,n),f(e,r),f(e,a),ye(o,a,null),f(e,i),c=!0,d||(u=[z(t,"click",_),z(a,"click",p)],d=!0)},p(g,v){s=g,(!c||v&17)&&J(t,"selected",s[20]===s[0])},i(g){c||(F(o.$$.fragment,g),c=!0)},o(g){$(o.$$.fragment,g),c=!1},d(g){g&&m(e),Ee(o),d=!1,tt(u)}}}function xl(s){let e,t=ue(s[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Hl(Rl(s,t,n));return{c(){e=b("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"UL",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","svelte-1okhpct")},m(n,r){U(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r&518){t=ue(n[2]);let a;for(a=0;a<t.length;a+=1){const o=Rl(n,t,a);l[a]?l[a].p(o,r):(l[a]=Hl(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Hl(s){let e,t,l=s[21]+"",n,r,a,o;function i(){return s[15](s[20])}return{c(){e=b("li"),t=b("button"),n=ee(l),r=V(),this.h()},l(c){e=k(c,"LI",{class:!0});var d=C(e);t=k(d,"BUTTON",{class:!0});var u=C(t);n=te(u,l),u.forEach(m),r=O(d),d.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),J(t,"selected",s[20]===s[1]),h(e,"class","svelte-1okhpct")},m(c,d){U(c,e,d),f(e,t),f(t,n),f(e,r),a||(o=z(t,"click",i),a=!0)},p(c,d){s=c,d&4&&l!==(l=s[21]+"")&&de(n,l),d&6&&J(t,"selected",s[20]===s[1])},d(c){c&&m(e),a=!1,o()}}}function yr(s){let e,t,l="Play",n,r,a,o,i,c,d,u,_,p,g="Reset",v,N,y,I,A=s[3]?"Quit":"Play",E,G,P,S,D,T=ue(s[4]),M=[];for(let L=0;L<T.length;L+=1)M[L]=Fl(Kl(s,T,L));const B=L=>$(M[L],1,1,()=>{M[L]=null});let w=(s[0]==="chords-write"||s[0]==="chords-play")&&xl(s);return d=new kr({props:{class:"game-options"}}),y=new Je({props:{class:"mr-1",icon:s[3]?Js:ys,width:20}}),{c(){e=b("fieldset"),t=b("legend"),t.textContent=l,n=V(),r=b("div"),a=b("ul");for(let L=0;L<M.length;L+=1)M[L].c();o=V(),i=b("div"),w&&w.c(),c=V(),be(d.$$.fragment),u=V(),_=b("div"),p=b("button"),p.textContent=g,v=V(),N=b("button"),be(y.$$.fragment),I=V(),E=ee(A),this.h()},l(L){e=k(L,"FIELDSET",{class:!0});var K=C(e);t=k(K,"LEGEND",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-1409tnk"&&(t.textContent=l),n=O(K),r=k(K,"DIV",{class:!0});var j=C(r);a=k(j,"UL",{class:!0});var R=C(a);for(let H=0;H<M.length;H+=1)M[H].l(R);R.forEach(m),o=O(j),i=k(j,"DIV",{class:!0});var q=C(i);w&&w.l(q),q.forEach(m),c=O(j),ke(d.$$.fragment,j),u=O(j),_=k(j,"DIV",{class:!0});var me=C(_);p=k(me,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(p)!=="svelte-10rv0bu"&&(p.textContent=g),v=O(me),N=k(me,"BUTTON",{class:!0});var Y=C(N);ke(y.$$.fragment,Y),I=O(Y),E=te(Y,A),Y.forEach(m),me.forEach(m),j.forEach(m),K.forEach(m),this.h()},h(){h(t,"class","px-1 text-base"),h(a,"class","games svelte-1okhpct"),h(i,"class","options svelte-1okhpct"),h(p,"class","w-full btn hover:bg-gray-200"),h(N,"class","w-full mt-2 flex items-center justify-center btn primary"),h(_,"class","h-full flex flex-col justify-end"),h(r,"class","body pb-2 h-full svelte-1okhpct"),h(e,"class",G=we(`${s[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct")},m(L,K){U(L,e,K),f(e,t),f(e,n),f(e,r),f(r,a);for(let j=0;j<M.length;j+=1)M[j]&&M[j].m(a,null);f(r,o),f(r,i),w&&w.m(i,null),f(r,c),ye(d,r,null),f(r,u),f(r,_),f(_,p),f(_,v),f(_,N),ye(y,N,null),f(N,I),f(N,E),P=!0,S||(D=[z(p,"click",s[5]),z(N,"click",s[16])],S=!0)},p(L,[K]){if(K&401){T=ue(L[4]);let R;for(R=0;R<T.length;R+=1){const q=Kl(L,T,R);M[R]?(M[R].p(q,K),F(M[R],1)):(M[R]=Fl(q),M[R].c(),F(M[R],1),M[R].m(a,null))}for(xe(),R=T.length;R<M.length;R+=1)B(R);He()}L[0]==="chords-write"||L[0]==="chords-play"?w?w.p(L,K):(w=xl(L),w.c(),w.m(i,null)):w&&(w.d(1),w=null);const j={};K&8&&(j.icon=L[3]?Js:ys),y.$set(j),(!P||K&8)&&A!==(A=L[3]?"Quit":"Play")&&de(E,A),(!P||K&1024&&G!==(G=we(`${L[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct"))&&h(e,"class",G)},i(L){if(!P){for(let K=0;K<T.length;K+=1)F(M[K]);F(d.$$.fragment,L),F(y.$$.fragment,L),P=!0}},o(L){M=M.filter(Boolean);for(let K=0;K<M.length;K+=1)$(M[K]);$(d.$$.fragment,L),$(y.$$.fragment,L),P=!1},d(L){L&&m(e),Ve(M,L),w&&w.d(),Ee(d),Ee(y),S=!1,tt(D)}}}function Er(s,e,t){let l,n,r,a,o;Ce(s,js,E=>t(12,r=E)),Ce(s,ht,E=>t(19,a=E)),Ce(s,wt,E=>t(3,o=E));const i=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let c=i[4].key,d="maj-m";a.count,a.waitSeconds,ht.subscribe(E=>{E.count,E.waitSeconds});function u(){De.clearGame(!0)}function _(E,G){if(G==="chords-write"||G==="chords-play"||G==="chords-diatonic"){let P=[];d==="selected"?P=r.filter(S=>S.selected):d==="all"?P=r:d==="maj-m"?P=r.filter(S=>S.suffixes[0]==="maj"||S.suffixes[0]==="m"):d==="seventh"&&(P=r.filter(S=>S.suffixes[0]==="maj7"||S.suffixes[0]==="m7"||S.suffixes[0]==="7"||S.suffixes[0]==="dim7"||S.suffixes[0]==="aug7")),De.play(G,{chords:P})}else De.play(G,void 0);E.currentTarget instanceof HTMLElement&&E.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function p(E){t(0,c=E)}function g(E,G){t(0,c=G),_(E,G)}function v(E){t(1,d=E)}const N=E=>p(E),y=(E,G)=>g(G,E),I=E=>v(E),A=E=>_(E,c);return s.$$set=E=>{t(10,e=Ie(Ie({},e),Ae(E)))},s.$$.update=()=>{s.$$.dirty&4096&&t(11,l=r.reduce((E,G)=>G.selected?E+1:E,0)),s.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${l} chords`},{key:"all",value:"All"}])},e=Ae(e),[c,d,n,o,i,u,_,p,g,v,e,l,r,N,y,I,A]}class wr extends ze{constructor(e){super(),$e(this,e,Er,yr,We,{})}}function zl(s,e,t){const l=s.slice();return l[7]=e[t],l}function $l(s,e,t){const l=s.slice();return l[4]=e[t],l}function Cr(s){let e,t=ue(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Wl(zl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r&2){t=ue(n[1]);let a;for(a=0;a<t.length;a+=1){const o=zl(n,t,a);l[a]?l[a].p(o,r):(l[a]=Wl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Tr(s){let e,t=ue(s[0].scaleNotes||[]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ql($l(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r&1){t=ue(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const o=$l(n,t,a);l[a]?l[a].p(o,r):(l[a]=ql(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Wl(s){let e,t=s[7].interval+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r&2&&t!==(t=n[7].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function ql(s){let e,t=s[4].note+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r&1&&t!==(t=n[4].note+"")&&de(l,t)},d(n){n&&m(e)}}}function Ir(s){let e,t,l,n,r,a;function o(d,u){return d[0]?Tr:Cr}let i=o(s),c=i(s);return{c(){e=b("div"),t=b("button"),c.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,title:!0});var u=C(e);t=k(u,"BUTTON",{class:!0});var _=C(t);c.l(_),_.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","intervals svelte-my4m0t"),h(e,"class",l=`${s[2].class||""} `),h(e,"title",n=s[1].map(Jl).join("-"))},m(d,u){U(d,e,u),f(e,t),c.m(t,null),r||(a=z(t,"click",s[3]),r=!0)},p(d,[u]){i===(i=o(d))&&c?c.p(d,u):(c.d(1),c=i(d),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=`${d[2].class||""} `)&&h(e,"class",l),u&2&&n!==(n=d[1].map(Jl).join("-"))&&h(e,"title",n)},i:pe,o:pe,d(d){d&&m(e),c.d(),r=!1,a()}}}const Jl=s=>s.interval;function Ar(s,e,t){let{scale:l,intervals:n}=e;function r(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ie(Ie({},e),Ae(a))),"scale"in a&&t(0,l=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=Ae(e),[l,n,e,r]}class Tn extends ze{constructor(e){super(),$e(this,e,Ar,Ir,We,{scale:0,intervals:1})}}function Ql(s,e,t){const l=s.slice();return l[7]=e[t],l}function Yl(s,e,t){const l=s.slice();return l[4]=e[t],l}function Sr(s){let e,t=ue(s[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Xl(Ql(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r&1){t=ue(n[0]);let a;for(a=0;a<t.length;a+=1){const o=Ql(n,t,a);l[a]?l[a].p(o,r):(l[a]=Xl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Nr(s){let e,t=ue(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Zl(Yl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Pe()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Pe()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);U(n,e,r)},p(n,r){if(r&2){t=ue(n[1]);let a;for(a=0;a<t.length;a+=1){const o=Yl(n,t,a);l[a]?l[a].p(o,r):(l[a]=Zl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Xl(s){let e,t,l=s[7].roman+"",n,r,a,o=s[7].suffix+"",i,c;return{c(){e=b("span"),t=b("span"),n=ee(l),r=V(),a=b("sup"),i=ee(o),c=V(),this.h()},l(d){e=k(d,"SPAN",{class:!0});var u=C(e);t=k(u,"SPAN",{class:!0});var _=C(t);n=te(_,l),_.forEach(m),r=O(u),a=k(u,"SUP",{class:!0});var p=C(a);i=te(p,o),p.forEach(m),c=O(u),u.forEach(m),this.h()},h(){h(t,"class","block"),h(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),J(a,"super-text",s[7].suffix.length>2),h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(d,u){U(d,e,u),f(e,t),f(t,n),f(e,r),f(e,a),f(a,i),f(e,c)},p(d,u){u&1&&l!==(l=d[7].roman+"")&&de(n,l),u&1&&o!==(o=d[7].suffix+"")&&de(i,o),u&1&&J(a,"super-text",d[7].suffix.length>2)},d(d){d&&m(e)}}}function Zl(s){let e,t,l=s[4]+"",n,r;return{c(){e=b("span"),t=b("span"),n=ee(l),r=V(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var o=C(e);t=k(o,"SPAN",{});var i=C(t);n=te(i,l),i.forEach(m),r=O(o),o.forEach(m),this.h()},h(){h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,o){U(a,e,o),f(e,t),f(t,n),f(e,r)},p(a,o){o&2&&l!==(l=a[4]+"")&&de(n,l)},d(a){a&&m(e)}}}function Lr(s){let e,t,l,n,r,a;function o(d,u){return d[1].length>0?Nr:Sr}let i=o(s),c=i(s);return{c(){e=b("div"),t=b("button"),c.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,title:!0});var u=C(e);t=k(u,"BUTTON",{class:!0});var _=C(t);c.l(_),_.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","triads flex flex-wrap svelte-1roj1mi"),h(e,"class",l=we(`${s[2].class||""} `)+" svelte-1roj1mi"),h(e,"title",n=s[0].map(en).join("-"))},m(d,u){U(d,e,u),f(e,t),c.m(t,null),r||(a=z(t,"click",s[3]),r=!0)},p(d,[u]){i===(i=o(d))&&c?c.p(d,u):(c.d(1),c=i(d),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=we(`${d[2].class||""} `)+" svelte-1roj1mi")&&h(e,"class",l),u&1&&n!==(n=d[0].map(en).join("-"))&&h(e,"title",n)},i:pe,o:pe,d(d){d&&m(e),c.d(),r=!1,a()}}}const en=s=>s.roman+s.suffix;function Dr(s,e,t){let{triads:l,chords:n}=e;function r(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ie(Ie({},e),Ae(a))),"triads"in a&&t(0,l=a.triads),"chords"in a&&t(1,n=a.chords)},e=Ae(e),[l,n,e,r]}class In extends ze{constructor(e){super(),$e(this,e,Dr,Lr,We,{triads:0,chords:1})}}function tn(s,e,t){const l=s.slice();return l[23]=e[t],l}function sn(s,e,t){const l=s.slice();return l[23]=e[t],l}function ln(s){let e,t,l=s[23].raw.names[0]+"",n,r,a,o,i,c,d;function u(){return s[11](s[23])}a=new Tn({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function _(){return s[12](s[23])}return i=new In({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",_),{c(){e=b("li"),t=b("div"),n=ee(l),r=V(),be(a.$$.fragment),o=V(),be(i.$$.fragment),c=V(),this.h()},l(p){e=k(p,"LI",{class:!0});var g=C(e);t=k(g,"DIV",{class:!0});var v=C(t);n=te(v,l),v.forEach(m),r=O(g),ke(a.$$.fragment,g),o=O(g),ke(i.$$.fragment,g),c=O(g),g.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(p,g){U(p,e,g),f(e,t),f(t,n),f(e,r),ye(a,e,null),f(e,o),ye(i,e,null),f(e,c),d=!0},p(p,g){s=p,(!d||g&4)&&l!==(l=s[23].raw.names[0]+"")&&de(n,l);const v={};g&4&&(v.scale=s[23].scale),g&4&&(v.intervals=s[23].raw.intervals),a.$set(v);const N={};g&4&&(N.triads=s[23].triads),g&4&&(N.chords=s[23].triadChords),i.$set(N)},i(p){d||(F(a.$$.fragment,p),F(i.$$.fragment,p),d=!0)},o(p){$(a.$$.fragment,p),$(i.$$.fragment,p),d=!1},d(p){p&&m(e),Ee(a),Ee(i)}}}function nn(s){let e,t,l=s[23].raw.names[0]+"",n,r,a,o,i,c,d;function u(){return s[13](s[23])}a=new Tn({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function _(){return s[14](s[23])}return i=new In({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",_),{c(){e=b("li"),t=b("div"),n=ee(l),r=V(),be(a.$$.fragment),o=V(),be(i.$$.fragment),c=V(),this.h()},l(p){e=k(p,"LI",{class:!0});var g=C(e);t=k(g,"DIV",{class:!0});var v=C(t);n=te(v,l),v.forEach(m),r=O(g),ke(a.$$.fragment,g),o=O(g),ke(i.$$.fragment,g),c=O(g),g.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(p,g){U(p,e,g),f(e,t),f(t,n),f(e,r),ye(a,e,null),f(e,o),ye(i,e,null),f(e,c),d=!0},p(p,g){s=p,(!d||g&2)&&l!==(l=s[23].raw.names[0]+"")&&de(n,l);const v={};g&2&&(v.scale=s[23].scale),g&2&&(v.intervals=s[23].raw.intervals),a.$set(v);const N={};g&2&&(N.triads=s[23].triads),g&2&&(N.chords=s[23].triadChords),i.$set(N)},i(p){d||(F(a.$$.fragment,p),F(i.$$.fragment,p),d=!0)},o(p){$(a.$$.fragment,p),$(i.$$.fragment,p),d=!1},d(p){p&&m(e),Ee(a),Ee(i)}}}function Pr(s){let e,t,l,n,r="Scales",a,o,i,c="Key",d,u,_,p,g,v,N,y,I,A,E,G=ue(s[2]),P=[];for(let B=0;B<G.length;B+=1)P[B]=ln(sn(s,G,B));const S=B=>$(P[B],1,1,()=>{P[B]=null});let D=ue(s[1]),T=[];for(let B=0;B<D.length;B+=1)T[B]=nn(tn(s,D,B));const M=B=>$(T[B],1,1,()=>{T[B]=null});return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=r,a=V(),o=b("div"),i=b("label"),i.textContent=c,d=V(),u=b("input"),_=V(),p=b("div"),g=b("ul");for(let B=0;B<P.length;B+=1)P[B].c();v=V(),N=b("ul");for(let B=0;B<T.length;B+=1)T[B].c();this.h()},l(B){e=k(B,"DIV",{class:!0});var w=C(e);t=k(w,"FIELDSET",{class:!0});var L=C(t);l=k(L,"LEGEND",{class:!0});var K=C(l);n=k(K,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-lhx60e"&&(n.textContent=r),K.forEach(m),a=O(L),o=k(L,"DIV",{class:!0});var j=C(o);i=k(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(i)!=="svelte-14m38zf"&&(i.textContent=c),d=O(j),u=k(j,"INPUT",{class:!0,id:!0}),j.forEach(m),_=O(L),p=k(L,"DIV",{class:!0});var R=C(p);g=k(R,"UL",{class:!0});var q=C(g);for(let Y=0;Y<P.length;Y+=1)P[Y].l(q);q.forEach(m),v=O(R),N=k(R,"UL",{class:!0});var me=C(N);for(let Y=0;Y<T.length;Y+=1)T[Y].l(me);me.forEach(m),R.forEach(m),L.forEach(m),w.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","mr-4 font-bold"),h(i,"for","scale-key"),h(u,"class","bg-gray-100 w-16 px-1 rounded"),h(u,"id","scale-key"),u.value=s[0],h(o,"class","flex mb-2 input svelte-4hctsl"),J(o,"hidden",s[3]),h(g,"class","list odd w-full svelte-4hctsl"),h(N,"class","list even w-full svelte-4hctsl"),h(p,"class","body max-h-[30rem] overflow-scroll svelte-4hctsl"),J(p,"hidden",s[3]),h(t,"class","flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-4hctsl"),J(t,"collapsed",s[3]),h(e,"class",y=we(`${s[9].class||""}`)+" svelte-4hctsl")},m(B,w){U(B,e,w),f(e,t),f(t,l),f(l,n),f(t,a),f(t,o),f(o,i),f(o,d),f(o,u),f(t,_),f(t,p),f(p,g);for(let L=0;L<P.length;L+=1)P[L]&&P[L].m(g,null);f(p,v),f(p,N);for(let L=0;L<T.length;L+=1)T[L]&&T[L].m(N,null);I=!0,A||(E=[z(n,"click",s[5]),z(u,"input",s[6])],A=!0)},p(B,[w]){if((!I||w&1&&u.value!==B[0])&&(u.value=B[0]),(!I||w&8)&&J(o,"hidden",B[3]),w&388){G=ue(B[2]);let L;for(L=0;L<G.length;L+=1){const K=sn(B,G,L);P[L]?(P[L].p(K,w),F(P[L],1)):(P[L]=ln(K),P[L].c(),F(P[L],1),P[L].m(g,null))}for(xe(),L=G.length;L<P.length;L+=1)S(L);He()}if(w&386){D=ue(B[1]);let L;for(L=0;L<D.length;L+=1){const K=tn(B,D,L);T[L]?(T[L].p(K,w),F(T[L],1)):(T[L]=nn(K),T[L].c(),F(T[L],1),T[L].m(N,null))}for(xe(),L=D.length;L<T.length;L+=1)M(L);He()}(!I||w&8)&&J(p,"hidden",B[3]),(!I||w&8)&&J(t,"collapsed",B[3]),(!I||w&512&&y!==(y=we(`${B[9].class||""}`)+" svelte-4hctsl"))&&h(e,"class",y)},i(B){if(!I){for(let w=0;w<G.length;w+=1)F(P[w]);for(let w=0;w<D.length;w+=1)F(T[w]);I=!0}},o(B){P=P.filter(Boolean);for(let w=0;w<P.length;w+=1)$(P[w]);T=T.filter(Boolean);for(let w=0;w<T.length;w+=1)$(T[w]);I=!1},d(B){B&&m(e),Ve(P,B),Ve(T,B),A=!1,tt(E)}}}function Vr(s,e,t){let l,n,r,a,o,i,c;Ce(s,os,T=>t(17,r=T)),Ce(s,Bt,T=>t(18,a=T)),Ce(s,ot,T=>t(19,o=T)),Ce(s,rt,T=>t(20,i=T));let u=us().map(T=>({key:T.names[0],raw:T,scale:void 0,triads:T.triads,triadChords:[]})),_="",p=[a.key,a.scale],g;const v=mt(Ge(!0),{key:"scales-hidden"});Ce(s,v,T=>t(3,c=T));function N(){v.update(T=>!T)}function y({currentTarget:{value:T}}){t(0,_=`${T.charAt(0).toUpperCase()}${T.charAt(1).toLowerCase()}`),t(10,u=u.map(M=>{const B=Mt(_,M.key),w=_&&"data"in B?B.data:void 0;let L=[];return w&&(L=M.triads.map((K,j)=>`${w.scaleNotes[j].note}${!K.suffix.includes("°")&&K.minor?"m":""}${K.suffix}`)),{...M,scale:w,triadChords:L}}))}function I(T,M,B){if(T<M.length){const w=M[T++];Ne.setPlayed(w),i==null||i.playChord(w.map(L=>L.midi),o.fixedVelocity),g=setTimeout(()=>I(T,M,B),B)}else Ne.setPlayed([]),Ne.setKeyAndScale(p[0],p[1])}function A(T){clearTimeout(g);let M,B;T.scale?(B=T.scale,p=[a.key,a.scale],Ne.setKeyAndScale(T.scale.key,T.scale.scale)):B=a;const w=r[0].midi+B.scaleNotes[0].semitones;M=T.raw.intervals.map(L=>[{...B.notesMap.get(L.semitones%12),midi:w+L.semitones}]),M[0][0].semitones!==M[M.length-1][0].semitones&&M.push(M[0].map(L=>({...L,midi:L.midi+12}))),I(0,M,500)}function E(T){clearTimeout(g);const{intervals:M}=T.raw;let B,w;T.scale?(w=T.scale,p=[a.key,a.scale],Ne.setKeyAndScale(T.scale.key,T.scale.scale)):w=a;const L=r[0].midi+w.scaleNotes[0].semitones;B=vn(T.triads).map((j,R)=>Es(L+w.intervals[R].semitones,w,j.intervals)),M[M.length-1].interval_seq!==1&&B.push(B[0].map(j=>({...j,midi:j.midi+12}))),I(0,B,750)}const G=T=>A(T),P=T=>E(T),S=T=>A(T),D=T=>E(T);return s.$$set=T=>{t(9,e=Ie(Ie({},e),Ae(T)))},s.$$.update=()=>{s.$$.dirty&1024&&t(2,l=u.filter((T,M)=>M<u.length/2)),s.$$.dirty&1024&&t(1,n=u.filter((T,M)=>M>=u.length/2))},e=Ae(e),[_,n,l,c,v,N,y,A,E,e,u,G,P,S,D]}class Or extends ze{constructor(e){super(),$e(this,e,Vr,Pr,We,{})}}function an(s,e,t){const l=s.slice();return l[26]=e[t],l}function rn(s,e,t){const l=s.slice();return l[29]=e[t],l}function on(s){let e,t;return{c(){e=b("div"),t=ee(s[3]),this.h()},l(l){e=k(l,"DIV",{class:!0});var n=C(e);t=te(n,s[3]),n.forEach(m),this.h()},h(){h(e,"class","error svelte-1u7ze7x")},m(l,n){U(l,e,n),f(e,t)},p(l,n){n[0]&8&&de(t,l[3])},d(l){l&&m(e)}}}function cn(s){let e,t=ue(s[5]),l=[];for(let n=0;n<t.length;n+=1)l[n]=un(rn(s,t,n));return{c(){e=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){U(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r[0]&32){t=ue(n[5]);let a;for(a=0;a<t.length;a+=1){const o=rn(n,t,a);l[a]?l[a].p(o,r):(l[a]=un(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function un(s){let e,t=s[29].interval+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&32&&t!==(t=n[29].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function fn(s){let e,t=ue(s[8].scaleNotes),l=[];for(let n=0;n<t.length;n+=1)l[n]=dn(an(s,t,n));return{c(){e=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){U(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r[0]&256){t=ue(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const o=an(n,t,a);l[a]?l[a].p(o,r):(l[a]=dn(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function dn(s){let e,t=s[26].note+"",l;return{c(){e=b("span"),l=ee(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var r=C(e);l=te(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,r){U(n,e,r),f(e,l)},p(n,r){r[0]&256&&t!==(t=n[26].note+"")&&de(l,t)},d(n){n&&m(e)}}}function jr(s){let e,t,l,n="Score",r,a,o,i,c,d,u,_="Range",p,g,v,N,y,I="—",A,E,G,P,S,D,T,M="Scale",B,w,L,K,j,R,q,me="Key",Y,H,W,Te,X,le,oe,ge;o=new Je({props:{icon:Rt,width:16}});let ne=s[3]&&on(s);L=new mn({props:{class:"p-1 pl-[2px] w-48",containerClass:"w-48",selected:s[0],options:s[10],onSelect:s[14]}});let fe=!s[7]&&cn(s),Q=!s[7]&&fn(s);return{c(){e=b("fieldset"),t=b("legend"),l=b("button"),l.textContent=n,r=V(),a=b("button"),be(o.$$.fragment),i=V(),c=b("div"),d=b("div"),u=b("label"),u.textContent=_,p=V(),g=b("div"),v=b("input"),N=V(),y=b("span"),y.textContent=I,A=V(),E=b("input"),G=V(),P=b("div"),ne&&ne.c(),S=V(),D=b("div"),T=b("label"),T.textContent=M,B=V(),w=b("div"),be(L.$$.fragment),K=V(),fe&&fe.c(),j=V(),R=b("div"),q=b("label"),q.textContent=me,Y=V(),H=b("div"),W=b("input"),Te=V(),Q&&Q.c(),this.h()},l(ie){e=k(ie,"FIELDSET",{class:!0});var _e=C(e);t=k(_e,"LEGEND",{class:!0});var ce=C(t);l=k(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-lqyol"&&(l.textContent=n),ce.forEach(m),r=O(_e),a=k(_e,"BUTTON",{class:!0});var Re=C(a);ke(o.$$.fragment,Re),Re.forEach(m),i=O(_e),c=k(_e,"DIV",{class:!0});var x=C(c);d=k(x,"DIV",{class:!0});var re=C(d);u=k(re,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(u)!=="svelte-10u0679"&&(u.textContent=_),p=O(re),g=k(re,"DIV",{class:!0});var he=C(g);v=k(he,"INPUT",{class:!0,id:!0}),N=O(he),y=k(he,"SPAN",{class:!0,"data-svelte-h":!0}),ae(y)!=="svelte-8q1xz4"&&(y.textContent=I),A=O(he),E=k(he,"INPUT",{class:!0,id:!0}),he.forEach(m),G=O(re),P=k(re,"DIV",{class:!0});var Xe=C(P);ne&&ne.l(Xe),Xe.forEach(m),re.forEach(m),S=O(x),D=k(x,"DIV",{class:!0});var se=C(D);T=k(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(T)!=="svelte-ld2d07"&&(T.textContent=M),B=O(se),w=k(se,"DIV",{class:!0});var Oe=C(w);ke(L.$$.fragment,Oe),Oe.forEach(m),K=O(se),fe&&fe.l(se),se.forEach(m),j=O(x),R=k(x,"DIV",{class:!0});var Me=C(R);q=k(Me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(q)!=="svelte-17pcm6g"&&(q.textContent=me),Y=O(Me),H=k(Me,"DIV",{class:!0});var _t=C(H);W=k(_t,"INPUT",{class:!0,id:!0}),_t.forEach(m),Te=O(Me),Q&&Q.l(Me),Me.forEach(m),x.forEach(m),_e.forEach(m),this.h()},h(){h(l,"class","px-1 rounded hover:bg-gray-100"),h(t,"class","px-1 text-base"),h(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),J(a,"hidden",s[6]),h(u,"class","font-bold"),h(u,"for","range_min"),h(v,"class","h-[28px] w-full"),h(v,"id","range_min"),h(y,"class","mx-2 mt-1"),h(E,"class","h-[28px] w-full"),h(E,"id","range_max"),h(g,"class","my-1 flex w-full"),h(P,"class","flex justify-between my-1"),h(d,"class","flex flex-col h-full"),h(T,"class","font-bold"),h(T,"for","scales"),h(w,"class","my-1 w-full"),h(D,"class","flex flex-col h-full"),h(q,"class","font-bold"),h(q,"for","key"),h(W,"class","h-[28px]"),h(W,"id","key"),h(H,"class","my-1 flex"),h(R,"class","flex flex-col h-full"),h(c,"class","options svelte-1u7ze7x"),J(c,"hidden",s[6]),h(e,"class",X=we(`${s[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),J(e,"collapsed",s[6])},m(ie,_e){U(ie,e,_e),f(e,t),f(t,l),f(e,r),f(e,a),ye(o,a,null),f(e,i),f(e,c),f(c,d),f(d,u),f(d,p),f(d,g),f(g,v),Ye(v,s[1]),f(g,N),f(g,y),f(g,A),f(g,E),Ye(E,s[2]),f(d,G),f(d,P),ne&&ne.m(P,null),f(c,S),f(c,D),f(D,T),f(D,B),f(D,w),ye(L,w,null),f(D,K),fe&&fe.m(D,null),f(c,j),f(c,R),f(R,q),f(R,Y),f(R,H),f(H,W),Ye(W,s[4]),f(R,Te),Q&&Q.m(R,null),le=!0,oe||(ge=[z(l,"click",s[15]),z(a,"click",s[16]),z(v,"input",s[18]),z(v,"change",s[19]),z(v,"focus",s[12]),z(E,"input",s[20]),z(E,"change",s[21]),z(E,"focus",s[12]),z(W,"input",s[22]),z(W,"input",s[13])],oe=!0)},p(ie,_e){(!le||_e[0]&64)&&J(a,"hidden",ie[6]),_e[0]&2&&v.value!==ie[1]&&Ye(v,ie[1]),_e[0]&4&&E.value!==ie[2]&&Ye(E,ie[2]),ie[3]?ne?ne.p(ie,_e):(ne=on(ie),ne.c(),ne.m(P,null)):ne&&(ne.d(1),ne=null);const ce={};_e[0]&1&&(ce.selected=ie[0]),L.$set(ce),ie[7]?fe&&(fe.d(1),fe=null):fe?fe.p(ie,_e):(fe=cn(ie),fe.c(),fe.m(D,null)),_e[0]&16&&W.value!==ie[4]&&Ye(W,ie[4]),ie[7]?Q&&(Q.d(1),Q=null):Q?Q.p(ie,_e):(Q=fn(ie),Q.c(),Q.m(R,null)),(!le||_e[0]&64)&&J(c,"hidden",ie[6]),(!le||_e[0]&131072&&X!==(X=we(`${ie[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&h(e,"class",X),(!le||_e[0]&131136)&&J(e,"collapsed",ie[6])},i(ie){le||(F(o.$$.fragment,ie),F(L.$$.fragment,ie),le=!0)},o(ie){$(o.$$.fragment,ie),$(L.$$.fragment,ie),le=!1},d(ie){ie&&m(e),Ee(o),ne&&ne.d(),Ee(L),fe&&fe.d(),Q&&Q.d(),oe=!1,tt(ge)}}}function Br(s,e,t){let l,n,r,a,o,i;Ce(s,os,w=>t(23,n=w)),Ce(s,Tt,w=>t(24,r=w)),Ce(s,wt,w=>t(7,o=w)),Ce(s,Bt,w=>t(8,i=w));let c=st(n[0]),d=st(n[1]),u="";const _=mt(Ge(!1),{key:"score-options-hidden"});Ce(s,_,w=>t(6,a=w));let p=r[0],g=r[1];const v=us(),N=v.map(w=>({key:w.names[0],value:w.names[0]}));os.subscribe(w=>{t(1,c=st(w[0])),t(2,d=st(w[1]))}),Tt.subscribe(w=>{t(4,p=w[0]),t(0,g=w[1])});function y(w,L){const K=Xn(L.currentTarget.value,!0,!0);if("data"in K){const{midi:j}=K.data,R=n,q=[w==="min"?j:R[0].midi,w==="max"?j:R[1].midi];je.setMidiRange(q),t(3,u="")}else t(3,u=K.err),w==="min"?t(1,c=st(n[0])):t(2,d=st(n[1]))}function I(){t(3,u="")}function A({currentTarget:{value:w}}){t(4,p=`${w.charAt(0).toUpperCase()}${w.charAt(1).toLowerCase()}`),Ne.setKey(p)}function E(w){var L;return t(0,g=(L=N.find(K=>w===K.key))==null?void 0:L.value),Ne.setScale(g),!1}function G(){_.update(w=>!w)}function P(){Ne.clearScore(!0),je.setMidiRange([60,84])}function S(){c=this.value,t(1,c)}const D=w=>y("min",w);function T(){d=this.value,t(2,d)}const M=w=>y("max",w);function B(){p=this.value,t(4,p)}return s.$$set=w=>{t(17,e=Ie(Ie({},e),Ae(w)))},s.$$.update=()=>{var w;s.$$.dirty[0]&1&&t(5,l=((w=v.find(L=>L.names[0]===g))==null?void 0:w.intervals)||[])},e=Ae(e),[g,c,d,u,p,l,a,o,i,_,N,y,I,A,E,G,P,e,S,D,T,M,B]}class Gr extends ze{constructor(e){super(),$e(this,e,Br,jr,We,{},null,[-1,-1])}}function Mr(s){s[21]=s[22].default}function Ur(s){return{c:pe,l:pe,m:pe,i:pe,o:pe,d:pe}}function Rr(s){Mr(s);let e,t,l;var n=s[21];function r(a,o){return{props:{class:"px-4 md:px-0"}}}return n&&(e=Dn(n,r())),{c(){e&&be(e.$$.fragment),t=Pe()},l(a){e&&ke(e.$$.fragment,a),t=Pe()},m(a,o){e&&ye(e,a,o),U(a,t,o),l=!0},i(a){l||(e&&F(e.$$.fragment,a),l=!0)},o(a){e&&$(e.$$.fragment,a),l=!1},d(a){a&&m(t),e&&Ee(e,a)}}}function Kr(s){let e;return{c(){e=ee(" ")},l(t){e=te(t," ")},m(t,l){U(t,e,l)},i:pe,o:pe,d(t){t&&m(e)}}}function Fr(s){let e,t,l,n,r="MIDI Note Trainer",a,o,i,c,d,u,_,p="Introduction",g,v,N,y,I,A,E,G,P,S,D,T,M,B,w,L,K,j,R,q,me;c=new Je({props:{icon:Rt,width:24}}),N=new ur({}),I=new Or({}),E=new Ea({}),S=new Gr({props:{class:"score-options mr-4"}}),T=new wr({props:{class:"play-form"}});let Y={ctx:s,current:null,token:null,hasCatch:!1,pending:Kr,then:Rr,catch:Ur,value:22,blocks:[,,,]};return Nn(ve(()=>import("./Score.2d69f74f.js"),["./Score.2d69f74f.js","./vendor_svelte.99087177.js","./vendor.e74270f4.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),Y),L=new gr({props:{class:"min-h-32",debounced:!!s[0]}}),L.$on("guessed-chord",s[2]),L.$on("guessed-key",s[3]),L.$on("guessed-note",s[4]),j=new ja({props:{game:s[1]}}),{c(){e=b("meta"),t=V(),l=b("h1"),n=b("a"),n.textContent=r,a=V(),o=b("div"),i=b("button"),be(c.$$.fragment),d=V(),u=b("div"),_=b("button"),_.textContent=p,g=V(),v=b("section"),be(N.$$.fragment),y=V(),be(I.$$.fragment),A=V(),be(E.$$.fragment),G=V(),P=b("div"),be(S.$$.fragment),D=V(),be(T.$$.fragment),M=V(),Y.block.c(),B=V(),w=b("section"),be(L.$$.fragment),K=V(),be(j.$$.fragment),this.h()},l(H){const W=Ln("svelte-1w2oado",document.head);e=k(W,"META",{name:!0,content:!0}),W.forEach(m),t=O(H),l=k(H,"H1",{class:!0});var Te=C(l);n=k(Te,"A",{class:!0,href:!0,"data-svelte-h":!0}),ae(n)!=="svelte-km4jns"&&(n.textContent=r),a=O(Te),o=k(Te,"DIV",{class:!0});var X=C(o);i=k(X,"BUTTON",{class:!0});var le=C(i);ke(c.$$.fragment,le),le.forEach(m),X.forEach(m),Te.forEach(m),d=O(H),u=k(H,"DIV",{class:!0});var oe=C(u);_=k(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(_)!=="svelte-3omuy"&&(_.textContent=p),oe.forEach(m),g=O(H),v=k(H,"SECTION",{class:!0});var ge=C(v);ke(N.$$.fragment,ge),y=O(ge),ke(I.$$.fragment,ge),A=O(ge),ke(E.$$.fragment,ge),G=O(ge),P=k(ge,"DIV",{class:!0});var ne=C(P);ke(S.$$.fragment,ne),D=O(ne),ke(T.$$.fragment,ne),ne.forEach(m),ge.forEach(m),M=O(H),Y.block.l(H),B=O(H),w=k(H,"SECTION",{class:!0});var fe=C(w);ke(L.$$.fragment,fe),K=O(fe),ke(j.$$.fragment,fe),fe.forEach(m),this.h()},h(){h(e,"name","description"),h(e,"content","App to practise music notation, scales and chords using MIDI"),h(n,"class","hover:underline"),h(n,"href","https://github.com/TeemuKoivisto/midi-note-trainer"),h(i,"class","rounded p-2 hover:bg-gray-200"),h(o,"class","flex items-center justify-center"),h(l,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight flex items-center justify-between"),h(_,"class","btn primary"),h(u,"class","px-4 md:px-0"),h(P,"class","play svelte-qjpqy3"),h(v,"class","px-4 md:px-0"),h(w,"class","mb-8 px-4 md:px-0 flex flex-col")},m(H,W){f(document.head,e),U(H,t,W),U(H,l,W),f(l,n),f(l,a),f(l,o),f(o,i),ye(c,i,null),U(H,d,W),U(H,u,W),f(u,_),U(H,g,W),U(H,v,W),ye(N,v,null),f(v,y),ye(I,v,null),f(v,A),ye(E,v,null),f(v,G),f(v,P),ye(S,P,null),f(P,D),ye(T,P,null),U(H,M,W),Y.block.m(H,Y.anchor=W),Y.mount=()=>B.parentNode,Y.anchor=B,U(H,B,W),U(H,w,W),ye(L,w,null),f(w,K),ye(j,w,null),R=!0,q||(me=[z(i,"click",s[5]),z(_,"click",s[6])],q=!0)},p(H,[W]){s=H;const Te={};W&1&&(Te.debounced=!!s[0]),L.$set(Te);const X={};W&2&&(X.game=s[1]),j.$set(X)},i(H){R||(F(c.$$.fragment,H),F(N.$$.fragment,H),F(I.$$.fragment,H),F(E.$$.fragment,H),F(S.$$.fragment,H),F(T.$$.fragment,H),F(Y.block),F(L.$$.fragment,H),F(j.$$.fragment,H),R=!0)},o(H){$(c.$$.fragment,H),$(N.$$.fragment,H),$(I.$$.fragment,H),$(E.$$.fragment,H),$(S.$$.fragment,H),$(T.$$.fragment,H);for(let W=0;W<3;W+=1){const Te=Y.blocks[W];$(Te)}$(L.$$.fragment,H),$(j.$$.fragment,H),R=!1},d(H){H&&(m(t),m(l),m(d),m(u),m(g),m(v),m(M),m(B),m(w)),m(e),Ee(c),Ee(N),Ee(I),Ee(E),Ee(S),Ee(T),Y.block.d(H),Y.token=null,Y=null,Ee(L),Ee(j),q=!1,tt(me)}}}function xr(s,e,t){let l,n,r,a,o,i;Ce(s,yt,S=>t(9,l=S)),Ce(s,wt,S=>t(1,n=S)),Ce(s,ht,S=>t(10,r=S)),Ce(s,ot,S=>t(11,a=S)),Ce(s,rt,S=>t(12,o=S)),Ce(s,Cs,S=>t(13,i=S));let c,d;hn(()=>(i&&E(),window.addEventListener("keydown",u),window.addEventListener("mousedown",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)})),rs.subscribe(S=>{S&&S.channels[1].addListener("noteon",_)});function u(){je.initAudio(),window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)}function _(S){if(c)return;const D=S.rawData;p(D[1],D[2])}function p(S,D){const T=n;T instanceof jt&&!(T!=null&&T.ended)&&l==="waiting"?N(S):T instanceof dt&&!(T!=null&&T.ended)&&l==="waiting"?(T.addPlayedNote(S),d||(d=setTimeout(v,2e3))):T||Ne.pushPlayed(S),o&&o.noteOn(S,a.fixedVelocity??D)}function g(){r.autoplay&&r.waitSeconds>0?t(0,c=setTimeout(()=>{r.autoplay&&De.nextGuess(),t(0,c=void 0)},r.waitSeconds*1e3)):r.autoplay?De.nextGuess():t(0,c=void 0)}function v(){var D;const S=n;if(S instanceof dt){const T=S.guess();Ne.setPlayed(((D=S.latestGuess.guessed)==null?void 0:D.notes)||[],T,-1),De.updateState(T?"correct":"wrong"),g()}d=void 0}function N(S){const D=n;if(D instanceof jt&&l==="waiting"){Ne.setTarget([Ne.getNote(D.current)]);const T=D.guess(S);De.updateState(T?"correct":"wrong"),Ne.pushPlayed(S,T,4e3),g()}}function y(S){const D=n;if(D instanceof dt&&l==="waiting"){const T=D.guessWrittenChord(S.detail);De.updateState(T?"correct":"wrong"),g()}}function I(S){const D=n;if(D instanceof Ut&&l==="waiting"){const T=S.detail.replaceAll("♭","b").replaceAll("♯","#"),M=D.guess(T);De.updateState(M?"correct":"wrong"),g()}}function A(S){p(S.detail,80)}async function E(){const S=await je.openMidi();"data"in S?S.data.name:(S.err,console.error(S.err))}function G(){na(),window.location.reload()}return[c,n,y,I,A,G,()=>jn.open("introduction",void 0)]}class qr extends ze{constructor(e){super(),$e(this,e,xr,Fr,We,{})}}export{sl as F,dt as G,qr as P,xn as S,jt as a,De as b,wt as c,kt as d,Vs as e,yt as g,rt as p,Bt as s,al as t};
