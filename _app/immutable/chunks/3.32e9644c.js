import{_ as ge}from"./preload-helper.a4192956.js";import{S as Fe,i as xe,s as He,e as v,n as V,a as b,b as C,p as j,d as m,f as h,Z as ve,N as q,g as R,h as d,_ as Je,q as z,t as F,F as Re,l as W,y as Ke,$ as tt,Q as Ce,R as Te,c as Ss,a0 as oe,u as Ns,j as Ls,k as Ds,V as es,W as yt,X as ts,a1 as ss,a2 as Ve,x as Le,H as Ps,B as Q,C as Y,D as de,r as pe,O as Xe,J as ke,K as ye,L as Ee,M as we,m as Ie,T as It,w as Be,a3 as Cn,o as se,P as be,a4 as cs,v as fn,a5 as Tn,a6 as ls,a7 as In,a8 as An,I as Sn}from"./vendor_svelte.69274a52.js";import{w as Qt,c as Nn,e as Ln,f as zs,g as Ws,h as Os,i as ns,j as as,k as Dn,a as qs,l as ys}from"./vendor.d5730520.js";import{a as Pn}from"./modal.3ae7c6e8.js";function Js(s,e,t){const l=s.slice();return l[22]=e[t].key,l[23]=e[t].value,l[24]=e[t].icon,l[26]=t,l}const On=s=>({}),$s=s=>({});function Qs(s){let e,t,l,n,r,a,o,i,c,f,u;const p=s[17].header,g=Ss(p,s,s[16],$s);let _=oe(s[0]),y=[];for(let k=0;k<_.length;k+=1)y[k]=Xs(Js(s,_,k));const L=k=>W(y[k],1,1,()=>{y[k]=null});return{c(){e=v("button"),l=V(),n=v("ul"),r=v("li"),g&&g.c(),a=V();for(let k=0;k<y.length;k+=1)y[k].c();this.h()},l(k){e=b(k,"BUTTON",{class:!0,tabindex:!0}),C(e).forEach(m),l=j(k),n=b(k,"UL",{class:!0});var T=C(n);r=b(T,"LI",{});var A=C(r);g&&g.l(A),A.forEach(m),a=j(T);for(let E=0;E<y.length;E+=1)y[E].l(T);T.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",o=ve(`items-list bg-white py-1.5 py-2 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(k,T){R(k,e,T),R(k,l,T),R(k,n,T),d(n,r),g&&g.m(r,null),d(n,a);for(let A=0;A<y.length;A+=1)y[A]&&y[A].m(n,null);c=!0,f||(u=z(e,"click",s[11]),f=!0)},p(k,T){if(s=k,g&&g.p&&(!c||T&65536)&&Ns(g,p,s,s[16],c?Ds(p,s[16],T,On):Ls(s[16]),$s),T&8457){_=oe(s[0]);let A;for(A=0;A<_.length;A+=1){const E=Js(s,_,A);y[A]?(y[A].p(E,T),F(y[A],1)):(y[A]=Xs(E),y[A].c(),F(y[A],1),y[A].m(n,null))}for(Re(),A=_.length;A<y.length;A+=1)L(A);Ke()}(!c||T&4&&o!==(o=ve(`items-list bg-white py-1.5 py-2 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",o)},i(k){if(!c){k&&es(()=>{c&&(t||(t=yt(e,ts,{duration:Yt},!0)),t.run(1))}),F(g,k);for(let T=0;T<_.length;T+=1)F(y[T]);k&&es(()=>{c&&(i||(i=yt(n,ss,{duration:Yt},!0)),i.run(1))}),c=!0}},o(k){k&&(t||(t=yt(e,ts,{duration:Yt},!1)),t.run(0)),W(g,k),y=y.filter(Boolean);for(let T=0;T<y.length;T+=1)W(y[T]);k&&(i||(i=yt(n,ss,{duration:Yt},!1)),i.run(0)),c=!1},d(k){k&&(m(e),m(l),m(n)),k&&t&&t.end(),g&&g.d(k),Ve(y,k),k&&i&&i.end(),f=!1,u()}}}function Ys(s){let e,t,l,n,r,a,o=s[23]+"",i,c,f,u,p;const g=[jn,Vn],_=[];function y(k,T){return k[24]?0:1}l=y(s),n=_[l]=g[l](s);function L(){return s[20](s[22])}return{c(){e=v("li"),t=v("button"),n.c(),r=V(),a=v("div"),i=Q(o),c=V(),this.h()},l(k){e=b(k,"LI",{});var T=C(e);t=b(T,"BUTTON",{class:!0});var A=C(t);n.l(A),r=j(A),a=b(A,"DIV",{});var E=C(a);i=Y(E,o),E.forEach(m),A.forEach(m),c=j(T),T.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),q(t,"selected",s[22]===s[3])},m(k,T){R(k,e,T),d(e,t),_[l].m(t,null),d(t,r),d(t,a),d(a,i),d(e,c),f=!0,u||(p=z(t,"click",L),u=!0)},p(k,T){s=k;let A=l;l=y(s),l===A?_[l].p(s,T):(Re(),W(_[A],1,1,()=>{_[A]=null}),Ke(),n=_[l],n?n.p(s,T):(n=_[l]=g[l](s),n.c()),F(n,1),n.m(t,r)),(!f||T&1)&&o!==(o=s[23]+"")&&de(i,o),(!f||T&9)&&q(t,"selected",s[22]===s[3])},i(k){f||(F(n),f=!0)},o(k){W(n),f=!1},d(k){k&&m(e),_[l].d(),u=!1,p()}}}function Vn(s){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){R(t,e,l)},p:pe,i:pe,o:pe,d(t){t&&m(e)}}}function jn(s){let e,t;return e=new Xe({props:{class:"mr-2",icon:s[24],width:16}}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,n){Ee(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.icon=l[24]),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){we(e,l)}}}function Xs(s){let e,t,l=!s[8][s[26]]&&Ys(s);return{c(){l&&l.c(),e=Le()},l(n){l&&l.l(n),e=Le()},m(n,r){l&&l.m(n,r),R(n,e,r),t=!0},p(n,r){n[8][n[26]]?l&&(Re(),W(l,1,1,()=>{l=null}),Ke()):l?(l.p(n,r),r&256&&F(l,1)):(l=Ys(n),l.c(),F(l,1),l.m(e.parentNode,e))},i(n){t||(F(l),t=!0)},o(n){W(l),t=!1},d(n){n&&m(e),l&&l.d(n)}}}function Bn(s){let e,t,l,n,r,a,o,i,c,f=s[6]&&Qs(s);return{c(){e=v("div"),t=v("input"),r=V(),f&&f.c(),this.h()},l(u){e=b(u,"DIV",{class:!0,id:!0});var p=C(e);t=b(p,"INPUT",{class:!0,title:!0}),r=j(p),f&&f.l(p),p.forEach(m),this.h()},h(){h(t,"class",l=ve(`${s[14].class||""} open-btn text-justify text-sm rounded`)+" svelte-h65upg"),h(t,"title",n=s[14].title||""),q(t,"disabled",s[4]),q(t,"open",s[6]),h(e,"class",a=ve(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(u,p){R(u,e,p),d(e,t),Je(t,s[7]),d(e,r),f&&f.m(e,null),s[21](e),o=!0,i||(c=[z(t,"input",s[18]),z(t,"click",s[9]),z(t,"focus",s[19]),z(t,"input",s[10]),z(t,"keydown",s[12])],i=!0)},p(u,[p]){(!o||p&16384&&l!==(l=ve(`${u[14].class||""} open-btn text-justify text-sm rounded`)+" svelte-h65upg"))&&h(t,"class",l),(!o||p&16384&&n!==(n=u[14].title||""))&&h(t,"title",n),p&128&&t.value!==u[7]&&Je(t,u[7]),(!o||p&16400)&&q(t,"disabled",u[4]),(!o||p&16448)&&q(t,"open",u[6]),u[6]?f?(f.p(u,p),p&64&&F(f,1)):(f=Qs(u),f.c(),F(f,1),f.m(e,null)):f&&(Re(),W(f,1,1,()=>{f=null}),Ke()),(!o||p&4&&a!==(a=ve(`relative ${u[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!o||p&2)&&h(e,"id",u[1])},i(u){o||(F(f),o=!0)},o(u){W(f),o=!1},d(u){u&&m(e),f&&f.d(),s[21](null),i=!1,tt(c)}}}const Yt=400;function Gn(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:r,id:a=void 0,containerClass:o=void 0,selected:i,disabled:c=void 0,onSelect:f}=e,u,p=!1,g=i,_=r.map(N=>!1);function y(){c||t(6,p=!p)}function L(N){t(8,_=r.map(D=>!D.value.toLowerCase().includes(N.currentTarget.value.toLowerCase())))}function k(){t(7,g=i),t(6,p=!1),t(8,_=r.map(N=>!1))}function T(N){if(N.key==="Enter"){const D=_.findIndex(K=>!K);g===i?k():D>-1&&t(6,p=f(r[D].key)),p||(t(8,_=r.map(K=>!1)),N.currentTarget instanceof HTMLElement&&N.currentTarget.blur())}else N.key==="Escape"&&(k(),N.currentTarget instanceof HTMLElement&&N.currentTarget.blur())}function A(N){t(6,p=f(N))}function E(){g=this.value,t(7,g),t(3,i)}const G=()=>t(6,p=!0),w=N=>A(N);function O(N){Ps[N?"unshift":"push"](()=>{u=N,t(5,u)})}return s.$$set=N=>{t(14,e=Ce(Ce({},e),Te(N))),"options"in N&&t(0,r=N.options),"id"in N&&t(1,a=N.id),"containerClass"in N&&t(2,o=N.containerClass),"selected"in N&&t(3,i=N.selected),"disabled"in N&&t(4,c=N.disabled),"onSelect"in N&&t(15,f=N.onSelect),"$$scope"in N&&t(16,n=N.$$scope)},s.$$.update=()=>{s.$$.dirty&8&&t(7,g=i),s.$$.dirty&1&&t(8,_=r.map(N=>!1))},e=Te(e),[r,a,o,i,c,u,p,g,_,y,L,k,T,A,e,f,n,l,E,G,w,O]}class dn extends Fe{constructor(e){super(),xe(this,e,Gn,Bn,He,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:15})}}const Zs={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function We(s,e=0,t=0){return{interval:`${s}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:s,semitones:hn(s,e,t),flats:e,sharps:t}}function hn(s,e,t){return(s<8?Zs[s]:Zs[s%7])-e+t+Math.floor(s/8)*12}function mn(s){let e,t=0,l=0;s<0?(t=1+Math.floor(-s/100),e=-s%100):s>100?(l=Math.floor(s/100),e=s%100):e=s;const n=hn(e,t,l);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(l)}`,interval_seq:e,semitones:n,flats:t,sharps:l}}const Mn=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let gs=[];function _n(){return Mn.map(s=>{const e=s[3].map(mn);return{suffixes:s[0],name:s[1][0],type:s[2],intervals:e}})}function Bt(s){gs.length===0&&(gs=_n());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return gs.find(t=>t.suffixes.find(l=>l===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function Un(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const r=(s.semitones+e)%12;return{...s,semitones:r<0?r+12:r,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function Es(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=s+r.semitones,o=e.scaleNotes.find(p=>p.semitones===a%12),i=r.flats>0,c=r.sharps>0,f=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(Un(o??e.notesMap.get(f),o?0:u,a))}return l}const el=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],Rn=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],tl=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function Kn(s){let e=0,t=0;for(let l=0;l<el.length;l+=1){const n=s.find(a=>a.note.slice(0,2)===el[l]),r=s.find(a=>a.note.slice(0,2)===Rn[l]);if(n)e+=1;else if(r)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:tl.get(e*-1)}:{flats:0,sharps:t,majorSignature:tl.get(t)}}function Fn(s){return s>=9?`${s>=10?"X":""}${s===9?"IX":"I".repeat(s%10)}`:`${s>=5?"V":""}${s===4?"IV":"I".repeat(s%5)}`}function pn(s){return s.map(e=>{const t=[We(1)];let l;return e.major?(t.push(We(3)),e.suffix.startsWith("+")?t.push(We(5,0,1)):e.suffix.startsWith("6")?t.push(We(6)):e.suffix.startsWith("7")?t.push(We(7,1)):e.suffix.startsWith("maj7")?t.push(We(7)):l=Bt("maj")):e.minor?(t.push(We(3,1)),e.suffix.startsWith("°")?t.push(We(5,1)):e.suffix.startsWith("6")?(t.push(We(6)),l=Bt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push(We(7,1)),l=Bt("m"+e.suffix)):l=Bt("m")):e.suffix.startsWith("sus2")?t.push(We(2)):e.suffix.startsWith("sus4")&&t.push(We(4)),t.length<=2&&t.push(We(5)),t.length<=2&&t.push(We(8)),l||(l=Bt(e.suffix)),{...l,intervals:t}})}function xn(s,e){let t=e.has(4)&&e.has(7),l=e.has(3)&&e.has(7);const n=Fn(s);let r="";return t||l||(e.has(3)&&e.has(6)?(r="°",l=!0):e.has(4)&&e.has(8)?(r="+",t=!0):e.has(3)&&e.has(10)?(l=!0,r="7"):e.has(4)&&e.has(10)?(r="7",t=!0):e.has(4)&&e.has(11)?(r="maj7",t=!0):e.has(3)&&e.has(8)?(r="6",l=!0):e.has(4)&&e.has(9)?(r="6",t=!0):e.has(2)?r="sus2":e.has(5)?r="sus4":e.has(7)?r="5":r="?"),{degree:s,roman:l?n.toLowerCase():n,suffix:r,major:t,minor:l,semitones:e}}function Hn(s){const e=s.length;return s.map((t,l)=>{const n=t.semitones,r=new Set;for(let a=1;a<e;a+=1){const o=s[(l+a)%e].semitones,i=o<=n?o+12-n:o-n;r.add(i)}return xn(t.interval_seq,r)})}const zn=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let vs=[];function us(){return zn.map(s=>{const e=s[0],t=s[1].map(mn),l=Hn(t);return{names:e,intervals:t,triads:l}})}function Wn(s){vs.length===0&&(vs=us());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return vs.find(t=>t.names.find(l=>l.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const qn=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,Jn=/^[0-9]$/,nt=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Vs(s){const e=s.midi+s.flats-s.sharps;return e===12?1:Math.floor((e-12)/12)}function et(s){return`${s.note}${Vs(s)}`}function Pt(s){const t=(s-12)%12;return{...nt[t],semitones:t,midi:s}}function $n(s,e=!0,t=!1){if(e&&!qn.test(s))return{err:`Unrecognized note "${s}"`,code:400};const l=s.trim(),n=l.charAt(0).toUpperCase(),r=nt.find(u=>u.note.charAt(0)===n&&u.note.length===1);if(!r)return{err:`Unable to find note ${l}`,code:500};const a=l.slice(1).split("").reduce((u,p)=>u+(p.toLowerCase()==="b"||p==="♭"?-1:p==="#"||p==="♯"?1:0),0);let o;if(Jn.test(l.charAt(l.length-1)))try{o=parseInt(l.charAt(l.length-1),10)}catch{}if(t&&o===void 0)return{err:`No octave provided: ${s}`,code:400};o===void 0&&(o=0);let i=(r.semitones+a)%12;i=i<0?i+12:i;const c=a<0?-a:0,f=a>0?a:0;return{data:{note:`${n}${"♭".repeat(c)}${"♯".repeat(f)}`,semitones:i,midi:12+o*12+i,flats:c,sharps:f}}}function gn(s){const e=nt.find(t=>t.note.charAt(0)===s.charAt(0)&&t.note.length===1);if(e){const t=s.slice(1).split("").reduce((n,r)=>n+(r.toLowerCase()==="b"||r==="♭"?-1:r==="#"||r==="♯"?1:0),0),l=(e.semitones+t)%12;return{note:s,semitones:l<0?l+12:l,flats:t<0?-t:0,sharps:t>0?t:0}}}const Qn=/^[a-gA-G][♭b#♯]?$/,bs="ABCDEFG";function Yn(s,e){return e.map(t=>bs.charAt((bs.indexOf(s)+t.interval_seq-1)%bs.length))}function Xn(s,e,t){return t.map((l,n)=>{const r=e[n],a=(s+l.semitones)%12,o=nt[a],i=o.note.charAt(0);if(i<r&&(i!=="A"||r!=="G")||i==="G"&&r==="A"){let c=1,f=nt[(a+c)%12];for(;f.note.charAt(0)!==r;)c+=1,f=nt[(a+c)%12];return{semitones:a,note:f.note+"♭".repeat(c),flats:c+(f.note.includes("♭")?1:0),sharps:0}}else if(i>r||i==="A"&&r==="G"){let c=1,f=a===0?nt.length-1:a-c,u=nt[f];for(;u.note.charAt(0)!==r;)c+=1,f=f===0?nt.length-1:f-1,u=nt[f];return{semitones:a,note:u.note+"♯".repeat(c),flats:0,sharps:c+(u.note.includes("♯")?1:0)}}else return{semitones:a,note:o.note,flats:o.flats,sharps:o.sharps}})}function Gt(s,e){if(!Qn.test(s))return{err:`Unknown key: ${s}`,code:400};const t=Wn(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const l=`${s.charAt(0).toUpperCase()}${s.charAt(1).replace("b","♭").replace("#","♯")}`,n=gn(l);if(!n)return{err:`Unable to find root for note: ${l}`,code:404};const r=Yn(l.charAt(0),t.intervals),a=Xn(n.semitones,r,t.intervals),o=new Map(nt.map(i=>{const c=a.find(f=>f.semitones===i.semitones);return c?[i.semitones,c]:[i.semitones,{...i}]}));return{data:{key:l,scale:t.names[0],names:t.names,...Kn(a),intervals:t.intervals.map(i=>({...i})),triads:t.triads.map(i=>({...i})),scaleNotes:a,notesMap:o}}}const ws=new Map;function Zn(s,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(s)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function ea(s,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(s)),{data:void 0}}catch(l){return{err:`Failed to store the value: ${l}`,code:400}}}function ht(s,e){const{key:t,storage:l="local",namespace:n="default"}=e,r=Zn(t,l),a=Ie(s);"data"in r?s.set(e.deserialize?e.deserialize(r.data):r.data):"err"in r&&(e!=null&&e.debug)&&console.info(r.err);const o=s.subscribe(c=>{const f=ea(e.serialize?e.serialize(c):c,t,l);"err"in f&&(e!=null&&e.debug)&&console.error(f.err)}),i=ws.get(n);return i?i.push({key:t,storage:l,value:s,defaultValue:a,unsubscribe:o}):ws.set(n,[{key:t,storage:l,value:s,defaultValue:a,unsubscribe:o}]),s}function ta(s=["default"],e){s.forEach(t=>{var l;(l=ws.get(t))==null||l.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function sa(s,e){const t=await fetch(s);if(!t.ok)return{err:t.statusText,code:t.status};const l=await t.arrayBuffer();return{data:await e.decodeAudioData(l)}}async function la(s,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],l=await Promise.all(t.map(r=>sa(`${s}${r}`,e))),n=[];return l.forEach(r=>{"err"in r?console.error(`Failed to load audio: ${r.err}`):n.push(r.data)}),n}class na{constructor(e,t,l,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(l),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(l))}on(e,t,l,n,r,a,o,i){this.noteA.buffer=e,this.noteA.playbackRate.value=l,this.biquadFilter.frequency.value=r,this.gainA.gain.value=a,this.gain.gain.value=i,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=o,this.noteB.start(0)),this.noteA.start(0)}off(e,t,l){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(l),this.noteB.stop(l),(n=this.damp)==null||n.start(0)}}class aa{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,l)=>{this.bufferlists.push(t),l===8?this.damper=t:l===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(l=>{this.noteOn(l,t)})}noteOn(e,t=80){if(e<109&&e>20){const l=this.notes.get(e);l&&(l.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),r=n+1,a=n*12+21,o=2**((e-69)/12)*440,i=t/127;let c=o*(2-(e-21)/50)+3*o*i;e<60&&(c=440*(3-(60-21)/50)+3*o*i);const f=1-(e%12/12+1)/12,u=Math.pow(2,(e-a)/12),p=0,g=0,_=i**1.4,y=new na(e,this.context,this.directGain,this.damper);y.on(this.bufferlists[n],this.bufferlists[r],u,p,c,f,g,_),this.notes.set(e,y)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const ra="/midi-note-trainer/",Cs=ht(Be(!1),{key:"midi-access"}),rs=Be(void 0),fs=ht(Be([60,84]),{key:"midi-range",storage:"session"}),os=It(fs,s=>[Pt(s[0]),Pt(s[1])]),sl=Be(void 0),at=Be(void 0),rt=ht(Be({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),qe={async openMidi(){return Qt.enable().then(()=>(Cs.set(!0),Qt.inputs.length>0?(rs.set(Qt.inputs[0]),{data:Qt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(s=>({err:s.toString(),code:403}))},disableMidi(){Cs.set(!1),rs.set(void 0)},setMidiRange(s){fs.set(s)},setInputValue(s,e){rt.update(t=>({...t,[s]:e})),s==="useSound"&&!e?at.set(void 0):s==="useSound"&&!Ie(at)&&this.initAudio()},async initAudio(){let s=Ie(sl);if(s||(s=new AudioContext,sl.set(s)),!Ie(at)){const e=new aa(s),t=await la(`${ra}audio`,s);e.load(t),at.set(e)}}};let lt;Cn({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}});const Tt=Be(["C","Major"]),Vt=It(Tt,s=>{const e=Gt(s[0],s[1]);return"data"in e?e.data:{key:s[0],scale:s[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),ll=Be([]),vt=Be([]);function Ts(s,e){if(s.length>0){const t=Date.now();let l=t;const n=s.filter(r=>(r.started+e>t&&(l=Math.min(l,r.started)),r.started+e>t));return!lt&&n.length>0&&(lt=setTimeout(()=>{lt=void 0,vt.update(r=>Ts(r,e))},e-(t-l)+100)),n}return s}const Ae={setKey(s){Tt.update(e=>[s,e[1]])},setScale(s){Tt.update(e=>[e[0],s])},setKeyAndScale(s,e){Tt.set([s,e])},setTarget(s=[]){ll.set(s)},getNote(s){return{...Ie(Vt).notesMap.get(s%12),midi:s}},pushPlayed(s,e,t){const n={...Ie(Vt).notesMap.get(s%12),midi:s},r=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(vt.update(o=>{const i=o.findIndex(c=>c.midi===s);return i>=0&&o.splice(i,1),[...o,{...n,color:a,started:r}]}),!lt&&t!==-1){const o=t??Ie(rt).keyFadeTimeout;lt=setTimeout(()=>{lt=void 0,vt.update(i=>Ts(i,o))},o)}},setPlayed(s,e,t){const l=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(vt.update(r=>[...s.map(a=>({...a,color:n,started:l}))]),!lt&&t!==-1){const r=t??Ie(rt).keyFadeTimeout;lt=setTimeout(()=>{lt=void 0,vt.update(a=>Ts(a,r))},r)}},clearPlayed(){vt.set([]),clearTimeout(lt),lt=void 0},clearScore(s=!1){s&&Tt.set(["C","Major"]),ll.set([]),vt.set([])}};class js{constructor(e,t,l){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=l;const n=[],{count:r}=l,a=t.map(i=>typeof i=="object"&&i!==null?{...i}:i);let o=l.duplicates;!l.duplicates&&r>a.length&&(console.warn(`Trying to create game with count ${r} larger than available unique values ${t.length}`),o=!0);for(let i=0;i<r;i+=1){const c=Math.floor(Math.random()*a.length);if(o)n.push(a[c]);else{const f=a.splice(c,1);f.length>0&&n.push(f[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function oa(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const r=(s.semitones+e)%12;return{...s,semitones:r<0?r+12:r,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function ia(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=s+r.semitones,o=e.scaleNotes.find(p=>p.semitones===a%12),i=r.flats>0,c=r.sharps>0,f=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(oa(o??e.notesMap.get(f),o?0:u,a))}return l}const ca=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function ua(s){const t=(s-12)%12;return{...ca[t],semitones:t,midi:s}}function fa(s){return`${s.note.trim().charAt(0).toUpperCase()}${"♭".repeat(s.flats)}${"♯".repeat(s.sharps)}`}class ft extends js{constructor(e,t,l){const n=t.range[0],r=t.range[1],a=new Set(t.scale.scaleNotes.map(i=>i.semitones)),o=l.chords.flatMap(i=>{const c=[],f=i.intervals.reduce((u,p)=>p.semitones>u?p.semitones:u,0);for(let u=n;u<=r-f;u+=1)if((!l.onlyScale||a.has(u%12))&&(!i.allowed||i.allowed.has(u%12))){const p=ia(u,t.scale,i.intervals);c.push({...i,rootNote:p[0].note,chord:`${p[0].note}${i.suffixes[0]}`,notes:p})}return c});super(e,o,t),this.played=new Set,this.opts=l}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${fa(e)}${e.chord.toLowerCase()}`,notes:[]};let l=this.current.chord===t.chord;return this.current.chord.slice(-3)==="maj"&&!l&&(l=this.current.chord.slice(0,-3)===t.chord),this.addGuessed(t,l)}guess(){const e=Array.from(this.played.values()).map(n=>ua(n)).sort((n,r)=>n.midi-r.midi);this.played.clear();const t={chord:"",notes:e},l=this.current.notes.every(n=>e.find(r=>r.midi%12===n.midi%12));return this.addGuessed(t,l)}}const da={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Mt extends js{constructor(e,t){const l=e==="keys-major"?"major":"minor";super(e,Object.keys(da[l]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class Ot extends js{constructor(e,t){const l=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-l+1)).map((r,a)=>l+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const vn={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},bt=Be("waiting"),dt=ht(Be(vn),{key:"game-options"}),Et=Be(void 0),Bs=Be(_n().map(s=>({...s,selected:!0}))),Se={play(...[s,e]){var i,c,f;let t;const l=Ie(Vt),n=Ie(fs),r=Ie(dt),a={scale:l,range:n,duplicates:r.duplicates,count:r.count};let o=[l.key,l.scale];if(s==="notes")t=new Ot(s,a),Ae.setTarget([Ae.getNote(t.current)]),(i=Ie(at))==null||i.noteOn(t.current);else if(s==="pitches")t=new Ot(s,a),Ae.setTarget(),qe.setInputValue("useSound",!0),(c=Ie(at))==null||c.noteOn(t.current);else if(s==="keys-major"||s=="keys-minor")t=new Mt(s,a),o=[t.current,s==="keys-major"?"major":"minor"];else if(s==="chords-play"||s==="chords-write")t=new ft(s,a,e);else if(s==="chords-diatonic"){const u=pn(l.triads).map((p,g)=>({...p,allowed:new Set([l.scaleNotes[g].semitones])}));t=new ft(s,a,{chords:u})}else throw Error("Unknown game type: "+s);return typeof t.current!="number"&&typeof t.current!="string"&&((f=Ie(at))==null||f.playChord(t.current.notes.map(u=>u.midi)),Ae.setTarget(t.current.notes)),Ae.setKeyAndScale(o[0],o[1]),Ae.clearPlayed(),bt.set("waiting"),Et.set(t),t},updateState(s){bt.set(s)},setOptionValue(s,e){dt.update(t=>({...t,[s]:e}))},toggleChords(s){Bs.update(e=>e.map(t=>({...t,selected:s(t)})))},nextGuess(){var e,t;const s=Ie(Et);s!=null&&s.ended?bt.set("ended"):s instanceof Ot?(s.type==="notes"?Ae.setTarget([Ae.getNote(s.current)]):Ae.setTarget(),Ae.clearPlayed(),(e=Ie(at))==null||e.noteOn(s.current),Se.updateState("waiting"),s.startTime()):s instanceof ft?(Ae.setTarget(s.current.notes),Ae.clearPlayed(),(t=Ie(at))==null||t.playChord(s==null?void 0:s.current.notes.map(l=>l.midi)),bt.set("waiting"),s.startTime()):s instanceof Mt&&(Ae.setKey(s.current),bt.set("waiting"),s.startTime())},clearGame(s=!1){const e=Ie(Et);e&&Ae.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),s&&dt.set(vn),Et.set(void 0),bt.set("waiting"),Ae.clearScore()}};function nl(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function al(s,e,t){const l=s.slice();return l[34]=e[t],l}function rl(s,e,t){const l=s.slice();return l[9]=e[t],l}function ol(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function il(s,e,t){const l=s.slice();return l[34]=e[t],l}function cl(s,e,t){const l=s.slice();return l[9]=e[t],l}function ha(s){let e,t=oe(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=ul(il(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r[0]&128){t=oe(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const o=il(n,t,a);l[a]?l[a].p(o,r):(l[a]=ul(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function ma(s){let e,t=oe(s[3][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=fl(cl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r[0]&8){t=oe(n[3][n[31]]);let a;for(a=0;a<t.length;a+=1){const o=cl(n,t,a);l[a]?l[a].p(o,r):(l[a]=fl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function ul(s){let e,t=s[34].interval+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&128&&t!==(t=n[34].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function fl(s){let e,t=s[9].note+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&8&&t!==(t=n[9].note+"")&&de(l,t)},d(n){n&&m(e)}}}function dl(s){let e,t,l,n,r,a,o=s[29].suffixes[0]+"",i,c,f,u,p,g,_=s[29].name+"",y,L,k,T;n=new Xe({props:{icon:s[29].selected?ns:as,width:12}});function A(){return s[24](s[29])}function E(O,N){return O[3][O[31]]&&O[3][O[31]].length>0?ma:ha}let G=E(s),w=G(s);return{c(){e=v("li"),t=v("button"),l=v("span"),ke(n.$$.fragment),r=V(),a=v("div"),i=Q(o),c=V(),f=v("li"),w.c(),p=V(),g=v("li"),y=Q(_),this.h()},l(O){e=b(O,"LI",{});var N=C(e);t=b(N,"BUTTON",{class:!0});var D=C(t);l=b(D,"SPAN",{class:!0});var K=C(l);ye(n.$$.fragment,K),K.forEach(m),r=j(D),a=b(D,"DIV",{class:!0});var B=C(a);i=Y(B,o),B.forEach(m),D.forEach(m),N.forEach(m),c=j(O),f=b(O,"LI",{class:!0,title:!0});var S=C(f);w.l(S),S.forEach(m),p=j(O),g=b(O,"LI",{class:!0});var P=C(g);y=Y(P,_),P.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),q(l,"text-green-500",s[29].selected),q(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1rg0xw5"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1rg0xw5"),q(t,"hidden",s[8]),h(f,"class","intervals svelte-1rg0xw5"),h(f,"title",u=s[29].intervals.map(pl).join("-")),h(g,"class","text-xs")},m(O,N){R(O,e,N),d(e,t),d(t,l),Ee(n,l,null),d(t,r),d(t,a),d(a,i),R(O,c,N),R(O,f,N),w.m(f,null),R(O,p,N),R(O,g,N),d(g,y),L=!0,k||(T=z(t,"click",A),k=!0)},p(O,N){s=O;const D={};N[0]&128&&(D.icon=s[29].selected?ns:as),n.$set(D),(!L||N[0]&128)&&q(l,"text-green-500",s[29].selected),(!L||N[0]&128)&&q(l,"text-gray-400",!s[29].selected),(!L||N[0]&128)&&o!==(o=s[29].suffixes[0]+"")&&de(i,o),(!L||N[0]&256)&&q(t,"hidden",s[8]),G===(G=E(s))&&w?w.p(s,N):(w.d(1),w=G(s),w&&(w.c(),w.m(f,null))),(!L||N[0]&128&&u!==(u=s[29].intervals.map(pl).join("-")))&&h(f,"title",u),(!L||N[0]&128)&&_!==(_=s[29].name+"")&&de(y,_)},i(O){L||(F(n.$$.fragment,O),L=!0)},o(O){W(n.$$.fragment,O),L=!1},d(O){O&&(m(e),m(c),m(f),m(p),m(g)),we(n),w.d(),k=!1,T()}}}function _a(s){let e,t=oe(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=hl(al(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r[0]&64){t=oe(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const o=al(n,t,a);l[a]?l[a].p(o,r):(l[a]=hl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function pa(s){let e,t=oe(s[4][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ml(rl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r[0]&16){t=oe(n[4][n[31]]);let a;for(a=0;a<t.length;a+=1){const o=rl(n,t,a);l[a]?l[a].p(o,r):(l[a]=ml(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function hl(s){let e,t=s[34].interval+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&64&&t!==(t=n[34].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function ml(s){let e,t=s[9].note+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1rg0xw5")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&16&&t!==(t=n[9].note+"")&&de(l,t)},d(n){n&&m(e)}}}function _l(s){let e,t,l,n,r,a,o=s[29].suffixes[0]+"",i,c,f,u,p,g,_=s[29].name+"",y,L,k,T;n=new Xe({props:{icon:s[29].selected?ns:as,width:12}});function A(){return s[25](s[29])}function E(O,N){return O[4][O[31]]&&O[4][O[31]].length>0?pa:_a}let G=E(s),w=G(s);return{c(){e=v("li"),t=v("button"),l=v("span"),ke(n.$$.fragment),r=V(),a=v("div"),i=Q(o),c=V(),f=v("li"),w.c(),p=V(),g=v("li"),y=Q(_),this.h()},l(O){e=b(O,"LI",{});var N=C(e);t=b(N,"BUTTON",{class:!0});var D=C(t);l=b(D,"SPAN",{class:!0});var K=C(l);ye(n.$$.fragment,K),K.forEach(m),r=j(D),a=b(D,"DIV",{class:!0});var B=C(a);i=Y(B,o),B.forEach(m),D.forEach(m),N.forEach(m),c=j(O),f=b(O,"LI",{class:!0,title:!0});var S=C(f);w.l(S),S.forEach(m),p=j(O),g=b(O,"LI",{class:!0});var P=C(g);y=Y(P,_),P.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),q(l,"text-green-500",s[29].selected),q(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1rg0xw5"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1rg0xw5"),q(t,"hidden",s[8]),h(f,"class","intervals svelte-1rg0xw5"),h(f,"title",u=s[29].intervals.map(gl).join("-")),h(g,"class","text-xs")},m(O,N){R(O,e,N),d(e,t),d(t,l),Ee(n,l,null),d(t,r),d(t,a),d(a,i),R(O,c,N),R(O,f,N),w.m(f,null),R(O,p,N),R(O,g,N),d(g,y),L=!0,k||(T=z(t,"click",A),k=!0)},p(O,N){s=O;const D={};N[0]&64&&(D.icon=s[29].selected?ns:as),n.$set(D),(!L||N[0]&64)&&q(l,"text-green-500",s[29].selected),(!L||N[0]&64)&&q(l,"text-gray-400",!s[29].selected),(!L||N[0]&64)&&o!==(o=s[29].suffixes[0]+"")&&de(i,o),(!L||N[0]&256)&&q(t,"hidden",s[8]),G===(G=E(s))&&w?w.p(s,N):(w.d(1),w=G(s),w&&(w.c(),w.m(f,null))),(!L||N[0]&64&&u!==(u=s[29].intervals.map(gl).join("-")))&&h(f,"title",u),(!L||N[0]&64)&&_!==(_=s[29].name+"")&&de(y,_)},i(O){L||(F(n.$$.fragment,O),L=!0)},o(O){W(n.$$.fragment,O),L=!1},d(O){O&&(m(e),m(c),m(f),m(p),m(g)),we(n),w.d(),k=!1,T()}}}function ga(s){let e,t,l,n,r="Chords",a,o,i,c,f,u,p,g,_,y,L,k,T,A,E,G,w,O="Key",N,D,K,B,S="Scale",P,U,I,M,H="Note",le,ae,he,X,Ge,te,ce,ue,De,ne;c=new Xe({props:{icon:Nn,width:20}}),p=new Xe({props:{icon:Ln,width:16}}),y=new Xe({props:{icon:s[5]?zs:Ws,width:16}}),T=new Xe({props:{icon:Os,width:16}}),U=new dn({props:{class:"bg-gray-100 w-48",containerClass:"input w-48",selected:s[1],options:s[10],onSelect:s[20]}});let ie=oe(s[7]),J=[];for(let x=0;x<ie.length;x+=1)J[x]=dl(ol(s,ie,x));const fe=x=>W(J[x],1,1,()=>{J[x]=null});let me=oe(s[6]),re=[];for(let x=0;x<me.length;x+=1)re[x]=_l(nl(s,me,x));const Ze=x=>W(re[x],1,1,()=>{re[x]=null});return{c(){e=v("div"),t=v("fieldset"),l=v("legend"),n=v("button"),n.textContent=r,a=V(),o=v("div"),i=v("button"),ke(c.$$.fragment),f=V(),u=v("button"),ke(p.$$.fragment),g=V(),_=v("button"),ke(y.$$.fragment),L=V(),k=v("button"),ke(T.$$.fragment),A=V(),E=v("div"),G=v("div"),w=v("label"),w.textContent=O,N=V(),D=v("input"),K=V(),B=v("label"),B.textContent=S,P=V(),ke(U.$$.fragment),I=V(),M=v("label"),M.textContent=H,le=V(),ae=v("input"),he=V(),X=v("ul");for(let x=0;x<J.length;x+=1)J[x].c();Ge=V(),te=v("ul");for(let x=0;x<re.length;x+=1)re[x].c();this.h()},l(x){e=b(x,"DIV",{class:!0});var Z=C(e);t=b(Z,"FIELDSET",{class:!0});var _e=C(t);l=b(_e,"LEGEND",{class:!0});var st=C(l);n=b(st,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1knqzl6"&&(n.textContent=r),st.forEach(m),a=j(_e),o=b(_e,"DIV",{class:!0});var ee=C(o);i=b(ee,"BUTTON",{class:!0});var Pe=C(i);ye(c.$$.fragment,Pe),Pe.forEach(m),f=j(ee),u=b(ee,"BUTTON",{class:!0});var ze=C(u);ye(p.$$.fragment,ze),ze.forEach(m),g=j(ee),_=b(ee,"BUTTON",{class:!0});var ot=C(_);ye(y.$$.fragment,ot),ot.forEach(m),L=j(ee),k=b(ee,"BUTTON",{class:!0});var $e=C(k);ye(T.$$.fragment,$e),$e.forEach(m),ee.forEach(m),A=j(_e),E=b(_e,"DIV",{class:!0});var Qe=C(E);G=b(Qe,"DIV",{class:!0});var Oe=C(G);w=b(Oe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(w)!=="svelte-14m38zf"&&(w.textContent=O),N=j(Oe),D=b(Oe,"INPUT",{class:!0,id:!0}),K=j(Oe),B=b(Oe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(B)!=="svelte-bxhcb0"&&(B.textContent=S),P=j(Oe),ye(U.$$.fragment,Oe),I=j(Oe),M=b(Oe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(M)!=="svelte-dmbfli"&&(M.textContent=H),le=j(Oe),ae=b(Oe,"INPUT",{class:!0,id:!0}),Oe.forEach(m),he=j(Qe),X=b(Qe,"UL",{class:!0});var jt=C(X);for(let Me=0;Me<J.length;Me+=1)J[Me].l(jt);jt.forEach(m),Ge=j(Qe),te=b(Qe,"UL",{class:!0});var At=C(te);for(let Me=0;Me<re.length;Me+=1)re[Me].l(At);At.forEach(m),Qe.forEach(m),_e.forEach(m),Z.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),q(i,"hidden",s[8]),h(u,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(u,"hidden",s[8]),h(_,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(_,"hidden",s[8]),h(k,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(k,"hidden",s[8]),h(o,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),h(w,"class","mr-4 font-bold svelte-1rg0xw5"),h(w,"for","scale-key"),h(D,"class","input bg-gray-100 w-12 px-1 rounded"),h(D,"id","scale-key"),D.value=s[0],h(B,"class","font-bold svelte-1rg0xw5"),h(B,"for","scale-key"),h(M,"class","font-bold svelte-1rg0xw5"),h(M,"for","scale-key"),h(ae,"class","input bg-gray-100 w-12 px-1 rounded"),h(ae,"id","scale-key"),ae.value=s[2],h(G,"class","flex mb-2 options svelte-1rg0xw5"),h(X,"class","chord-list w-full svelte-1rg0xw5"),h(te,"class","chord-list w-full svelte-1rg0xw5"),h(E,"class","body svelte-1rg0xw5"),q(E,"hidden",s[8]),h(t,"class","flex flex-col relative rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1rg0xw5"),q(t,"collapsed",s[8]),h(e,"class",ce=ve(`${s[21].class||""}`)+" svelte-1rg0xw5")},m(x,Z){R(x,e,Z),d(e,t),d(t,l),d(l,n),d(t,a),d(t,o),d(o,i),Ee(c,i,null),d(o,f),d(o,u),Ee(p,u,null),d(o,g),d(o,_),Ee(y,_,null),d(o,L),d(o,k),Ee(T,k,null),d(t,A),d(t,E),d(E,G),d(G,w),d(G,N),d(G,D),d(G,K),d(G,B),d(G,P),Ee(U,G,null),d(G,I),d(G,M),d(G,le),d(G,ae),d(E,he),d(E,X);for(let _e=0;_e<J.length;_e+=1)J[_e]&&J[_e].m(X,null);d(E,Ge),d(E,te);for(let _e=0;_e<re.length;_e+=1)re[_e]&&re[_e].m(te,null);ue=!0,De||(ne=[z(n,"click",s[12]),z(i,"click",s[16]),z(u,"click",s[17]),z(_,"click",s[18]),z(k,"click",s[19]),z(D,"input",s[13]),z(ae,"input",s[14])],De=!0)},p(x,Z){(!ue||Z[0]&256)&&q(i,"hidden",x[8]),(!ue||Z[0]&256)&&q(u,"hidden",x[8]);const _e={};Z[0]&32&&(_e.icon=x[5]?zs:Ws),y.$set(_e),(!ue||Z[0]&256)&&q(_,"hidden",x[8]),(!ue||Z[0]&256)&&q(k,"hidden",x[8]),(!ue||Z[0]&1&&D.value!==x[0])&&(D.value=x[0]);const st={};if(Z[0]&2&&(st.selected=x[1]),U.$set(st),(!ue||Z[0]&4&&ae.value!==x[2])&&(ae.value=x[2]),Z[0]&33160){ie=oe(x[7]);let ee;for(ee=0;ee<ie.length;ee+=1){const Pe=ol(x,ie,ee);J[ee]?(J[ee].p(Pe,Z),F(J[ee],1)):(J[ee]=dl(Pe),J[ee].c(),F(J[ee],1),J[ee].m(X,null))}for(Re(),ee=ie.length;ee<J.length;ee+=1)fe(ee);Ke()}if(Z[0]&33104){me=oe(x[6]);let ee;for(ee=0;ee<me.length;ee+=1){const Pe=nl(x,me,ee);re[ee]?(re[ee].p(Pe,Z),F(re[ee],1)):(re[ee]=_l(Pe),re[ee].c(),F(re[ee],1),re[ee].m(te,null))}for(Re(),ee=me.length;ee<re.length;ee+=1)Ze(ee);Ke()}(!ue||Z[0]&256)&&q(E,"hidden",x[8]),(!ue||Z[0]&256)&&q(t,"collapsed",x[8]),(!ue||Z[0]&2097152&&ce!==(ce=ve(`${x[21].class||""}`)+" svelte-1rg0xw5"))&&h(e,"class",ce)},i(x){if(!ue){F(c.$$.fragment,x),F(p.$$.fragment,x),F(y.$$.fragment,x),F(T.$$.fragment,x),F(U.$$.fragment,x);for(let Z=0;Z<ie.length;Z+=1)F(J[Z]);for(let Z=0;Z<me.length;Z+=1)F(re[Z]);ue=!0}},o(x){W(c.$$.fragment,x),W(p.$$.fragment,x),W(y.$$.fragment,x),W(T.$$.fragment,x),W(U.$$.fragment,x),J=J.filter(Boolean);for(let Z=0;Z<J.length;Z+=1)W(J[Z]);re=re.filter(Boolean);for(let Z=0;Z<re.length;Z+=1)W(re[Z]);ue=!1},d(x){x&&m(e),we(c),we(p),we(y),we(T),we(U),Ve(J,x),Ve(re,x),De=!1,tt(ne)}}}const pl=s=>s.interval,gl=s=>s.interval;function va(s,e,t){let l,n,r,a,o,i;be(s,Bs,I=>t(23,o=I));let c="C",f="Major",u=Gt(c,f),p="",g,_=[],y=[];const k=us().map(I=>({key:I.names[0],value:I.names[0]})),T=ht(Be(!0),{key:"chords-hidden"});be(s,T,I=>t(8,i=I));function A(){T.update(I=>!I)}function E(){const I=g&&60+g.semitones;if("err"in u||!I)t(3,_=[]),t(4,y=[]);else{const M=u.data;t(3,_=n.map(H=>Es(I,M,H.intervals))),t(4,y=r.map(H=>Es(I,M,H.intervals)))}}function G({currentTarget:{value:I}}){t(0,c=`${I.charAt(0).toUpperCase()}${I.charAt(1).toLowerCase()}`),u=Gt(c,f),E()}function w({currentTarget:{value:I}}){t(2,p=`${I.charAt(0).toUpperCase()}${I.charAt(1).toLowerCase()}`),t(9,g=gn(p)),E()}function O(I){Se.toggleChords(M=>M.name===I.name?!M.selected:M.selected)}function N(){const I=H=>H.suffixes[0]==="maj"||H.suffixes[0]==="m",M=o.filter(I).every(H=>H.selected);Se.toggleChords(H=>I(H)?!M:H.selected)}function D(){const I=H=>H.suffixes[0]==="maj7"||H.suffixes[0]==="m7"||H.suffixes[0]==="7"||H.suffixes[0]==="dim7"||H.suffixes[0]==="aug7",M=o.filter(I).every(H=>H.selected);Se.toggleChords(H=>I(H)?!M:H.selected)}function K(){Se.toggleChords(I=>!a)}function B(){Se.toggleChords(I=>!0)}function S(I){var M;return t(1,f=(M=k.find(H=>I===H.key))==null?void 0:M.value),u=Gt(c,f),E(),!1}const P=I=>O(I),U=I=>O(I);return s.$$set=I=>{t(21,e=Ce(Ce({},e),Te(I)))},s.$$.update=()=>{s.$$.dirty[0]&8388608&&t(22,l=o),s.$$.dirty[0]&4194304&&t(7,n=l.filter((I,M)=>M<l.length/2)),s.$$.dirty[0]&4194304&&t(6,r=l.filter((I,M)=>M>=l.length/2)),s.$$.dirty[0]&4194304&&t(5,a=l.every(I=>I.selected))},e=Te(e),[c,f,p,_,y,a,r,n,i,g,k,T,A,G,w,O,N,D,K,B,S,e,l,o,P,U]}class ba extends Fe{constructor(e){super(),xe(this,e,va,ga,He,{},null,[-1,-1])}}function vl(s,e,t){const l=s.slice();return l[10]=e[t],l}function ka(s){let e;return{c(){e=Q(" ")},l(t){e=Y(t," ")},m(t,l){R(t,e,l)},p:pe,d(t){t&&m(e)}}}function ya(s){let e,t,l="Played:",n,r=oe(s[2]),a=[];for(let o=0;o<r.length;o+=1)a[o]=bl(vl(s,r,o));return{c(){e=v("div"),t=v("span"),t.textContent=l,n=V();for(let o=0;o<a.length;o+=1)a[o].c()},l(o){e=b(o,"DIV",{});var i=C(e);t=b(i,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1g6xxhn"&&(t.textContent=l),n=j(i);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(m)},m(o,i){R(o,e,i),d(e,t),d(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,i){if(i&4){r=oe(o[2]);let c;for(c=0;c<r.length;c+=1){const f=vl(o,r,c);a[c]?a[c].p(f,i):(a[c]=bl(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}},d(o){o&&m(e),Ve(a,o)}}}function Ea(s){let e,t,l="Result:",n,r,a,o=s[0].correct+"",i,c,f=s[0].sampled.length+"",u,p,g,_,y,L=s[0].avgTime+"",k,T;return{c(){e=v("div"),t=v("span"),t.textContent=l,n=V(),r=v("span"),a=Q("["),i=Q(o),c=Q(" / "),u=Q(f),p=Q("]"),g=V(),_=v("span"),y=Q("avg "),k=Q(L),T=Q("s"),this.h()},l(A){e=b(A,"DIV",{class:!0});var E=C(e);t=b(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1eqfbgx"&&(t.textContent=l),n=j(E),r=b(E,"SPAN",{class:!0});var G=C(r);a=Y(G,"["),i=Y(G,o),c=Y(G," / "),u=Y(G,f),p=Y(G,"]"),G.forEach(m),g=j(E),_=b(E,"SPAN",{});var w=C(_);y=Y(w,"avg "),k=Y(w,L),T=Y(w,"s"),w.forEach(m),E.forEach(m),this.h()},h(){h(r,"class","mx-2"),h(e,"class","flex")},m(A,E){R(A,e,E),d(e,t),d(e,n),d(e,r),d(r,a),d(r,i),d(r,c),d(r,u),d(r,p),d(e,g),d(e,_),d(_,y),d(_,k),d(_,T)},p(A,E){E&1&&o!==(o=A[0].correct+"")&&de(i,o),E&1&&f!==(f=A[0].sampled.length+"")&&de(u,f),E&1&&L!==(L=A[0].avgTime+"")&&de(k,L)},d(A){A&&m(e)}}}function wa(s){var O,N,D,K;let e,t,l="Target:",n,r,a=((O=s[0].latestGuess.target)==null?void 0:O.chord)+"",o,i,c,f=((N=s[0].latestGuess.target)==null?void 0:N.notes.map(kl).join(" "))+"",u,p,g,_="Guessed:",y,L,k=((D=s[0].latestGuess.guessed)==null?void 0:D.chord)+"",T,A,E,G=((K=s[0].latestGuess.guessed)==null?void 0:K.notes.map(yl).join(" "))+"",w;return{c(){e=v("div"),t=v("span"),t.textContent=l,n=V(),r=v("span"),o=Q(a),i=V(),c=v("span"),u=Q(f),p=V(),g=v("span"),g.textContent=_,y=V(),L=v("span"),T=Q(k),A=V(),E=v("span"),w=Q(G),this.h()},l(B){e=b(B,"DIV",{class:!0});var S=C(e);t=b(S,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(S),r=b(S,"SPAN",{});var P=C(r);o=Y(P,a),P.forEach(m),i=j(S),c=b(S,"SPAN",{});var U=C(c);u=Y(U,f),U.forEach(m),p=j(S),g=b(S,"SPAN",{"data-svelte-h":!0}),se(g)!=="svelte-104368"&&(g.textContent=_),y=j(S),L=b(S,"SPAN",{});var I=C(L);T=Y(I,k),I.forEach(m),A=j(S),E=b(S,"SPAN",{});var M=C(E);w=Y(M,G),M.forEach(m),S.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(B,S){R(B,e,S),d(e,t),d(e,n),d(e,r),d(r,o),d(e,i),d(e,c),d(c,u),d(e,p),d(e,g),d(e,y),d(e,L),d(L,T),d(e,A),d(e,E),d(E,w)},p(B,S){var P,U,I,M;S&1&&a!==(a=((P=B[0].latestGuess.target)==null?void 0:P.chord)+"")&&de(o,a),S&1&&f!==(f=((U=B[0].latestGuess.target)==null?void 0:U.notes.map(kl).join(" "))+"")&&de(u,f),S&1&&k!==(k=((I=B[0].latestGuess.guessed)==null?void 0:I.chord)+"")&&de(T,k),S&1&&G!==(G=((M=B[0].latestGuess.guessed)==null?void 0:M.notes.map(yl).join(" "))+"")&&de(w,G)},d(B){B&&m(e)}}}function Ca(s){let e,t,l="Target:",n,r,a=s[0].latestGuess.target+"",o,i,c,f,u,p="Guessed:",g,_,y=s[0].latestGuess.guessed+"",L,k,T;return{c(){e=v("div"),t=v("span"),t.textContent=l,n=V(),r=v("span"),o=Q(a),i=V(),c=v("span"),f=V(),u=v("span"),u.textContent=p,g=V(),_=v("span"),L=Q(y),k=V(),T=v("span"),this.h()},l(A){e=b(A,"DIV",{class:!0});var E=C(e);t=b(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(E),r=b(E,"SPAN",{});var G=C(r);o=Y(G,a),G.forEach(m),i=j(E),c=b(E,"SPAN",{}),C(c).forEach(m),f=j(E),u=b(E,"SPAN",{"data-svelte-h":!0}),se(u)!=="svelte-104368"&&(u.textContent=p),g=j(E),_=b(E,"SPAN",{});var w=C(_);L=Y(w,y),w.forEach(m),k=j(E),T=b(E,"SPAN",{}),C(T).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(A,E){R(A,e,E),d(e,t),d(e,n),d(e,r),d(r,o),d(e,i),d(e,c),d(e,f),d(e,u),d(e,g),d(e,_),d(_,L),d(e,k),d(e,T)},p(A,E){E&1&&a!==(a=A[0].latestGuess.target+"")&&de(o,a),E&1&&y!==(y=A[0].latestGuess.guessed+"")&&de(L,y)},d(A){A&&m(e)}}}function Ta(s){let e,t,l="Target:",n,r,a=et(Pt(s[0].latestGuess.target||0))+"",o,i,c,f,u,p="Guessed:",g,_,y=et(Pt(s[0].latestGuess.guessed||0))+"",L,k,T;return{c(){e=v("div"),t=v("span"),t.textContent=l,n=V(),r=v("span"),o=Q(a),i=V(),c=v("span"),f=V(),u=v("span"),u.textContent=p,g=V(),_=v("span"),L=Q(y),k=V(),T=v("span"),this.h()},l(A){e=b(A,"DIV",{class:!0});var E=C(e);t=b(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(E),r=b(E,"SPAN",{});var G=C(r);o=Y(G,a),G.forEach(m),i=j(E),c=b(E,"SPAN",{}),C(c).forEach(m),f=j(E),u=b(E,"SPAN",{"data-svelte-h":!0}),se(u)!=="svelte-104368"&&(u.textContent=p),g=j(E),_=b(E,"SPAN",{});var w=C(_);L=Y(w,y),w.forEach(m),k=j(E),T=b(E,"SPAN",{}),C(T).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(A,E){R(A,e,E),d(e,t),d(e,n),d(e,r),d(r,o),d(e,i),d(e,c),d(e,f),d(e,u),d(e,g),d(e,_),d(_,L),d(e,k),d(e,T)},p(A,E){E&1&&a!==(a=et(Pt(A[0].latestGuess.target||0))+"")&&de(o,a),E&1&&y!==(y=et(Pt(A[0].latestGuess.guessed||0))+"")&&de(L,y)},d(A){A&&m(e)}}}function bl(s){let e,t=et(s[10])+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","mx-1")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r&4&&t!==(t=et(n[10])+"")&&de(l,t)},d(n){n&&m(e)}}}function Ia(s){let e;return{c(){e=Q(" ")},l(t){e=Y(t," ")},m(t,l){R(t,e,l)},p:pe,d(t){t&&m(e)}}}function Aa(s){let e,t="Next",l,n,r="Autoplay",a,o;return{c(){e=v("button"),e.textContent=t,l=V(),n=v("button"),n.textContent=r,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1nvnoba"&&(e.textContent=t),l=j(i),n=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1cfj1sl"&&(n.textContent=r),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){R(i,e,c),R(i,l,c),R(i,n,c),a||(o=[z(e,"click",s[4]),z(n,"click",s[5])],a=!0)},p:pe,d(i){i&&(m(e),m(l),m(n)),a=!1,tt(o)}}}function Sa(s){let e,t="Stop autoplay",l,n;return{c(){e=v("button"),e.textContent=t,this.h()},l(r){e=b(r,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){h(e,"class","btn primary")},m(r,a){R(r,e,a),l||(n=z(e,"click",s[9]),l=!0)},p:pe,d(r){r&&m(e),l=!1,n()}}}function Na(s){let e,t="Try Again",l,n,r="Clear",a,o;return{c(){e=v("button"),e.textContent=t,l=V(),n=v("button"),n.textContent=r,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-y911ux"&&(e.textContent=t),l=j(i),n=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-11mnk9v"&&(n.textContent=r),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){R(i,e,c),R(i,l,c),R(i,n,c),a||(o=[z(e,"click",s[6]),z(n,"click",s[7])],a=!0)},p:pe,d(i){i&&(m(e),m(l),m(n)),a=!1,tt(o)}}}function La(s){let e,t,l,n;function r(u,p){return u[0]instanceof Ot&&(u[1]==="correct"||u[1]==="wrong")?Ta:u[0]instanceof Mt&&(u[1]==="correct"||u[1]==="wrong")?Ca:u[0]instanceof ft&&(u[1]==="correct"||u[1]==="wrong")?wa:u[0]&&u[1]==="ended"?Ea:u[2].length>0?ya:ka}let a=r(s),o=a(s);function i(u,p){return u[0]&&u[1]==="ended"?Na:u[0]&&u[3].autoplay?Sa:u[0]?Aa:Ia}let c=i(s),f=c(s);return{c(){e=v("div"),o.c(),l=V(),n=v("div"),f.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var p=C(e);o.l(p),p.forEach(m),l=j(u),n=b(u,"DIV",{class:!0});var g=C(n);f.l(g),g.forEach(m),this.h()},h(){h(e,"class",t=ve(`${s[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),h(n,"class","mt-2 h-8")},m(u,p){R(u,e,p),o.m(e,null),R(u,l,p),R(u,n,p),f.m(n,null)},p(u,[p]){a===(a=r(u))&&o?o.p(u,p):(o.d(1),o=a(u),o&&(o.c(),o.m(e,null))),p&256&&t!==(t=ve(`${u[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&h(e,"class",t),c===(c=i(u))&&f?f.p(u,p):(f.d(1),f=c(u),f&&(f.c(),f.m(n,null)))},i:pe,o:pe,d(u){u&&(m(e),m(l),m(n)),o.d(),f.d()}}}const kl=s=>s.note,yl=s=>s.note;function Da(s,e,t){let l,n,r;be(s,bt,p=>t(1,l=p)),be(s,vt,p=>t(2,n=p)),be(s,dt,p=>t(3,r=p));let{game:a}=e;function o(){Se.nextGuess()}function i(){Se.setOptionValue("autoplay",!0),Se.nextGuess()}function c(){a instanceof ft?Se.play(a.type,a.opts):a&&Se.play(a.type,void 0)}function f(){Se.clearGame()}const u=()=>Se.setOptionValue("autoplay",!1);return s.$$set=p=>{t(8,e=Ce(Ce({},e),Te(p))),"game"in p&&t(0,a=p.game)},e=Te(e),[a,l,n,r,o,i,c,f,e,u]}class Pa extends Fe{constructor(e){super(),xe(this,e,Da,La,He,{game:0})}}function El(s,e,t){const l=s.slice();return l[15]=e[t].key,l[16]=e[t].value,l[17]=e[t].icon,l[19]=t,l}const Oa=s=>({}),wl=s=>({}),Va=s=>({}),Cl=s=>({});function Tl(s){let e,t,l,n,r,a,o,i,c,f,u;const p=s[12].header,g=Ss(p,s,s[11],wl);let _=oe(s[0]),y=[];for(let k=0;k<_.length;k+=1)y[k]=Il(El(s,_,k));const L=k=>W(y[k],1,1,()=>{y[k]=null});return{c(){e=v("button"),l=V(),n=v("ul"),r=v("li"),g&&g.c(),a=V();for(let k=0;k<y.length;k+=1)y[k].c();this.h()},l(k){e=b(k,"BUTTON",{class:!0,tabindex:!0}),C(e).forEach(m),l=j(k),n=b(k,"UL",{class:!0});var T=C(n);r=b(T,"LI",{});var A=C(r);g&&g.l(A),A.forEach(m),a=j(T);for(let E=0;E<y.length;E+=1)y[E].l(T);T.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",o=ve(`items-list bg-white py-1.5 py-2 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(k,T){R(k,e,T),R(k,l,T),R(k,n,T),d(n,r),g&&g.m(r,null),d(n,a);for(let A=0;A<y.length;A+=1)y[A]&&y[A].m(n,null);c=!0,f||(u=z(e,"click",s[7]),f=!0)},p(k,T){if(s=k,g&&g.p&&(!c||T&2048)&&Ns(g,p,s,s[11],c?Ds(p,s[11],T,Oa):Ls(s[11]),wl),T&265){_=oe(s[0]);let A;for(A=0;A<_.length;A+=1){const E=El(s,_,A);y[A]?(y[A].p(E,T),F(y[A],1)):(y[A]=Il(E),y[A].c(),F(y[A],1),y[A].m(n,null))}for(Re(),A=_.length;A<y.length;A+=1)L(A);Ke()}(!c||T&4&&o!==(o=ve(`items-list bg-white py-1.5 py-2 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",o)},i(k){if(!c){k&&es(()=>{c&&(t||(t=yt(e,ts,{duration:Xt},!0)),t.run(1))}),F(g,k);for(let T=0;T<_.length;T+=1)F(y[T]);k&&es(()=>{c&&(i||(i=yt(n,ss,{duration:Xt},!0)),i.run(1))}),c=!0}},o(k){k&&(t||(t=yt(e,ts,{duration:Xt},!1)),t.run(0)),W(g,k),y=y.filter(Boolean);for(let T=0;T<y.length;T+=1)W(y[T]);k&&(i||(i=yt(n,ss,{duration:Xt},!1)),i.run(0)),c=!1},d(k){k&&(m(e),m(l),m(n)),k&&t&&t.end(),g&&g.d(k),Ve(y,k),k&&i&&i.end(),f=!1,u()}}}function ja(s){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){R(t,e,l)},p:pe,i:pe,o:pe,d(t){t&&m(e)}}}function Ba(s){let e,t;return e=new Xe({props:{class:"mr-2",icon:s[17],width:16}}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,n){Ee(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.icon=l[17]),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){we(e,l)}}}function Il(s){let e,t,l,n,r,a,o=s[16]+"",i,c,f,u,p;const g=[Ba,ja],_=[];function y(k,T){return k[17]?0:1}l=y(s),n=_[l]=g[l](s);function L(){return s[13](s[15])}return{c(){e=v("li"),t=v("button"),n.c(),r=V(),a=v("div"),i=Q(o),c=V(),this.h()},l(k){e=b(k,"LI",{});var T=C(e);t=b(T,"BUTTON",{class:!0});var A=C(t);n.l(A),r=j(A),a=b(A,"DIV",{});var E=C(a);i=Y(E,o),E.forEach(m),A.forEach(m),c=j(T),T.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),q(t,"selected",s[15]===s[3])},m(k,T){R(k,e,T),d(e,t),_[l].m(t,null),d(t,r),d(t,a),d(a,i),d(e,c),f=!0,u||(p=z(t,"click",L),u=!0)},p(k,T){s=k;let A=l;l=y(s),l===A?_[l].p(s,T):(Re(),W(_[A],1,1,()=>{_[A]=null}),Ke(),n=_[l],n?n.p(s,T):(n=_[l]=g[l](s),n.c()),F(n,1),n.m(t,r)),(!f||T&1)&&o!==(o=s[16]+"")&&de(i,o),(!f||T&9)&&q(t,"selected",s[15]===s[3])},i(k){f||(F(n),f=!0)},o(k){W(n),f=!1},d(k){k&&m(e),_[l].d(),u=!1,p()}}}function Ga(s){let e,t,l,n,r,a,o,i,c;const f=s[12].value,u=Ss(f,s,s[11],Cl);let p=s[6]&&Tl(s);return{c(){e=v("div"),t=v("button"),u&&u.c(),r=V(),p&&p.c(),this.h()},l(g){e=b(g,"DIV",{class:!0,id:!0});var _=C(e);t=b(_,"BUTTON",{class:!0,title:!0});var y=C(t);u&&u.l(y),y.forEach(m),r=j(_),p&&p.l(_),_.forEach(m),this.h()},h(){h(t,"class",l=ve(`${s[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),h(t,"title",n=s[9].title||""),q(t,"disabled",s[4]),q(t,"open",s[6]),h(e,"class",a=ve(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(g,_){R(g,e,_),d(e,t),u&&u.m(t,null),d(e,r),p&&p.m(e,null),s[14](e),o=!0,i||(c=z(t,"click",s[7]),i=!0)},p(g,[_]){u&&u.p&&(!o||_&2048)&&Ns(u,f,g,g[11],o?Ds(f,g[11],_,Va):Ls(g[11]),Cl),(!o||_&512&&l!==(l=ve(`${g[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&h(t,"class",l),(!o||_&512&&n!==(n=g[9].title||""))&&h(t,"title",n),(!o||_&528)&&q(t,"disabled",g[4]),(!o||_&576)&&q(t,"open",g[6]),g[6]?p?(p.p(g,_),_&64&&F(p,1)):(p=Tl(g),p.c(),F(p,1),p.m(e,null)):p&&(Re(),W(p,1,1,()=>{p=null}),Ke()),(!o||_&4&&a!==(a=ve(`relative ${g[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!o||_&2)&&h(e,"id",g[1])},i(g){o||(F(u,g),F(p),o=!0)},o(g){W(u,g),W(p),o=!1},d(g){g&&m(e),u&&u.d(g),p&&p.d(),s[14](null),i=!1,c()}}}const Xt=400;function Ma(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:r,id:a=void 0,containerClass:o=void 0,selected:i=void 0,disabled:c=void 0,onSelect:f}=e,u,p=!1;function g(){c||t(6,p=!p)}function _(k){t(6,p=f(k))}const y=k=>_(k);function L(k){Ps[k?"unshift":"push"](()=>{u=k,t(5,u)})}return s.$$set=k=>{t(9,e=Ce(Ce({},e),Te(k))),"options"in k&&t(0,r=k.options),"id"in k&&t(1,a=k.id),"containerClass"in k&&t(2,o=k.containerClass),"selected"in k&&t(3,i=k.selected),"disabled"in k&&t(4,c=k.disabled),"onSelect"in k&&t(10,f=k.onSelect),"$$scope"in k&&t(11,n=k.$$scope)},e=Te(e),[r,a,o,i,c,u,p,g,_,e,f,n,l,y,L]}class Ua extends Fe{constructor(e){super(),xe(this,e,Ma,Ga,He,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:10})}}function Ra(s){let e,t,l,n,r,a,o;return{c(){e=v("label"),t=v("input"),l=V(),n=v("div"),this.h()},l(i){e=b(i,"LABEL",{class:!0});var c=C(e);t=b(c,"INPUT",{type:!0,class:!0}),l=j(c),n=b(c,"DIV",{class:!0}),C(n).forEach(m),c.forEach(m),this.h()},h(){t.checked=s[0],h(t,"type","checkbox"),h(t,"class","svelte-k5zciy"),h(n,"class","slider svelte-k5zciy"),h(e,"class",r=ve(`${s[3].class||""} toggle`)+" svelte-k5zciy")},m(i,c){R(i,e,c),d(e,t),s[5](t),d(e,l),d(e,n),a||(o=[z(t,"change",s[4]),z(t,"keydown",s[2])],a=!0)},p(i,[c]){c&1&&(t.checked=i[0]),c&8&&r!==(r=ve(`${i[3].class||""} toggle`)+" svelte-k5zciy")&&h(e,"class",r)},i:pe,o:pe,d(i){i&&m(e),s[5](null),a=!1,tt(o)}}}function Ka(s,e,t){let{checked:l}=e,n;function r(i){i.key==="Enter"&&n.click()}function a(i){cs.call(this,s,i)}function o(i){Ps[i?"unshift":"push"](()=>{n=i,t(1,n)})}return s.$$set=i=>{t(3,e=Ce(Ce({},e),Te(i))),"checked"in i&&t(0,l=i.checked)},e=Te(e),[l,n,r,e,a,o]}class Fa extends Fe{constructor(e){super(),xe(this,e,Ka,Ra,He,{checked:0})}}function Al(s){let e;return{c(){e=v("li"),this.h()},l(t){e=b(t,"LI",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","m-[0.175rem] mr-0")},m(t,l){R(t,e,l)},d(t){t&&m(e)}}}function Sl(s){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),C(e).forEach(m),this.h()},h(){h(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-1479mcy")},m(t,l){R(t,e,l)},d(t){t&&m(e)}}}function Nl(s){let e,t=s[0].note.note+"",l,n;return{c(){e=v("div"),l=Q(t),n=Q(s[2]),this.h()},l(r){e=b(r,"DIV",{class:!0});var a=C(e);l=Y(a,t),n=Y(a,s[2]),a.forEach(m),this.h()},h(){h(e,"class","absolute top-0 left-0")},m(r,a){R(r,e,a),d(e,l),d(e,n)},p(r,a){a&1&&t!==(t=r[0].note.note+"")&&de(l,t),a&4&&de(n,r[2])},d(r){r&&m(e)}}}function xa(s){let e,t,l,n,r,a,o=Dl(s[0].key)+"",i,c,f,u,p=s[0].key==="{enter}"&&Al(),g=s[0].key==="{enter}"&&Sl(),_=s[0].note&&Nl(s);return{c(){p&&p.c(),e=V(),t=v("li"),l=v("button"),g&&g.c(),n=V(),_&&_.c(),r=V(),a=v("div"),i=Q(o),this.h()},l(y){p&&p.l(y),e=j(y),t=b(y,"LI",{class:!0});var L=C(t);l=b(L,"BUTTON",{class:!0});var k=C(l);g&&g.l(k),n=j(k),_&&_.l(k),r=j(k),a=b(k,"DIV",{});var T=C(a);i=Y(T,o),T.forEach(m),k.forEach(m),L.forEach(m),this.h()},h(){h(l,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex justify-center svelte-1479mcy"),q(l,"items-center",!s[0].note),q(l,"items-end",s[0].note),h(t,"class",c=ve(`${s[3].class||""} m-[0.175rem] ${Ll(s[0].size)}`)+" svelte-1479mcy"),q(t,"enter",s[0].key==="{enter}"),q(t,"captured",s[1])},m(y,L){p&&p.m(y,L),R(y,e,L),R(y,t,L),d(t,l),g&&g.m(l,null),d(l,n),_&&_.m(l,null),d(l,r),d(l,a),d(a,i),f||(u=z(l,"click",s[5]),f=!0)},p(y,[L]){y[0].key==="{enter}"?p||(p=Al(),p.c(),p.m(e.parentNode,e)):p&&(p.d(1),p=null),y[0].key==="{enter}"?g||(g=Sl(),g.c(),g.m(l,n)):g&&(g.d(1),g=null),y[0].note?_?_.p(y,L):(_=Nl(y),_.c(),_.m(l,r)):_&&(_.d(1),_=null),L&1&&o!==(o=Dl(y[0].key)+"")&&de(i,o),L&1&&q(l,"items-center",!y[0].note),L&1&&q(l,"items-end",y[0].note),L&9&&c!==(c=ve(`${y[3].class||""} m-[0.175rem] ${Ll(y[0].size)}`)+" svelte-1479mcy")&&h(t,"class",c),L&9&&q(t,"enter",y[0].key==="{enter}"),L&11&&q(t,"captured",y[1])},i:pe,o:pe,d(y){y&&(m(e),m(t)),p&&p.d(y),g&&g.d(),_&&_.d(),f=!1,u()}}}function Ll(s){return s&&Number.isInteger(s)?`size-${s}`:s?`size-${Math.floor(s)}-${Math.floor(s*10)-Math.floor(s)*10}`:"size-1"}function Dl(s){return s==="{empty}"?"":s==="{bksp}"?"Backspace":s==="{tab}"?"Tab":s==="{enter}"?"Enter":s==="{lock}"?"Capslock":s==="{shift}"?"Shift":s}function Ha(s,e,t){let l,n;be(s,fs,i=>t(4,n=i));let{value:r,captured:a}=e;function o(i){cs.call(this,s,i)}return s.$$set=i=>{t(3,e=Ce(Ce({},e),Te(i))),"value"in i&&t(0,r=i.value),"captured"in i&&t(1,a=i.captured)},s.$$.update=()=>{s.$$.dirty&17&&t(2,l=r.note?Vs({midi:r.note.semitones+n[0],flats:0,sharps:0}):0)},e=Te(e),[r,a,l,e,n,o]}class za extends Fe{constructor(e){super(),xe(this,e,Ha,xa,He,{value:0,captured:1})}}const Is={ar:{name:"Arabic",import:ge(()=>import("./arabic-TJdw9TqS.cd2ea0d3.js"),[],import.meta.url)},hye:{name:"Armenian Eastern",import:ge(()=>import("./armenianEastern-LNw2V_Kb.e28a3752.js"),[],import.meta.url)},hyw:{name:"Armenian Western",import:ge(()=>import("./armenianWestern-zmIyLd1o.38785f27.js"),[],import.meta.url)},be:{name:"Belarusian",import:ge(()=>import("./belarusian--mjombxK.1fcd2897.js"),[],import.meta.url)},bn:{name:"Bengali",import:ge(()=>import("./bengali-2-qmZ9ZL.b883376f.js"),[],import.meta.url)},pt:{name:"Brazilian",import:ge(()=>import("./brazilian-_aUR_EdS.2b1b1fd9.js"),[],import.meta.url)},my:{name:"Burmese",import:ge(()=>import("./burmese-DNLMDG0C.87e404a2.js"),[],import.meta.url)},zh:{name:"Chinese",import:ge(()=>import("./chinese-Vv6o_huT.c292fc41.js"),[],import.meta.url)},cs:{name:"Czech",import:ge(()=>import("./czech-AAz70GMU.0cffa7b5.js"),[],import.meta.url)},en:{name:"English",import:Promise.resolve().then(()=>qa)},fa:{name:"Farsi",import:ge(()=>import("./farsi-akNUiiy1.62727da0.js"),[],import.meta.url)},fr:{name:"French",import:ge(()=>import("./french-GKHnJmdK.94658ac4.js"),[],import.meta.url)},ka:{name:"Georgian",import:ge(()=>import("./georgian-SQFgQD3n.89ef2935.js"),[],import.meta.url)},de:{name:"German",import:ge(()=>import("./german-Wy-4wNPv.fa6f994f.js"),[],import.meta.url)},el:{name:"Greek",import:ge(()=>import("./greek-lay7OJjb.9c2c2556.js"),[],import.meta.url)},he:{name:"Hebrew",import:ge(()=>import("./hebrew-V6ZtD_jG.48875cb9.js"),[],import.meta.url)},hi:{name:"Hindi",import:ge(()=>import("./hindi-uNDpRlqm.76d6c741.js"),[],import.meta.url)},hu:{name:"Hungarian",import:ge(()=>import("./hungarian-Wnxix6n4.45652951.js"),[],import.meta.url)},it:{name:"Italian",import:ge(()=>import("./italian-eDgp6wHT.50798155.js"),[],import.meta.url)},ja:{name:"Japanese",import:ge(()=>import("./japanese-Zv_Q1DDl.d78f358a.js"),[],import.meta.url)},mk:{name:"Macedonian",import:ge(()=>import("./macedonian-Dot-tKLH.04517113.js"),[],import.meta.url)},yo:{name:"Nigerian",import:ge(()=>import("./nigerian-IYPkF_j3.5b26cce3.js"),[],import.meta.url)},nko:{name:"Nko",import:ge(()=>import("./nko-EI8QPheE.3268d6cd.js"),[],import.meta.url)},no:{name:"Norwegian",import:ge(()=>import("./norwegian-sal6SH2s.847bc0b5.js"),[],import.meta.url)},pl:{name:"Polish",import:ge(()=>import("./polish-yYQdl0aw.936f6a15.js"),[],import.meta.url)},pa:{name:"Punjabi",import:ge(()=>import("./punjabi-0AIiTj_p.01c98b73.js"),[],import.meta.url)},ru:{name:"Russian",import:ge(()=>import("./russian-sQ885m4A.ff7543fb.js"),[],import.meta.url)},es:{name:"Spanish",import:ge(()=>import("./spanish-Ww3zYGV_.0ed27470.js"),[],import.meta.url)},sv:{name:"Swedish",import:ge(()=>import("./swedish-RpPWxHx_.af07bd5e.js"),[],import.meta.url)},te:{name:"Telugu",import:ge(()=>import("./telugu-WPb3GXn5.f8d401d9.js"),[],import.meta.url)},th:{name:"Thai",import:ge(()=>import("./thai-Q-LTk3Id.1148f3d0.js"),[],import.meta.url)},tr:{name:"Turkish",import:ge(()=>import("./turkish-qQEi80RS.cb967a2e.js"),[],import.meta.url)},uk:{name:"Ukrainian",import:ge(()=>import("./ukrainian-CLoogq0p.3e4781c0.js"),[],import.meta.url)},ug:{name:"Uyghur",import:ge(()=>import("./uyghur-eF-99IjK.066cbfdb.js"),[],import.meta.url)}};function bn(s){if(!("default"in s.layout)||!("shift"in s.layout))throw console.error(s),Error("Invalid layout import");return{default:s.layout.default,shift:s.layout.shift}}async function Wa(s=["en"]){let e={code:"en",layout:Is.en,index:99};Object.entries(Is).forEach(([l,n])=>{for(let r=0;r<s.length;r+=1)l===s[r]&&(!e||e.index>r)&&(e={code:l,layout:n,index:r})});const t=await e.layout.import;return{code:e.code,name:e.layout.name,imported:bn(t.default)}}const kn={layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},qa=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"}));function Dt(s,e,t,l=0){const n=t?[0,2,4,5,7,9,11]:[-1,1,3,-1,6,8,10];let r=-1,a=0;return s.forEach((o,i)=>{const c=o.key.charAt(0)==="{";!c&&r===-1&&(r=i);const f=n[(i-r+l)%n.length];if(r!==-1&&i!==0&&!c&&f>=0){const u=e[f],p=Math.floor((l+i-r)/n.length);o.note={...u,semitones:u.semitones+(p>0?p:0)*12},o.note,a=i-r}}),a}const Zt=[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Enter"],["Capslock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"]];function Ja(s){let e=[];const t=s.default.map((l,n)=>{if(n===0){const r=l.split(" ").filter(a=>a!=="{bksp}");for(;r.length!==13;)r.length<13?r.unshift("{empty}"):r.shift();return[...r,"{bksp}"]}else if(n===1){const r=l.split(" ");return e=r.slice(13),[...r.slice(0,13),"{enter}"]}else{if(n===2)return[...l.split(" ").slice(0,13).filter(r=>r!=="{enter}"),...e].slice(0,13);if(n===3){const r=["{shift}",...l.split(" ").slice(1,12).filter(o=>o!=="{shift}"),"{shift}"];let a=1;for(;r.length<13;)r.splice(a,0,"{empty}"),a=a===1?-1:1;return r}else return l.split(" ")}});return[t[0].map((l,n)=>({key:l,code:Zt[0][n]})),t[1].map((l,n)=>({key:l,code:Zt[1][n]})),t[2].map((l,n)=>({key:l,code:Zt[2][n]})),t[3].map((l,n)=>({key:l,code:Zt[3][n]}))]}class is{constructor(e){return this.rows=[[],[],[],[]],this.opts={hotkeydRows:"middle-row",layout:{code:"en",name:"English",imported:bn(kn)},...e},this.loadRowsFromImport(this.opts.layout.imported)}setOptions(e){this.opts={...this.opts,...e}}loadRowsFromImport(e){return this.rows=Ja(e),this}setRows(e){return this.rows=e,this}setRowHotkeys(e,t){}setNotes(e){if(this.opts.hotkeydRows==="middle-row")Dt(this.rows[1],e,!1),Dt(this.rows[2],e,!0);else{Dt(this.rows[2],e,!1);const t=Dt(this.rows[3],e,!0);Dt(this.rows[0],e,!1,t),Dt(this.rows[1],e,!0,t+1)}}static createWithRows(e,t){return new is(e).setRows(t)}}const Gs=/^[a-gA-G]$/,yn=/^[♭Bb#♯sS]$/,$a=/^[0-9]$/;let $="",ut;function Qa(s,e){const{useHotkeys:t}=Ie(rt),l=Ie(Us).get(s);if(t&&$.length===0&&l&&l.note)return $="",{e:"guessed-key",data:l.note.note};if(!t&&$.length===0&&Gs.test(e))return $+=e.toUpperCase(),{e:"string",data:$};if(!t&&$.length>0&&yn.test(e))return e==="b"||e==="B"?$+="♭":$+="♯",{e:"string",data:$};if(s==="Backspace"&&$.length>0)return $=$.slice(0,-1),{e:"string",data:$};if(s==="Enter"&&$.length>0){const n=$;return $="",{e:"guessed-key",data:n}}return!1}function Ya(s,e){if(s==="Enter"&&$.length>0){const t={note:"",flats:0,sharps:0,chord:""};for(let l=0;l<$.length;l+=1)l===0?t.note+=$[l]:t.chord.length>0?t.chord+=$[l].toLowerCase():$[l]==="♭"?(t.note+=$[l],t.flats+=1):$[l]==="♯"?(t.note+=$[l],t.sharps+=1):t.chord+=$[l].toLowerCase();return $="",{e:"guessed-chord",data:t}}else{if(s==="Backspace"&&$.length>0)return $=$.slice(0,-1),{e:"string",data:$};if($.length===0&&Gs.test(e))return $+=e.toUpperCase(),{e:"string",data:$};if($.length>0&&e.length===1)return $.length===1&&(e==="b"||e==="B")?$+="♭":$.length===1&&e==="#"?$+="♯":$+=e,{e:"string",data:$}}return!1}function Xa(s,e,t){const{useAutoOctave:l,useHotkeys:n}=Ie(rt);let r;const o=Ie(Us).get(s),i=(o==null?void 0:o.key)||"";let c=!1;if(!ut&&n&&(o!=null&&o.note)?(ut=o.note,l&&(r=Vs({midi:Ie(os)[0].midi,flats:0,sharps:0})),c="note"):!n&&$.length===0&&Gs.test(e)?($+=e.toUpperCase(),c="input"):!n&&$.length>0&&yn.test(e)&&(e==="b"||e==="B"?$+="♭":$+="♯",c="input"),!c&&$a.test(i))try{r=parseInt(i)}catch{}if(ut&&r!==void 0){const f=ut.semitones+(r+1+(t?1:0))*12;return ut=void 0,{e:"guessed-note",data:f}}else if($&&r!==void 0){const f=Ct.findNote($),u=f?f.semitones+(r+1)*12:void 0;return ut=void 0,$="",u!==void 0?{e:"guessed-note",data:u}:{e:"string",data:$}}else if(s==="Backspace"&&(ut||$.length>0))return ut=void 0,$=$.slice(0,-1),{e:"string",data:$};return c==="note"?{e:"note",data:ut}:c==="input"?{e:"string",data:$}:!1}const Za={code:"en",name:"English",imported:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},ks=[],wt=Be(void 0);It(wt,s=>s?[s.rowIndex,s.nextIndex]:[-1,-1]);const kt=ht(Be({useCustom:!1,customLayout:[[],[],[],[]],kbdOpts:{layout:Za,hotkeydRows:"middle-row"}}),{key:"keyboard-settings"}),Ms=It([Vt,kt],([s,e])=>{let t;return e.useCustom&&e.customLayout?t=is.createWithRows(e.kbdOpts,e.customLayout):t=new is(e.kbdOpts),t.setNotes(Array.from(s.notesMap.values())),t}),er=It(Ms,s=>s.rows.map(e=>e.map((t,l)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&l===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t}))),Us=It(Ms,s=>new Map([...s.rows[0].map(e=>[e.code,e]),...s.rows[1].map(e=>[e.code,e]),...s.rows[2].map(e=>[e.code,e]),...s.rows[3].map(e=>[e.code,e])])),tr=It(Us,s=>Array.from(s.values()).map(e=>e.note).filter(e=>e!==void 0)),Ct={async setLayout(s){const e=await Wa(s);kt.update(t=>({...t,kbdOpts:{...t.kbdOpts,layout:e}}))},setCustomLayout(s){if(s){const e=Ie(Ms);kt.update(t=>({...t,useCustom:s,customLayout:t.customLayout.map((l,n)=>l.length===0?e.rows[n].map(r=>({...r})):l)}))}else kt.update(e=>({...e,useCustom:s}))},toggleRows(s){kt.update(e=>({...e,kbdOpts:{...e.kbdOpts,hotkeydRows:s??(e.kbdOpts.hotkeydRows==="middle-row"?"two-rows":"middle-row")}}))},captureHotkeyRow(s){let e=-1,t=0;const l=Ie(kt).customLayout[s].map((n,r)=>(n.key.charAt(0)!=="{"&&e===-1&&(e=r),t+=n.key.charAt(0)!=="{"?1:0,n));console.log("count",t),wt.set({row:l,nextIndex:e,rowIndex:s,count:t})},findNote(s){return Ie(tr).find(e=>{if(e.note.charAt(0)===s.charAt(0)){const t=s.slice(1).split("").reduce((l,n)=>l+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},handleInput(s,e,t=!1){const l=Ie(Et),n=Ie(wt);if(n){console.log("capturing ",ks.length);const{nextIndex:r,row:a}=n;return s==="Escape"?wt.set(void 0):ks.find(i=>i.code===s)||(ks.push({code:s,key:e}),a[r]={...a[r],code:s,key:e},r===n.count?(kt.update(i=>({...i,customLayout:i.customLayout.map((c,f)=>f!==n.rowIndex?c:a)})),wt.set(void 0)):wt.set({...n,nextIndex:r+1,row:a})),!1}else{if(l instanceof Mt)return Qa(s,e.toUpperCase());if(l instanceof ft&&l.type==="chords-write")return Ya(s,e);if(Ie(rt).useKeyboard)return Xa(s,e.toUpperCase(),t)}return!1}};function Pl(s,e,t){const l=s.slice();return l[12]=e[t],l[14]=t,l}function Ol(s,e,t){const l=s.slice();return l[15]=e[t],l[17]=t,l}function sr(s){let e,t=s[0].kbdOpts.layout.name+"",l;return{c(){e=v("div"),l=Q(t),this.h()},l(n){e=b(n,"DIV",{slot:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"slot","value")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r&1&&t!==(t=n[0].kbdOpts.layout.name+"")&&de(l,t)},d(n){n&&m(e)}}}function Vl(s){let e,t,l,n,r;t=new Xe({props:{icon:Dn,width:20}});function a(){return s[11](s[14])}return{c(){e=v("button"),ke(t.$$.fragment),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var i=C(e);ye(t.$$.fragment,i),i.forEach(m),this.h()},h(){h(e,"class","flex items-center justify-center rounded w-full h-full hover:bg-gray-300")},m(o,i){R(o,e,i),Ee(t,e,null),l=!0,n||(r=z(e,"click",a),n=!0)},p(o,i){s=o},i(o){l||(F(t.$$.fragment,o),l=!0)},o(o){W(t.$$.fragment,o),l=!1},d(o){o&&m(e),we(t),n=!1,r()}}}function jl(s){let e,t;return e=new za({props:{value:s[15],captured:s[4]&&s[4].rowIndex===s[14]&&s[4].nextIndex===s[17]||!1}}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,n){Ee(e,l,n),t=!0},p(l,n){const r={};n&2&&(r.value=l[15]),n&16&&(r.captured=l[4]&&l[4].rowIndex===l[14]&&l[4].nextIndex===l[17]||!1),e.$set(r)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){we(e,l)}}}function Bl(s){let e,t,l,n,r=s[3][s[14]]&&Vl(s),a=oe(s[12]),o=[];for(let c=0;c<a.length;c+=1)o[c]=jl(Ol(s,a,c));const i=c=>W(o[c],1,1,()=>{o[c]=null});return{c(){e=v("li"),r&&r.c(),t=V();for(let c=0;c<o.length;c+=1)o[c].c();l=Le(),this.h()},l(c){e=b(c,"LI",{class:!0});var f=C(e);r&&r.l(f),f.forEach(m),t=j(c);for(let u=0;u<o.length;u+=1)o[u].l(c);l=Le(),this.h()},h(){h(e,"class","col-span-2 svelte-l2edp8")},m(c,f){R(c,e,f),r&&r.m(e,null),R(c,t,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(c,f);R(c,l,f),n=!0},p(c,f){if(c[3][c[14]]?r?(r.p(c,f),f&8&&F(r,1)):(r=Vl(c),r.c(),F(r,1),r.m(e,null)):r&&(Re(),W(r,1,1,()=>{r=null}),Ke()),f&18){a=oe(c[12]);let u;for(u=0;u<a.length;u+=1){const p=Ol(c,a,u);o[u]?(o[u].p(p,f),F(o[u],1)):(o[u]=jl(p),o[u].c(),F(o[u],1),o[u].m(l.parentNode,l))}for(Re(),u=a.length;u<o.length;u+=1)i(u);Ke()}},i(c){if(!n){F(r);for(let f=0;f<a.length;f+=1)F(o[f]);n=!0}},o(c){W(r),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)W(o[f]);n=!1},d(c){c&&(m(e),m(t),m(l)),r&&r.d(),Ve(o,c)}}}function lr(s){let e,t,l,n,r,a="Layout",o,i,c,f,u,p="Custom",g,_,y,L,k,T,A="One row",E,G,w,O,N="Two rows",D,K,B,S,P,U,I,M,H,le,ae;i=new Ua({props:{id:"keyboard-lang",containerClass:"w-36",class:"p-1 w-36",options:s[5],onSelect:s[6],$$slots:{value:[sr]},$$scope:{ctx:s}}}),G=new Fa({props:{checked:!s[2]}}),G.$on("change",s[9]),S=new Xe({props:{icon:Os,width:16}});let he=oe(s[1]),X=[];for(let te=0;te<he.length;te+=1)X[te]=Bl(Pl(s,he,te));const Ge=te=>W(X[te],1,1,()=>{X[te]=null});return{c(){e=v("div"),t=v("div"),l=v("div"),n=v("div"),r=v("label"),r.textContent=a,o=V(),ke(i.$$.fragment),c=V(),f=v("div"),u=v("label"),u.textContent=p,g=V(),_=v("input"),L=V(),k=v("div"),T=v("label"),T.textContent=A,E=V(),ke(G.$$.fragment),w=V(),O=v("label"),O.textContent=N,D=V(),K=v("div"),B=v("button"),ke(S.$$.fragment),P=V(),U=v("div"),I=v("ul");for(let te=0;te<X.length;te+=1)X[te].c();this.h()},l(te){e=b(te,"DIV",{class:!0});var ce=C(e);t=b(ce,"DIV",{class:!0});var ue=C(t);l=b(ue,"DIV",{class:!0});var De=C(l);n=b(De,"DIV",{class:!0});var ne=C(n);r=b(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(r)!=="svelte-1xsr9lq"&&(r.textContent=a),o=j(ne),ye(i.$$.fragment,ne),ne.forEach(m),c=j(De),f=b(De,"DIV",{class:!0});var ie=C(f);u=b(ie,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(u)!=="svelte-11aw8ub"&&(u.textContent=p),g=j(ie),_=b(ie,"INPUT",{class:!0,id:!0,type:!0}),ie.forEach(m),L=j(De),k=b(De,"DIV",{class:!0});var J=C(k);T=b(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(T)!=="svelte-17p0yvw"&&(T.textContent=A),E=j(J),ye(G.$$.fragment,J),w=j(J),O=b(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(O)!=="svelte-1wr3nwv"&&(O.textContent=N),J.forEach(m),De.forEach(m),D=j(ue),K=b(ue,"DIV",{class:!0});var fe=C(K);B=b(fe,"BUTTON",{class:!0});var me=C(B);ye(S.$$.fragment,me),me.forEach(m),fe.forEach(m),ue.forEach(m),P=j(ce),U=b(ce,"DIV",{class:!0});var re=C(U);I=b(re,"UL",{class:!0});var Ze=C(I);for(let x=0;x<X.length;x+=1)X[x].l(Ze);Ze.forEach(m),re.forEach(m),ce.forEach(m),this.h()},h(){h(r,"class","font-bold mr-4"),h(r,"for","middle-row"),h(n,"class","my-1 flex items-center justify-between mr-2"),h(u,"class","font-bold mr-4"),h(u,"for","custom-layout"),h(_,"class","h-[20px]"),h(_,"id","custom-layout"),h(_,"type","checkbox"),_.checked=y=s[0].useCustom,h(f,"class","my-1 flex items-center justify-between mr-12"),h(T,"class","font-bold mr-4"),h(T,"for","two-rows"),h(O,"class","font-bold ml-4"),h(O,"for","two-rows"),h(k,"class","my-1 flex items-center justify-between mr-12"),h(l,"class","options svelte-l2edp8"),h(B,"class","rounded px-1 py-1 hover:bg-gray-200"),h(K,"class","flex items-center justify-center"),h(t,"class","flex justify-between"),h(I,"class","keyboard svelte-l2edp8"),h(U,"class","flex flex-col gap-1.5"),h(e,"class",M=ve(`${s[10].class||""} relative`)+" svelte-l2edp8")},m(te,ce){R(te,e,ce),d(e,t),d(t,l),d(l,n),d(n,r),d(n,o),Ee(i,n,null),d(l,c),d(l,f),d(f,u),d(f,g),d(f,_),d(l,L),d(l,k),d(k,T),d(k,E),Ee(G,k,null),d(k,w),d(k,O),d(t,D),d(t,K),d(K,B),Ee(S,B,null),d(e,P),d(e,U),d(U,I);for(let ue=0;ue<X.length;ue+=1)X[ue]&&X[ue].m(I,null);H=!0,le||(ae=[z(_,"change",s[7]),z(B,"click",nr)],le=!0)},p(te,[ce]){const ue={};ce&262145&&(ue.$$scope={dirty:ce,ctx:te}),i.$set(ue),(!H||ce&1&&y!==(y=te[0].useCustom))&&(_.checked=y);const De={};if(ce&4&&(De.checked=!te[2]),G.$set(De),ce&282){he=oe(te[1]);let ne;for(ne=0;ne<he.length;ne+=1){const ie=Pl(te,he,ne);X[ne]?(X[ne].p(ie,ce),F(X[ne],1)):(X[ne]=Bl(ie),X[ne].c(),F(X[ne],1),X[ne].m(I,null))}for(Re(),ne=he.length;ne<X.length;ne+=1)Ge(ne);Ke()}(!H||ce&1024&&M!==(M=ve(`${te[10].class||""} relative`)+" svelte-l2edp8"))&&h(e,"class",M)},i(te){if(!H){F(i.$$.fragment,te),F(G.$$.fragment,te),F(S.$$.fragment,te);for(let ce=0;ce<he.length;ce+=1)F(X[ce]);H=!0}},o(te){W(i.$$.fragment,te),W(G.$$.fragment,te),W(S.$$.fragment,te),X=X.filter(Boolean);for(let ce=0;ce<X.length;ce+=1)W(X[ce]);H=!1},d(te){te&&m(e),we(i),we(G),we(S),Ve(X,te),le=!1,tt(ae)}}}function nr(){}function ar(s,e,t){let l,n,r,a,o;be(s,kt,_=>t(0,r=_)),be(s,er,_=>t(1,a=_)),be(s,wt,_=>t(4,o=_)),fn(()=>{Ct.setLayout(navigator.languages)});const i=Object.entries(Is).map(([_,y])=>({key:_,value:y.name}));function c(_){return Ct.setLayout([_]),!1}function f(_){Ct.setCustomLayout(_.currentTarget.checked)}function u(_){Ct.captureHotkeyRow(_)}function p(){Ct.toggleRows()}const g=_=>u(_);return s.$$set=_=>{t(10,e=Ce(Ce({},e),Te(_)))},s.$$.update=()=>{s.$$.dirty&3&&t(3,l=a.map((_,y)=>r.kbdOpts.hotkeydRows==="middle-row"?y===1||y===2:!0)),s.$$.dirty&1&&t(2,n=r.kbdOpts.hotkeydRows==="middle-row")},e=Te(e),[r,a,n,l,o,i,c,f,u,p,e,g]}class rr extends Fe{constructor(e){super(),xe(this,e,ar,lr,He,{})}}function Gl(s){let e,t;return e=new rr({props:{class:"mt-4"}}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,n){Ee(e,l,n),t=!0},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){we(e,l)}}}function or(s){let e,t,l,n,r="I/O",a,o,i,c,f="Device",u,p,g,_,y,L,k="Prompt",T,A,E="Disable",G,w,O,N,D="Sound",K,B,S,P,U,I,M="Fixed velocity",H,le,ae,he,X,Ge,te="Keyboard",ce,ue,De,ne,ie,J,fe="Hotkeys",me,re,Ze,x,Z,_e,st="Auto-octave",ee,Pe,ze,ot,$e,Qe,Oe,jt="Set hotkeys",At,Me,mt,Rs="Fade timeout",ds,it,hs,_t,Ut,ms,pt,Ks="Reset all",_s,Rt,Ye,ps,Fs,je=s[2]&&!s[4]&&Gl();return{c(){e=v("div"),t=v("fieldset"),l=v("legend"),n=v("button"),n.textContent=r,a=V(),o=v("div"),i=v("div"),c=v("label"),c.textContent=f,u=V(),p=v("input"),_=V(),y=v("div"),L=v("button"),L.textContent=k,T=V(),A=v("button"),A.textContent=E,G=V(),w=v("div"),O=v("div"),N=v("label"),N.textContent=D,K=V(),B=v("input"),P=V(),U=v("div"),I=v("label"),I.textContent=M,H=V(),le=v("input"),ae=V(),he=v("div"),X=v("div"),Ge=v("label"),Ge.textContent=te,ce=V(),ue=v("input"),ne=V(),ie=v("div"),J=v("label"),J.textContent=fe,me=V(),re=v("input"),x=V(),Z=v("div"),_e=v("label"),_e.textContent=st,ee=V(),Pe=v("input"),ot=V(),$e=v("div"),Qe=v("div"),Oe=v("button"),Oe.textContent=jt,At=V(),Me=v("div"),mt=v("label"),mt.textContent=Rs,ds=V(),it=v("input"),hs=V(),_t=v("div"),Ut=v("div"),ms=V(),pt=v("button"),pt.textContent=Ks,_s=V(),je&&je.c(),this.h()},l(Ne){e=b(Ne,"DIV",{class:!0});var Ue=C(e);t=b(Ue,"FIELDSET",{class:!0});var ct=C(t);l=b(ct,"LEGEND",{class:!0});var xs=C(l);n=b(xs,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1jbbsti"&&(n.textContent=r),xs.forEach(m),a=j(ct),o=b(ct,"DIV",{class:!0});var gt=C(o);i=b(gt,"DIV",{class:!0});var St=C(i);c=b(St,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(c)!=="svelte-crpa7y"&&(c.textContent=f),u=j(St),p=b(St,"INPUT",{class:!0,id:!0}),_=j(St),y=b(St,"DIV",{class:!0});var Kt=C(y);L=b(Kt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(L)!=="svelte-mj6mct"&&(L.textContent=k),T=j(Kt),A=b(Kt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(A)!=="svelte-1sl6oxh"&&(A.textContent=E),Kt.forEach(m),St.forEach(m),G=j(gt),w=b(gt,"DIV",{class:!0});var Ft=C(w);O=b(Ft,"DIV",{class:!0});var xt=C(O);N=b(xt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(N)!=="svelte-wgxtkw"&&(N.textContent=D),K=j(xt),B=b(xt,"INPUT",{class:!0,id:!0,type:!0}),xt.forEach(m),P=j(Ft),U=b(Ft,"DIV",{class:!0});var Ht=C(U);I=b(Ht,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(I)!=="svelte-1tm2bth"&&(I.textContent=M),H=j(Ht),le=b(Ht,"INPUT",{class:!0,id:!0,placeholder:!0}),Ht.forEach(m),Ft.forEach(m),ae=j(gt),he=b(gt,"DIV",{class:!0});var Nt=C(he);X=b(Nt,"DIV",{class:!0});var zt=C(X);Ge=b(zt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(Ge)!=="svelte-1js269u"&&(Ge.textContent=te),ce=j(zt),ue=b(zt,"INPUT",{class:!0,id:!0,type:!0}),zt.forEach(m),ne=j(Nt),ie=b(Nt,"DIV",{class:!0});var Wt=C(ie);J=b(Wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(J)!=="svelte-21h39k"&&(J.textContent=fe),me=j(Wt),re=b(Wt,"INPUT",{class:!0,id:!0,type:!0}),Wt.forEach(m),x=j(Nt),Z=b(Nt,"DIV",{class:!0});var qt=C(Z);_e=b(qt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(_e)!=="svelte-33lczu"&&(_e.textContent=st),ee=j(qt),Pe=b(qt,"INPUT",{class:!0,id:!0,type:!0}),qt.forEach(m),Nt.forEach(m),ot=j(gt),$e=b(gt,"DIV",{class:!0});var Lt=C($e);Qe=b(Lt,"DIV",{class:!0});var Hs=C(Qe);Oe=b(Hs,"BUTTON",{class:!0,"data-svelte-h":!0}),se(Oe)!=="svelte-1v9okg9"&&(Oe.textContent=jt),Hs.forEach(m),At=j(Lt),Me=b(Lt,"DIV",{class:!0});var Jt=C(Me);mt=b(Jt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(mt)!=="svelte-vd5i27"&&(mt.textContent=Rs),ds=j(Jt),it=b(Jt,"INPUT",{class:!0,id:!0}),Jt.forEach(m),hs=j(Lt),_t=b(Lt,"DIV",{class:!0});var $t=C(_t);Ut=b($t,"DIV",{}),C(Ut).forEach(m),ms=j($t),pt=b($t,"BUTTON",{class:!0,"data-svelte-h":!0}),se(pt)!=="svelte-jjt0c3"&&(pt.textContent=Ks),$t.forEach(m),Lt.forEach(m),gt.forEach(m),_s=j(ct),je&&je.l(ct),ct.forEach(m),Ue.forEach(m),this.h()},h(){var Ne;h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(c,"class","font-bold"),h(c,"for","device"),h(p,"class","px-1 my-1 rounded w-50"),h(p,"id","device"),p.disabled=!0,p.value=g=((Ne=s[5])==null?void 0:Ne.name)??"No device",h(L,"class","btn-sm primary mr-2"),h(A,"class","btn-sm primary"),h(y,"class","flex my-[auto]"),h(i,"class","h-full flex flex-col"),h(N,"class","font-bold"),h(N,"for","sound"),h(B,"class","h-[20px]"),h(B,"id","sound"),h(B,"type","checkbox"),B.checked=S=s[3].useSound,h(O,"class","my-1 flex justify-between mr-12"),h(I,"class","font-bold"),h(I,"for","fixed-velocity"),h(le,"class","h-[20px] w-16"),h(le,"id","fixed-velocity"),h(le,"placeholder","0-127"),h(U,"class","flex justify-between"),h(w,"class","flex flex-col h-full"),h(Ge,"class","font-bold"),h(Ge,"for","keyboard"),h(ue,"class","h-[20px]"),h(ue,"id","keyboard"),h(ue,"type","checkbox"),ue.checked=De=s[3].useKeyboard,h(X,"class","my-1 flex justify-between mr-12"),h(J,"class","font-bold"),h(J,"for","hotkeys"),h(re,"class","h-[20px]"),h(re,"id","hotkeys"),h(re,"type","checkbox"),re.checked=Ze=s[3].useHotkeys,h(ie,"class","my-1 flex justify-between mr-12"),h(_e,"class","font-bold"),h(_e,"for","auto-octave"),h(Pe,"class","h-[20px]"),h(Pe,"id","auto-octave"),h(Pe,"type","checkbox"),Pe.checked=ze=s[3].useAutoOctave,h(Z,"class","my-1 flex justify-between mr-12"),h(he,"class","flex flex-col h-full"),h(Oe,"class","w-full btn-sm primary"),h(Qe,"class","flex justify-between"),h(mt,"class","font-bold"),h(mt,"for","fade-timeout"),h(it,"class","h-[20px] w-16"),h(it,"id","fade-timeout"),it.value=s[1],h(Me,"class","flex justify-between"),h(pt,"class","btn-sm primary"),h(_t,"class","flex justify-between"),h($e,"class","flex flex-col justify-between h-full"),h(o,"class","body svelte-1bpw69s"),q(o,"hidden",s[4]),h(t,"class","flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1bpw69s"),q(t,"collapsed",s[4]),h(e,"class",Rt=ve(`${s[11].class||""}`)+" svelte-1bpw69s")},m(Ne,Ue){R(Ne,e,Ue),d(e,t),d(t,l),d(l,n),d(t,a),d(t,o),d(o,i),d(i,c),d(i,u),d(i,p),d(i,_),d(i,y),d(y,L),d(y,T),d(y,A),d(o,G),d(o,w),d(w,O),d(O,N),d(O,K),d(O,B),d(w,P),d(w,U),d(U,I),d(U,H),d(U,le),Je(le,s[0]),d(o,ae),d(o,he),d(he,X),d(X,Ge),d(X,ce),d(X,ue),d(he,ne),d(he,ie),d(ie,J),d(ie,me),d(ie,re),d(he,x),d(he,Z),d(Z,_e),d(Z,ee),d(Z,Pe),d(o,ot),d(o,$e),d($e,Qe),d(Qe,Oe),d($e,At),d($e,Me),d(Me,mt),d(Me,ds),d(Me,it),d($e,hs),d($e,_t),d(_t,Ut),d(_t,ms),d(_t,pt),d(t,_s),je&&je.m(t,null),Ye=!0,ps||(Fs=[z(n,"click",s[7]),z(L,"click",qe.openMidi),z(A,"click",qe.disableMidi),z(B,"change",s[12]),z(le,"input",s[13]),z(le,"change",s[8]),z(ue,"change",s[14]),z(re,"change",s[15]),z(Pe,"change",s[16]),z(Oe,"click",s[17]),z(it,"input",s[9]),z(pt,"click",s[10])],ps=!0)},p(Ne,[Ue]){var ct;(!Ye||Ue&32&&g!==(g=((ct=Ne[5])==null?void 0:ct.name)??"No device")&&p.value!==g)&&(p.value=g),(!Ye||Ue&8&&S!==(S=Ne[3].useSound))&&(B.checked=S),Ue&1&&le.value!==Ne[0]&&Je(le,Ne[0]),(!Ye||Ue&8&&De!==(De=Ne[3].useKeyboard))&&(ue.checked=De),(!Ye||Ue&8&&Ze!==(Ze=Ne[3].useHotkeys))&&(re.checked=Ze),(!Ye||Ue&8&&ze!==(ze=Ne[3].useAutoOctave))&&(Pe.checked=ze),(!Ye||Ue&2&&it.value!==Ne[1])&&(it.value=Ne[1]),(!Ye||Ue&16)&&q(o,"hidden",Ne[4]),Ne[2]&&!Ne[4]?je?Ue&20&&F(je,1):(je=Gl(),je.c(),F(je,1),je.m(t,null)):je&&(Re(),W(je,1,1,()=>{je=null}),Ke()),(!Ye||Ue&16)&&q(t,"collapsed",Ne[4]),(!Ye||Ue&2048&&Rt!==(Rt=ve(`${Ne[11].class||""}`)+" svelte-1bpw69s"))&&h(e,"class",Rt)},i(Ne){Ye||(F(je),Ye=!0)},o(Ne){W(je),Ye=!1},d(Ne){Ne&&m(e),je&&je.d(),ps=!1,tt(Fs)}}}function ir(s,e,t){let l,n,r;be(s,rt,E=>t(3,l=E)),be(s,rs,E=>t(5,r=E));const a=ht(Be(!1),{key:"inputs-hidden"});be(s,a,E=>t(4,n=E));let o=l.fixedVelocity??"",i=l.keyFadeTimeout,c=!1;rt.subscribe(E=>{t(0,o=E.fixedVelocity??""),t(1,i=E.keyFadeTimeout)});function f(){a.update(E=>!E)}function u(E){const{value:G}=E.currentTarget;let w;if(G)try{w=parseInt(G)}catch{}w!==void 0&&w>=0&&w<=127?qe.setInputValue("fixedVelocity",w):G?t(0,o=l.fixedVelocity||""):qe.setInputValue("fixedVelocity",void 0)}function p(E){try{const G=parseInt(E.currentTarget.value);qe.setInputValue("keyFadeTimeout",G)}catch{t(1,i=l.keyFadeTimeout)}}function g(){ta()}const _=E=>qe.setInputValue("useSound",E.currentTarget.checked);function y(){o=this.value,t(0,o)}const L=E=>qe.setInputValue("useKeyboard",E.currentTarget.checked),k=E=>qe.setInputValue("useHotkeys",E.currentTarget.checked),T=E=>qe.setInputValue("useAutoOctave",E.currentTarget.checked),A=()=>t(2,c=!c);return s.$$set=E=>{t(11,e=Ce(Ce({},e),Te(E)))},e=Te(e),[o,i,c,l,n,r,a,f,u,p,g,e,_,y,L,k,T,A]}class cr extends Fe{constructor(e){super(),xe(this,e,ir,or,He,{})}}function ur(s){let e;return{c(){e=Q(" ")},l(t){e=Y(t," ")},m(t,l){R(t,e,l)},p:pe,d(t){t&&m(e)}}}function fr(s){let e,t=s[1].note+"",l;return{c(){e=Q("Input: "),l=Q(t)},l(n){e=Y(n,"Input: "),l=Y(n,t)},m(n,r){R(n,e,r),R(n,l,r)},p(n,r){r&2&&t!==(t=n[1].note+"")&&de(l,t)},d(n){n&&(m(e),m(l))}}}function dr(s){let e,t;return{c(){e=Q("Input: "),t=Q(s[0])},l(l){e=Y(l,"Input: "),t=Y(l,s[0])},m(l,n){R(l,e,n),R(l,t,n)},p(l,n){n&1&&de(t,l[0])},d(l){l&&(m(e),m(t))}}}function hr(s){let e;return{c(){e=Q(As)},l(t){e=Y(t,As)},m(t,l){R(t,e,l)},p:pe,d(t){t&&m(e)}}}function mr(s){let e,t,l,n;function r(i,c){return i[2].useKeyboard&&As?hr:i[2].useKeyboard&&i[0]?dr:i[2].useKeyboard&&i[1]?fr:ur}let a=r(s),o=a(s);return{c(){e=v("div"),o.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=C(e);o.l(c),c.forEach(m),this.h()},h(){h(e,"class",t=`${s[4].class||""}`)},m(i,c){R(i,e,c),o.m(e,null),l||(n=z(window,"keydown",s[3]),l=!0)},p(i,[c]){a===(a=r(i))&&o?o.p(i,c):(o.d(1),o=a(i),o&&(o.c(),o.m(e,null))),c&16&&t!==(t=`${i[4].class||""}`)&&h(e,"class",t)},i:pe,o:pe,d(i){i&&m(e),o.d(),l=!1,n()}}}let As="";function _r(s,e,t){let l;be(s,rt,c=>t(2,l=c));let{debounced:n}=e,r="",a;const o=Tn();function i(c){const f=c.target;if(n||!(f instanceof HTMLElement)||f.tagName==="INPUT")return;const u=Ct.handleInput(c.code,c.key,c.shiftKey);u&&u.e==="note"?t(1,a=u.data):u&&u.e==="string"?t(0,r=u.data):u&&(t(0,r=""),t(1,a=void 0),o(u.e,u.data))}return s.$$set=c=>{t(4,e=Ce(Ce({},e),Te(c))),"debounced"in c&&t(5,n=c.debounced)},e=Te(e),[r,a,l,i,e,n]}class pr extends Fe{constructor(e){super(),xe(this,e,_r,mr,He,{debounced:5})}}function gr(s){let e,t,l,n="Count",r,a,o,i,c,f="Duplicates",u,p,g,_,y,L,k="Autoplay",T,A,E,G,w,O,N="Wait seconds",D,K,B,S,P;return{c(){e=v("ul"),t=v("li"),l=v("label"),l.textContent=n,r=V(),a=v("input"),o=V(),i=v("li"),c=v("label"),c.textContent=f,u=V(),p=v("input"),_=V(),y=v("li"),L=v("label"),L.textContent=k,T=V(),A=v("input"),G=V(),w=v("li"),O=v("label"),O.textContent=N,D=V(),K=v("input"),this.h()},l(U){e=b(U,"UL",{class:!0});var I=C(e);t=b(I,"LI",{class:!0});var M=C(t);l=b(M,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(l)!=="svelte-wgq9fc"&&(l.textContent=n),r=j(M),a=b(M,"INPUT",{class:!0,id:!0,type:!0}),M.forEach(m),o=j(I),i=b(I,"LI",{class:!0});var H=C(i);c=b(H,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(c)!=="svelte-hcg9dq"&&(c.textContent=f),u=j(H),p=b(H,"INPUT",{class:!0,id:!0,type:!0}),H.forEach(m),_=j(I),y=b(I,"LI",{class:!0});var le=C(y);L=b(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(L)!=="svelte-lr68n2"&&(L.textContent=k),T=j(le),A=b(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(m),G=j(I),w=b(I,"LI",{class:!0});var ae=C(w);O=b(ae,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(O)!=="svelte-1qj2vcy"&&(O.textContent=N),D=j(ae),K=b(ae,"INPUT",{class:!0,id:!0,type:!0}),ae.forEach(m),I.forEach(m),this.h()},h(){h(l,"class","font-bold"),h(l,"for","guess-count"),h(a,"class","h-[20px] w-10"),h(a,"id","guess-count"),h(a,"type","number"),h(t,"class","flex items-center justify-between svelte-1elvih2"),h(c,"class","font-bold"),h(c,"for","duplicates"),h(p,"class","h-[20px]"),h(p,"id","duplicates"),h(p,"type","checkbox"),p.checked=g=s[2].duplicates,h(i,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(L,"class","font-bold"),h(L,"for","autoplay"),h(A,"class","h-[20px]"),h(A,"id","autoplay"),h(A,"type","checkbox"),A.checked=E=s[2].autoplay,h(y,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(O,"class","font-bold"),h(O,"for","wait-ms"),h(K,"class","h-[20px] w-10"),h(K,"id","wait-ms"),h(K,"type","number"),h(w,"class","flex items-center justify-between svelte-1elvih2"),h(e,"class",B=ve(`${s[5].class||""}`)+" svelte-1elvih2")},m(U,I){R(U,e,I),d(e,t),d(t,l),d(t,r),d(t,a),Je(a,s[0]),d(e,o),d(e,i),d(i,c),d(i,u),d(i,p),d(e,_),d(e,y),d(y,L),d(y,T),d(y,A),d(e,G),d(e,w),d(w,O),d(w,D),d(w,K),Je(K,s[1]),S||(P=[z(a,"input",s[6]),z(a,"input",s[3]),z(p,"input",s[7]),z(A,"input",s[8]),z(K,"input",s[9]),z(K,"input",s[4])],S=!0)},p(U,[I]){I&1&&ls(a.value)!==U[0]&&Je(a,U[0]),I&4&&g!==(g=U[2].duplicates)&&(p.checked=g),I&4&&E!==(E=U[2].autoplay)&&(A.checked=E),I&2&&ls(K.value)!==U[1]&&Je(K,U[1]),I&32&&B!==(B=ve(`${U[5].class||""}`)+" svelte-1elvih2")&&h(e,"class",B)},i:pe,o:pe,d(U){U&&m(e),S=!1,tt(P)}}}function vr(s,e,t){let l;be(s,dt,p=>t(2,l=p));let n=l.count||"",r=l.waitSeconds||"";dt.subscribe(p=>{t(0,n=p.count||""),t(1,r=p.waitSeconds||"")});function a({currentTarget:{value:p}}){let g;try{g=parseInt(p),g<=0&&(g=1),Se.setOptionValue("count",g)}catch{t(0,n=l.count)}}function o({currentTarget:{value:p}}){let g;try{g=parseInt(p),g<0&&(g=0),Se.setOptionValue("waitSeconds",g)}catch{t(1,r=l.waitSeconds)}}function i(){n=ls(this.value),t(0,n)}const c=p=>Se.setOptionValue("duplicates",p.currentTarget.checked),f=p=>Se.setOptionValue("autoplay",p.currentTarget.checked);function u(){r=ls(this.value),t(1,r)}return s.$$set=p=>{t(5,e=Ce(Ce({},e),Te(p)))},e=Te(e),[n,r,l,a,o,e,i,c,f,u]}class br extends Fe{constructor(e){super(),xe(this,e,vr,gr,He,{})}}function Ml(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Ul(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Rl(s){let e,t,l=s[21]+"",n,r,a,o,i,c,f,u;function p(){return s[13](s[20])}o=new Xe({props:{icon:ys,width:20}});function g(..._){return s[14](s[20],..._)}return{c(){e=v("li"),t=v("button"),n=Q(l),r=V(),a=v("button"),ke(o.$$.fragment),i=V(),this.h()},l(_){e=b(_,"LI",{class:!0});var y=C(e);t=b(y,"BUTTON",{class:!0});var L=C(t);n=Y(L,l),L.forEach(m),r=j(y),a=b(y,"BUTTON",{class:!0});var k=C(a);ye(o.$$.fragment,k),k.forEach(m),i=j(y),y.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",s[20]===s[0]),h(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),h(e,"class","flex svelte-1okhpct")},m(_,y){R(_,e,y),d(e,t),d(t,n),d(e,r),d(e,a),Ee(o,a,null),d(e,i),c=!0,f||(u=[z(t,"click",p),z(a,"click",g)],f=!0)},p(_,y){s=_,(!c||y&17)&&q(t,"selected",s[20]===s[0])},i(_){c||(F(o.$$.fragment,_),c=!0)},o(_){W(o.$$.fragment,_),c=!1},d(_){_&&m(e),we(o),f=!1,tt(u)}}}function Kl(s){let e,t=oe(s[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Fl(Ml(s,t,n));return{c(){e=v("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=b(n,"UL",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","svelte-1okhpct")},m(n,r){R(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r&518){t=oe(n[2]);let a;for(a=0;a<t.length;a+=1){const o=Ml(n,t,a);l[a]?l[a].p(o,r):(l[a]=Fl(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Fl(s){let e,t,l=s[21]+"",n,r,a,o;function i(){return s[15](s[20])}return{c(){e=v("li"),t=v("button"),n=Q(l),r=V(),this.h()},l(c){e=b(c,"LI",{class:!0});var f=C(e);t=b(f,"BUTTON",{class:!0});var u=C(t);n=Y(u,l),u.forEach(m),r=j(f),f.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",s[20]===s[1]),h(e,"class","svelte-1okhpct")},m(c,f){R(c,e,f),d(e,t),d(t,n),d(e,r),a||(o=z(t,"click",i),a=!0)},p(c,f){s=c,f&4&&l!==(l=s[21]+"")&&de(n,l),f&6&&q(t,"selected",s[20]===s[1])},d(c){c&&m(e),a=!1,o()}}}function kr(s){let e,t,l="Play",n,r,a,o,i,c,f,u,p,g,_="Reset",y,L,k,T,A=s[3]?"Quit":"Play",E,G,w,O,N,D=oe(s[4]),K=[];for(let P=0;P<D.length;P+=1)K[P]=Rl(Ul(s,D,P));const B=P=>W(K[P],1,1,()=>{K[P]=null});let S=(s[0]==="chords-write"||s[0]==="chords-play")&&Kl(s);return f=new br({props:{class:"game-options"}}),k=new Xe({props:{class:"mr-1",icon:s[3]?qs:ys,width:20}}),{c(){e=v("fieldset"),t=v("legend"),t.textContent=l,n=V(),r=v("div"),a=v("ul");for(let P=0;P<K.length;P+=1)K[P].c();o=V(),i=v("div"),S&&S.c(),c=V(),ke(f.$$.fragment),u=V(),p=v("div"),g=v("button"),g.textContent=_,y=V(),L=v("button"),ke(k.$$.fragment),T=V(),E=Q(A),this.h()},l(P){e=b(P,"FIELDSET",{class:!0});var U=C(e);t=b(U,"LEGEND",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1409tnk"&&(t.textContent=l),n=j(U),r=b(U,"DIV",{class:!0});var I=C(r);a=b(I,"UL",{class:!0});var M=C(a);for(let he=0;he<K.length;he+=1)K[he].l(M);M.forEach(m),o=j(I),i=b(I,"DIV",{class:!0});var H=C(i);S&&S.l(H),H.forEach(m),c=j(I),ye(f.$$.fragment,I),u=j(I),p=b(I,"DIV",{class:!0});var le=C(p);g=b(le,"BUTTON",{class:!0,"data-svelte-h":!0}),se(g)!=="svelte-10rv0bu"&&(g.textContent=_),y=j(le),L=b(le,"BUTTON",{class:!0});var ae=C(L);ye(k.$$.fragment,ae),T=j(ae),E=Y(ae,A),ae.forEach(m),le.forEach(m),I.forEach(m),U.forEach(m),this.h()},h(){h(t,"class","px-1 text-base"),h(a,"class","games svelte-1okhpct"),h(i,"class","options svelte-1okhpct"),h(g,"class","w-full btn hover:bg-gray-200"),h(L,"class","w-full mt-2 flex items-center justify-center btn primary"),h(p,"class","h-full flex flex-col justify-end"),h(r,"class","body pb-2 h-full svelte-1okhpct"),h(e,"class",G=ve(`${s[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct")},m(P,U){R(P,e,U),d(e,t),d(e,n),d(e,r),d(r,a);for(let I=0;I<K.length;I+=1)K[I]&&K[I].m(a,null);d(r,o),d(r,i),S&&S.m(i,null),d(r,c),Ee(f,r,null),d(r,u),d(r,p),d(p,g),d(p,y),d(p,L),Ee(k,L,null),d(L,T),d(L,E),w=!0,O||(N=[z(g,"click",s[5]),z(L,"click",s[16])],O=!0)},p(P,[U]){if(U&401){D=oe(P[4]);let M;for(M=0;M<D.length;M+=1){const H=Ul(P,D,M);K[M]?(K[M].p(H,U),F(K[M],1)):(K[M]=Rl(H),K[M].c(),F(K[M],1),K[M].m(a,null))}for(Re(),M=D.length;M<K.length;M+=1)B(M);Ke()}P[0]==="chords-write"||P[0]==="chords-play"?S?S.p(P,U):(S=Kl(P),S.c(),S.m(i,null)):S&&(S.d(1),S=null);const I={};U&8&&(I.icon=P[3]?qs:ys),k.$set(I),(!w||U&8)&&A!==(A=P[3]?"Quit":"Play")&&de(E,A),(!w||U&1024&&G!==(G=ve(`${P[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct"))&&h(e,"class",G)},i(P){if(!w){for(let U=0;U<D.length;U+=1)F(K[U]);F(f.$$.fragment,P),F(k.$$.fragment,P),w=!0}},o(P){K=K.filter(Boolean);for(let U=0;U<K.length;U+=1)W(K[U]);W(f.$$.fragment,P),W(k.$$.fragment,P),w=!1},d(P){P&&m(e),Ve(K,P),S&&S.d(),we(f),we(k),O=!1,tt(N)}}}function yr(s,e,t){let l,n,r,a,o;be(s,Bs,E=>t(12,r=E)),be(s,dt,E=>t(19,a=E)),be(s,Et,E=>t(3,o=E));const i=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let c=i[4].key,f="maj-m";a.count,a.waitSeconds,dt.subscribe(E=>{E.count,E.waitSeconds});function u(){Se.clearGame(!0)}function p(E,G){if(G==="chords-write"||G==="chords-play"||G==="chords-diatonic"){let w=[];f==="selected"?w=r.filter(O=>O.selected):f==="all"?w=r:f==="maj-m"?w=r.filter(O=>O.suffixes[0]==="maj"||O.suffixes[0]==="m"):f==="seventh"&&(w=r.filter(O=>O.suffixes[0]==="maj7"||O.suffixes[0]==="m7"||O.suffixes[0]==="7"||O.suffixes[0]==="dim7"||O.suffixes[0]==="aug7")),Se.play(G,{chords:w})}else Se.play(G,void 0);E.currentTarget instanceof HTMLElement&&E.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function g(E){t(0,c=E)}function _(E,G){t(0,c=G),p(E,G)}function y(E){t(1,f=E)}const L=E=>g(E),k=(E,G)=>_(G,E),T=E=>y(E),A=E=>p(E,c);return s.$$set=E=>{t(10,e=Ce(Ce({},e),Te(E)))},s.$$.update=()=>{s.$$.dirty&4096&&t(11,l=r.reduce((E,G)=>G.selected?E+1:E,0)),s.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${l} chords`},{key:"all",value:"All"}])},e=Te(e),[c,f,n,o,i,u,p,g,_,y,e,l,r,L,k,T,A]}class Er extends Fe{constructor(e){super(),xe(this,e,yr,kr,He,{})}}function xl(s,e,t){const l=s.slice();return l[7]=e[t],l}function Hl(s,e,t){const l=s.slice();return l[4]=e[t],l}function wr(s){let e,t=oe(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=zl(xl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r&2){t=oe(n[1]);let a;for(a=0;a<t.length;a+=1){const o=xl(n,t,a);l[a]?l[a].p(o,r):(l[a]=zl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Cr(s){let e,t=oe(s[0].scaleNotes||[]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Wl(Hl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r&1){t=oe(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const o=Hl(n,t,a);l[a]?l[a].p(o,r):(l[a]=Wl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function zl(s){let e,t=s[7].interval+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r&2&&t!==(t=n[7].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function Wl(s){let e,t=s[4].note+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r&1&&t!==(t=n[4].note+"")&&de(l,t)},d(n){n&&m(e)}}}function Tr(s){let e,t,l,n,r,a;function o(f,u){return f[0]?Cr:wr}let i=o(s),c=i(s);return{c(){e=v("div"),t=v("button"),c.c(),this.h()},l(f){e=b(f,"DIV",{class:!0,title:!0});var u=C(e);t=b(u,"BUTTON",{class:!0});var p=C(t);c.l(p),p.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","intervals svelte-my4m0t"),h(e,"class",l=`${s[2].class||""} `),h(e,"title",n=s[1].map(ql).join("-"))},m(f,u){R(f,e,u),d(e,t),c.m(t,null),r||(a=z(t,"click",s[3]),r=!0)},p(f,[u]){i===(i=o(f))&&c?c.p(f,u):(c.d(1),c=i(f),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=`${f[2].class||""} `)&&h(e,"class",l),u&2&&n!==(n=f[1].map(ql).join("-"))&&h(e,"title",n)},i:pe,o:pe,d(f){f&&m(e),c.d(),r=!1,a()}}}const ql=s=>s.interval;function Ir(s,e,t){let{scale:l,intervals:n}=e;function r(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ce(Ce({},e),Te(a))),"scale"in a&&t(0,l=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=Te(e),[l,n,e,r]}class En extends Fe{constructor(e){super(),xe(this,e,Ir,Tr,He,{scale:0,intervals:1})}}function Jl(s,e,t){const l=s.slice();return l[7]=e[t],l}function $l(s,e,t){const l=s.slice();return l[4]=e[t],l}function Ar(s){let e,t=oe(s[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ql(Jl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r&1){t=oe(n[0]);let a;for(a=0;a<t.length;a+=1){const o=Jl(n,t,a);l[a]?l[a].p(o,r):(l[a]=Ql(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Sr(s){let e,t=oe(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Yl($l(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Le()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=Le()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);R(n,e,r)},p(n,r){if(r&2){t=oe(n[1]);let a;for(a=0;a<t.length;a+=1){const o=$l(n,t,a);l[a]?l[a].p(o,r):(l[a]=Yl(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function Ql(s){let e,t,l=s[7].roman+"",n,r,a,o=s[7].suffix+"",i,c;return{c(){e=v("span"),t=v("span"),n=Q(l),r=V(),a=v("sup"),i=Q(o),c=V(),this.h()},l(f){e=b(f,"SPAN",{class:!0});var u=C(e);t=b(u,"SPAN",{class:!0});var p=C(t);n=Y(p,l),p.forEach(m),r=j(u),a=b(u,"SUP",{class:!0});var g=C(a);i=Y(g,o),g.forEach(m),c=j(u),u.forEach(m),this.h()},h(){h(t,"class","block"),h(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),q(a,"super-text",s[7].suffix.length>2),h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(f,u){R(f,e,u),d(e,t),d(t,n),d(e,r),d(e,a),d(a,i),d(e,c)},p(f,u){u&1&&l!==(l=f[7].roman+"")&&de(n,l),u&1&&o!==(o=f[7].suffix+"")&&de(i,o),u&1&&q(a,"super-text",f[7].suffix.length>2)},d(f){f&&m(e)}}}function Yl(s){let e,t,l=s[4]+"",n,r;return{c(){e=v("span"),t=v("span"),n=Q(l),r=V(),this.h()},l(a){e=b(a,"SPAN",{class:!0});var o=C(e);t=b(o,"SPAN",{});var i=C(t);n=Y(i,l),i.forEach(m),r=j(o),o.forEach(m),this.h()},h(){h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,o){R(a,e,o),d(e,t),d(t,n),d(e,r)},p(a,o){o&2&&l!==(l=a[4]+"")&&de(n,l)},d(a){a&&m(e)}}}function Nr(s){let e,t,l,n,r,a;function o(f,u){return f[1].length>0?Sr:Ar}let i=o(s),c=i(s);return{c(){e=v("div"),t=v("button"),c.c(),this.h()},l(f){e=b(f,"DIV",{class:!0,title:!0});var u=C(e);t=b(u,"BUTTON",{class:!0});var p=C(t);c.l(p),p.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","triads flex flex-wrap svelte-1roj1mi"),h(e,"class",l=ve(`${s[2].class||""} `)+" svelte-1roj1mi"),h(e,"title",n=s[0].map(Xl).join("-"))},m(f,u){R(f,e,u),d(e,t),c.m(t,null),r||(a=z(t,"click",s[3]),r=!0)},p(f,[u]){i===(i=o(f))&&c?c.p(f,u):(c.d(1),c=i(f),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=ve(`${f[2].class||""} `)+" svelte-1roj1mi")&&h(e,"class",l),u&1&&n!==(n=f[0].map(Xl).join("-"))&&h(e,"title",n)},i:pe,o:pe,d(f){f&&m(e),c.d(),r=!1,a()}}}const Xl=s=>s.roman+s.suffix;function Lr(s,e,t){let{triads:l,chords:n}=e;function r(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ce(Ce({},e),Te(a))),"triads"in a&&t(0,l=a.triads),"chords"in a&&t(1,n=a.chords)},e=Te(e),[l,n,e,r]}class wn extends Fe{constructor(e){super(),xe(this,e,Lr,Nr,He,{triads:0,chords:1})}}function Zl(s,e,t){const l=s.slice();return l[23]=e[t],l}function en(s,e,t){const l=s.slice();return l[23]=e[t],l}function tn(s){let e,t,l=s[23].raw.names[0]+"",n,r,a,o,i,c,f;function u(){return s[11](s[23])}a=new En({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function p(){return s[12](s[23])}return i=new wn({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",p),{c(){e=v("li"),t=v("div"),n=Q(l),r=V(),ke(a.$$.fragment),o=V(),ke(i.$$.fragment),c=V(),this.h()},l(g){e=b(g,"LI",{class:!0});var _=C(e);t=b(_,"DIV",{class:!0});var y=C(t);n=Y(y,l),y.forEach(m),r=j(_),ye(a.$$.fragment,_),o=j(_),ye(i.$$.fragment,_),c=j(_),_.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(g,_){R(g,e,_),d(e,t),d(t,n),d(e,r),Ee(a,e,null),d(e,o),Ee(i,e,null),d(e,c),f=!0},p(g,_){s=g,(!f||_&4)&&l!==(l=s[23].raw.names[0]+"")&&de(n,l);const y={};_&4&&(y.scale=s[23].scale),_&4&&(y.intervals=s[23].raw.intervals),a.$set(y);const L={};_&4&&(L.triads=s[23].triads),_&4&&(L.chords=s[23].triadChords),i.$set(L)},i(g){f||(F(a.$$.fragment,g),F(i.$$.fragment,g),f=!0)},o(g){W(a.$$.fragment,g),W(i.$$.fragment,g),f=!1},d(g){g&&m(e),we(a),we(i)}}}function sn(s){let e,t,l=s[23].raw.names[0]+"",n,r,a,o,i,c,f;function u(){return s[13](s[23])}a=new En({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function p(){return s[14](s[23])}return i=new wn({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",p),{c(){e=v("li"),t=v("div"),n=Q(l),r=V(),ke(a.$$.fragment),o=V(),ke(i.$$.fragment),c=V(),this.h()},l(g){e=b(g,"LI",{class:!0});var _=C(e);t=b(_,"DIV",{class:!0});var y=C(t);n=Y(y,l),y.forEach(m),r=j(_),ye(a.$$.fragment,_),o=j(_),ye(i.$$.fragment,_),c=j(_),_.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(g,_){R(g,e,_),d(e,t),d(t,n),d(e,r),Ee(a,e,null),d(e,o),Ee(i,e,null),d(e,c),f=!0},p(g,_){s=g,(!f||_&2)&&l!==(l=s[23].raw.names[0]+"")&&de(n,l);const y={};_&2&&(y.scale=s[23].scale),_&2&&(y.intervals=s[23].raw.intervals),a.$set(y);const L={};_&2&&(L.triads=s[23].triads),_&2&&(L.chords=s[23].triadChords),i.$set(L)},i(g){f||(F(a.$$.fragment,g),F(i.$$.fragment,g),f=!0)},o(g){W(a.$$.fragment,g),W(i.$$.fragment,g),f=!1},d(g){g&&m(e),we(a),we(i)}}}function Dr(s){let e,t,l,n,r="Scales",a,o,i,c="Key",f,u,p,g,_,y,L,k,T,A,E,G=oe(s[2]),w=[];for(let B=0;B<G.length;B+=1)w[B]=tn(en(s,G,B));const O=B=>W(w[B],1,1,()=>{w[B]=null});let N=oe(s[1]),D=[];for(let B=0;B<N.length;B+=1)D[B]=sn(Zl(s,N,B));const K=B=>W(D[B],1,1,()=>{D[B]=null});return{c(){e=v("div"),t=v("fieldset"),l=v("legend"),n=v("button"),n.textContent=r,a=V(),o=v("div"),i=v("label"),i.textContent=c,f=V(),u=v("input"),p=V(),g=v("div"),_=v("ul");for(let B=0;B<w.length;B+=1)w[B].c();y=V(),L=v("ul");for(let B=0;B<D.length;B+=1)D[B].c();this.h()},l(B){e=b(B,"DIV",{class:!0});var S=C(e);t=b(S,"FIELDSET",{class:!0});var P=C(t);l=b(P,"LEGEND",{class:!0});var U=C(l);n=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-lhx60e"&&(n.textContent=r),U.forEach(m),a=j(P),o=b(P,"DIV",{class:!0});var I=C(o);i=b(I,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(i)!=="svelte-14m38zf"&&(i.textContent=c),f=j(I),u=b(I,"INPUT",{class:!0,id:!0}),I.forEach(m),p=j(P),g=b(P,"DIV",{class:!0});var M=C(g);_=b(M,"UL",{class:!0});var H=C(_);for(let ae=0;ae<w.length;ae+=1)w[ae].l(H);H.forEach(m),y=j(M),L=b(M,"UL",{class:!0});var le=C(L);for(let ae=0;ae<D.length;ae+=1)D[ae].l(le);le.forEach(m),M.forEach(m),P.forEach(m),S.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","mr-4 font-bold"),h(i,"for","scale-key"),h(u,"class","bg-gray-100 w-16 px-1 rounded"),h(u,"id","scale-key"),u.value=s[0],h(o,"class","flex mb-2 input svelte-4hctsl"),q(o,"hidden",s[3]),h(_,"class","list odd w-full svelte-4hctsl"),h(L,"class","list even w-full svelte-4hctsl"),h(g,"class","body max-h-[30rem] overflow-scroll svelte-4hctsl"),q(g,"hidden",s[3]),h(t,"class","flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-4hctsl"),q(t,"collapsed",s[3]),h(e,"class",k=ve(`${s[9].class||""}`)+" svelte-4hctsl")},m(B,S){R(B,e,S),d(e,t),d(t,l),d(l,n),d(t,a),d(t,o),d(o,i),d(o,f),d(o,u),d(t,p),d(t,g),d(g,_);for(let P=0;P<w.length;P+=1)w[P]&&w[P].m(_,null);d(g,y),d(g,L);for(let P=0;P<D.length;P+=1)D[P]&&D[P].m(L,null);T=!0,A||(E=[z(n,"click",s[5]),z(u,"input",s[6])],A=!0)},p(B,[S]){if((!T||S&1&&u.value!==B[0])&&(u.value=B[0]),(!T||S&8)&&q(o,"hidden",B[3]),S&388){G=oe(B[2]);let P;for(P=0;P<G.length;P+=1){const U=en(B,G,P);w[P]?(w[P].p(U,S),F(w[P],1)):(w[P]=tn(U),w[P].c(),F(w[P],1),w[P].m(_,null))}for(Re(),P=G.length;P<w.length;P+=1)O(P);Ke()}if(S&386){N=oe(B[1]);let P;for(P=0;P<N.length;P+=1){const U=Zl(B,N,P);D[P]?(D[P].p(U,S),F(D[P],1)):(D[P]=sn(U),D[P].c(),F(D[P],1),D[P].m(L,null))}for(Re(),P=N.length;P<D.length;P+=1)K(P);Ke()}(!T||S&8)&&q(g,"hidden",B[3]),(!T||S&8)&&q(t,"collapsed",B[3]),(!T||S&512&&k!==(k=ve(`${B[9].class||""}`)+" svelte-4hctsl"))&&h(e,"class",k)},i(B){if(!T){for(let S=0;S<G.length;S+=1)F(w[S]);for(let S=0;S<N.length;S+=1)F(D[S]);T=!0}},o(B){w=w.filter(Boolean);for(let S=0;S<w.length;S+=1)W(w[S]);D=D.filter(Boolean);for(let S=0;S<D.length;S+=1)W(D[S]);T=!1},d(B){B&&m(e),Ve(w,B),Ve(D,B),A=!1,tt(E)}}}function Pr(s,e,t){let l,n,r,a,o,i,c;be(s,os,D=>t(17,r=D)),be(s,Vt,D=>t(18,a=D)),be(s,rt,D=>t(19,o=D)),be(s,at,D=>t(20,i=D));let u=us().map(D=>({key:D.names[0],raw:D,scale:void 0,triads:D.triads,triadChords:[]})),p="",g=[a.key,a.scale],_;const y=ht(Be(!0),{key:"scales-hidden"});be(s,y,D=>t(3,c=D));function L(){y.update(D=>!D)}function k({currentTarget:{value:D}}){t(0,p=`${D.charAt(0).toUpperCase()}${D.charAt(1).toLowerCase()}`),t(10,u=u.map(K=>{const B=Gt(p,K.key),S=p&&"data"in B?B.data:void 0;let P=[];return S&&(P=K.triads.map((U,I)=>`${S.scaleNotes[I].note}${!U.suffix.includes("°")&&U.minor?"m":""}${U.suffix}`)),{...K,scale:S,triadChords:P}}))}function T(D,K,B){if(D<K.length){const S=K[D++];Ae.setPlayed(S),i==null||i.playChord(S.map(P=>P.midi),o.fixedVelocity),_=setTimeout(()=>T(D,K,B),B)}else Ae.setPlayed([]),Ae.setKeyAndScale(g[0],g[1])}function A(D){clearTimeout(_);let K,B;D.scale?(B=D.scale,g=[a.key,a.scale],Ae.setKeyAndScale(D.scale.key,D.scale.scale)):B=a;const S=r[0].midi+B.scaleNotes[0].semitones;K=D.raw.intervals.map(P=>[{...B.notesMap.get(P.semitones%12),midi:S+P.semitones}]),K[0][0].semitones!==K[K.length-1][0].semitones&&K.push(K[0].map(P=>({...P,midi:P.midi+12}))),T(0,K,500)}function E(D){clearTimeout(_);const{intervals:K}=D.raw;let B,S;D.scale?(S=D.scale,g=[a.key,a.scale],Ae.setKeyAndScale(D.scale.key,D.scale.scale)):S=a;const P=r[0].midi+S.scaleNotes[0].semitones;B=pn(D.triads).map((I,M)=>Es(P+S.intervals[M].semitones,S,I.intervals)),K[K.length-1].interval_seq!==1&&B.push(B[0].map(I=>({...I,midi:I.midi+12}))),T(0,B,750)}const G=D=>A(D),w=D=>E(D),O=D=>A(D),N=D=>E(D);return s.$$set=D=>{t(9,e=Ce(Ce({},e),Te(D)))},s.$$.update=()=>{s.$$.dirty&1024&&t(2,l=u.filter((D,K)=>K<u.length/2)),s.$$.dirty&1024&&t(1,n=u.filter((D,K)=>K>=u.length/2))},e=Te(e),[p,n,l,c,y,L,k,A,E,e,u,G,w,O,N]}class Or extends Fe{constructor(e){super(),xe(this,e,Pr,Dr,He,{})}}function ln(s,e,t){const l=s.slice();return l[26]=e[t],l}function nn(s,e,t){const l=s.slice();return l[29]=e[t],l}function an(s){let e,t;return{c(){e=v("div"),t=Q(s[3]),this.h()},l(l){e=b(l,"DIV",{class:!0});var n=C(e);t=Y(n,s[3]),n.forEach(m),this.h()},h(){h(e,"class","error svelte-1u7ze7x")},m(l,n){R(l,e,n),d(e,t)},p(l,n){n[0]&8&&de(t,l[3])},d(l){l&&m(e)}}}function rn(s){let e,t=oe(s[5]),l=[];for(let n=0;n<t.length;n+=1)l[n]=on(nn(s,t,n));return{c(){e=v("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){R(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r[0]&32){t=oe(n[5]);let a;for(a=0;a<t.length;a+=1){const o=nn(n,t,a);l[a]?l[a].p(o,r):(l[a]=on(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function on(s){let e,t=s[29].interval+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&32&&t!==(t=n[29].interval+"")&&de(l,t)},d(n){n&&m(e)}}}function cn(s){let e,t=oe(s[8].scaleNotes),l=[];for(let n=0;n<t.length;n+=1)l[n]=un(ln(s,t,n));return{c(){e=v("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var r=C(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){R(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r[0]&256){t=oe(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const o=ln(n,t,a);l[a]?l[a].p(o,r):(l[a]=un(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Ve(l,n)}}}function un(s){let e,t=s[26].note+"",l;return{c(){e=v("span"),l=Q(t),this.h()},l(n){e=b(n,"SPAN",{class:!0});var r=C(e);l=Y(r,t),r.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,r){R(n,e,r),d(e,l)},p(n,r){r[0]&256&&t!==(t=n[26].note+"")&&de(l,t)},d(n){n&&m(e)}}}function Vr(s){let e,t,l,n="Score",r,a,o,i,c,f,u,p="Range",g,_,y,L,k,T="—",A,E,G,w,O,N,D,K="Scale",B,S,P,U,I,M,H,le="Key",ae,he,X,Ge,te,ce,ue,De;o=new Xe({props:{icon:Os,width:16}});let ne=s[3]&&an(s);P=new dn({props:{class:"p-1 pl-[2px] w-48",containerClass:"w-48",selected:s[0],options:s[10],onSelect:s[14]}});let ie=!s[7]&&rn(s),J=!s[7]&&cn(s);return{c(){e=v("fieldset"),t=v("legend"),l=v("button"),l.textContent=n,r=V(),a=v("button"),ke(o.$$.fragment),i=V(),c=v("div"),f=v("div"),u=v("label"),u.textContent=p,g=V(),_=v("div"),y=v("input"),L=V(),k=v("span"),k.textContent=T,A=V(),E=v("input"),G=V(),w=v("div"),ne&&ne.c(),O=V(),N=v("div"),D=v("label"),D.textContent=K,B=V(),S=v("div"),ke(P.$$.fragment),U=V(),ie&&ie.c(),I=V(),M=v("div"),H=v("label"),H.textContent=le,ae=V(),he=v("div"),X=v("input"),Ge=V(),J&&J.c(),this.h()},l(fe){e=b(fe,"FIELDSET",{class:!0});var me=C(e);t=b(me,"LEGEND",{class:!0});var re=C(t);l=b(re,"BUTTON",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-lqyol"&&(l.textContent=n),re.forEach(m),r=j(me),a=b(me,"BUTTON",{class:!0});var Ze=C(a);ye(o.$$.fragment,Ze),Ze.forEach(m),i=j(me),c=b(me,"DIV",{class:!0});var x=C(c);f=b(x,"DIV",{class:!0});var Z=C(f);u=b(Z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(u)!=="svelte-10u0679"&&(u.textContent=p),g=j(Z),_=b(Z,"DIV",{class:!0});var _e=C(_);y=b(_e,"INPUT",{class:!0,id:!0}),L=j(_e),k=b(_e,"SPAN",{class:!0,"data-svelte-h":!0}),se(k)!=="svelte-8q1xz4"&&(k.textContent=T),A=j(_e),E=b(_e,"INPUT",{class:!0,id:!0}),_e.forEach(m),G=j(Z),w=b(Z,"DIV",{class:!0});var st=C(w);ne&&ne.l(st),st.forEach(m),Z.forEach(m),O=j(x),N=b(x,"DIV",{class:!0});var ee=C(N);D=b(ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(D)!=="svelte-ld2d07"&&(D.textContent=K),B=j(ee),S=b(ee,"DIV",{class:!0});var Pe=C(S);ye(P.$$.fragment,Pe),Pe.forEach(m),U=j(ee),ie&&ie.l(ee),ee.forEach(m),I=j(x),M=b(x,"DIV",{class:!0});var ze=C(M);H=b(ze,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(H)!=="svelte-17pcm6g"&&(H.textContent=le),ae=j(ze),he=b(ze,"DIV",{class:!0});var ot=C(he);X=b(ot,"INPUT",{class:!0,id:!0}),ot.forEach(m),Ge=j(ze),J&&J.l(ze),ze.forEach(m),x.forEach(m),me.forEach(m),this.h()},h(){h(l,"class","px-1 rounded hover:bg-gray-100"),h(t,"class","px-1 text-base"),h(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(a,"hidden",s[6]),h(u,"class","font-bold"),h(u,"for","range_min"),h(y,"class","h-[28px] w-full"),h(y,"id","range_min"),h(k,"class","mx-2 mt-1"),h(E,"class","h-[28px] w-full"),h(E,"id","range_max"),h(_,"class","my-1 flex w-full"),h(w,"class","flex justify-between my-1"),h(f,"class","flex flex-col h-full"),h(D,"class","font-bold"),h(D,"for","scales"),h(S,"class","my-1 w-full"),h(N,"class","flex flex-col h-full"),h(H,"class","font-bold"),h(H,"for","key"),h(X,"class","h-[28px]"),h(X,"id","key"),h(he,"class","my-1 flex"),h(M,"class","flex flex-col h-full"),h(c,"class","options svelte-1u7ze7x"),q(c,"hidden",s[6]),h(e,"class",te=ve(`${s[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),q(e,"collapsed",s[6])},m(fe,me){R(fe,e,me),d(e,t),d(t,l),d(e,r),d(e,a),Ee(o,a,null),d(e,i),d(e,c),d(c,f),d(f,u),d(f,g),d(f,_),d(_,y),Je(y,s[1]),d(_,L),d(_,k),d(_,A),d(_,E),Je(E,s[2]),d(f,G),d(f,w),ne&&ne.m(w,null),d(c,O),d(c,N),d(N,D),d(N,B),d(N,S),Ee(P,S,null),d(N,U),ie&&ie.m(N,null),d(c,I),d(c,M),d(M,H),d(M,ae),d(M,he),d(he,X),Je(X,s[4]),d(M,Ge),J&&J.m(M,null),ce=!0,ue||(De=[z(l,"click",s[15]),z(a,"click",s[16]),z(y,"input",s[18]),z(y,"change",s[19]),z(y,"focus",s[12]),z(E,"input",s[20]),z(E,"change",s[21]),z(E,"focus",s[12]),z(X,"input",s[22]),z(X,"input",s[13])],ue=!0)},p(fe,me){(!ce||me[0]&64)&&q(a,"hidden",fe[6]),me[0]&2&&y.value!==fe[1]&&Je(y,fe[1]),me[0]&4&&E.value!==fe[2]&&Je(E,fe[2]),fe[3]?ne?ne.p(fe,me):(ne=an(fe),ne.c(),ne.m(w,null)):ne&&(ne.d(1),ne=null);const re={};me[0]&1&&(re.selected=fe[0]),P.$set(re),fe[7]?ie&&(ie.d(1),ie=null):ie?ie.p(fe,me):(ie=rn(fe),ie.c(),ie.m(N,null)),me[0]&16&&X.value!==fe[4]&&Je(X,fe[4]),fe[7]?J&&(J.d(1),J=null):J?J.p(fe,me):(J=cn(fe),J.c(),J.m(M,null)),(!ce||me[0]&64)&&q(c,"hidden",fe[6]),(!ce||me[0]&131072&&te!==(te=ve(`${fe[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&h(e,"class",te),(!ce||me[0]&131136)&&q(e,"collapsed",fe[6])},i(fe){ce||(F(o.$$.fragment,fe),F(P.$$.fragment,fe),ce=!0)},o(fe){W(o.$$.fragment,fe),W(P.$$.fragment,fe),ce=!1},d(fe){fe&&m(e),we(o),ne&&ne.d(),we(P),ie&&ie.d(),J&&J.d(),ue=!1,tt(De)}}}function jr(s,e,t){let l,n,r,a,o,i;be(s,os,S=>t(23,n=S)),be(s,Tt,S=>t(24,r=S)),be(s,Et,S=>t(7,o=S)),be(s,Vt,S=>t(8,i=S));let c=et(n[0]),f=et(n[1]),u="";const p=ht(Be(!1),{key:"score-options-hidden"});be(s,p,S=>t(6,a=S));let g=r[0],_=r[1];const y=us(),L=y.map(S=>({key:S.names[0],value:S.names[0]}));os.subscribe(S=>{t(1,c=et(S[0])),t(2,f=et(S[1]))}),Tt.subscribe(S=>{t(4,g=S[0]),t(0,_=S[1])});function k(S,P){const U=$n(P.currentTarget.value,!0,!0);if("data"in U){const{midi:I}=U.data,M=n,H=[S==="min"?I:M[0].midi,S==="max"?I:M[1].midi];qe.setMidiRange(H),t(3,u="")}else t(3,u=U.err),S==="min"?t(1,c=et(n[0])):t(2,f=et(n[1]))}function T(){t(3,u="")}function A({currentTarget:{value:S}}){t(4,g=`${S.charAt(0).toUpperCase()}${S.charAt(1).toLowerCase()}`),Ae.setKey(g)}function E(S){var P;return t(0,_=(P=L.find(U=>S===U.key))==null?void 0:P.value),Ae.setScale(_),!1}function G(){p.update(S=>!S)}function w(){Ae.clearScore(!0),qe.setMidiRange([60,84])}function O(){c=this.value,t(1,c)}const N=S=>k("min",S);function D(){f=this.value,t(2,f)}const K=S=>k("max",S);function B(){g=this.value,t(4,g)}return s.$$set=S=>{t(17,e=Ce(Ce({},e),Te(S)))},s.$$.update=()=>{var S;s.$$.dirty[0]&1&&t(5,l=((S=y.find(P=>P.names[0]===_))==null?void 0:S.intervals)||[])},e=Te(e),[_,c,f,u,g,l,a,o,i,p,L,k,T,A,E,G,w,e,O,N,D,K,B]}class Br extends Fe{constructor(e){super(),xe(this,e,jr,Vr,He,{},null,[-1,-1])}}function Gr(s){s[20]=s[21].default}function Mr(s){return{c:pe,l:pe,m:pe,i:pe,o:pe,d:pe}}function Ur(s){Gr(s);let e,t,l;var n=s[20];function r(a,o){return{props:{class:"px-4 md:px-0"}}}return n&&(e=Sn(n,r())),{c(){e&&ke(e.$$.fragment),t=Le()},l(a){e&&ye(e.$$.fragment,a),t=Le()},m(a,o){e&&Ee(e,a,o),R(a,t,o),l=!0},i(a){l||(e&&F(e.$$.fragment,a),l=!0)},o(a){e&&W(e.$$.fragment,a),l=!1},d(a){a&&m(t),e&&we(e,a)}}}function Rr(s){let e;return{c(){e=Q(" ")},l(t){e=Y(t," ")},m(t,l){R(t,e,l)},i:pe,o:pe,d(t){t&&m(e)}}}function Kr(s){let e,t,l,n='<a class="hover:underline" href="https://github.com/TeemuKoivisto/midi-note-trainer">MIDI Note Trainer</a>',r,a,o,i="Introduction",c,f,u,p,g,_,y,L,k,T,A,E,G,w,O,N,D,K,B,S,P;u=new cr({}),g=new Or({}),y=new ba({}),T=new Br({props:{class:"score-options mr-4"}}),E=new Er({props:{class:"play-form"}});let U={ctx:s,current:null,token:null,hasCatch:!1,pending:Rr,then:Ur,catch:Mr,value:21,blocks:[,,,]};return In(ge(()=>import("./Score.d9066ea4.js"),["./Score.d9066ea4.js","./vendor_svelte.69274a52.js","./vendor.d5730520.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),U),N=new pr({props:{class:"min-h-32",debounced:!!s[0]}}),N.$on("guessed-chord",s[2]),N.$on("guessed-key",s[3]),N.$on("guessed-note",s[4]),K=new Pa({props:{game:s[1]}}),{c(){e=v("meta"),t=V(),l=v("h1"),l.innerHTML=n,r=V(),a=v("div"),o=v("button"),o.textContent=i,c=V(),f=v("section"),ke(u.$$.fragment),p=V(),ke(g.$$.fragment),_=V(),ke(y.$$.fragment),L=V(),k=v("div"),ke(T.$$.fragment),A=V(),ke(E.$$.fragment),G=V(),U.block.c(),w=V(),O=v("section"),ke(N.$$.fragment),D=V(),ke(K.$$.fragment),this.h()},l(I){const M=An("svelte-1w2oado",document.head);e=b(M,"META",{name:!0,content:!0}),M.forEach(m),t=j(I),l=b(I,"H1",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-1l8ebwf"&&(l.innerHTML=n),r=j(I),a=b(I,"DIV",{class:!0});var H=C(a);o=b(H,"BUTTON",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-3omuy"&&(o.textContent=i),H.forEach(m),c=j(I),f=b(I,"SECTION",{class:!0});var le=C(f);ye(u.$$.fragment,le),p=j(le),ye(g.$$.fragment,le),_=j(le),ye(y.$$.fragment,le),L=j(le),k=b(le,"DIV",{class:!0});var ae=C(k);ye(T.$$.fragment,ae),A=j(ae),ye(E.$$.fragment,ae),ae.forEach(m),le.forEach(m),G=j(I),U.block.l(I),w=j(I),O=b(I,"SECTION",{class:!0});var he=C(O);ye(N.$$.fragment,he),D=j(he),ye(K.$$.fragment,he),he.forEach(m),this.h()},h(){h(e,"name","description"),h(e,"content","App to practise music notation, scales and chords using MIDI"),h(l,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight"),h(o,"class","btn primary"),h(a,"class","px-4 md:px-0"),h(k,"class","play svelte-qjpqy3"),h(f,"class","px-4 md:px-0"),h(O,"class","mb-8 px-4 md:px-0 flex flex-col")},m(I,M){d(document.head,e),R(I,t,M),R(I,l,M),R(I,r,M),R(I,a,M),d(a,o),R(I,c,M),R(I,f,M),Ee(u,f,null),d(f,p),Ee(g,f,null),d(f,_),Ee(y,f,null),d(f,L),d(f,k),Ee(T,k,null),d(k,A),Ee(E,k,null),R(I,G,M),U.block.m(I,U.anchor=M),U.mount=()=>w.parentNode,U.anchor=w,R(I,w,M),R(I,O,M),Ee(N,O,null),d(O,D),Ee(K,O,null),B=!0,S||(P=z(o,"click",s[5]),S=!0)},p(I,[M]){s=I;const H={};M&1&&(H.debounced=!!s[0]),N.$set(H);const le={};M&2&&(le.game=s[1]),K.$set(le)},i(I){B||(F(u.$$.fragment,I),F(g.$$.fragment,I),F(y.$$.fragment,I),F(T.$$.fragment,I),F(E.$$.fragment,I),F(U.block),F(N.$$.fragment,I),F(K.$$.fragment,I),B=!0)},o(I){W(u.$$.fragment,I),W(g.$$.fragment,I),W(y.$$.fragment,I),W(T.$$.fragment,I),W(E.$$.fragment,I);for(let M=0;M<3;M+=1){const H=U.blocks[M];W(H)}W(N.$$.fragment,I),W(K.$$.fragment,I),B=!1},d(I){I&&(m(t),m(l),m(r),m(a),m(c),m(f),m(G),m(w),m(O)),m(e),we(u),we(g),we(y),we(T),we(E),U.block.d(I),U.token=null,U=null,we(N),we(K),S=!1,P()}}}function Fr(s,e,t){let l,n,r,a,o,i;be(s,bt,w=>t(8,l=w)),be(s,Et,w=>t(1,n=w)),be(s,dt,w=>t(9,r=w)),be(s,rt,w=>t(10,a=w)),be(s,at,w=>t(11,o=w)),be(s,Cs,w=>t(12,i=w));let c,f;fn(()=>(i&&E(),window.addEventListener("keydown",u),window.addEventListener("mousedown",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)})),rs.subscribe(w=>{w&&w.channels[1].addListener("noteon",p)});function u(){qe.initAudio(),window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)}function p(w){if(c)return;const O=w.rawData;g(O[1],O[2])}function g(w,O){const N=n;N instanceof Ot&&!(N!=null&&N.ended)&&l==="waiting"?L(w):N instanceof ft&&!(N!=null&&N.ended)&&l==="waiting"?(N.addPlayedNote(w),f||(f=setTimeout(y,2e3))):N||Ae.pushPlayed(w),o&&o.noteOn(w,a.fixedVelocity??O)}function _(){r.autoplay&&r.waitSeconds>0?t(0,c=setTimeout(()=>{r.autoplay&&Se.nextGuess(),t(0,c=void 0)},r.waitSeconds*1e3)):r.autoplay?Se.nextGuess():t(0,c=void 0)}function y(){var O;const w=n;if(w instanceof ft){const N=w.guess();Ae.setPlayed(((O=w.latestGuess.guessed)==null?void 0:O.notes)||[],N,-1),Se.updateState(N?"correct":"wrong"),_()}f=void 0}function L(w){const O=n;if(O instanceof Ot&&l==="waiting"){Ae.setTarget([Ae.getNote(O.current)]);const N=O.guess(w);Se.updateState(N?"correct":"wrong"),Ae.pushPlayed(w,N,4e3),_()}}function k(w){const O=n;if(O instanceof ft&&l==="waiting"){const N=O.guessWrittenChord(w.detail);Se.updateState(N?"correct":"wrong"),_()}}function T(w){const O=n;if(O instanceof Mt&&l==="waiting"){const N=w.detail.replaceAll("♭","b").replaceAll("♯","#"),D=O.guess(N);Se.updateState(D?"correct":"wrong"),_()}}function A(w){g(w.detail,80)}async function E(){const w=await qe.openMidi();"data"in w?w.data.name:(w.err,console.error(w.err))}return[c,n,k,T,A,()=>Pn.open("introduction",void 0)]}class qr extends Fe{constructor(e){super(),xe(this,e,Fr,Kr,He,{})}}export{el as F,ft as G,qr as P,Rn as S,Ot as a,Se as b,Et as c,vt as d,Vs as e,bt as g,at as p,Vt as s,ll as t};
