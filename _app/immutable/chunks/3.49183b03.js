import{_ as Xl}from"./preload-helper.a4192956.js";import{R as Ge,Q as It,T as Be,U as Zl,S as He,i as Re,s as ze,O as nt,V as se,e as v,m as B,H as _e,a as g,b as A,n as Z,d as m,o as M,I as pe,f as d,L as q,W as Se,g as F,h as u,J as ve,p as R,t as z,C as tt,w as st,l as $,K as ge,X as je,Y as at,M as re,N as ye,P as ke,z as J,A as Q,B as ne,v as De,q as he,Z as cs,r as Bl,_ as Je,$ as en,a0 as Rt,c as Ml,u as Vl,j as Ol,k as Ul,a1 as bs,a2 as Kt,F as tn,a3 as ys,a4 as ks,a5 as sn,a6 as ln,G as nn}from"./vendor_svelte.470e5abf.js";import{w as xt,b as an,c as on,e as ws,f as Cs,g as Fl,h as zt,i as qt,a as Es,j as ns}from"./vendor.1acf520b.js";const Ss={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function xe(l,e=0,t=0){return{interval:`${l}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:l,semitones:Kl(l,e,t),flats:e,sharps:t}}function Kl(l,e,t){return(l<8?Ss[l]:Ss[l%7])-e+t+Math.floor(l/8)*12}function xl(l){let e,t=0,s=0;l<0?(t=1+Math.floor(-l/100),e=-l%100):l>100?(s=Math.floor(l/100),e=l%100):e=l;const n=Kl(e,t,s);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(s)}`,interval_seq:e,semitones:n,flats:t,sharps:s}}const rn=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let ts=[];function Hl(){return rn.map(l=>{const e=l[3].map(xl);return{suffixes:l[0],name:l[1][0],type:l[2],intervals:e}})}function Tt(l){ts.length===0&&(ts=Hl());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return ts.find(t=>t.suffixes.find(s=>s===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function cn(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const o=(l.semitones+e)%12;return{...l,semitones:o<0?o+12:o,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function as(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const o=t[n],a=l+o.semitones,r=e.scaleNotes.find(_=>_.semitones===a%12),i=o.flats>0,c=o.sharps>0,h=(i?a+1:c?a-1:a)%12,f=i?-1:c?1:0;s.push(cn(r??e.notesMap.get(h),r?0:f,a))}return s}const As=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],un=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],Ts=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function fn(l){let e=0,t=0;for(let s=0;s<As.length;s+=1){const n=l.find(a=>a.note.slice(0,2)===As[s]),o=l.find(a=>a.note.slice(0,2)===un[s]);if(n)e+=1;else if(o)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:Ts.get(e*-1)}:{flats:0,sharps:t,majorSignature:Ts.get(t)}}function hn(l){return l>=9?`${l>=10?"X":""}${l===9?"IX":"I".repeat(l%10)}`:`${l>=5?"V":""}${l===4?"IV":"I".repeat(l%5)}`}function Rl(l){return l.map(e=>{const t=[xe(1)];let s;return e.major?(t.push(xe(3)),e.suffix.startsWith("+")?t.push(xe(5,0,1)):e.suffix.startsWith("6")?t.push(xe(6)):e.suffix.startsWith("7")?t.push(xe(7,1)):e.suffix.startsWith("maj7")?t.push(xe(7)):s=Tt("maj")):e.minor?(t.push(xe(3,1)),e.suffix.startsWith("°")?t.push(xe(5,1)):e.suffix.startsWith("6")?(t.push(xe(6)),s=Tt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push(xe(7,1)),s=Tt("m"+e.suffix)):s=Tt("m")):e.suffix.startsWith("sus2")?t.push(xe(2)):e.suffix.startsWith("sus4")&&t.push(xe(4)),t.length<=2&&t.push(xe(5)),t.length<=2&&t.push(xe(8)),s||(s=Tt(e.suffix)),{...s,intervals:t}})}function dn(l,e){let t=e.has(4)&&e.has(7),s=e.has(3)&&e.has(7);const n=hn(l);let o="";return t||s||(e.has(3)&&e.has(6)?(o="°",s=!0):e.has(4)&&e.has(8)?(o="+",t=!0):e.has(3)&&e.has(10)?(s=!0,o="7"):e.has(4)&&e.has(10)?(o="7",t=!0):e.has(4)&&e.has(11)?(o="maj7",t=!0):e.has(3)&&e.has(8)?(o="6",s=!0):e.has(4)&&e.has(9)?(o="6",t=!0):e.has(2)?o="sus2":e.has(5)?o="sus4":e.has(7)?o="5":o="?"),{degree:l,roman:s?n.toLowerCase():n,suffix:o,major:t,minor:s,semitones:e}}function mn(l){const e=l.length;return l.map((t,s)=>{const n=t.semitones,o=new Set;for(let a=1;a<e;a+=1){const r=l[(s+a)%e].semitones,i=r<=n?r+12-n:r-n;o.add(i)}return dn(t.interval_seq,o)})}const _n=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let ss=[];function us(){return _n.map(l=>{const e=l[0],t=l[1].map(xl),s=mn(t);return{names:e,intervals:t,triads:s}})}function pn(l){ss.length===0&&(ss=us());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return ss.find(t=>t.names.find(s=>s.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const vn=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,gn=/^[0-9]$/,Ze=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function zl(l){return l===12?1:Math.floor((l-12)/12)}function Qe(l){return`${l.note}${zl(l.midi)}`}function Et(l){const t=(l-12)%12;return{...Ze[t],semitones:t,midi:l}}function bn(l,e=!0,t=!1){if(e&&!vn.test(l))return{err:`Unrecognized note "${l}"`,code:400};const s=l.trim(),n=s.charAt(0).toUpperCase(),o=Ze.find(f=>f.note.charAt(0)===n&&f.note.length===1);if(!o)return{err:`Unable to find note ${s}`,code:500};const a=s.slice(1).split("").reduce((f,_)=>f+(_.toLowerCase()==="b"||_==="♭"?-1:_==="#"||_==="♯"?1:0),0);let r;if(gn.test(s.charAt(s.length-1)))try{r=parseInt(s.charAt(s.length-1),10)}catch{}if(t&&r===void 0)return{err:`No octave provided: ${l}`,code:400};r===void 0&&(r=0);let i=(o.semitones+a)%12;i=i<0?i+12:i;const c=a<0?-a:0,h=a>0?a:0;return{data:{note:`${n}${"♭".repeat(c)}${"♯".repeat(h)}`,semitones:i,midi:12+r*12+i,flats:c,sharps:h}}}function ql(l){const e=Ze.find(t=>t.note.charAt(0)===l.charAt(0)&&t.note.length===1);if(e){const t=l.slice(1).split("").reduce((n,o)=>n+(o.toLowerCase()==="b"||o==="♭"?-1:o==="#"||o==="♯"?1:0),0),s=(e.semitones+t)%12;return{note:l,semitones:s<0?s+12:s,flats:t<0?-t:0,sharps:t>0?t:0}}}const yn=/^[a-gA-G][♭b#♯]?$/,ls="ABCDEFG";function kn(l,e){return e.map(t=>ls.charAt((ls.indexOf(l)+t.interval_seq-1)%ls.length))}function wn(l,e,t){return t.map((s,n)=>{const o=e[n],a=(l+s.semitones)%12,r=Ze[a],i=r.note.charAt(0);if(i<o&&(i!=="A"||o!=="G")||i==="G"&&o==="A"){let c=1,h=Ze[(a+c)%12];for(;h.note.charAt(0)!==o;)c+=1,h=Ze[(a+c)%12];return{semitones:a,note:h.note+"♭".repeat(c),flats:c+(h.note.includes("♭")?1:0),sharps:0}}else if(i>o||i==="A"&&o==="G"){let c=1,h=a===0?Ze.length-1:a-c,f=Ze[h];for(;f.note.charAt(0)!==o;)c+=1,h=h===0?Ze.length-1:h-1,f=Ze[h];return{semitones:a,note:f.note+"♯".repeat(c),flats:0,sharps:c+(f.note.includes("♯")?1:0)}}else return{semitones:a,note:r.note,flats:r.flats,sharps:r.sharps}})}function Wt(l,e){if(!yn.test(l))return{err:`Unknown key: ${l}`,code:400};const t=pn(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const s=`${l.charAt(0).toUpperCase()}${l.charAt(1).replace("b","♭").replace("#","♯")}`,n=ql(s);if(!n)return{err:`Unable to find root for note: ${s}`,code:404};const o=kn(s.charAt(0),t.intervals),a=wn(n.semitones,o,t.intervals),r=new Map(Ze.map(i=>{const c=a.find(h=>h.semitones===i.semitones);return c?[i.semitones,c]:[i.semitones,{...i}]}));return{data:{key:s,scale:t.names[0],names:t.names,...fn(a),intervals:t.intervals.map(i=>({...i})),triads:t.triads.map(i=>({...i})),scaleNotes:a,notesMap:r}}}const os=new Map;function Cn(l,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(l)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function En(l,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(l)),{data:void 0}}catch(s){return{err:`Failed to store the value: ${s}`,code:400}}}function ct(l,e){const{key:t,storage:s="local",namespace:n="default"}=e,o=Cn(t,s),a=Ge(l);"data"in o?l.set(e.deserialize?e.deserialize(o.data):o.data):"err"in o&&(e!=null&&e.debug)&&console.info(o.err);const r=l.subscribe(c=>{const h=En(e.serialize?e.serialize(c):c,t,s);"err"in h&&(e!=null&&e.debug)&&console.error(h.err)}),i=os.get(n);return i?i.push({key:t,storage:s,value:l,defaultValue:a,unsubscribe:r}):os.set(n,[{key:t,storage:s,value:l,defaultValue:a,unsubscribe:r}]),l}function Sn(l=["default"],e){l.forEach(t=>{var s;(s=os.get(t))==null||s.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function An(l,e){const t=await fetch(l);if(!t.ok)return{err:t.statusText,code:t.status};const s=await t.arrayBuffer();return{data:await e.decodeAudioData(s)}}async function Tn(l,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],s=await Promise.all(t.map(o=>An(`${l}${o}`,e))),n=[];return s.forEach(o=>{"err"in o?console.error(`Failed to load audio: ${o.err}`):n.push(o.data)}),n}class Nn{constructor(e,t,s,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(s),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(s))}on(e,t,s,n,o,a,r,i){this.noteA.buffer=e,this.noteA.playbackRate.value=s,this.biquadFilter.frequency.value=o,this.gainA.gain.value=a,this.gain.gain.value=i,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=r,this.noteB.start(0)),this.noteA.start(0)}off(e,t,s){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(s),this.noteB.stop(s),(n=this.damp)==null||n.start(0)}}class In{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,s)=>{this.bufferlists.push(t),s===8?this.damper=t:s===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(s=>{this.noteOn(s,t)})}noteOn(e,t=80){if(e<109&&e>20){const s=this.notes.get(e);s&&(s.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),o=n+1,a=n*12+21,r=2**((e-69)/12)*440,i=t/127;let c=r*(2-(e-21)/50)+3*r*i;e<60&&(c=440*(3-(60-21)/50)+3*r*i);const h=1-(e%12/12+1)/12,f=Math.pow(2,(e-a)/12),_=0,b=0,p=i**1.4,w=new Nn(e,this.context,this.directGain,this.damper);w.on(this.bufferlists[n],this.bufferlists[o],f,_,c,h,b,p),this.notes.set(e,w)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const jn="/midi-note-trainer/",rs=ct(Be(!1),{key:"midi-access"}),$t=Be(void 0),fs=ct(Be([60,84]),{key:"midi-range",storage:"session"}),Jt=It(fs,l=>[Et(l[0]),Et(l[1])]),Ns=Be(void 0),et=Be(void 0),Wl=Be(!0),vt=ct(Be({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),fe={async openMidi(){return xt.enable().then(()=>(rs.set(!0),xt.inputs.length>0?($t.set(xt.inputs[0]),{data:xt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(l=>({err:l.toString(),code:403}))},disableMidi(){rs.set(!1),$t.set(void 0)},setMidiRange(l){fs.set(l)},setInputValue(l,e){vt.update(t=>({...t,[l]:e})),l==="useSound"&&!e?et.set(void 0):l==="useSound"&&!Ge(et)&&this.initAudio()},setKeyboardFocus(l){Wl.set(l)},async initAudio(){let l=Ge(Ns);if(l||(l=new AudioContext,Ns.set(l)),!Ge(et)){const e=new In(l),t=await Tn(`${jn}audio`,l);e.load(t),et.set(e)}}};let Xe;const Dn=Zl({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}}),gt=Be(["C","Major"]),bt=It(gt,l=>{const e=Wt(l[0],l[1]);return"data"in e?e.data:{key:l[0],scale:l[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),$l=It([bt,Dn],([l,e])=>{const t={...e};return Object.entries(e).forEach(([s,n])=>{const o=l.notesMap.get(n.semitones%12);o&&(t[s]={note:o.note,flats:o.flats,sharps:o.sharps,semitones:n.semitones})}),t}),Is=Be([]),mt=Be([]);function is(l,e){if(l.length>0){const t=Date.now();let s=t;const n=l.filter(o=>(o.started+e>t&&(s=Math.min(s,o.started)),o.started+e>t));return!Xe&&n.length>0&&(Xe=setTimeout(()=>{Xe=void 0,mt.update(o=>is(o,e))},e-(t-s)+100)),n}return l}const ue={setKey(l){gt.update(e=>[l,e[1]])},setScale(l){gt.update(e=>[e[0],l])},setKeyAndScale(l,e){gt.set([l,e])},setTarget(l=[]){Is.set(l)},findNote(l){return Object.values(Ge($l)).find(e=>{if(e.note.charAt(0)===l.charAt(0)){const t=l.slice(1).split("").reduce((s,n)=>s+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},getNote(l){return{...Ge(bt).notesMap.get(l%12),midi:l}},pushPlayed(l,e,t){const n={...Ge(bt).notesMap.get(l%12),midi:l},o=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(mt.update(r=>{const i=r.findIndex(c=>c.midi===l);return i>=0&&r.splice(i,1),[...r,{...n,color:a,started:o}]}),!Xe&&t!==-1){const r=t??Ge(vt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,mt.update(i=>is(i,r))},r)}},setPlayed(l,e,t){const s=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(mt.update(o=>[...l.map(a=>({...a,color:n,started:s}))]),!Xe&&t!==-1){const o=t??Ge(vt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,mt.update(a=>is(a,o))},o)}},clearPlayed(){mt.set([]),clearTimeout(Xe),Xe=void 0},clearScore(l=!1){l&&gt.set(["C","Major"]),Is.set([]),mt.set([])}};class hs{constructor(e,t,s){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=s;const n=[],{count:o}=s,a=t.map(i=>typeof i=="object"&&i!==null?{...i}:i);let r=s.duplicates;!s.duplicates&&o>a.length&&(console.warn(`Trying to create game with count ${o} larger than available unique values ${t.length}`),r=!0);for(let i=0;i<o;i+=1){const c=Math.floor(Math.random()*a.length);if(r)n.push(a[c]);else{const h=a.splice(c,1);h.length>0&&n.push(h[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function Ln(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const o=(l.semitones+e)%12;return{...l,semitones:o<0?o+12:o,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function Pn(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const o=t[n],a=l+o.semitones,r=e.scaleNotes.find(_=>_.semitones===a%12),i=o.flats>0,c=o.sharps>0,h=(i?a+1:c?a-1:a)%12,f=i?-1:c?1:0;s.push(Ln(r??e.notesMap.get(h),r?0:f,a))}return s}const Gn=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Bn(l){const t=(l-12)%12;return{...Gn[t],semitones:t,midi:l}}function Mn(l){return`${l.note.trim().charAt(0).toUpperCase()}${"♭".repeat(l.flats)}${"♯".repeat(l.sharps)}`}class rt extends hs{constructor(e,t,s){const n=t.range[0],o=t.range[1],a=new Set(t.scale.scaleNotes.map(i=>i.semitones)),r=s.chords.flatMap(i=>{const c=[],h=i.intervals.reduce((f,_)=>_.semitones>f?_.semitones:f,0);for(let f=n;f<=o-h;f+=1)if((!s.onlyScale||a.has(f%12))&&(!i.allowed||i.allowed.has(f%12))){const _=Pn(f,t.scale,i.intervals);c.push({...i,rootNote:_[0].note,chord:`${_[0].note}${i.suffixes[0]}`,notes:_})}return c});super(e,r,t),this.played=new Set,this.opts=s}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${Mn(e)}${e.chord.toLowerCase()}`,notes:[]},s=this.current.chord===t.chord;return this.addGuessed(t,s)}guess(){const e=Array.from(this.played.values()).map(n=>Bn(n)).sort((n,o)=>n.midi-o.midi);this.played.clear();const t={chord:"",notes:e},s=this.current.notes.every(n=>e.find(o=>o.midi%12===n.midi%12));return this.addGuessed(t,s)}}const Vn={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Nt extends hs{constructor(e,t){const s=e==="keys-major"?"major":"minor";super(e,Object.keys(Vn[s]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class St extends hs{constructor(e,t){const s=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-s+1)).map((o,a)=>s+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const Jl={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},_t=Be("waiting"),it=ct(Be(Jl),{key:"game-options"}),pt=Be(void 0),ds=Be(Hl().map(l=>({...l,selected:!0}))),be={play(...[l,e]){var i,c,h;let t;const s=Ge(bt),n=Ge(fs),o=Ge(it),a={scale:s,range:n,duplicates:o.duplicates,count:o.count};let r=[s.key,s.scale];if(l==="notes")t=new St(l,a),ue.setTarget([ue.getNote(t.current)]),(i=Ge(et))==null||i.noteOn(t.current);else if(l==="pitches")t=new St(l,a),ue.setTarget(),fe.setInputValue("useSound",!0),(c=Ge(et))==null||c.noteOn(t.current);else if(l==="keys-major"||l=="keys-minor")t=new Nt(l,a),r=[t.current,l==="keys-major"?"major":"minor"];else if(l==="chords-play"||l==="chords-write")t=new rt(l,a,e);else if(l==="chords-diatonic"){const f=Rl(s.triads).map((_,b)=>({..._,allowed:new Set([s.scaleNotes[b].semitones])}));t=new rt(l,a,{chords:f})}else throw Error("Unknown game type: "+l);return typeof t.current!="number"&&typeof t.current!="string"&&((h=Ge(et))==null||h.playChord(t.current.notes.map(f=>f.midi)),ue.setTarget(t.current.notes)),ue.setKeyAndScale(r[0],r[1]),ue.clearPlayed(),_t.set("waiting"),pt.set(t),t},updateState(l){_t.set(l)},setOptionValue(l,e){it.update(t=>({...t,[l]:e}))},toggleChords(l){ds.update(e=>e.map(t=>({...t,selected:l(t)})))},nextGuess(){var e,t;const l=Ge(pt);l!=null&&l.ended?_t.set("ended"):l instanceof St?(l.type==="notes"?ue.setTarget([ue.getNote(l.current)]):ue.setTarget(),ue.clearPlayed(),(e=Ge(et))==null||e.noteOn(l.current),be.updateState("waiting"),l.startTime()):l instanceof rt?(ue.setTarget(l.current.notes),ue.clearPlayed(),(t=Ge(et))==null||t.playChord(l==null?void 0:l.current.notes.map(s=>s.midi)),_t.set("waiting"),l.startTime()):l instanceof Nt&&(ue.setKey(l.current),_t.set("waiting"),l.startTime())},clearGame(l=!1){const e=Ge(pt);e&&ue.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),l&&it.set(Jl),pt.set(void 0),_t.set("waiting"),ue.clearScore()}};function js(l,e,t){const s=l.slice();return s[29]=e[t],s[31]=t,s}function Ds(l,e,t){const s=l.slice();return s[34]=e[t],s}function Ls(l,e,t){const s=l.slice();return s[8]=e[t],s}function Ps(l,e,t){const s=l.slice();return s[29]=e[t],s[31]=t,s}function Gs(l,e,t){const s=l.slice();return s[34]=e[t],s}function Bs(l,e,t){const s=l.slice();return s[8]=e[t],s}function On(l){let e,t=se(l[29].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ms(Gs(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o[0]&64){t=se(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const r=Gs(n,t,a);s[a]?s[a].p(r,o):(s[a]=Ms(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Un(l){let e,t=se(l[2][l[31]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Vs(Bs(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o[0]&4){t=se(n[2][n[31]]);let a;for(a=0;a<t.length;a+=1){const r=Bs(n,t,a);s[a]?s[a].p(r,o):(s[a]=Vs(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ms(l){let e,t=l[34].interval+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-8fys9e")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&64&&t!==(t=n[34].interval+"")&&ne(s,t)},d(n){n&&m(e)}}}function Vs(l){let e,t=l[8].note+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-8fys9e")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&4&&t!==(t=n[8].note+"")&&ne(s,t)},d(n){n&&m(e)}}}function Os(l){let e,t,s,n,o,a,r=l[29].suffixes[0]+"",i,c,h,f,_,b,p=l[29].name+"",w,y,T,N;n=new nt({props:{icon:l[29].selected?zt:qt,width:12}});function L(){return l[25](l[29])}function E(S,D){return S[2][S[31]]&&S[2][S[31]].length>0?Un:On}let j=E(l),C=j(l);return{c(){e=v("li"),t=v("button"),s=v("span"),_e(n.$$.fragment),o=B(),a=v("div"),i=J(r),c=B(),h=v("li"),C.c(),_=B(),b=v("li"),w=J(p),this.h()},l(S){e=g(S,"LI",{});var D=A(e);t=g(D,"BUTTON",{class:!0});var I=A(t);s=g(I,"SPAN",{class:!0});var K=A(s);pe(n.$$.fragment,K),K.forEach(m),o=M(I),a=g(I,"DIV",{class:!0});var k=A(a);i=Q(k,r),k.forEach(m),I.forEach(m),D.forEach(m),c=M(S),h=g(S,"LI",{class:!0,title:!0});var V=A(h);C.l(V),V.forEach(m),_=M(S),b=g(S,"LI",{class:!0});var P=A(b);w=Q(P,p),P.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded svelte-8fys9e"),q(s,"text-green-500",l[29].selected),q(s,"text-gray-400",!l[29].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-8fys9e"),d(t,"class","flex items-center justify-center w-full select-btn svelte-8fys9e"),q(t,"hidden",l[7]),d(h,"class","intervals svelte-8fys9e"),d(h,"title",f=l[29].intervals.map(Hs).join("-")),d(b,"class","text-xs")},m(S,D){F(S,e,D),u(e,t),u(t,s),ve(n,s,null),u(t,o),u(t,a),u(a,i),F(S,c,D),F(S,h,D),C.m(h,null),F(S,_,D),F(S,b,D),u(b,w),y=!0,T||(N=R(t,"click",L),T=!0)},p(S,D){l=S;const I={};D[0]&64&&(I.icon=l[29].selected?zt:qt),n.$set(I),(!y||D[0]&64)&&q(s,"text-green-500",l[29].selected),(!y||D[0]&64)&&q(s,"text-gray-400",!l[29].selected),(!y||D[0]&64)&&r!==(r=l[29].suffixes[0]+"")&&ne(i,r),(!y||D[0]&128)&&q(t,"hidden",l[7]),j===(j=E(l))&&C?C.p(l,D):(C.d(1),C=j(l),C&&(C.c(),C.m(h,null))),(!y||D[0]&64&&f!==(f=l[29].intervals.map(Hs).join("-")))&&d(h,"title",f),(!y||D[0]&64)&&p!==(p=l[29].name+"")&&ne(w,p)},i(S){y||(z(n.$$.fragment,S),y=!0)},o(S){$(n.$$.fragment,S),y=!1},d(S){S&&(m(e),m(c),m(h),m(_),m(b)),ge(n),C.d(),T=!1,N()}}}function Fn(l){let e,t=se(l[29].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=Us(Ds(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o[0]&32){t=se(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const r=Ds(n,t,a);s[a]?s[a].p(r,o):(s[a]=Us(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Kn(l){let e,t=se(l[3][l[31]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Fs(Ls(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o[0]&8){t=se(n[3][n[31]]);let a;for(a=0;a<t.length;a+=1){const r=Ls(n,t,a);s[a]?s[a].p(r,o):(s[a]=Fs(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Us(l){let e,t=l[34].interval+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-8fys9e")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&32&&t!==(t=n[34].interval+"")&&ne(s,t)},d(n){n&&m(e)}}}function Fs(l){let e,t=l[8].note+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-8fys9e")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&8&&t!==(t=n[8].note+"")&&ne(s,t)},d(n){n&&m(e)}}}function Ks(l){let e,t,s,n,o,a,r=l[29].suffixes[0]+"",i,c,h,f,_,b,p=l[29].name+"",w,y,T,N;n=new nt({props:{icon:l[29].selected?zt:qt,width:12}});function L(){return l[26](l[29])}function E(S,D){return S[3][S[31]]&&S[3][S[31]].length>0?Kn:Fn}let j=E(l),C=j(l);return{c(){e=v("li"),t=v("button"),s=v("span"),_e(n.$$.fragment),o=B(),a=v("div"),i=J(r),c=B(),h=v("li"),C.c(),_=B(),b=v("li"),w=J(p),this.h()},l(S){e=g(S,"LI",{});var D=A(e);t=g(D,"BUTTON",{class:!0});var I=A(t);s=g(I,"SPAN",{class:!0});var K=A(s);pe(n.$$.fragment,K),K.forEach(m),o=M(I),a=g(I,"DIV",{class:!0});var k=A(a);i=Q(k,r),k.forEach(m),I.forEach(m),D.forEach(m),c=M(S),h=g(S,"LI",{class:!0,title:!0});var V=A(h);C.l(V),V.forEach(m),_=M(S),b=g(S,"LI",{class:!0});var P=A(b);w=Q(P,p),P.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded svelte-8fys9e"),q(s,"text-green-500",l[29].selected),q(s,"text-gray-400",!l[29].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-8fys9e"),d(t,"class","flex items-center justify-center w-full select-btn svelte-8fys9e"),q(t,"hidden",l[7]),d(h,"class","intervals svelte-8fys9e"),d(h,"title",f=l[29].intervals.map(Rs).join("-")),d(b,"class","text-xs")},m(S,D){F(S,e,D),u(e,t),u(t,s),ve(n,s,null),u(t,o),u(t,a),u(a,i),F(S,c,D),F(S,h,D),C.m(h,null),F(S,_,D),F(S,b,D),u(b,w),y=!0,T||(N=R(t,"click",L),T=!0)},p(S,D){l=S;const I={};D[0]&32&&(I.icon=l[29].selected?zt:qt),n.$set(I),(!y||D[0]&32)&&q(s,"text-green-500",l[29].selected),(!y||D[0]&32)&&q(s,"text-gray-400",!l[29].selected),(!y||D[0]&32)&&r!==(r=l[29].suffixes[0]+"")&&ne(i,r),(!y||D[0]&128)&&q(t,"hidden",l[7]),j===(j=E(l))&&C?C.p(l,D):(C.d(1),C=j(l),C&&(C.c(),C.m(h,null))),(!y||D[0]&32&&f!==(f=l[29].intervals.map(Rs).join("-")))&&d(h,"title",f),(!y||D[0]&32)&&p!==(p=l[29].name+"")&&ne(w,p)},i(S){y||(z(n.$$.fragment,S),y=!0)},o(S){$(n.$$.fragment,S),y=!1},d(S){S&&(m(e),m(c),m(h),m(_),m(b)),ge(n),C.d(),T=!1,N()}}}function xn(l){let e,t,s,n,o="Chords",a,r,i,c,h,f,_,b,p,w,y,T,N,L,E,j,C,S="Key",D,I,K,k,V="Scale",P,U,G,O,H="Note",ee,te,ce,ae,Te,Ke,Me,me,qe,Fe;c=new nt({props:{icon:an,width:20}}),_=new nt({props:{icon:on,width:16}}),w=new nt({props:{icon:l[4]?ws:Cs,width:16}}),N=new nt({props:{icon:Fl,width:16}});let Ne=se(l[6]),oe=[];for(let x=0;x<Ne.length;x+=1)oe[x]=Os(Ps(l,Ne,x));const Ae=x=>$(oe[x],1,1,()=>{oe[x]=null});let de=se(l[5]),W=[];for(let x=0;x<de.length;x+=1)W[x]=Ks(js(l,de,x));const le=x=>$(W[x],1,1,()=>{W[x]=null});return{c(){e=v("div"),t=v("fieldset"),s=v("legend"),n=v("button"),n.textContent=o,a=B(),r=v("div"),i=v("button"),_e(c.$$.fragment),h=B(),f=v("button"),_e(_.$$.fragment),b=B(),p=v("button"),_e(w.$$.fragment),y=B(),T=v("button"),_e(N.$$.fragment),L=B(),E=v("div"),j=v("div"),C=v("label"),C.textContent=S,D=B(),I=v("input"),K=B(),k=v("label"),k.textContent=V,P=B(),U=v("input"),G=B(),O=v("label"),O.textContent=H,ee=B(),te=v("input"),ce=B(),ae=v("ul");for(let x=0;x<oe.length;x+=1)oe[x].c();Te=B(),Ke=v("ul");for(let x=0;x<W.length;x+=1)W[x].c();this.h()},l(x){e=g(x,"DIV",{class:!0});var Y=A(e);t=g(Y,"FIELDSET",{class:!0});var ie=A(t);s=g(ie,"LEGEND",{class:!0});var X=A(s);n=g(X,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1knqzl6"&&(n.textContent=o),X.forEach(m),a=M(ie),r=g(ie,"DIV",{class:!0});var we=A(r);i=g(we,"BUTTON",{class:!0});var Le=A(i);pe(c.$$.fragment,Le),Le.forEach(m),h=M(we),f=g(we,"BUTTON",{class:!0});var lt=A(f);pe(_.$$.fragment,lt),lt.forEach(m),b=M(we),p=g(we,"BUTTON",{class:!0});var We=A(p);pe(w.$$.fragment,We),We.forEach(m),y=M(we),T=g(we,"BUTTON",{class:!0});var Ve=A(T);pe(N.$$.fragment,Ve),Ve.forEach(m),we.forEach(m),L=M(ie),E=g(ie,"DIV",{class:!0});var Ie=A(E);j=g(Ie,"DIV",{class:!0});var Ce=A(j);C=g(Ce,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(C)!=="svelte-14m38zf"&&(C.textContent=S),D=M(Ce),I=g(Ce,"INPUT",{class:!0,id:!0}),K=M(Ce),k=g(Ce,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(k)!=="svelte-1ytp0wy"&&(k.textContent=V),P=M(Ce),U=g(Ce,"INPUT",{class:!0,id:!0}),G=M(Ce),O=g(Ce,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(O)!=="svelte-1o58334"&&(O.textContent=H),ee=M(Ce),te=g(Ce,"INPUT",{class:!0,id:!0}),Ce.forEach(m),ce=M(Ie),ae=g(Ie,"UL",{class:!0});var At=A(ae);for(let Oe=0;Oe<oe.length;Oe+=1)oe[Oe].l(At);At.forEach(m),Te=M(Ie),Ke=g(Ie,"UL",{class:!0});var yt=A(Ke);for(let Oe=0;Oe<W.length;Oe+=1)W[Oe].l(yt);yt.forEach(m),Ie.forEach(m),ie.forEach(m),Y.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(i,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),q(i,"hidden",l[7]),d(f,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(f,"hidden",l[7]),d(p,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(p,"hidden",l[7]),d(T,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(T,"hidden",l[7]),d(r,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),d(C,"class","mr-4 font-bold"),d(C,"for","scale-key"),d(I,"class","bg-gray-100 w-16 px-1 rounded"),d(I,"id","scale-key"),I.value=l[0],d(k,"class","mx-4 font-bold"),d(k,"for","scale-key"),d(U,"class","bg-gray-100 w-16 px-1 rounded"),d(U,"id","scale-key"),U.value="Major",U.disabled=!0,d(O,"class","mx-4 font-bold"),d(O,"for","scale-key"),d(te,"class","bg-gray-100 w-16 px-1 rounded"),d(te,"id","scale-key"),te.value=l[1],d(j,"class","flex w-1/2 mb-2 input svelte-8fys9e"),d(ae,"class","chord-list w-full svelte-8fys9e"),d(Ke,"class","chord-list w-full svelte-8fys9e"),d(E,"class","body svelte-8fys9e"),q(E,"hidden",l[7]),d(t,"class","flex flex-col relative rounded border-2 px-4 py-2 my-4 text-sm svelte-8fys9e"),q(t,"collapsed",l[7]),d(e,"class",Me=Se(`${l[18].class||""}`)+" svelte-8fys9e")},m(x,Y){F(x,e,Y),u(e,t),u(t,s),u(s,n),u(t,a),u(t,r),u(r,i),ve(c,i,null),u(r,h),u(r,f),ve(_,f,null),u(r,b),u(r,p),ve(w,p,null),u(r,y),u(r,T),ve(N,T,null),u(t,L),u(t,E),u(E,j),u(j,C),u(j,D),u(j,I),u(j,K),u(j,k),u(j,P),u(j,U),u(j,G),u(j,O),u(j,ee),u(j,te),u(E,ce),u(E,ae);for(let ie=0;ie<oe.length;ie+=1)oe[ie]&&oe[ie].m(ae,null);u(E,Te),u(E,Ke);for(let ie=0;ie<W.length;ie+=1)W[ie]&&W[ie].m(Ke,null);me=!0,qe||(Fe=[R(n,"click",l[10]),R(i,"click",l[14]),R(f,"click",l[15]),R(p,"click",l[16]),R(T,"click",l[17]),R(I,"input",l[11]),R(I,"focus",l[21]),R(I,"blur",l[22]),R(te,"input",l[12]),R(te,"focus",l[23]),R(te,"blur",l[24])],qe=!0)},p(x,Y){(!me||Y[0]&128)&&q(i,"hidden",x[7]),(!me||Y[0]&128)&&q(f,"hidden",x[7]);const ie={};if(Y[0]&16&&(ie.icon=x[4]?ws:Cs),w.$set(ie),(!me||Y[0]&128)&&q(p,"hidden",x[7]),(!me||Y[0]&128)&&q(T,"hidden",x[7]),(!me||Y[0]&1&&I.value!==x[0])&&(I.value=x[0]),(!me||Y[0]&2&&te.value!==x[1])&&(te.value=x[1]),Y[0]&8388){Ne=se(x[6]);let X;for(X=0;X<Ne.length;X+=1){const we=Ps(x,Ne,X);oe[X]?(oe[X].p(we,Y),z(oe[X],1)):(oe[X]=Os(we),oe[X].c(),z(oe[X],1),oe[X].m(ae,null))}for(tt(),X=Ne.length;X<oe.length;X+=1)Ae(X);st()}if(Y[0]&8360){de=se(x[5]);let X;for(X=0;X<de.length;X+=1){const we=js(x,de,X);W[X]?(W[X].p(we,Y),z(W[X],1)):(W[X]=Ks(we),W[X].c(),z(W[X],1),W[X].m(Ke,null))}for(tt(),X=de.length;X<W.length;X+=1)le(X);st()}(!me||Y[0]&128)&&q(E,"hidden",x[7]),(!me||Y[0]&128)&&q(t,"collapsed",x[7]),(!me||Y[0]&262144&&Me!==(Me=Se(`${x[18].class||""}`)+" svelte-8fys9e"))&&d(e,"class",Me)},i(x){if(!me){z(c.$$.fragment,x),z(_.$$.fragment,x),z(w.$$.fragment,x),z(N.$$.fragment,x);for(let Y=0;Y<Ne.length;Y+=1)z(oe[Y]);for(let Y=0;Y<de.length;Y+=1)z(W[Y]);me=!0}},o(x){$(c.$$.fragment,x),$(_.$$.fragment,x),$(w.$$.fragment,x),$(N.$$.fragment,x),oe=oe.filter(Boolean);for(let Y=0;Y<oe.length;Y+=1)$(oe[Y]);W=W.filter(Boolean);for(let Y=0;Y<W.length;Y+=1)$(W[Y]);me=!1},d(x){x&&m(e),ge(c),ge(_),ge(w),ge(N),je(oe,x),je(W,x),qe=!1,at(Fe)}}}let xs="Major";const Hs=l=>l.interval,Rs=l=>l.interval;function Hn(l,e,t){let s,n,o,a,r,i;re(l,ds,G=>t(20,r=G));let c="C",h=Wt(c,xs),f="",_,b=[],p=[];const w=ct(Be(!0),{key:"chords-hidden"});re(l,w,G=>t(7,i=G));function y(){w.update(G=>!G)}function T(){const G=_&&60+_.semitones;if("err"in h||!G)t(2,b=[]),t(3,p=[]);else{const O=h.data;t(2,b=n.map(H=>as(G,O,H.intervals))),t(3,p=o.map(H=>as(G,O,H.intervals)))}}function N({currentTarget:{value:G}}){t(0,c=`${G.charAt(0).toUpperCase()}${G.charAt(1).toLowerCase()}`),h=Wt(c,xs),T()}function L({currentTarget:{value:G}}){t(1,f=`${G.charAt(0).toUpperCase()}${G.charAt(1).toLowerCase()}`),t(8,_=ql(f)),T()}function E(G){be.toggleChords(O=>O.name===G.name?!O.selected:O.selected)}function j(){const G=H=>H.suffixes[0]==="maj"||H.suffixes[0]==="m",O=r.filter(G).every(H=>H.selected);be.toggleChords(H=>G(H)?!O:H.selected)}function C(){const G=H=>H.suffixes[0]==="maj7"||H.suffixes[0]==="m7"||H.suffixes[0]==="7"||H.suffixes[0]==="dim7"||H.suffixes[0]==="aug7",O=r.filter(G).every(H=>H.selected);be.toggleChords(H=>G(H)?!O:H.selected)}function S(){be.toggleChords(G=>!a)}function D(){be.toggleChords(G=>!0)}const I=()=>fe.setKeyboardFocus(!1),K=()=>fe.setKeyboardFocus(!0),k=()=>fe.setKeyboardFocus(!1),V=()=>fe.setKeyboardFocus(!0),P=G=>E(G),U=G=>E(G);return l.$$set=G=>{t(18,e=ye(ye({},e),ke(G)))},l.$$.update=()=>{l.$$.dirty[0]&1048576&&t(19,s=r),l.$$.dirty[0]&524288&&t(6,n=s.filter((G,O)=>O<s.length/2)),l.$$.dirty[0]&524288&&t(5,o=s.filter((G,O)=>O>=s.length/2)),l.$$.dirty[0]&524288&&t(4,a=s.every(G=>G.selected))},e=ke(e),[c,f,b,p,a,o,n,i,_,w,y,N,L,E,j,C,S,D,e,s,r,I,K,k,V,P,U]}class Rn extends He{constructor(e){super(),Re(this,e,Hn,xn,ze,{},null,[-1,-1])}}function zs(l,e,t){const s=l.slice();return s[10]=e[t],s}function zn(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){F(t,e,s)},p:he,d(t){t&&m(e)}}}function qn(l){let e,t,s="Played:",n,o=se(l[2]),a=[];for(let r=0;r<o.length;r+=1)a[r]=qs(zs(l,o,r));return{c(){e=v("div"),t=v("span"),t.textContent=s,n=B();for(let r=0;r<a.length;r+=1)a[r].c()},l(r){e=g(r,"DIV",{});var i=A(e);t=g(i,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1g6xxhn"&&(t.textContent=s),n=M(i);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(m)},m(r,i){F(r,e,i),u(e,t),u(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(r,i){if(i&4){o=se(r[2]);let c;for(c=0;c<o.length;c+=1){const h=zs(r,o,c);a[c]?a[c].p(h,i):(a[c]=qs(h),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(r){r&&m(e),je(a,r)}}}function Wn(l){let e,t,s="Result:",n,o,a,r=l[0].correct+"",i,c,h=l[0].sampled.length+"",f,_,b,p,w,y=l[0].avgTime+"",T,N;return{c(){e=v("div"),t=v("span"),t.textContent=s,n=B(),o=v("span"),a=J("["),i=J(r),c=J(" / "),f=J(h),_=J("]"),b=B(),p=v("span"),w=J("avg "),T=J(y),N=J("s"),this.h()},l(L){e=g(L,"DIV",{class:!0});var E=A(e);t=g(E,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1eqfbgx"&&(t.textContent=s),n=M(E),o=g(E,"SPAN",{class:!0});var j=A(o);a=Q(j,"["),i=Q(j,r),c=Q(j," / "),f=Q(j,h),_=Q(j,"]"),j.forEach(m),b=M(E),p=g(E,"SPAN",{});var C=A(p);w=Q(C,"avg "),T=Q(C,y),N=Q(C,"s"),C.forEach(m),E.forEach(m),this.h()},h(){d(o,"class","mx-2"),d(e,"class","flex")},m(L,E){F(L,e,E),u(e,t),u(e,n),u(e,o),u(o,a),u(o,i),u(o,c),u(o,f),u(o,_),u(e,b),u(e,p),u(p,w),u(p,T),u(p,N)},p(L,E){E&1&&r!==(r=L[0].correct+"")&&ne(i,r),E&1&&h!==(h=L[0].sampled.length+"")&&ne(f,h),E&1&&y!==(y=L[0].avgTime+"")&&ne(T,y)},d(L){L&&m(e)}}}function $n(l){var S,D,I,K;let e,t,s="Target:",n,o,a=((S=l[0].latestGuess.target)==null?void 0:S.chord)+"",r,i,c,h=((D=l[0].latestGuess.target)==null?void 0:D.notes.map(Ws).join(" "))+"",f,_,b,p="Guessed:",w,y,T=((I=l[0].latestGuess.guessed)==null?void 0:I.chord)+"",N,L,E,j=((K=l[0].latestGuess.guessed)==null?void 0:K.notes.map($s).join(" "))+"",C;return{c(){e=v("div"),t=v("span"),t.textContent=s,n=B(),o=v("span"),r=J(a),i=B(),c=v("span"),f=J(h),_=B(),b=v("span"),b.textContent=p,w=B(),y=v("span"),N=J(T),L=B(),E=v("span"),C=J(j),this.h()},l(k){e=g(k,"DIV",{class:!0});var V=A(e);t=g(V,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=M(V),o=g(V,"SPAN",{});var P=A(o);r=Q(P,a),P.forEach(m),i=M(V),c=g(V,"SPAN",{});var U=A(c);f=Q(U,h),U.forEach(m),_=M(V),b=g(V,"SPAN",{"data-svelte-h":!0}),Z(b)!=="svelte-104368"&&(b.textContent=p),w=M(V),y=g(V,"SPAN",{});var G=A(y);N=Q(G,T),G.forEach(m),L=M(V),E=g(V,"SPAN",{});var O=A(E);C=Q(O,j),O.forEach(m),V.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(k,V){F(k,e,V),u(e,t),u(e,n),u(e,o),u(o,r),u(e,i),u(e,c),u(c,f),u(e,_),u(e,b),u(e,w),u(e,y),u(y,N),u(e,L),u(e,E),u(E,C)},p(k,V){var P,U,G,O;V&1&&a!==(a=((P=k[0].latestGuess.target)==null?void 0:P.chord)+"")&&ne(r,a),V&1&&h!==(h=((U=k[0].latestGuess.target)==null?void 0:U.notes.map(Ws).join(" "))+"")&&ne(f,h),V&1&&T!==(T=((G=k[0].latestGuess.guessed)==null?void 0:G.chord)+"")&&ne(N,T),V&1&&j!==(j=((O=k[0].latestGuess.guessed)==null?void 0:O.notes.map($s).join(" "))+"")&&ne(C,j)},d(k){k&&m(e)}}}function Jn(l){let e,t,s="Target:",n,o,a=l[0].latestGuess.target+"",r,i,c,h,f,_="Guessed:",b,p,w=l[0].latestGuess.guessed+"",y,T,N;return{c(){e=v("div"),t=v("span"),t.textContent=s,n=B(),o=v("span"),r=J(a),i=B(),c=v("span"),h=B(),f=v("span"),f.textContent=_,b=B(),p=v("span"),y=J(w),T=B(),N=v("span"),this.h()},l(L){e=g(L,"DIV",{class:!0});var E=A(e);t=g(E,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=M(E),o=g(E,"SPAN",{});var j=A(o);r=Q(j,a),j.forEach(m),i=M(E),c=g(E,"SPAN",{}),A(c).forEach(m),h=M(E),f=g(E,"SPAN",{"data-svelte-h":!0}),Z(f)!=="svelte-104368"&&(f.textContent=_),b=M(E),p=g(E,"SPAN",{});var C=A(p);y=Q(C,w),C.forEach(m),T=M(E),N=g(E,"SPAN",{}),A(N).forEach(m),E.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(L,E){F(L,e,E),u(e,t),u(e,n),u(e,o),u(o,r),u(e,i),u(e,c),u(e,h),u(e,f),u(e,b),u(e,p),u(p,y),u(e,T),u(e,N)},p(L,E){E&1&&a!==(a=L[0].latestGuess.target+"")&&ne(r,a),E&1&&w!==(w=L[0].latestGuess.guessed+"")&&ne(y,w)},d(L){L&&m(e)}}}function Qn(l){let e,t,s="Target:",n,o,a=Qe(Et(l[0].latestGuess.target||0))+"",r,i,c,h,f,_="Guessed:",b,p,w=Qe(Et(l[0].latestGuess.guessed||0))+"",y,T,N;return{c(){e=v("div"),t=v("span"),t.textContent=s,n=B(),o=v("span"),r=J(a),i=B(),c=v("span"),h=B(),f=v("span"),f.textContent=_,b=B(),p=v("span"),y=J(w),T=B(),N=v("span"),this.h()},l(L){e=g(L,"DIV",{class:!0});var E=A(e);t=g(E,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=M(E),o=g(E,"SPAN",{});var j=A(o);r=Q(j,a),j.forEach(m),i=M(E),c=g(E,"SPAN",{}),A(c).forEach(m),h=M(E),f=g(E,"SPAN",{"data-svelte-h":!0}),Z(f)!=="svelte-104368"&&(f.textContent=_),b=M(E),p=g(E,"SPAN",{});var C=A(p);y=Q(C,w),C.forEach(m),T=M(E),N=g(E,"SPAN",{}),A(N).forEach(m),E.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(L,E){F(L,e,E),u(e,t),u(e,n),u(e,o),u(o,r),u(e,i),u(e,c),u(e,h),u(e,f),u(e,b),u(e,p),u(p,y),u(e,T),u(e,N)},p(L,E){E&1&&a!==(a=Qe(Et(L[0].latestGuess.target||0))+"")&&ne(r,a),E&1&&w!==(w=Qe(Et(L[0].latestGuess.guessed||0))+"")&&ne(y,w)},d(L){L&&m(e)}}}function qs(l){let e,t=Qe(l[10])+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","mx-1")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o&4&&t!==(t=Qe(n[10])+"")&&ne(s,t)},d(n){n&&m(e)}}}function Yn(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){F(t,e,s)},p:he,d(t){t&&m(e)}}}function Xn(l){let e,t="Next",s,n,o="Autoplay",a,r;return{c(){e=v("button"),e.textContent=t,s=B(),n=v("button"),n.textContent=o,this.h()},l(i){e=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1nvnoba"&&(e.textContent=t),s=M(i),n=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1cfj1sl"&&(n.textContent=o),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(i,c){F(i,e,c),F(i,s,c),F(i,n,c),a||(r=[R(e,"click",l[4]),R(n,"click",l[5])],a=!0)},p:he,d(i){i&&(m(e),m(s),m(n)),a=!1,at(r)}}}function Zn(l){let e,t="Stop autoplay",s,n;return{c(){e=v("button"),e.textContent=t,this.h()},l(o){e=g(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){d(e,"class","btn primary")},m(o,a){F(o,e,a),s||(n=R(e,"click",l[9]),s=!0)},p:he,d(o){o&&m(e),s=!1,n()}}}function ea(l){let e,t="Try Again",s,n,o="Clear",a,r;return{c(){e=v("button"),e.textContent=t,s=B(),n=v("button"),n.textContent=o,this.h()},l(i){e=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-y911ux"&&(e.textContent=t),s=M(i),n=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-11mnk9v"&&(n.textContent=o),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(i,c){F(i,e,c),F(i,s,c),F(i,n,c),a||(r=[R(e,"click",l[6]),R(n,"click",l[7])],a=!0)},p:he,d(i){i&&(m(e),m(s),m(n)),a=!1,at(r)}}}function ta(l){let e,t,s,n;function o(f,_){return f[0]instanceof St&&(f[1]==="correct"||f[1]==="wrong")?Qn:f[0]instanceof Nt&&(f[1]==="correct"||f[1]==="wrong")?Jn:f[0]instanceof rt&&(f[1]==="correct"||f[1]==="wrong")?$n:f[0]&&f[1]==="ended"?Wn:f[2].length>0?qn:zn}let a=o(l),r=a(l);function i(f,_){return f[0]&&f[1]==="ended"?ea:f[0]&&f[3].autoplay?Zn:f[0]?Xn:Yn}let c=i(l),h=c(l);return{c(){e=v("div"),r.c(),s=B(),n=v("div"),h.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=A(e);r.l(_),_.forEach(m),s=M(f),n=g(f,"DIV",{class:!0});var b=A(n);h.l(b),b.forEach(m),this.h()},h(){d(e,"class",t=Se(`${l[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),d(n,"class","mt-2 h-8")},m(f,_){F(f,e,_),r.m(e,null),F(f,s,_),F(f,n,_),h.m(n,null)},p(f,[_]){a===(a=o(f))&&r?r.p(f,_):(r.d(1),r=a(f),r&&(r.c(),r.m(e,null))),_&256&&t!==(t=Se(`${f[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&d(e,"class",t),c===(c=i(f))&&h?h.p(f,_):(h.d(1),h=c(f),h&&(h.c(),h.m(n,null)))},i:he,o:he,d(f){f&&(m(e),m(s),m(n)),r.d(),h.d()}}}const Ws=l=>l.note,$s=l=>l.note;function sa(l,e,t){let s,n,o;re(l,_t,_=>t(1,s=_)),re(l,mt,_=>t(2,n=_)),re(l,it,_=>t(3,o=_));let{game:a}=e;function r(){be.nextGuess()}function i(){be.setOptionValue("autoplay",!0),be.nextGuess()}function c(){a instanceof rt?be.play(a.type,a.opts):a&&be.play(a.type,void 0)}function h(){be.clearGame()}const f=()=>be.setOptionValue("autoplay",!1);return l.$$set=_=>{t(8,e=ye(ye({},e),ke(_))),"game"in _&&t(0,a=_.game)},e=ke(e),[a,s,n,o,r,i,c,h,e,f]}class la extends He{constructor(e){super(),Re(this,e,sa,ta,ze,{game:0})}}function Js(l){let e;return{c(){e=v("li"),this.h()},l(t){e=g(t,"LI",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","m-[0.175rem] mr-0")},m(t,s){F(t,e,s)},d(t){t&&m(e)}}}function Qs(l){let e;return{c(){e=v("div"),this.h()},l(t){e=g(t,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-jvhfju")},m(t,s){F(t,e,s)},d(t){t&&m(e)}}}function Ys(l){let e,t=l[0].note.note+"",s;return{c(){e=v("div"),s=J(t),this.h()},l(n){e=g(n,"DIV",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","absolute top-0 left-0")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o&1&&t!==(t=n[0].note.note+"")&&ne(s,t)},d(n){n&&m(e)}}}function na(l){let e,t,s,n,o,a,r=l[0].key+"",i,c,h,f,_=l[0].key==="{enter}"&&Js(),b=l[0].key==="{enter}"&&Qs(),p=l[0].note&&Ys(l);return{c(){_&&_.c(),e=B(),t=v("li"),s=v("button"),b&&b.c(),n=B(),p&&p.c(),o=B(),a=v("div"),i=J(r),this.h()},l(w){_&&_.l(w),e=M(w),t=g(w,"LI",{class:!0});var y=A(t);s=g(y,"BUTTON",{class:!0});var T=A(s);b&&b.l(T),n=M(T),p&&p.l(T),o=M(T),a=g(T,"DIV",{});var N=A(a);i=Q(N,r),N.forEach(m),T.forEach(m),y.forEach(m),this.h()},h(){d(s,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex items-center justify-center svelte-jvhfju"),d(t,"class",c=Se(`${l[1].class||""} m-[0.175rem] ${Xs(l[0].size)}`)+" svelte-jvhfju"),q(t,"enter",l[0].key==="{enter}")},m(w,y){_&&_.m(w,y),F(w,e,y),F(w,t,y),u(t,s),b&&b.m(s,null),u(s,n),p&&p.m(s,null),u(s,o),u(s,a),u(a,i),h||(f=R(s,"click",l[2]),h=!0)},p(w,[y]){w[0].key==="{enter}"?_||(_=Js(),_.c(),_.m(e.parentNode,e)):_&&(_.d(1),_=null),w[0].key==="{enter}"?b||(b=Qs(),b.c(),b.m(s,n)):b&&(b.d(1),b=null),w[0].note?p?p.p(w,y):(p=Ys(w),p.c(),p.m(s,o)):p&&(p.d(1),p=null),y&1&&r!==(r=w[0].key+"")&&ne(i,r),y&3&&c!==(c=Se(`${w[1].class||""} m-[0.175rem] ${Xs(w[0].size)}`)+" svelte-jvhfju")&&d(t,"class",c),y&3&&q(t,"enter",w[0].key==="{enter}")},i:he,o:he,d(w){w&&(m(e),m(t)),_&&_.d(w),b&&b.d(),p&&p.d(),h=!1,f()}}}function Xs(l){return l&&Number.isInteger(l)?`size-${l}`:l?`size-${Math.floor(l)}-${Math.floor(l*10)-Math.floor(l)*10}`:"size-1"}function aa(l,e,t){let{value:s}=e;function n(o){cs.call(this,l,o)}return l.$$set=o=>{t(1,e=ye(ye({},e),ke(o))),"value"in o&&t(0,s=o.value)},e=ke(e),[s,e,n]}class oa extends He{constructor(e){super(),Re(this,e,aa,na,ze,{value:0})}}const ra={layout:{default:["§ 1 2 3 4 5 6 7 8 9 0 + ´ {bksp}","{tab} q w e r t y u i o p å ¨ {enter}","{lock} a s d f g h j k l ö ä '","{shift} < z x c v b n m , . - {shift}",".com @ {space}"],shift:['° ! " # $ % & / ( ) = ? ` {bksp}',"{tab} Q W E R T Y U I O P Å ^","{lock} A S D F G H J K L Ö Ä * {enter}","{shift} > Z X C V B N M ; : _ {shift}",".com @ {space}"]}};class ia{constructor(e={layout:"middle-row"}){this.language="en",this.rows=[[],[],[],[]],this.opts=e,this.setLayout(ra)}setOptions(e){this.opts={...this.opts,...e}}setLayout(e){const t=[[],[],[],[]];e.layout.default.forEach((s,n)=>{s.split(" ").forEach((o,a)=>{n<4&&t[n].push({key:o,code:0})})}),this.rows=t}setNotes(e){this.opts.layout==="middle-row"&&(this.rows[1].forEach((t,s)=>{s===2?this.rows[1][s].note=e.get(1):s===3?this.rows[1][s].note=e.get(3):s===5?this.rows[1][s].note=e.get(6):s===6?this.rows[1][s].note=e.get(8):s===7?this.rows[1][s].note=e.get(10):s===9?this.rows[1][s].note=e.get(1):s===10&&(this.rows[1][s].note=e.get(3))}),this.rows[2].forEach((t,s)=>{s===1?this.rows[2][s].note=e.get(0):s===2?this.rows[2][s].note=e.get(2):s===3?this.rows[2][s].note=e.get(4):s===4?this.rows[2][s].note=e.get(5):s===5?this.rows[2][s].note=e.get(7):s===6?this.rows[2][s].note=e.get(9):s===7?this.rows[2][s].note=e.get(11):s===8?this.rows[2][s].note=e.get(0):s===9?this.rows[2][s].note=e.get(2):s===10?this.rows[2][s].note=e.get(4):s===11?this.rows[2][s].note=e.get(5):s===12&&(this.rows[2][s].note=e.get(7))}))}}const ca=ct(Be({focused:!1,layout:"middle-row"}),{key:"keyboard-options"}),ua=It([bt,ca],([l,e])=>{const t=new ia(e);return t.setNotes(l.notesMap),t}),fa=It(ua,l=>l.rows.map(e=>e.map((t,s)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&s===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t})));function Zs(l,e,t){const s=l.slice();return s[6]=e[t],s[8]=t,s}function el(l,e,t){const s=l.slice();return s[9]=e[t],s}function tl(l){let e,t;return e=new oa({props:{value:l[9]}}),{c(){_e(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},p(s,n){const o={};n&4&&(o.value=s[9]),e.$set(o)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function sl(l){let e,t,s,n,o=se(l[6]),a=[];for(let i=0;i<o.length;i+=1)a[i]=tl(el(l,o,i));const r=i=>$(a[i],1,1,()=>{a[i]=null});return{c(){e=v("li"),t=B();for(let i=0;i<a.length;i+=1)a[i].c();s=De(),this.h()},l(i){e=g(i,"LI",{class:!0}),A(e).forEach(m),t=M(i);for(let c=0;c<a.length;c+=1)a[c].l(i);s=De(),this.h()},h(){d(e,"class","col-span-2 svelte-cgcsqn")},m(i,c){F(i,e,c),F(i,t,c);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(i,c);F(i,s,c),n=!0},p(i,c){if(c&4){o=se(i[6]);let h;for(h=0;h<o.length;h+=1){const f=el(i,o,h);a[h]?(a[h].p(f,c),z(a[h],1)):(a[h]=tl(f),a[h].c(),z(a[h],1),a[h].m(s.parentNode,s))}for(tt(),h=o.length;h<a.length;h+=1)r(h);st()}},i(i){if(!n){for(let c=0;c<o.length;c+=1)z(a[c]);n=!0}},o(i){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)$(a[c]);n=!1},d(i){i&&(m(e),m(t),m(s)),je(a,i)}}}function ha(l){let e,t,s,n,o="Middle-row",a,r,i,c,h,f="Two rows",_,b,p,w,y,T,N,L,E,j=se(l[2]),C=[];for(let D=0;D<j.length;D+=1)C[D]=sl(Zs(l,j,D));const S=D=>$(C[D],1,1,()=>{C[D]=null});return{c(){e=v("div"),t=v("div"),s=v("div"),n=v("label"),n.textContent=o,a=B(),r=v("input"),i=B(),c=v("div"),h=v("label"),h.textContent=f,_=B(),b=v("input"),p=B(),w=v("div"),y=v("ul");for(let D=0;D<C.length;D+=1)C[D].c();this.h()},l(D){e=g(D,"DIV",{class:!0});var I=A(e);t=g(I,"DIV",{class:!0});var K=A(t);s=g(K,"DIV",{class:!0});var k=A(s);n=g(k,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1ssbs6o"&&(n.textContent=o),a=M(k),r=g(k,"INPUT",{class:!0,id:!0,type:!0}),k.forEach(m),i=M(K),c=g(K,"DIV",{class:!0});var V=A(c);h=g(V,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(h)!=="svelte-3aw9ul"&&(h.textContent=f),_=M(V),b=g(V,"INPUT",{class:!0,id:!0,type:!0}),V.forEach(m),K.forEach(m),p=M(I),w=g(I,"DIV",{class:!0});var P=A(w);y=g(P,"UL",{class:!0});var U=A(y);for(let G=0;G<C.length;G+=1)C[G].l(U);U.forEach(m),P.forEach(m),I.forEach(m),this.h()},h(){d(n,"class","font-bold mr-4"),d(n,"for","middle-row"),d(r,"class","h-[20px]"),d(r,"id","middle-row"),d(r,"type","checkbox"),d(s,"class","my-1 flex items-center justify-between mr-12"),d(h,"class","font-bold mr-4"),d(h,"for","two-rows"),d(b,"class","h-[20px]"),d(b,"id","two-rows"),d(b,"type","checkbox"),d(c,"class","my-1 flex items-center justify-between mr-12"),d(t,"class","flex"),d(y,"class","keyboard svelte-cgcsqn"),d(w,"class","flex flex-col gap-1.5"),d(e,"class",T=Se(`${l[3].class||""} `)+" svelte-cgcsqn")},m(D,I){F(D,e,I),u(e,t),u(t,s),u(s,n),u(s,a),u(s,r),r.checked=l[0],u(t,i),u(t,c),u(c,h),u(c,_),u(c,b),b.checked=l[1],u(e,p),u(e,w),u(w,y);for(let K=0;K<C.length;K+=1)C[K]&&C[K].m(y,null);N=!0,L||(E=[R(r,"change",l[4]),R(b,"change",l[5])],L=!0)},p(D,[I]){if(I&1&&(r.checked=D[0]),I&2&&(b.checked=D[1]),I&4){j=se(D[2]);let K;for(K=0;K<j.length;K+=1){const k=Zs(D,j,K);C[K]?(C[K].p(k,I),z(C[K],1)):(C[K]=sl(k),C[K].c(),z(C[K],1),C[K].m(y,null))}for(tt(),K=j.length;K<C.length;K+=1)S(K);st()}(!N||I&8&&T!==(T=Se(`${D[3].class||""} `)+" svelte-cgcsqn"))&&d(e,"class",T)},i(D){if(!N){for(let I=0;I<j.length;I+=1)z(C[I]);N=!0}},o(D){C=C.filter(Boolean);for(let I=0;I<C.length;I+=1)$(C[I]);N=!1},d(D){D&&m(e),je(C,D),L=!1,at(E)}}}function da(l,e,t){let s;re(l,fa,i=>t(2,s=i)),Bl(()=>{console.log(s)});let n=!0,o=!1;function a(){n=this.checked,t(0,n)}function r(){o=this.checked,t(1,o)}return l.$$set=i=>{t(3,e=ye(ye({},e),ke(i)))},e=ke(e),[n,o,s,e,a,r]}class ma extends He{constructor(e){super(),Re(this,e,da,ha,ze,{})}}function ll(l){let e,t;return e=new ma({props:{class:"mt-4"}}),{c(){_e(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function _a(l){let e,t,s,n,o="I/O",a,r,i,c,h="Device",f,_,b,p,w,y,T="Prompt",N,L,E="Disable",j,C,S,D,I="Sound",K,k,V,P,U,G,O="Fixed velocity",H,ee,te,ce,ae,Te,Ke="Keyboard",Me,me,qe,Fe,Ne,oe,Ae="Hotkeys",de,W,le,x,Y,ie,X="Auto-octave",we,Le,lt,We,Ve,Ie,Ce,At="Set keys",yt,Oe,ut,ms="Fade timeout",Qt,Ye,Yt,ft,jt,Xt,ht,_s="Reset all",Zt,Dt,$e,es,ps,Pe=l[2]&&ll();return{c(){e=v("div"),t=v("fieldset"),s=v("legend"),n=v("button"),n.textContent=o,a=B(),r=v("div"),i=v("div"),c=v("label"),c.textContent=h,f=B(),_=v("input"),p=B(),w=v("div"),y=v("button"),y.textContent=T,N=B(),L=v("button"),L.textContent=E,j=B(),C=v("div"),S=v("div"),D=v("label"),D.textContent=I,K=B(),k=v("input"),P=B(),U=v("div"),G=v("label"),G.textContent=O,H=B(),ee=v("input"),te=B(),ce=v("div"),ae=v("div"),Te=v("label"),Te.textContent=Ke,Me=B(),me=v("input"),Fe=B(),Ne=v("div"),oe=v("label"),oe.textContent=Ae,de=B(),W=v("input"),x=B(),Y=v("div"),ie=v("label"),ie.textContent=X,we=B(),Le=v("input"),We=B(),Ve=v("div"),Ie=v("div"),Ce=v("button"),Ce.textContent=At,yt=B(),Oe=v("div"),ut=v("label"),ut.textContent=ms,Qt=B(),Ye=v("input"),Yt=B(),ft=v("div"),jt=v("div"),Xt=B(),ht=v("button"),ht.textContent=_s,Zt=B(),Pe&&Pe.c(),this.h()},l(Ee){e=g(Ee,"DIV",{class:!0});var Ue=A(e);t=g(Ue,"FIELDSET",{class:!0});var ot=A(t);s=g(ot,"LEGEND",{class:!0});var vs=A(s);n=g(vs,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1jbbsti"&&(n.textContent=o),vs.forEach(m),a=M(ot),r=g(ot,"DIV",{class:!0});var dt=A(r);i=g(dt,"DIV",{class:!0});var kt=A(i);c=g(kt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-crpa7y"&&(c.textContent=h),f=M(kt),_=g(kt,"INPUT",{class:!0,id:!0}),p=M(kt),w=g(kt,"DIV",{class:!0});var Lt=A(w);y=g(Lt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(y)!=="svelte-mj6mct"&&(y.textContent=T),N=M(Lt),L=g(Lt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(L)!=="svelte-1sl6oxh"&&(L.textContent=E),Lt.forEach(m),kt.forEach(m),j=M(dt),C=g(dt,"DIV",{class:!0});var Pt=A(C);S=g(Pt,"DIV",{class:!0});var Gt=A(S);D=g(Gt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(D)!=="svelte-wgxtkw"&&(D.textContent=I),K=M(Gt),k=g(Gt,"INPUT",{class:!0,id:!0,type:!0}),Gt.forEach(m),P=M(Pt),U=g(Pt,"DIV",{class:!0});var Bt=A(U);G=g(Bt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(G)!=="svelte-1tm2bth"&&(G.textContent=O),H=M(Bt),ee=g(Bt,"INPUT",{class:!0,id:!0,placeholder:!0}),Bt.forEach(m),Pt.forEach(m),te=M(dt),ce=g(dt,"DIV",{class:!0});var wt=A(ce);ae=g(wt,"DIV",{class:!0});var Mt=A(ae);Te=g(Mt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(Te)!=="svelte-1js269u"&&(Te.textContent=Ke),Me=M(Mt),me=g(Mt,"INPUT",{class:!0,id:!0,type:!0}),Mt.forEach(m),Fe=M(wt),Ne=g(wt,"DIV",{class:!0});var Vt=A(Ne);oe=g(Vt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(oe)!=="svelte-21h39k"&&(oe.textContent=Ae),de=M(Vt),W=g(Vt,"INPUT",{class:!0,id:!0,type:!0}),Vt.forEach(m),x=M(wt),Y=g(wt,"DIV",{class:!0});var Ot=A(Y);ie=g(Ot,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(ie)!=="svelte-33lczu"&&(ie.textContent=X),we=M(Ot),Le=g(Ot,"INPUT",{class:!0,id:!0,type:!0}),Ot.forEach(m),wt.forEach(m),We=M(dt),Ve=g(dt,"DIV",{class:!0});var Ct=A(Ve);Ie=g(Ct,"DIV",{class:!0});var gs=A(Ie);Ce=g(gs,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(Ce)!=="svelte-1npcis2"&&(Ce.textContent=At),gs.forEach(m),yt=M(Ct),Oe=g(Ct,"DIV",{class:!0});var Ut=A(Oe);ut=g(Ut,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(ut)!=="svelte-vd5i27"&&(ut.textContent=ms),Qt=M(Ut),Ye=g(Ut,"INPUT",{class:!0,id:!0}),Ut.forEach(m),Yt=M(Ct),ft=g(Ct,"DIV",{class:!0});var Ft=A(ft);jt=g(Ft,"DIV",{}),A(jt).forEach(m),Xt=M(Ft),ht=g(Ft,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(ht)!=="svelte-jjt0c3"&&(ht.textContent=_s),Ft.forEach(m),Ct.forEach(m),dt.forEach(m),Zt=M(ot),Pe&&Pe.l(ot),ot.forEach(m),Ue.forEach(m),this.h()},h(){var Ee;d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(c,"class","font-bold"),d(c,"for","device"),d(_,"class","px-1 my-1 rounded w-50"),d(_,"id","device"),_.disabled=!0,_.value=b=((Ee=l[5])==null?void 0:Ee.name)??"No device",d(y,"class","btn-sm primary mr-2"),d(L,"class","btn-sm primary"),d(w,"class","flex my-[auto]"),d(i,"class","h-full flex flex-col"),d(D,"class","font-bold"),d(D,"for","sound"),d(k,"class","h-[20px]"),d(k,"id","sound"),d(k,"type","checkbox"),k.checked=V=l[3].useSound,d(S,"class","my-1 flex justify-between mr-12"),d(G,"class","font-bold"),d(G,"for","fixed-velocity"),d(ee,"class","h-[20px] w-16"),d(ee,"id","fixed-velocity"),d(ee,"placeholder","0-127"),d(U,"class","flex justify-between"),d(C,"class","flex flex-col h-full"),d(Te,"class","font-bold"),d(Te,"for","keyboard"),d(me,"class","h-[20px]"),d(me,"id","keyboard"),d(me,"type","checkbox"),me.checked=qe=l[3].useKeyboard,d(ae,"class","my-1 flex justify-between mr-12"),d(oe,"class","font-bold"),d(oe,"for","hotkeys"),d(W,"class","h-[20px]"),d(W,"id","hotkeys"),d(W,"type","checkbox"),W.checked=le=l[3].useHotkeys,d(Ne,"class","my-1 flex justify-between mr-12"),d(ie,"class","font-bold"),d(ie,"for","auto-octave"),d(Le,"class","h-[20px]"),d(Le,"id","auto-octave"),d(Le,"type","checkbox"),Le.checked=lt=l[3].useAutoOctave,d(Y,"class","my-1 flex justify-between mr-12"),d(ce,"class","flex flex-col h-full"),d(Ce,"class","w-full btn-sm primary"),d(Ie,"class","flex justify-between"),d(ut,"class","font-bold"),d(ut,"for","fade-timeout"),d(Ye,"class","h-[20px] w-16"),d(Ye,"id","fade-timeout"),Ye.value=l[1],d(Oe,"class","flex justify-between"),d(ht,"class","btn-sm primary"),d(ft,"class","flex justify-between"),d(Ve,"class","flex flex-col justify-between h-full"),d(r,"class","body svelte-1bpw69s"),q(r,"hidden",l[4]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-1bpw69s"),q(t,"collapsed",l[4]),d(e,"class",Dt=Se(`${l[11].class||""}`)+" svelte-1bpw69s")},m(Ee,Ue){F(Ee,e,Ue),u(e,t),u(t,s),u(s,n),u(t,a),u(t,r),u(r,i),u(i,c),u(i,f),u(i,_),u(i,p),u(i,w),u(w,y),u(w,N),u(w,L),u(r,j),u(r,C),u(C,S),u(S,D),u(S,K),u(S,k),u(C,P),u(C,U),u(U,G),u(U,H),u(U,ee),Je(ee,l[0]),u(r,te),u(r,ce),u(ce,ae),u(ae,Te),u(ae,Me),u(ae,me),u(ce,Fe),u(ce,Ne),u(Ne,oe),u(Ne,de),u(Ne,W),u(ce,x),u(ce,Y),u(Y,ie),u(Y,we),u(Y,Le),u(r,We),u(r,Ve),u(Ve,Ie),u(Ie,Ce),u(Ve,yt),u(Ve,Oe),u(Oe,ut),u(Oe,Qt),u(Oe,Ye),u(Ve,Yt),u(Ve,ft),u(ft,jt),u(ft,Xt),u(ft,ht),u(t,Zt),Pe&&Pe.m(t,null),$e=!0,es||(ps=[R(n,"click",l[7]),R(y,"click",fe.openMidi),R(L,"click",fe.disableMidi),R(k,"change",l[12]),R(ee,"input",l[13]),R(ee,"focus",l[14]),R(ee,"change",l[8]),R(me,"change",l[15]),R(W,"change",l[16]),R(Le,"change",l[17]),R(Ce,"click",l[18]),R(Ye,"focus",l[19]),R(Ye,"blur",l[20]),R(Ye,"input",l[9]),R(ht,"click",l[10])],es=!0)},p(Ee,[Ue]){var ot;(!$e||Ue&32&&b!==(b=((ot=Ee[5])==null?void 0:ot.name)??"No device")&&_.value!==b)&&(_.value=b),(!$e||Ue&8&&V!==(V=Ee[3].useSound))&&(k.checked=V),Ue&1&&ee.value!==Ee[0]&&Je(ee,Ee[0]),(!$e||Ue&8&&qe!==(qe=Ee[3].useKeyboard))&&(me.checked=qe),(!$e||Ue&8&&le!==(le=Ee[3].useHotkeys))&&(W.checked=le),(!$e||Ue&8&&lt!==(lt=Ee[3].useAutoOctave))&&(Le.checked=lt),(!$e||Ue&2&&Ye.value!==Ee[1])&&(Ye.value=Ee[1]),(!$e||Ue&16)&&q(r,"hidden",Ee[4]),Ee[2]?Pe?Ue&4&&z(Pe,1):(Pe=ll(),Pe.c(),z(Pe,1),Pe.m(t,null)):Pe&&(tt(),$(Pe,1,1,()=>{Pe=null}),st()),(!$e||Ue&16)&&q(t,"collapsed",Ee[4]),(!$e||Ue&2048&&Dt!==(Dt=Se(`${Ee[11].class||""}`)+" svelte-1bpw69s"))&&d(e,"class",Dt)},i(Ee){$e||(z(Pe),$e=!0)},o(Ee){$(Pe),$e=!1},d(Ee){Ee&&m(e),Pe&&Pe.d(),es=!1,at(ps)}}}function pa(l,e,t){let s,n,o;re(l,vt,S=>t(3,s=S)),re(l,$t,S=>t(5,o=S));const a=ct(Be(!1),{key:"inputs-hidden"});re(l,a,S=>t(4,n=S));let r=s.fixedVelocity??"",i=s.keyFadeTimeout,c=!1;vt.subscribe(S=>{t(0,r=S.fixedVelocity??""),t(1,i=S.keyFadeTimeout)});function h(){a.update(S=>!S)}function f(S){const{value:D}=S.currentTarget;let I;if(D)try{I=parseInt(D)}catch{}I!==void 0&&I>=0&&I<=127?fe.setInputValue("fixedVelocity",I):D?t(0,r=s.fixedVelocity||""):fe.setInputValue("fixedVelocity",void 0),fe.setKeyboardFocus(!0)}function _(S){try{const D=parseInt(S.currentTarget.value);fe.setInputValue("keyFadeTimeout",D)}catch{t(1,i=s.keyFadeTimeout)}}function b(){Sn()}const p=S=>fe.setInputValue("useSound",S.currentTarget.checked);function w(){r=this.value,t(0,r)}const y=()=>fe.setKeyboardFocus(!1),T=S=>fe.setInputValue("useKeyboard",S.currentTarget.checked),N=S=>fe.setInputValue("useHotkeys",S.currentTarget.checked),L=S=>fe.setInputValue("useAutoOctave",S.currentTarget.checked),E=()=>t(2,c=!c),j=()=>fe.setKeyboardFocus(!1),C=()=>fe.setKeyboardFocus(!0);return l.$$set=S=>{t(11,e=ye(ye({},e),ke(S)))},e=ke(e),[r,i,c,s,n,o,a,h,f,_,b,e,p,w,y,T,N,L,E,j,C]}class va extends He{constructor(e){super(),Re(this,e,pa,_a,ze,{})}}function ga(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){F(t,e,s)},p:he,d(t){t&&m(e)}}}function ba(l){let e,t=l[2].note+"",s;return{c(){e=J("Input: "),s=J(t)},l(n){e=Q(n,"Input: "),s=Q(n,t)},m(n,o){F(n,e,o),F(n,s,o)},p(n,o){o&4&&t!==(t=n[2].note+"")&&ne(s,t)},d(n){n&&(m(e),m(s))}}}function ya(l){let e,t;return{c(){e=J("Input: "),t=J(l[1])},l(s){e=Q(s,"Input: "),t=Q(s,l[1])},m(s,n){F(s,e,n),F(s,t,n)},p(s,n){n&2&&ne(t,s[1])},d(s){s&&(m(e),m(t))}}}function ka(l){let e;return{c(){e=J(l[0])},l(t){e=Q(t,l[0])},m(t,s){F(t,e,s)},p(t,s){s&1&&ne(e,t[0])},d(t){t&&m(e)}}}function wa(l){let e,t,s,n;function o(i,c){return i[3].useKeyboard&&i[0]?ka:i[3].useKeyboard&&i[1]?ya:i[3].useKeyboard&&i[2]?ba:ga}let a=o(l),r=a(l);return{c(){e=v("div"),r.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var c=A(e);r.l(c),c.forEach(m),this.h()},h(){d(e,"class",t=`${l[5].class||""}`)},m(i,c){F(i,e,c),r.m(e,null),s||(n=R(window,"keydown",l[4]),s=!0)},p(i,[c]){a===(a=o(i))&&r?r.p(i,c):(r.d(1),r=a(i),r&&(r.c(),r.m(e,null))),c&32&&t!==(t=`${i[5].class||""}`)&&d(e,"class",t)},i:he,o:he,d(i){i&&m(e),r.d(),s=!1,n()}}}const Ca=/^[a-gA-G]$/,Ea=/^[♭Bb#♯sS]$/,Sa=/^[0-9]$/;function Aa(l,e,t){let s,n,o,a,r;re(l,vt,w=>t(3,s=w)),re(l,$l,w=>t(7,n=w)),re(l,pt,w=>t(8,o=w)),re(l,Wl,w=>t(9,a=w)),re(l,Jt,w=>t(10,r=w));let{debounced:i}=e;const c=en();let h="",f="",_;function b(w){const y=w.key.toUpperCase(),T=n;let N;if(!_&&s.useHotkeys&&y in T){const L=T[y];t(2,_=L),t(0,h=""),s.useAutoOctave&&(N=zl(r[0].midi))}else!s.useHotkeys&&f.length===0&&Ca.test(y)?t(1,f+=y):!s.useHotkeys&&f.length>0&&Ea.test(y)&&(y==="B"?t(1,f+="♭"):t(1,f+="♯"));if(Sa.test(y))try{N=parseInt(y)}catch{}if(_&&N!==void 0){const L=_.semitones+(N+1+(w.shiftKey?1:0))*12;c("note",L),t(2,_=void 0)}else if(f&&N!==void 0){const L=ue.findNote(f),E=L?L.semitones+(N+1)*12:void 0;E!==void 0&&c("note",E),t(1,f="")}else w.key==="Backspace"&&(t(2,_=void 0),t(1,f=f.slice(0,-1)))}function p(w){if(i||!a)return;const y=o;if(y instanceof Nt){const T=w.key.toUpperCase(),N=n;if(f.length===0&&T in N){const L=N[T].note;c("guessed-key",L),t(1,f="")}else w.key==="Backspace"&&t(1,f=f.slice(0,-1))}else if(y instanceof rt&&y.type==="chords-write")if(w.key==="Enter"&&f.length>0){let T={note:"",flats:0,sharps:0,chord:""};for(let N=0;N<f.length;N+=1)N===0?T.note+=f[N]:T.chord.length>0?T.chord+=f[N]:f[N]==="b"||f[N]==="♭"?T.flats+=1:f[N]==="#"||f[N]==="♯"?T.sharps+=1:T.chord+=f[N];c("guessed-chord",T),t(1,f="")}else w.key==="Backspace"?t(1,f=f.slice(0,-1)):w.key.length===1&&(t(1,f+=w.key),f.length===1&&t(1,f=f.toUpperCase()));else s.useKeyboard&&b(w)}return l.$$set=w=>{t(5,e=ye(ye({},e),ke(w))),"debounced"in w&&t(6,i=w.debounced)},e=ke(e),[h,f,_,s,p,e,i]}class Ta extends He{constructor(e){super(),Re(this,e,Aa,wa,ze,{debounced:6})}}function Na(l){let e,t,s,n="Count",o,a,r,i,c,h="Duplicates",f,_,b,p,w,y,T="Autoplay",N,L,E,j,C,S,D="Wait seconds",I,K,k,V,P;return{c(){e=v("ul"),t=v("li"),s=v("label"),s.textContent=n,o=B(),a=v("input"),r=B(),i=v("li"),c=v("label"),c.textContent=h,f=B(),_=v("input"),p=B(),w=v("li"),y=v("label"),y.textContent=T,N=B(),L=v("input"),j=B(),C=v("li"),S=v("label"),S.textContent=D,I=B(),K=v("input"),this.h()},l(U){e=g(U,"UL",{class:!0});var G=A(e);t=g(G,"LI",{class:!0});var O=A(t);s=g(O,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(s)!=="svelte-wgq9fc"&&(s.textContent=n),o=M(O),a=g(O,"INPUT",{class:!0,id:!0,type:!0}),O.forEach(m),r=M(G),i=g(G,"LI",{class:!0});var H=A(i);c=g(H,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-hcg9dq"&&(c.textContent=h),f=M(H),_=g(H,"INPUT",{class:!0,id:!0,type:!0}),H.forEach(m),p=M(G),w=g(G,"LI",{class:!0});var ee=A(w);y=g(ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(y)!=="svelte-lr68n2"&&(y.textContent=T),N=M(ee),L=g(ee,"INPUT",{class:!0,id:!0,type:!0}),ee.forEach(m),j=M(G),C=g(G,"LI",{class:!0});var te=A(C);S=g(te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(S)!=="svelte-1qj2vcy"&&(S.textContent=D),I=M(te),K=g(te,"INPUT",{class:!0,id:!0,type:!0}),te.forEach(m),G.forEach(m),this.h()},h(){d(s,"class","font-bold"),d(s,"for","guess-count"),d(a,"class","h-[20px] w-10"),d(a,"id","guess-count"),d(a,"type","number"),d(t,"class","flex items-center justify-between svelte-1elvih2"),d(c,"class","font-bold"),d(c,"for","duplicates"),d(_,"class","h-[20px]"),d(_,"id","duplicates"),d(_,"type","checkbox"),_.checked=b=l[2].duplicates,d(i,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(y,"class","font-bold"),d(y,"for","autoplay"),d(L,"class","h-[20px]"),d(L,"id","autoplay"),d(L,"type","checkbox"),L.checked=E=l[2].autoplay,d(w,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(S,"class","font-bold"),d(S,"for","wait-ms"),d(K,"class","h-[20px] w-10"),d(K,"id","wait-ms"),d(K,"type","number"),d(C,"class","flex items-center justify-between svelte-1elvih2"),d(e,"class",k=Se(`${l[5].class||""}`)+" svelte-1elvih2")},m(U,G){F(U,e,G),u(e,t),u(t,s),u(t,o),u(t,a),Je(a,l[0]),u(e,r),u(e,i),u(i,c),u(i,f),u(i,_),u(e,p),u(e,w),u(w,y),u(w,N),u(w,L),u(e,j),u(e,C),u(C,S),u(C,I),u(C,K),Je(K,l[1]),V||(P=[R(a,"input",l[6]),R(a,"input",l[3]),R(_,"input",l[7]),R(L,"input",l[8]),R(K,"input",l[9]),R(K,"input",l[4])],V=!0)},p(U,[G]){G&1&&Rt(a.value)!==U[0]&&Je(a,U[0]),G&4&&b!==(b=U[2].duplicates)&&(_.checked=b),G&4&&E!==(E=U[2].autoplay)&&(L.checked=E),G&2&&Rt(K.value)!==U[1]&&Je(K,U[1]),G&32&&k!==(k=Se(`${U[5].class||""}`)+" svelte-1elvih2")&&d(e,"class",k)},i:he,o:he,d(U){U&&m(e),V=!1,at(P)}}}function Ia(l,e,t){let s;re(l,it,_=>t(2,s=_));let n=s.count||"",o=s.waitSeconds||"";it.subscribe(_=>{t(0,n=_.count||""),t(1,o=_.waitSeconds||"")});function a({currentTarget:{value:_}}){let b;try{b=parseInt(_),b<=0&&(b=1),be.setOptionValue("count",b)}catch{t(0,n=s.count)}}function r({currentTarget:{value:_}}){let b;try{b=parseInt(_),b<0&&(b=0),be.setOptionValue("waitSeconds",b)}catch{t(1,o=s.waitSeconds)}}function i(){n=Rt(this.value),t(0,n)}const c=_=>be.setOptionValue("duplicates",_.currentTarget.checked),h=_=>be.setOptionValue("autoplay",_.currentTarget.checked);function f(){o=Rt(this.value),t(1,o)}return l.$$set=_=>{t(5,e=ye(ye({},e),ke(_)))},e=ke(e),[n,o,s,a,r,e,i,c,h,f]}class ja extends He{constructor(e){super(),Re(this,e,Ia,Na,ze,{})}}function nl(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function al(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function ol(l){let e,t,s=l[21]+"",n,o,a,r,i,c,h,f;function _(){return l[13](l[20])}r=new nt({props:{icon:ns,width:20}});function b(...p){return l[14](l[20],...p)}return{c(){e=v("li"),t=v("button"),n=J(s),o=B(),a=v("button"),_e(r.$$.fragment),i=B(),this.h()},l(p){e=g(p,"LI",{class:!0});var w=A(e);t=g(w,"BUTTON",{class:!0});var y=A(t);n=Q(y,s),y.forEach(m),o=M(w),a=g(w,"BUTTON",{class:!0});var T=A(a);pe(r.$$.fragment,T),T.forEach(m),i=M(w),w.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-vja54t"),q(t,"selected",l[20]===l[0]),d(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),d(e,"class","flex svelte-vja54t")},m(p,w){F(p,e,w),u(e,t),u(t,n),u(e,o),u(e,a),ve(r,a,null),u(e,i),c=!0,h||(f=[R(t,"click",_),R(a,"click",b)],h=!0)},p(p,w){l=p,(!c||w&17)&&q(t,"selected",l[20]===l[0])},i(p){c||(z(r.$$.fragment,p),c=!0)},o(p){$(r.$$.fragment,p),c=!1},d(p){p&&m(e),ge(r),h=!1,at(f)}}}function rl(l){let e,t=se(l[2]),s=[];for(let n=0;n<t.length;n+=1)s[n]=il(nl(l,t,n));return{c(){e=v("ul");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=g(n,"UL",{class:!0});var o=A(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","svelte-vja54t")},m(n,o){F(n,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,o){if(o&518){t=se(n[2]);let a;for(a=0;a<t.length;a+=1){const r=nl(n,t,a);s[a]?s[a].p(r,o):(s[a]=il(r),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function il(l){let e,t,s=l[21]+"",n,o,a,r;function i(){return l[15](l[20])}return{c(){e=v("li"),t=v("button"),n=J(s),o=B(),this.h()},l(c){e=g(c,"LI",{class:!0});var h=A(e);t=g(h,"BUTTON",{class:!0});var f=A(t);n=Q(f,s),f.forEach(m),o=M(h),h.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-vja54t"),q(t,"selected",l[20]===l[1]),d(e,"class","svelte-vja54t")},m(c,h){F(c,e,h),u(e,t),u(t,n),u(e,o),a||(r=R(t,"click",i),a=!0)},p(c,h){l=c,h&4&&s!==(s=l[21]+"")&&ne(n,s),h&6&&q(t,"selected",l[20]===l[1])},d(c){c&&m(e),a=!1,r()}}}function Da(l){let e,t,s="Play",n,o,a,r,i,c,h,f,_,b,p,w="Reset",y,T,N,L,E=l[3]?"Quit":"Play",j,C,S,D,I,K=se(l[4]),k=[];for(let U=0;U<K.length;U+=1)k[U]=ol(al(l,K,U));const V=U=>$(k[U],1,1,()=>{k[U]=null});let P=(l[0]==="chords-write"||l[0]==="chords-play")&&rl(l);return f=new ja({}),N=new nt({props:{class:"mr-1",icon:l[3]?Es:ns,width:20}}),{c(){e=v("fieldset"),t=v("legend"),t.textContent=s,n=B(),o=v("div"),a=v("ul");for(let U=0;U<k.length;U+=1)k[U].c();r=B(),i=v("div"),P&&P.c(),c=B(),h=v("div"),_e(f.$$.fragment),_=B(),b=v("div"),p=v("button"),p.textContent=w,y=B(),T=v("button"),_e(N.$$.fragment),L=B(),j=J(E),this.h()},l(U){e=g(U,"FIELDSET",{class:!0});var G=A(e);t=g(G,"LEGEND",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1409tnk"&&(t.textContent=s),n=M(G),o=g(G,"DIV",{class:!0});var O=A(o);a=g(O,"UL",{class:!0});var H=A(a);for(let Te=0;Te<k.length;Te+=1)k[Te].l(H);H.forEach(m),r=M(O),i=g(O,"DIV",{});var ee=A(i);P&&P.l(ee),ee.forEach(m),c=M(O),h=g(O,"DIV",{class:!0});var te=A(h);pe(f.$$.fragment,te),_=M(te),b=g(te,"DIV",{});var ce=A(b);p=g(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(p)!=="svelte-10rv0bu"&&(p.textContent=w),y=M(ce),T=g(ce,"BUTTON",{class:!0});var ae=A(T);pe(N.$$.fragment,ae),L=M(ae),j=Q(ae,E),ae.forEach(m),ce.forEach(m),te.forEach(m),O.forEach(m),G.forEach(m),this.h()},h(){d(t,"class","px-1 text-base"),d(a,"class","options svelte-vja54t"),d(p,"class","w-full btn hover:bg-gray-200"),d(T,"class","w-full mt-2 flex items-center justify-center btn primary"),d(h,"class","h-full flex flex-col justify-between"),d(o,"class","body pb-2 h-full svelte-vja54t"),d(e,"class",C=Se(`${l[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-vja54t")},m(U,G){F(U,e,G),u(e,t),u(e,n),u(e,o),u(o,a);for(let O=0;O<k.length;O+=1)k[O]&&k[O].m(a,null);u(o,r),u(o,i),P&&P.m(i,null),u(o,c),u(o,h),ve(f,h,null),u(h,_),u(h,b),u(b,p),u(b,y),u(b,T),ve(N,T,null),u(T,L),u(T,j),S=!0,D||(I=[R(p,"click",l[5]),R(T,"click",l[16])],D=!0)},p(U,[G]){if(G&401){K=se(U[4]);let H;for(H=0;H<K.length;H+=1){const ee=al(U,K,H);k[H]?(k[H].p(ee,G),z(k[H],1)):(k[H]=ol(ee),k[H].c(),z(k[H],1),k[H].m(a,null))}for(tt(),H=K.length;H<k.length;H+=1)V(H);st()}U[0]==="chords-write"||U[0]==="chords-play"?P?P.p(U,G):(P=rl(U),P.c(),P.m(i,null)):P&&(P.d(1),P=null);const O={};G&8&&(O.icon=U[3]?Es:ns),N.$set(O),(!S||G&8)&&E!==(E=U[3]?"Quit":"Play")&&ne(j,E),(!S||G&1024&&C!==(C=Se(`${U[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-vja54t"))&&d(e,"class",C)},i(U){if(!S){for(let G=0;G<K.length;G+=1)z(k[G]);z(f.$$.fragment,U),z(N.$$.fragment,U),S=!0}},o(U){k=k.filter(Boolean);for(let G=0;G<k.length;G+=1)$(k[G]);$(f.$$.fragment,U),$(N.$$.fragment,U),S=!1},d(U){U&&m(e),je(k,U),P&&P.d(),ge(f),ge(N),D=!1,at(I)}}}function La(l,e,t){let s,n,o,a,r;re(l,ds,E=>t(12,o=E)),re(l,it,E=>t(19,a=E)),re(l,pt,E=>t(3,r=E));const i=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let c=i[4].key,h="maj-m";a.count,a.waitSeconds,it.subscribe(E=>{E.count,E.waitSeconds});function f(){be.clearGame(!0)}function _(E,j){if(j==="chords-write"||j==="chords-play"||j==="chords-diatonic"){let C=[];h==="selected"?C=o.filter(S=>S.selected):h==="all"?C=o:h==="maj-m"?C=o.filter(S=>S.suffixes[0]==="maj"||S.suffixes[0]==="m"):h==="seventh"&&(C=o.filter(S=>S.suffixes[0]==="maj7"||S.suffixes[0]==="m7"||S.suffixes[0]==="7"||S.suffixes[0]==="dim7"||S.suffixes[0]==="aug7")),be.play(j,{chords:C})}else be.play(j,void 0);E.currentTarget instanceof HTMLElement&&E.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function b(E){t(0,c=E)}function p(E,j){t(0,c=j),_(E,j)}function w(E){t(1,h=E)}const y=E=>b(E),T=(E,j)=>p(j,E),N=E=>w(E),L=E=>_(E,c);return l.$$set=E=>{t(10,e=ye(ye({},e),ke(E)))},l.$$.update=()=>{l.$$.dirty&4096&&t(11,s=o.reduce((E,j)=>j.selected?E+1:E,0)),l.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${s} chords`},{key:"all",value:"All"}])},e=ke(e),[c,h,n,r,i,f,_,b,p,w,e,s,o,y,T,N,L]}class Pa extends He{constructor(e){super(),Re(this,e,La,Da,ze,{})}}function cl(l,e,t){const s=l.slice();return s[7]=e[t],s}function ul(l,e,t){const s=l.slice();return s[4]=e[t],s}function Ga(l){let e,t=se(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=fl(cl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o&2){t=se(n[1]);let a;for(a=0;a<t.length;a+=1){const r=cl(n,t,a);s[a]?s[a].p(r,o):(s[a]=fl(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ba(l){let e,t=se(l[0].scaleNotes||[]),s=[];for(let n=0;n<t.length;n+=1)s[n]=hl(ul(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o&1){t=se(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const r=ul(n,t,a);s[a]?s[a].p(r,o):(s[a]=hl(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function fl(l){let e,t=l[7].interval+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o&2&&t!==(t=n[7].interval+"")&&ne(s,t)},d(n){n&&m(e)}}}function hl(l){let e,t=l[4].note+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o&1&&t!==(t=n[4].note+"")&&ne(s,t)},d(n){n&&m(e)}}}function Ma(l){let e,t,s,n,o,a;function r(h,f){return h[0]?Ba:Ga}let i=r(l),c=i(l);return{c(){e=v("div"),t=v("button"),c.c(),this.h()},l(h){e=g(h,"DIV",{class:!0,title:!0});var f=A(e);t=g(f,"BUTTON",{class:!0});var _=A(t);c.l(_),_.forEach(m),f.forEach(m),this.h()},h(){d(t,"class","intervals svelte-my4m0t"),d(e,"class",s=`${l[2].class||""} `),d(e,"title",n=l[1].map(dl).join("-"))},m(h,f){F(h,e,f),u(e,t),c.m(t,null),o||(a=R(t,"click",l[3]),o=!0)},p(h,[f]){i===(i=r(h))&&c?c.p(h,f):(c.d(1),c=i(h),c&&(c.c(),c.m(t,null))),f&4&&s!==(s=`${h[2].class||""} `)&&d(e,"class",s),f&2&&n!==(n=h[1].map(dl).join("-"))&&d(e,"title",n)},i:he,o:he,d(h){h&&m(e),c.d(),o=!1,a()}}}const dl=l=>l.interval;function Va(l,e,t){let{scale:s,intervals:n}=e;function o(a){cs.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),ke(a))),"scale"in a&&t(0,s=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=ke(e),[s,n,e,o]}class Ql extends He{constructor(e){super(),Re(this,e,Va,Ma,ze,{scale:0,intervals:1})}}function ml(l,e,t){const s=l.slice();return s[7]=e[t],s}function _l(l,e,t){const s=l.slice();return s[4]=e[t],s}function Oa(l){let e,t=se(l[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=pl(ml(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o&1){t=se(n[0]);let a;for(a=0;a<t.length;a+=1){const r=ml(n,t,a);s[a]?s[a].p(r,o):(s[a]=pl(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ua(l){let e,t=se(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=vl(_l(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=De()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);F(n,e,o)},p(n,o){if(o&2){t=se(n[1]);let a;for(a=0;a<t.length;a+=1){const r=_l(n,t,a);s[a]?s[a].p(r,o):(s[a]=vl(r),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function pl(l){let e,t,s=l[7].roman+"",n,o,a,r=l[7].suffix+"",i,c;return{c(){e=v("span"),t=v("span"),n=J(s),o=B(),a=v("sup"),i=J(r),c=B(),this.h()},l(h){e=g(h,"SPAN",{class:!0});var f=A(e);t=g(f,"SPAN",{class:!0});var _=A(t);n=Q(_,s),_.forEach(m),o=M(f),a=g(f,"SUP",{class:!0});var b=A(a);i=Q(b,r),b.forEach(m),c=M(f),f.forEach(m),this.h()},h(){d(t,"class","block"),d(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),q(a,"super-text",l[7].suffix.length>2),d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(h,f){F(h,e,f),u(e,t),u(t,n),u(e,o),u(e,a),u(a,i),u(e,c)},p(h,f){f&1&&s!==(s=h[7].roman+"")&&ne(n,s),f&1&&r!==(r=h[7].suffix+"")&&ne(i,r),f&1&&q(a,"super-text",h[7].suffix.length>2)},d(h){h&&m(e)}}}function vl(l){let e,t,s=l[4]+"",n,o;return{c(){e=v("span"),t=v("span"),n=J(s),o=B(),this.h()},l(a){e=g(a,"SPAN",{class:!0});var r=A(e);t=g(r,"SPAN",{});var i=A(t);n=Q(i,s),i.forEach(m),o=M(r),r.forEach(m),this.h()},h(){d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,r){F(a,e,r),u(e,t),u(t,n),u(e,o)},p(a,r){r&2&&s!==(s=a[4]+"")&&ne(n,s)},d(a){a&&m(e)}}}function Fa(l){let e,t,s,n,o,a;function r(h,f){return h[1].length>0?Ua:Oa}let i=r(l),c=i(l);return{c(){e=v("div"),t=v("button"),c.c(),this.h()},l(h){e=g(h,"DIV",{class:!0,title:!0});var f=A(e);t=g(f,"BUTTON",{class:!0});var _=A(t);c.l(_),_.forEach(m),f.forEach(m),this.h()},h(){d(t,"class","triads flex flex-wrap svelte-1roj1mi"),d(e,"class",s=Se(`${l[2].class||""} `)+" svelte-1roj1mi"),d(e,"title",n=l[0].map(gl).join("-"))},m(h,f){F(h,e,f),u(e,t),c.m(t,null),o||(a=R(t,"click",l[3]),o=!0)},p(h,[f]){i===(i=r(h))&&c?c.p(h,f):(c.d(1),c=i(h),c&&(c.c(),c.m(t,null))),f&4&&s!==(s=Se(`${h[2].class||""} `)+" svelte-1roj1mi")&&d(e,"class",s),f&1&&n!==(n=h[0].map(gl).join("-"))&&d(e,"title",n)},i:he,o:he,d(h){h&&m(e),c.d(),o=!1,a()}}}const gl=l=>l.roman+l.suffix;function Ka(l,e,t){let{triads:s,chords:n}=e;function o(a){cs.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),ke(a))),"triads"in a&&t(0,s=a.triads),"chords"in a&&t(1,n=a.chords)},e=ke(e),[s,n,e,o]}class Yl extends He{constructor(e){super(),Re(this,e,Ka,Fa,ze,{triads:0,chords:1})}}function bl(l,e,t){const s=l.slice();return s[25]=e[t],s}function yl(l,e,t){const s=l.slice();return s[25]=e[t],s}function kl(l){let e,t,s=l[25].raw.names[0]+"",n,o,a,r,i,c,h;function f(){return l[13](l[25])}a=new Ql({props:{scale:l[25].scale,intervals:l[25].raw.intervals}}),a.$on("click",f);function _(){return l[14](l[25])}return i=new Yl({props:{triads:l[25].triads,chords:l[25].triadChords}}),i.$on("click",_),{c(){e=v("li"),t=v("div"),n=J(s),o=B(),_e(a.$$.fragment),r=B(),_e(i.$$.fragment),c=B(),this.h()},l(b){e=g(b,"LI",{class:!0});var p=A(e);t=g(p,"DIV",{class:!0});var w=A(t);n=Q(w,s),w.forEach(m),o=M(p),pe(a.$$.fragment,p),r=M(p),pe(i.$$.fragment,p),c=M(p),p.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,p){F(b,e,p),u(e,t),u(t,n),u(e,o),ve(a,e,null),u(e,r),ve(i,e,null),u(e,c),h=!0},p(b,p){l=b,(!h||p&4)&&s!==(s=l[25].raw.names[0]+"")&&ne(n,s);const w={};p&4&&(w.scale=l[25].scale),p&4&&(w.intervals=l[25].raw.intervals),a.$set(w);const y={};p&4&&(y.triads=l[25].triads),p&4&&(y.chords=l[25].triadChords),i.$set(y)},i(b){h||(z(a.$$.fragment,b),z(i.$$.fragment,b),h=!0)},o(b){$(a.$$.fragment,b),$(i.$$.fragment,b),h=!1},d(b){b&&m(e),ge(a),ge(i)}}}function wl(l){let e,t,s=l[25].raw.names[0]+"",n,o,a,r,i,c,h;function f(){return l[15](l[25])}a=new Ql({props:{scale:l[25].scale,intervals:l[25].raw.intervals}}),a.$on("click",f);function _(){return l[16](l[25])}return i=new Yl({props:{triads:l[25].triads,chords:l[25].triadChords}}),i.$on("click",_),{c(){e=v("li"),t=v("div"),n=J(s),o=B(),_e(a.$$.fragment),r=B(),_e(i.$$.fragment),c=B(),this.h()},l(b){e=g(b,"LI",{class:!0});var p=A(e);t=g(p,"DIV",{class:!0});var w=A(t);n=Q(w,s),w.forEach(m),o=M(p),pe(a.$$.fragment,p),r=M(p),pe(i.$$.fragment,p),c=M(p),p.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,p){F(b,e,p),u(e,t),u(t,n),u(e,o),ve(a,e,null),u(e,r),ve(i,e,null),u(e,c),h=!0},p(b,p){l=b,(!h||p&2)&&s!==(s=l[25].raw.names[0]+"")&&ne(n,s);const w={};p&2&&(w.scale=l[25].scale),p&2&&(w.intervals=l[25].raw.intervals),a.$set(w);const y={};p&2&&(y.triads=l[25].triads),p&2&&(y.chords=l[25].triadChords),i.$set(y)},i(b){h||(z(a.$$.fragment,b),z(i.$$.fragment,b),h=!0)},o(b){$(a.$$.fragment,b),$(i.$$.fragment,b),h=!1},d(b){b&&m(e),ge(a),ge(i)}}}function xa(l){let e,t,s,n,o="Scales",a,r,i,c,h="Key",f,_,b,p,w,y,T,N,L,E,j=se(l[2]),C=[];for(let k=0;k<j.length;k+=1)C[k]=kl(yl(l,j,k));const S=k=>$(C[k],1,1,()=>{C[k]=null});let D=se(l[1]),I=[];for(let k=0;k<D.length;k+=1)I[k]=wl(bl(l,D,k));const K=k=>$(I[k],1,1,()=>{I[k]=null});return{c(){e=v("div"),t=v("fieldset"),s=v("legend"),n=v("button"),n.textContent=o,a=B(),r=v("div"),i=v("div"),c=v("label"),c.textContent=h,f=B(),_=v("input"),b=B(),p=v("ul");for(let k=0;k<C.length;k+=1)C[k].c();w=B(),y=v("ul");for(let k=0;k<I.length;k+=1)I[k].c();this.h()},l(k){e=g(k,"DIV",{class:!0});var V=A(e);t=g(V,"FIELDSET",{class:!0});var P=A(t);s=g(P,"LEGEND",{class:!0});var U=A(s);n=g(U,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-lhx60e"&&(n.textContent=o),U.forEach(m),a=M(P),r=g(P,"DIV",{class:!0});var G=A(r);i=g(G,"DIV",{class:!0});var O=A(i);c=g(O,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-14m38zf"&&(c.textContent=h),f=M(O),_=g(O,"INPUT",{class:!0,id:!0}),O.forEach(m),b=M(G),p=g(G,"UL",{class:!0});var H=A(p);for(let te=0;te<C.length;te+=1)C[te].l(H);H.forEach(m),w=M(G),y=g(G,"UL",{class:!0});var ee=A(y);for(let te=0;te<I.length;te+=1)I[te].l(ee);ee.forEach(m),G.forEach(m),P.forEach(m),V.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(c,"class","mr-4 font-bold"),d(c,"for","scale-key"),d(_,"class","bg-gray-100 w-16 px-1 rounded"),d(_,"id","scale-key"),_.value=l[0],d(i,"class","flex w-1/2 mb-2 input svelte-4hctsl"),d(p,"class","list odd w-full svelte-4hctsl"),d(y,"class","list even w-full svelte-4hctsl"),d(r,"class","body svelte-4hctsl"),q(r,"hidden",l[3]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-4hctsl"),q(t,"collapsed",l[3]),d(e,"class",T=Se(`${l[9].class||""}`)+" svelte-4hctsl")},m(k,V){F(k,e,V),u(e,t),u(t,s),u(s,n),u(t,a),u(t,r),u(r,i),u(i,c),u(i,f),u(i,_),u(r,b),u(r,p);for(let P=0;P<C.length;P+=1)C[P]&&C[P].m(p,null);u(r,w),u(r,y);for(let P=0;P<I.length;P+=1)I[P]&&I[P].m(y,null);N=!0,L||(E=[R(n,"click",l[5]),R(_,"input",l[6]),R(_,"focus",l[11]),R(_,"blur",l[12])],L=!0)},p(k,[V]){if((!N||V&1&&_.value!==k[0])&&(_.value=k[0]),V&388){j=se(k[2]);let P;for(P=0;P<j.length;P+=1){const U=yl(k,j,P);C[P]?(C[P].p(U,V),z(C[P],1)):(C[P]=kl(U),C[P].c(),z(C[P],1),C[P].m(p,null))}for(tt(),P=j.length;P<C.length;P+=1)S(P);st()}if(V&386){D=se(k[1]);let P;for(P=0;P<D.length;P+=1){const U=bl(k,D,P);I[P]?(I[P].p(U,V),z(I[P],1)):(I[P]=wl(U),I[P].c(),z(I[P],1),I[P].m(y,null))}for(tt(),P=D.length;P<I.length;P+=1)K(P);st()}(!N||V&8)&&q(r,"hidden",k[3]),(!N||V&8)&&q(t,"collapsed",k[3]),(!N||V&512&&T!==(T=Se(`${k[9].class||""}`)+" svelte-4hctsl"))&&d(e,"class",T)},i(k){if(!N){for(let V=0;V<j.length;V+=1)z(C[V]);for(let V=0;V<D.length;V+=1)z(I[V]);N=!0}},o(k){C=C.filter(Boolean);for(let V=0;V<C.length;V+=1)$(C[V]);I=I.filter(Boolean);for(let V=0;V<I.length;V+=1)$(I[V]);N=!1},d(k){k&&m(e),je(C,k),je(I,k),L=!1,at(E)}}}function Ha(l,e,t){let s,n,o,a,r,i,c;re(l,Jt,k=>t(19,o=k)),re(l,bt,k=>t(20,a=k)),re(l,vt,k=>t(21,r=k)),re(l,et,k=>t(22,i=k));let f=us().map(k=>({key:k.names[0],raw:k,scale:void 0,triads:k.triads,triadChords:[]})),_="",b=[a.key,a.scale],p;const w=ct(Be(!0),{key:"scales-hidden"});re(l,w,k=>t(3,c=k));function y(){w.update(k=>!k)}function T({currentTarget:{value:k}}){t(0,_=`${k.charAt(0).toUpperCase()}${k.charAt(1).toLowerCase()}`),t(10,f=f.map(V=>{const P=Wt(_,V.key),U=_&&"data"in P?P.data:void 0;let G=[];return U&&(G=V.triads.map((O,H)=>`${U.scaleNotes[H].note}${!O.suffix.includes("°")&&O.minor?"m":""}${O.suffix}`)),{...V,scale:U,triadChords:G}}))}function N(k,V,P){if(k<V.length){const U=V[k++];ue.setPlayed(U),i==null||i.playChord(U.map(G=>G.midi),r.fixedVelocity),p=setTimeout(()=>N(k,V,P),P)}else ue.setPlayed([]),ue.setKeyAndScale(b[0],b[1])}function L(k){clearTimeout(p);let V,P;k.scale?(P=k.scale,b=[a.key,a.scale],ue.setKeyAndScale(k.scale.key,k.scale.scale)):P=a;const U=o[0].midi+P.scaleNotes[0].semitones;V=k.raw.intervals.map(G=>[{...P.notesMap.get(G.semitones%12),midi:U+G.semitones}]),V[0][0].semitones!==V[V.length-1][0].semitones&&V.push(V[0].map(G=>({...G,midi:G.midi+12}))),N(0,V,500)}function E(k){clearTimeout(p);const{intervals:V}=k.raw;let P,U;k.scale?(U=k.scale,b=[a.key,a.scale],ue.setKeyAndScale(k.scale.key,k.scale.scale)):U=a;const G=o[0].midi+U.scaleNotes[0].semitones;P=Rl(k.triads).map((H,ee)=>as(G+U.intervals[ee].semitones,U,H.intervals)),V[V.length-1].interval_seq!==1&&P.push(P[0].map(H=>({...H,midi:H.midi+12}))),N(0,P,750)}const j=()=>fe.setKeyboardFocus(!1),C=()=>fe.setKeyboardFocus(!0),S=k=>L(k),D=k=>E(k),I=k=>L(k),K=k=>E(k);return l.$$set=k=>{t(9,e=ye(ye({},e),ke(k)))},l.$$.update=()=>{l.$$.dirty&1024&&t(2,s=f.filter((k,V)=>V<f.length/2)),l.$$.dirty&1024&&t(1,n=f.filter((k,V)=>V>=f.length/2))},e=ke(e),[_,n,s,c,w,y,T,L,E,e,f,j,C,S,D,I,K]}class Ra extends He{constructor(e){super(),Re(this,e,Ha,xa,ze,{})}}function Cl(l,e,t){const s=l.slice();return s[14]=e[t].key,s[15]=e[t].value,s[16]=e[t].icon,s[18]=t,s}const za=l=>({}),El=l=>({}),qa=l=>({}),Sl=l=>({});function Al(l){let e,t,s,n,o,a,r,i,c,h;const f=l[11].header,_=Ml(f,l,l[10],El);let b=se(l[0]),p=[];for(let y=0;y<b.length;y+=1)p[y]=Tl(Cl(l,b,y));const w=y=>$(p[y],1,1,()=>{p[y]=null});return{c(){e=v("button"),s=B(),n=v("ul"),o=v("li"),_&&_.c(),a=B();for(let y=0;y<p.length;y+=1)p[y].c();this.h()},l(y){e=g(y,"BUTTON",{class:!0,tabindex:!0}),A(e).forEach(m),s=M(y),n=g(y,"UL",{class:!0});var T=A(n);o=g(T,"LI",{});var N=A(o);_&&_.l(N),N.forEach(m),a=M(T);for(let L=0;L<p.length;L+=1)p[L].l(T);T.forEach(m),this.h()},h(){d(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),d(e,"tabindex","-1"),d(n,"class","items-list bg-white py-1.5 py-2 w-48 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl svelte-h65upg")},m(y,T){F(y,e,T),F(y,s,T),F(y,n,T),u(n,o),_&&_.m(o,null),u(n,a);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(n,null);i=!0,c||(h=R(e,"click",l[6]),c=!0)},p(y,T){if(l=y,_&&_.p&&(!i||T&1024)&&Vl(_,f,l,l[10],i?Ul(f,l[10],T,za):Ol(l[10]),El),T&133){b=se(l[0]);let N;for(N=0;N<b.length;N+=1){const L=Cl(l,b,N);p[N]?(p[N].p(L,T),z(p[N],1)):(p[N]=Tl(L),p[N].c(),z(p[N],1),p[N].m(n,null))}for(tt(),N=b.length;N<p.length;N+=1)w(N);st()}},i(y){if(!i){y&&bs(()=>{i&&(t||(t=Kt(e,ys,{duration:Ht},!0)),t.run(1))}),z(_,y);for(let T=0;T<b.length;T+=1)z(p[T]);y&&bs(()=>{i&&(r||(r=Kt(n,ks,{duration:Ht},!0)),r.run(1))}),i=!0}},o(y){y&&(t||(t=Kt(e,ys,{duration:Ht},!1)),t.run(0)),$(_,y),p=p.filter(Boolean);for(let T=0;T<p.length;T+=1)$(p[T]);y&&(r||(r=Kt(n,ks,{duration:Ht},!1)),r.run(0)),i=!1},d(y){y&&(m(e),m(s),m(n)),y&&t&&t.end(),_&&_.d(y),je(p,y),y&&r&&r.end(),c=!1,h()}}}function Wa(l){let e;return{c(){e=v("div"),this.h()},l(t){e=g(t,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","w-[24px]")},m(t,s){F(t,e,s)},p:he,i:he,o:he,d(t){t&&m(e)}}}function $a(l){let e,t;return e=new nt({props:{class:"mr-2",icon:l[16],width:16}}),{c(){_e(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},p(s,n){const o={};n&1&&(o.icon=s[16]),e.$set(o)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function Tl(l){let e,t,s,n,o,a,r=l[15]+"",i,c,h,f,_;const b=[$a,Wa],p=[];function w(T,N){return T[16]?0:1}s=w(l),n=p[s]=b[s](l);function y(){return l[12](l[14])}return{c(){e=v("li"),t=v("button"),n.c(),o=B(),a=v("div"),i=J(r),c=B(),this.h()},l(T){e=g(T,"LI",{});var N=A(e);t=g(N,"BUTTON",{class:!0});var L=A(t);n.l(L),o=M(L),a=g(L,"DIV",{});var E=A(a);i=Q(E,r),E.forEach(m),L.forEach(m),c=M(N),N.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),q(t,"selected",l[14]===l[2])},m(T,N){F(T,e,N),u(e,t),p[s].m(t,null),u(t,o),u(t,a),u(a,i),u(e,c),h=!0,f||(_=R(t,"click",y),f=!0)},p(T,N){l=T;let L=s;s=w(l),s===L?p[s].p(l,N):(tt(),$(p[L],1,1,()=>{p[L]=null}),st(),n=p[s],n?n.p(l,N):(n=p[s]=b[s](l),n.c()),z(n,1),n.m(t,o)),(!h||N&1)&&r!==(r=l[15]+"")&&ne(i,r),(!h||N&5)&&q(t,"selected",l[14]===l[2])},i(T){h||(z(n),h=!0)},o(T){$(n),h=!1},d(T){T&&m(e),p[s].d(),f=!1,_()}}}function Ja(l){let e,t,s,n,o,a,r,i;const c=l[11].value,h=Ml(c,l,l[10],Sl);let f=l[5]&&Al(l);return{c(){e=v("div"),t=v("button"),h&&h.c(),o=B(),f&&f.c(),this.h()},l(_){e=g(_,"DIV",{class:!0,id:!0});var b=A(e);t=g(b,"BUTTON",{class:!0,title:!0});var p=A(t);h&&h.l(p),p.forEach(m),o=M(b),f&&f.l(b),b.forEach(m),this.h()},h(){d(t,"class",s=Se(`${l[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),d(t,"title",n=l[8].title||""),q(t,"disabled",l[3]),q(t,"open",l[5]),d(e,"class","relative"),d(e,"id",l[1])},m(_,b){F(_,e,b),u(e,t),h&&h.m(t,null),u(e,o),f&&f.m(e,null),l[13](e),a=!0,r||(i=R(t,"click",l[6]),r=!0)},p(_,[b]){h&&h.p&&(!a||b&1024)&&Vl(h,c,_,_[10],a?Ul(c,_[10],b,qa):Ol(_[10]),Sl),(!a||b&256&&s!==(s=Se(`${_[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&d(t,"class",s),(!a||b&256&&n!==(n=_[8].title||""))&&d(t,"title",n),(!a||b&264)&&q(t,"disabled",_[3]),(!a||b&288)&&q(t,"open",_[5]),_[5]?f?(f.p(_,b),b&32&&z(f,1)):(f=Al(_),f.c(),z(f,1),f.m(e,null)):f&&(tt(),$(f,1,1,()=>{f=null}),st()),(!a||b&2)&&d(e,"id",_[1])},i(_){a||(z(h,_),z(f),a=!0)},o(_){$(h,_),$(f),a=!1},d(_){_&&m(e),h&&h.d(_),f&&f.d(),l[13](null),r=!1,i()}}}const Ht=400;function Qa(l,e,t){let{$$slots:s={},$$scope:n}=e,{options:o,id:a=void 0,selected:r=void 0,disabled:i=void 0,onSelect:c}=e,h,f=!1;function _(){i||t(5,f=!f)}function b(y){t(5,f=c(y))}const p=y=>b(y);function w(y){tn[y?"unshift":"push"](()=>{h=y,t(4,h)})}return l.$$set=y=>{t(8,e=ye(ye({},e),ke(y))),"options"in y&&t(0,o=y.options),"id"in y&&t(1,a=y.id),"selected"in y&&t(2,r=y.selected),"disabled"in y&&t(3,i=y.disabled),"onSelect"in y&&t(9,c=y.onSelect),"$$scope"in y&&t(10,n=y.$$scope)},e=ke(e),[o,a,r,i,h,f,_,b,e,c,n,s,p,w]}class Ya extends He{constructor(e){super(),Re(this,e,Qa,Ja,ze,{options:0,id:1,selected:2,disabled:3,onSelect:9})}}function Nl(l,e,t){const s=l.slice();return s[30]=e[t],s}function Il(l,e,t){const s=l.slice();return s[33]=e[t],s}function jl(l){let e,t;return{c(){e=v("div"),t=J(l[3]),this.h()},l(s){e=g(s,"DIV",{class:!0});var n=A(e);t=Q(n,l[3]),n.forEach(m),this.h()},h(){d(e,"class","error svelte-1u7ze7x")},m(s,n){F(s,e,n),u(e,t)},p(s,n){n[0]&8&&ne(t,s[3])},d(s){s&&m(e)}}}function Xa(l){let e,t;return{c(){e=v("div"),t=J(l[0]),this.h()},l(s){e=g(s,"DIV",{slot:!0});var n=A(e);t=Q(n,l[0]),n.forEach(m),this.h()},h(){d(e,"slot","value")},m(s,n){F(s,e,n),u(e,t)},p(s,n){n[0]&1&&ne(t,s[0])},d(s){s&&m(e)}}}function Dl(l){let e,t=se(l[5]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ll(Il(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=A(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,o){F(n,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,o){if(o[0]&32){t=se(n[5]);let a;for(a=0;a<t.length;a+=1){const r=Il(n,t,a);s[a]?s[a].p(r,o):(s[a]=Ll(r),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ll(l){let e,t=l[33].interval+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&32&&t!==(t=n[33].interval+"")&&ne(s,t)},d(n){n&&m(e)}}}function Pl(l){let e,t=se(l[8].scaleNotes),s=[];for(let n=0;n<t.length;n+=1)s[n]=Gl(Nl(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=A(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,o){F(n,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,o){if(o[0]&256){t=se(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const r=Nl(n,t,a);s[a]?s[a].p(r,o):(s[a]=Gl(r),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Gl(l){let e,t=l[30].note+"",s;return{c(){e=v("span"),s=J(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var o=A(e);s=Q(o,t),o.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,o){F(n,e,o),u(e,s)},p(n,o){o[0]&256&&t!==(t=n[30].note+"")&&ne(s,t)},d(n){n&&m(e)}}}function Za(l){let e,t,s,n="Score",o,a,r,i,c,h,f,_="Range",b,p,w,y,T,N="—",L,E,j,C,S,D,I,K="Scale",k,V,P,U,G,O,H,ee="Key",te,ce,ae,Te,Ke,Me,me="",qe,Fe,Ne,oe;r=new nt({props:{icon:Fl,width:16}});let Ae=l[3]&&jl(l);P=new Ya({props:{id:"scales",class:"p-1",options:l[10],onSelect:l[14],$$slots:{value:[Xa]},$$scope:{ctx:l}}});let de=!l[7]&&Dl(l),W=!l[7]&&Pl(l);return{c(){e=v("fieldset"),t=v("legend"),s=v("button"),s.textContent=n,o=B(),a=v("button"),_e(r.$$.fragment),i=B(),c=v("div"),h=v("div"),f=v("label"),f.textContent=_,b=B(),p=v("div"),w=v("input"),y=B(),T=v("span"),T.textContent=N,L=B(),E=v("input"),j=B(),C=v("div"),Ae&&Ae.c(),S=B(),D=v("div"),I=v("label"),I.textContent=K,k=B(),V=v("div"),_e(P.$$.fragment),U=B(),de&&de.c(),G=B(),O=v("div"),H=v("label"),H.textContent=ee,te=B(),ce=v("div"),ae=v("input"),Te=B(),W&&W.c(),Ke=B(),Me=v("div"),Me.innerHTML=me,this.h()},l(le){e=g(le,"FIELDSET",{class:!0});var x=A(e);t=g(x,"LEGEND",{class:!0});var Y=A(t);s=g(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-lqyol"&&(s.textContent=n),Y.forEach(m),o=M(x),a=g(x,"BUTTON",{class:!0});var ie=A(a);pe(r.$$.fragment,ie),ie.forEach(m),i=M(x),c=g(x,"DIV",{class:!0});var X=A(c);h=g(X,"DIV",{class:!0});var we=A(h);f=g(we,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(f)!=="svelte-10u0679"&&(f.textContent=_),b=M(we),p=g(we,"DIV",{class:!0});var Le=A(p);w=g(Le,"INPUT",{class:!0,id:!0}),y=M(Le),T=g(Le,"SPAN",{class:!0,"data-svelte-h":!0}),Z(T)!=="svelte-8q1xz4"&&(T.textContent=N),L=M(Le),E=g(Le,"INPUT",{class:!0,id:!0}),Le.forEach(m),j=M(we),C=g(we,"DIV",{class:!0});var lt=A(C);Ae&&Ae.l(lt),lt.forEach(m),we.forEach(m),S=M(X),D=g(X,"DIV",{class:!0});var We=A(D);I=g(We,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(I)!=="svelte-ld2d07"&&(I.textContent=K),k=M(We),V=g(We,"DIV",{class:!0});var Ve=A(V);pe(P.$$.fragment,Ve),Ve.forEach(m),U=M(We),de&&de.l(We),We.forEach(m),G=M(X),O=g(X,"DIV",{class:!0});var Ie=A(O);H=g(Ie,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(H)!=="svelte-17pcm6g"&&(H.textContent=ee),te=M(Ie),ce=g(Ie,"DIV",{class:!0});var Ce=A(ce);ae=g(Ce,"INPUT",{class:!0,id:!0}),Ce.forEach(m),Te=M(Ie),W&&W.l(Ie),Ie.forEach(m),Ke=M(X),Me=g(X,"DIV",{class:!0,"data-svelte-h":!0}),Z(Me)!=="svelte-hp3bkp"&&(Me.innerHTML=me),X.forEach(m),x.forEach(m),this.h()},h(){d(s,"class","px-1 rounded hover:bg-gray-100"),d(t,"class","px-1 text-base"),d(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(a,"hidden",l[6]),d(f,"class","font-bold"),d(f,"for","range_min"),d(w,"class","h-[28px] w-full"),d(w,"id","range_min"),d(T,"class","mx-2 mt-1"),d(E,"class","h-[28px] w-full"),d(E,"id","range_max"),d(p,"class","my-1 flex w-full"),d(C,"class","flex justify-between my-1"),d(h,"class","flex flex-col h-full"),d(I,"class","font-bold"),d(I,"for","scales"),d(V,"class","my-1 w-full"),d(D,"class","flex flex-col h-full"),d(H,"class","font-bold"),d(H,"for","key"),d(ae,"class","h-[28px]"),d(ae,"id","key"),d(ce,"class","my-1 flex"),d(O,"class","flex flex-col h-full"),d(Me,"class","h-full flex flex-col justify-between"),d(c,"class","options svelte-1u7ze7x"),q(c,"hidden",l[6]),d(e,"class",qe=Se(`${l[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),q(e,"collapsed",l[6])},m(le,x){F(le,e,x),u(e,t),u(t,s),u(e,o),u(e,a),ve(r,a,null),u(e,i),u(e,c),u(c,h),u(h,f),u(h,b),u(h,p),u(p,w),Je(w,l[1]),u(p,y),u(p,T),u(p,L),u(p,E),Je(E,l[2]),u(h,j),u(h,C),Ae&&Ae.m(C,null),u(c,S),u(c,D),u(D,I),u(D,k),u(D,V),ve(P,V,null),u(D,U),de&&de.m(D,null),u(c,G),u(c,O),u(O,H),u(O,te),u(O,ce),u(ce,ae),Je(ae,l[4]),u(O,Te),W&&W.m(O,null),u(c,Ke),u(c,Me),Fe=!0,Ne||(oe=[R(s,"click",l[15]),R(a,"click",l[16]),R(w,"input",l[18]),R(w,"change",l[19]),R(w,"focus",l[12]),R(w,"blur",l[20]),R(E,"input",l[21]),R(E,"change",l[22]),R(E,"focus",l[12]),R(E,"blur",l[23]),R(ae,"input",l[24]),R(ae,"input",l[13]),R(ae,"focus",l[25]),R(ae,"blur",l[26])],Ne=!0)},p(le,x){(!Fe||x[0]&64)&&q(a,"hidden",le[6]),x[0]&2&&w.value!==le[1]&&Je(w,le[1]),x[0]&4&&E.value!==le[2]&&Je(E,le[2]),le[3]?Ae?Ae.p(le,x):(Ae=jl(le),Ae.c(),Ae.m(C,null)):Ae&&(Ae.d(1),Ae=null);const Y={};x[0]&1|x[1]&32&&(Y.$$scope={dirty:x,ctx:le}),P.$set(Y),le[7]?de&&(de.d(1),de=null):de?de.p(le,x):(de=Dl(le),de.c(),de.m(D,null)),x[0]&16&&ae.value!==le[4]&&Je(ae,le[4]),le[7]?W&&(W.d(1),W=null):W?W.p(le,x):(W=Pl(le),W.c(),W.m(O,null)),(!Fe||x[0]&64)&&q(c,"hidden",le[6]),(!Fe||x[0]&131072&&qe!==(qe=Se(`${le[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&d(e,"class",qe),(!Fe||x[0]&131136)&&q(e,"collapsed",le[6])},i(le){Fe||(z(r.$$.fragment,le),z(P.$$.fragment,le),Fe=!0)},o(le){$(r.$$.fragment,le),$(P.$$.fragment,le),Fe=!1},d(le){le&&m(e),ge(r),Ae&&Ae.d(),ge(P),de&&de.d(),W&&W.d(),Ne=!1,at(oe)}}}function eo(l,e,t){let s,n,o,a,r,i;re(l,Jt,O=>t(27,n=O)),re(l,gt,O=>t(28,o=O)),re(l,pt,O=>t(7,r=O)),re(l,bt,O=>t(8,i=O));let c=Qe(n[0]),h=Qe(n[1]),f="";const _=ct(Be(!1),{key:"score-options-hidden"});re(l,_,O=>t(6,a=O));let b=o[0],p=o[1];const w=us(),y=w.map(O=>({key:O.names[0],value:O.names[0]}));Jt.subscribe(O=>{t(1,c=Qe(O[0])),t(2,h=Qe(O[1]))}),gt.subscribe(O=>{t(4,b=O[0]),t(0,p=O[1])});function T(O,H){const ee=bn(H.currentTarget.value,!0,!0);if("data"in ee){const{midi:te}=ee.data,ce=n,ae=[O==="min"?te:ce[0].midi,O==="max"?te:ce[1].midi];fe.setMidiRange(ae),t(3,f="")}else t(3,f=ee.err),O==="min"?t(1,c=Qe(n[0])):t(2,h=Qe(n[1]))}function N(){t(3,f=""),fe.setKeyboardFocus(!1)}function L({currentTarget:{value:O}}){t(4,b=`${O.charAt(0).toUpperCase()}${O.charAt(1).toLowerCase()}`),ue.setKey(b)}function E(O){var H;return t(0,p=(H=y.find(ee=>O===ee.key))==null?void 0:H.value),ue.setScale(p),!1}function j(){_.update(O=>!O)}function C(){ue.clearScore(!0),fe.setMidiRange([60,84])}function S(){c=this.value,t(1,c)}const D=O=>T("min",O),I=()=>fe.setKeyboardFocus(!0);function K(){h=this.value,t(2,h)}const k=O=>T("max",O),V=()=>fe.setKeyboardFocus(!0);function P(){b=this.value,t(4,b)}const U=()=>fe.setKeyboardFocus(!1),G=()=>fe.setKeyboardFocus(!0);return l.$$set=O=>{t(17,e=ye(ye({},e),ke(O)))},l.$$.update=()=>{var O;l.$$.dirty[0]&1&&t(5,s=((O=w.find(H=>H.names[0]===p))==null?void 0:O.intervals)||[])},e=ke(e),[p,c,h,f,b,s,a,r,i,_,y,T,N,L,E,j,C,e,S,D,I,K,k,V,P,U,G]}class to extends He{constructor(e){super(),Re(this,e,eo,Za,ze,{},null,[-1,-1])}}function so(l){l[19]=l[20].default}function lo(l){return{c:he,l:he,m:he,i:he,o:he,d:he}}function no(l){so(l);let e,t,s;var n=l[19];function o(a,r){return{props:{class:"px-4 md:px-0"}}}return n&&(e=nn(n,o())),{c(){e&&_e(e.$$.fragment),t=De()},l(a){e&&pe(e.$$.fragment,a),t=De()},m(a,r){e&&ve(e,a,r),F(a,t,r),s=!0},i(a){s||(e&&z(e.$$.fragment,a),s=!0)},o(a){e&&$(e.$$.fragment,a),s=!1},d(a){a&&m(t),e&&ge(e,a)}}}function ao(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){F(t,e,s)},i:he,o:he,d(t){t&&m(e)}}}function oo(l){let e,t,s,n='<a class="hover:underline" href="https://github.com/TeemuKoivisto/midi-note-trainer">MIDI Note Trainer</a>',o,a,r,i,c,h,f,_,b,p,w,y,T,N,L,E,j,C,S;r=new va({}),c=new Ra({}),f=new Rn({}),p=new to({props:{class:"mr-4"}}),y=new Pa({});let D={ctx:l,current:null,token:null,hasCatch:!1,pending:ao,then:no,catch:lo,value:20,blocks:[,,,]};return sn(Xl(()=>import("./Score.aa5b4c56.js"),["./Score.aa5b4c56.js","./vendor_svelte.470e5abf.js","./vendor.1acf520b.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),D),E=new Ta({props:{class:"min-h-32",debounced:!!l[0]}}),E.$on("guessed-chord",l[2]),E.$on("guessed-key",l[3]),E.$on("note",l[4]),C=new la({props:{game:l[1]}}),{c(){e=v("meta"),t=B(),s=v("h1"),s.innerHTML=n,o=B(),a=v("section"),_e(r.$$.fragment),i=B(),_e(c.$$.fragment),h=B(),_e(f.$$.fragment),_=B(),b=v("div"),_e(p.$$.fragment),w=B(),_e(y.$$.fragment),T=B(),D.block.c(),N=B(),L=v("section"),_e(E.$$.fragment),j=B(),_e(C.$$.fragment),this.h()},l(I){const K=ln("svelte-1w2oado",document.head);e=g(K,"META",{name:!0,content:!0}),K.forEach(m),t=M(I),s=g(I,"H1",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-1l8ebwf"&&(s.innerHTML=n),o=M(I),a=g(I,"SECTION",{class:!0});var k=A(a);pe(r.$$.fragment,k),i=M(k),pe(c.$$.fragment,k),h=M(k),pe(f.$$.fragment,k),_=M(k),b=g(k,"DIV",{class:!0});var V=A(b);pe(p.$$.fragment,V),w=M(V),pe(y.$$.fragment,V),V.forEach(m),k.forEach(m),T=M(I),D.block.l(I),N=M(I),L=g(I,"SECTION",{class:!0});var P=A(L);pe(E.$$.fragment,P),j=M(P),pe(C.$$.fragment,P),P.forEach(m),this.h()},h(){d(e,"name","description"),d(e,"content","App to practise music notation, scales and chords using MIDI"),d(s,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight"),d(b,"class","play svelte-1shyohv"),d(a,"class","px-4 md:px-0"),d(L,"class","mb-8 px-4 md:px-0 flex flex-col")},m(I,K){u(document.head,e),F(I,t,K),F(I,s,K),F(I,o,K),F(I,a,K),ve(r,a,null),u(a,i),ve(c,a,null),u(a,h),ve(f,a,null),u(a,_),u(a,b),ve(p,b,null),u(b,w),ve(y,b,null),F(I,T,K),D.block.m(I,D.anchor=K),D.mount=()=>N.parentNode,D.anchor=N,F(I,N,K),F(I,L,K),ve(E,L,null),u(L,j),ve(C,L,null),S=!0},p(I,[K]){l=I;const k={};K&1&&(k.debounced=!!l[0]),E.$set(k);const V={};K&2&&(V.game=l[1]),C.$set(V)},i(I){S||(z(r.$$.fragment,I),z(c.$$.fragment,I),z(f.$$.fragment,I),z(p.$$.fragment,I),z(y.$$.fragment,I),z(D.block),z(E.$$.fragment,I),z(C.$$.fragment,I),S=!0)},o(I){$(r.$$.fragment,I),$(c.$$.fragment,I),$(f.$$.fragment,I),$(p.$$.fragment,I),$(y.$$.fragment,I);for(let K=0;K<3;K+=1){const k=D.blocks[K];$(k)}$(E.$$.fragment,I),$(C.$$.fragment,I),S=!1},d(I){I&&(m(t),m(s),m(o),m(a),m(T),m(N),m(L)),m(e),ge(r),ge(c),ge(f),ge(p),ge(y),D.block.d(I),D.token=null,D=null,ge(E),ge(C)}}}function ro(l,e,t){let s,n,o,a,r,i;re(l,_t,j=>t(7,s=j)),re(l,pt,j=>t(1,n=j)),re(l,it,j=>t(8,o=j)),re(l,vt,j=>t(9,a=j)),re(l,et,j=>t(10,r=j)),re(l,rs,j=>t(11,i=j));let c,h;Bl(()=>(i&&E(),window.addEventListener("keydown",f),window.addEventListener("mousedown",f),window.addEventListener("touchstart",f),()=>{window.removeEventListener("keydown",f),window.removeEventListener("mousedown",f),window.removeEventListener("touchstart",f)})),$t.subscribe(j=>{j&&j.channels[1].addListener("noteon",_)});function f(){fe.initAudio(),window.removeEventListener("keydown",f),window.removeEventListener("mousedown",f),window.removeEventListener("touchstart",f)}function _(j){if(c)return;const C=j.rawData;b(C[1],C[2])}function b(j,C){const S=n;S instanceof St&&!(S!=null&&S.ended)&&s==="waiting"?y(j):S instanceof rt&&!(S!=null&&S.ended)&&s==="waiting"?(S.addPlayedNote(j),h||(h=setTimeout(w,2e3))):S||ue.pushPlayed(j),r&&r.noteOn(j,a.fixedVelocity??C)}function p(){o.autoplay&&o.waitSeconds>0?t(0,c=setTimeout(()=>{o.autoplay&&be.nextGuess(),t(0,c=void 0)},o.waitSeconds*1e3)):o.autoplay?be.nextGuess():t(0,c=void 0)}function w(){var C;const j=n;if(j instanceof rt){const S=j.guess();ue.setPlayed(((C=j.latestGuess.guessed)==null?void 0:C.notes)||[],S,-1),be.updateState(S?"correct":"wrong"),p()}h=void 0}function y(j){const C=n;if(C instanceof St&&s==="waiting"){ue.setTarget([ue.getNote(C.current)]);const S=C.guess(j);be.updateState(S?"correct":"wrong"),ue.pushPlayed(j,S,4e3),p()}}function T(j){const C=n;if(C instanceof rt&&s==="waiting"){const S=C.guessWrittenChord(j.detail);be.updateState(S?"correct":"wrong"),p()}}function N(j){const C=n;if(C instanceof Nt&&s==="waiting"){const S=j.detail.replaceAll("♭","b").replaceAll("♯","#"),D=C.guess(S);be.updateState(D?"correct":"wrong"),p()}}function L(j){b(j.detail,80)}async function E(){const j=await fe.openMidi();"data"in j?j.data.name:(j.err,console.error(j.err))}return[c,n,T,N,L]}class fo extends He{constructor(e){super(),Re(this,e,ro,oo,ze,{})}}export{As as F,rt as G,fo as P,un as S,St as a,be as b,pt as c,mt as d,zl as e,_t as g,et as p,bt as s,Is as t};
