import{_ as rn}from"./preload-helper.a4192956.js";import{R as be,Q as Tt,T as Ge,U as on,S as Re,i as He,s as ze,O as at,V as se,e as _,m as L,H as me,a as v,b as T,n as Z,d as m,o as P,I as pe,f as d,L as q,W as Ae,g as K,h as u,J as _e,p as R,t as F,C as tt,w as st,l as W,K as ve,X as De,Y as rt,M as ie,N as ye,P as we,z as J,A as Q,B as ae,v as Le,q as ue,c as Kl,u as xl,j as $l,k as Fl,Z as Es,_ as Ft,F as cn,$ as Ss,a0 as As,a1 as ds,r as Rl,a2 as Qe,a3 as un,a4 as zt,a5 as fn,a6 as hn,G as dn}from"./vendor_svelte.9533a558.js";import{w as Rt,b as mn,c as pn,e as Ns,f as Ts,g as Hl,h as qt,i as Wt,a as Is,j as is}from"./vendor.1acf520b.js";const js={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function $e(l,e=0,t=0){return{interval:`${l}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:l,semitones:zl(l,e,t),flats:e,sharps:t}}function zl(l,e,t){return(l<8?js[l]:js[l%7])-e+t+Math.floor(l/8)*12}function ql(l){let e,t=0,s=0;l<0?(t=1+Math.floor(-l/100),e=-l%100):l>100?(s=Math.floor(l/100),e=l%100):e=l;const n=zl(e,t,s);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(s)}`,interval_seq:e,semitones:n,flats:t,sharps:s}}const _n=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let ns=[];function Wl(){return _n.map(l=>{const e=l[3].map(ql);return{suffixes:l[0],name:l[1][0],type:l[2],intervals:e}})}function jt(l){ns.length===0&&(ns=Wl());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return ns.find(t=>t.suffixes.find(s=>s===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function vn(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const r=(l.semitones+e)%12;return{...l,semitones:r<0?r+12:r,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function os(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=l+r.semitones,i=e.scaleNotes.find(p=>p.semitones===a%12),o=r.flats>0,c=r.sharps>0,f=(o?a+1:c?a-1:a)%12,h=o?-1:c?1:0;s.push(vn(i??e.notesMap.get(f),i?0:h,a))}return s}const Ds=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],gn=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],Ls=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function bn(l){let e=0,t=0;for(let s=0;s<Ds.length;s+=1){const n=l.find(a=>a.note.slice(0,2)===Ds[s]),r=l.find(a=>a.note.slice(0,2)===gn[s]);if(n)e+=1;else if(r)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:Ls.get(e*-1)}:{flats:0,sharps:t,majorSignature:Ls.get(t)}}function kn(l){return l>=9?`${l>=10?"X":""}${l===9?"IX":"I".repeat(l%10)}`:`${l>=5?"V":""}${l===4?"IV":"I".repeat(l%5)}`}function Jl(l){return l.map(e=>{const t=[$e(1)];let s;return e.major?(t.push($e(3)),e.suffix.startsWith("+")?t.push($e(5,0,1)):e.suffix.startsWith("6")?t.push($e(6)):e.suffix.startsWith("7")?t.push($e(7,1)):e.suffix.startsWith("maj7")?t.push($e(7)):s=jt("maj")):e.minor?(t.push($e(3,1)),e.suffix.startsWith("°")?t.push($e(5,1)):e.suffix.startsWith("6")?(t.push($e(6)),s=jt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push($e(7,1)),s=jt("m"+e.suffix)):s=jt("m")):e.suffix.startsWith("sus2")?t.push($e(2)):e.suffix.startsWith("sus4")&&t.push($e(4)),t.length<=2&&t.push($e(5)),t.length<=2&&t.push($e(8)),s||(s=jt(e.suffix)),{...s,intervals:t}})}function yn(l,e){let t=e.has(4)&&e.has(7),s=e.has(3)&&e.has(7);const n=kn(l);let r="";return t||s||(e.has(3)&&e.has(6)?(r="°",s=!0):e.has(4)&&e.has(8)?(r="+",t=!0):e.has(3)&&e.has(10)?(s=!0,r="7"):e.has(4)&&e.has(10)?(r="7",t=!0):e.has(4)&&e.has(11)?(r="maj7",t=!0):e.has(3)&&e.has(8)?(r="6",s=!0):e.has(4)&&e.has(9)?(r="6",t=!0):e.has(2)?r="sus2":e.has(5)?r="sus4":e.has(7)?r="5":r="?"),{degree:l,roman:s?n.toLowerCase():n,suffix:r,major:t,minor:s,semitones:e}}function wn(l){const e=l.length;return l.map((t,s)=>{const n=t.semitones,r=new Set;for(let a=1;a<e;a+=1){const i=l[(s+a)%e].semitones,o=i<=n?i+12-n:i-n;r.add(o)}return yn(t.interval_seq,r)})}const Cn=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let as=[];function ms(){return Cn.map(l=>{const e=l[0],t=l[1].map(ql),s=wn(t);return{names:e,intervals:t,triads:s}})}function En(l){as.length===0&&(as=ms());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return as.find(t=>t.names.find(s=>s.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const Sn=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,An=/^[0-9]$/,Ze=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Ql(l){return l===12?1:Math.floor((l-12)/12)}function Ye(l){return`${l.note}${Ql(l.midi)}`}function St(l){const t=(l-12)%12;return{...Ze[t],semitones:t,midi:l}}function Nn(l,e=!0,t=!1){if(e&&!Sn.test(l))return{err:`Unrecognized note "${l}"`,code:400};const s=l.trim(),n=s.charAt(0).toUpperCase(),r=Ze.find(h=>h.note.charAt(0)===n&&h.note.length===1);if(!r)return{err:`Unable to find note ${s}`,code:500};const a=s.slice(1).split("").reduce((h,p)=>h+(p.toLowerCase()==="b"||p==="♭"?-1:p==="#"||p==="♯"?1:0),0);let i;if(An.test(s.charAt(s.length-1)))try{i=parseInt(s.charAt(s.length-1),10)}catch{}if(t&&i===void 0)return{err:`No octave provided: ${l}`,code:400};i===void 0&&(i=0);let o=(r.semitones+a)%12;o=o<0?o+12:o;const c=a<0?-a:0,f=a>0?a:0;return{data:{note:`${n}${"♭".repeat(c)}${"♯".repeat(f)}`,semitones:o,midi:12+i*12+o,flats:c,sharps:f}}}function Yl(l){const e=Ze.find(t=>t.note.charAt(0)===l.charAt(0)&&t.note.length===1);if(e){const t=l.slice(1).split("").reduce((n,r)=>n+(r.toLowerCase()==="b"||r==="♭"?-1:r==="#"||r==="♯"?1:0),0),s=(e.semitones+t)%12;return{note:l,semitones:s<0?s+12:s,flats:t<0?-t:0,sharps:t>0?t:0}}}const Tn=/^[a-gA-G][♭b#♯]?$/,rs="ABCDEFG";function In(l,e){return e.map(t=>rs.charAt((rs.indexOf(l)+t.interval_seq-1)%rs.length))}function jn(l,e,t){return t.map((s,n)=>{const r=e[n],a=(l+s.semitones)%12,i=Ze[a],o=i.note.charAt(0);if(o<r&&(o!=="A"||r!=="G")||o==="G"&&r==="A"){let c=1,f=Ze[(a+c)%12];for(;f.note.charAt(0)!==r;)c+=1,f=Ze[(a+c)%12];return{semitones:a,note:f.note+"♭".repeat(c),flats:c+(f.note.includes("♭")?1:0),sharps:0}}else if(o>r||o==="A"&&r==="G"){let c=1,f=a===0?Ze.length-1:a-c,h=Ze[f];for(;h.note.charAt(0)!==r;)c+=1,f=f===0?Ze.length-1:f-1,h=Ze[f];return{semitones:a,note:h.note+"♯".repeat(c),flats:0,sharps:c+(h.note.includes("♯")?1:0)}}else return{semitones:a,note:i.note,flats:i.flats,sharps:i.sharps}})}function Jt(l,e){if(!Tn.test(l))return{err:`Unknown key: ${l}`,code:400};const t=En(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const s=`${l.charAt(0).toUpperCase()}${l.charAt(1).replace("b","♭").replace("#","♯")}`,n=Yl(s);if(!n)return{err:`Unable to find root for note: ${s}`,code:404};const r=In(s.charAt(0),t.intervals),a=jn(n.semitones,r,t.intervals),i=new Map(Ze.map(o=>{const c=a.find(f=>f.semitones===o.semitones);return c?[o.semitones,c]:[o.semitones,{...o}]}));return{data:{key:s,scale:t.names[0],names:t.names,...bn(a),intervals:t.intervals.map(o=>({...o})),triads:t.triads.map(o=>({...o})),scaleNotes:a,notesMap:i}}}const cs=new Map;function Dn(l,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(l)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function Ln(l,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(l)),{data:void 0}}catch(s){return{err:`Failed to store the value: ${s}`,code:400}}}function ht(l,e){const{key:t,storage:s="local",namespace:n="default"}=e,r=Dn(t,s),a=be(l);"data"in r?l.set(e.deserialize?e.deserialize(r.data):r.data):"err"in r&&(e!=null&&e.debug)&&console.info(r.err);const i=l.subscribe(c=>{const f=Ln(e.serialize?e.serialize(c):c,t,s);"err"in f&&(e!=null&&e.debug)&&console.error(f.err)}),o=cs.get(n);return o?o.push({key:t,storage:s,value:l,defaultValue:a,unsubscribe:i}):cs.set(n,[{key:t,storage:s,value:l,defaultValue:a,unsubscribe:i}]),l}function Pn(l=["default"],e){l.forEach(t=>{var s;(s=cs.get(t))==null||s.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function Bn(l,e){const t=await fetch(l);if(!t.ok)return{err:t.statusText,code:t.status};const s=await t.arrayBuffer();return{data:await e.decodeAudioData(s)}}async function Gn(l,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],s=await Promise.all(t.map(r=>Bn(`${l}${r}`,e))),n=[];return s.forEach(r=>{"err"in r?console.error(`Failed to load audio: ${r.err}`):n.push(r.data)}),n}class Mn{constructor(e,t,s,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(s),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(s))}on(e,t,s,n,r,a,i,o){this.noteA.buffer=e,this.noteA.playbackRate.value=s,this.biquadFilter.frequency.value=r,this.gainA.gain.value=a,this.gain.gain.value=o,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=i,this.noteB.start(0)),this.noteA.start(0)}off(e,t,s){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(s),this.noteB.stop(s),(n=this.damp)==null||n.start(0)}}class Vn{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,s)=>{this.bufferlists.push(t),s===8?this.damper=t:s===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(s=>{this.noteOn(s,t)})}noteOn(e,t=80){if(e<109&&e>20){const s=this.notes.get(e);s&&(s.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),r=n+1,a=n*12+21,i=2**((e-69)/12)*440,o=t/127;let c=i*(2-(e-21)/50)+3*i*o;e<60&&(c=440*(3-(60-21)/50)+3*i*o);const f=1-(e%12/12+1)/12,h=Math.pow(2,(e-a)/12),p=0,b=0,g=o**1.4,A=new Mn(e,this.context,this.directGain,this.damper);A.on(this.bufferlists[n],this.bufferlists[r],h,p,c,f,b,g),this.notes.set(e,A)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const On="/midi-note-trainer/",us=ht(Ge(!1),{key:"midi-access"}),Qt=Ge(void 0),ps=ht(Ge([60,84]),{key:"midi-range",storage:"session"}),Yt=Tt(ps,l=>[St(l[0]),St(l[1])]),Ps=Ge(void 0),et=Ge(void 0),lt=ht(Ge({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),Fe={async openMidi(){return Rt.enable().then(()=>(us.set(!0),Rt.inputs.length>0?(Qt.set(Rt.inputs[0]),{data:Rt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(l=>({err:l.toString(),code:403}))},disableMidi(){us.set(!1),Qt.set(void 0)},setMidiRange(l){ps.set(l)},setInputValue(l,e){lt.update(t=>({...t,[l]:e})),l==="useSound"&&!e?et.set(void 0):l==="useSound"&&!be(et)&&this.initAudio()},async initAudio(){let l=be(Ps);if(l||(l=new AudioContext,Ps.set(l)),!be(et)){const e=new Vn(l),t=await Gn(`${On}audio`,l);e.load(t),et.set(e)}}};let Xe;on({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}});const kt=Ge(["C","Major"]),Nt=Tt(kt,l=>{const e=Jt(l[0],l[1]);return"data"in e?e.data:{key:l[0],scale:l[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),Bs=Ge([]),vt=Ge([]);function fs(l,e){if(l.length>0){const t=Date.now();let s=t;const n=l.filter(r=>(r.started+e>t&&(s=Math.min(s,r.started)),r.started+e>t));return!Xe&&n.length>0&&(Xe=setTimeout(()=>{Xe=void 0,vt.update(r=>fs(r,e))},e-(t-s)+100)),n}return l}const de={setKey(l){kt.update(e=>[l,e[1]])},setScale(l){kt.update(e=>[e[0],l])},setKeyAndScale(l,e){kt.set([l,e])},setTarget(l=[]){Bs.set(l)},getNote(l){return{...be(Nt).notesMap.get(l%12),midi:l}},pushPlayed(l,e,t){const n={...be(Nt).notesMap.get(l%12),midi:l},r=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(vt.update(i=>{const o=i.findIndex(c=>c.midi===l);return o>=0&&i.splice(o,1),[...i,{...n,color:a,started:r}]}),!Xe&&t!==-1){const i=t??be(lt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,vt.update(o=>fs(o,i))},i)}},setPlayed(l,e,t){const s=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(vt.update(r=>[...l.map(a=>({...a,color:n,started:s}))]),!Xe&&t!==-1){const r=t??be(lt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,vt.update(a=>fs(a,r))},r)}},clearPlayed(){vt.set([]),clearTimeout(Xe),Xe=void 0},clearScore(l=!1){l&&kt.set(["C","Major"]),Bs.set([]),vt.set([])}};class _s{constructor(e,t,s){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=s;const n=[],{count:r}=s,a=t.map(o=>typeof o=="object"&&o!==null?{...o}:o);let i=s.duplicates;!s.duplicates&&r>a.length&&(console.warn(`Trying to create game with count ${r} larger than available unique values ${t.length}`),i=!0);for(let o=0;o<r;o+=1){const c=Math.floor(Math.random()*a.length);if(i)n.push(a[c]);else{const f=a.splice(c,1);f.length>0&&n.push(f[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function Un(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const r=(l.semitones+e)%12;return{...l,semitones:r<0?r+12:r,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function Kn(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=l+r.semitones,i=e.scaleNotes.find(p=>p.semitones===a%12),o=r.flats>0,c=r.sharps>0,f=(o?a+1:c?a-1:a)%12,h=o?-1:c?1:0;s.push(Un(i??e.notesMap.get(f),i?0:h,a))}return s}const xn=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function $n(l){const t=(l-12)%12;return{...xn[t],semitones:t,midi:l}}function Fn(l){return`${l.note.trim().charAt(0).toUpperCase()}${"♭".repeat(l.flats)}${"♯".repeat(l.sharps)}`}class ut extends _s{constructor(e,t,s){const n=t.range[0],r=t.range[1],a=new Set(t.scale.scaleNotes.map(o=>o.semitones)),i=s.chords.flatMap(o=>{const c=[],f=o.intervals.reduce((h,p)=>p.semitones>h?p.semitones:h,0);for(let h=n;h<=r-f;h+=1)if((!s.onlyScale||a.has(h%12))&&(!o.allowed||o.allowed.has(h%12))){const p=Kn(h,t.scale,o.intervals);c.push({...o,rootNote:p[0].note,chord:`${p[0].note}${o.suffixes[0]}`,notes:p})}return c});super(e,i,t),this.played=new Set,this.opts=s}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${Fn(e)}${e.chord.toLowerCase()}`,notes:[]},s=this.current.chord===t.chord;return this.addGuessed(t,s)}guess(){const e=Array.from(this.played.values()).map(n=>$n(n)).sort((n,r)=>n.midi-r.midi);this.played.clear();const t={chord:"",notes:e},s=this.current.notes.every(n=>e.find(r=>r.midi%12===n.midi%12));return this.addGuessed(t,s)}}const Rn={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Dt extends _s{constructor(e,t){const s=e==="keys-major"?"major":"minor";super(e,Object.keys(Rn[s]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class At extends _s{constructor(e,t){const s=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-s+1)).map((r,a)=>s+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const Xl={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},gt=Ge("waiting"),ft=ht(Ge(Xl),{key:"game-options"}),bt=Ge(void 0),vs=Ge(Wl().map(l=>({...l,selected:!0}))),ke={play(...[l,e]){var o,c,f;let t;const s=be(Nt),n=be(ps),r=be(ft),a={scale:s,range:n,duplicates:r.duplicates,count:r.count};let i=[s.key,s.scale];if(l==="notes")t=new At(l,a),de.setTarget([de.getNote(t.current)]),(o=be(et))==null||o.noteOn(t.current);else if(l==="pitches")t=new At(l,a),de.setTarget(),Fe.setInputValue("useSound",!0),(c=be(et))==null||c.noteOn(t.current);else if(l==="keys-major"||l=="keys-minor")t=new Dt(l,a),i=[t.current,l==="keys-major"?"major":"minor"];else if(l==="chords-play"||l==="chords-write")t=new ut(l,a,e);else if(l==="chords-diatonic"){const h=Jl(s.triads).map((p,b)=>({...p,allowed:new Set([s.scaleNotes[b].semitones])}));t=new ut(l,a,{chords:h})}else throw Error("Unknown game type: "+l);return typeof t.current!="number"&&typeof t.current!="string"&&((f=be(et))==null||f.playChord(t.current.notes.map(h=>h.midi)),de.setTarget(t.current.notes)),de.setKeyAndScale(i[0],i[1]),de.clearPlayed(),gt.set("waiting"),bt.set(t),t},updateState(l){gt.set(l)},setOptionValue(l,e){ft.update(t=>({...t,[l]:e}))},toggleChords(l){vs.update(e=>e.map(t=>({...t,selected:l(t)})))},nextGuess(){var e,t;const l=be(bt);l!=null&&l.ended?gt.set("ended"):l instanceof At?(l.type==="notes"?de.setTarget([de.getNote(l.current)]):de.setTarget(),de.clearPlayed(),(e=be(et))==null||e.noteOn(l.current),ke.updateState("waiting"),l.startTime()):l instanceof ut?(de.setTarget(l.current.notes),de.clearPlayed(),(t=be(et))==null||t.playChord(l==null?void 0:l.current.notes.map(s=>s.midi)),gt.set("waiting"),l.startTime()):l instanceof Dt&&(de.setKey(l.current),gt.set("waiting"),l.startTime())},clearGame(l=!1){const e=be(bt);e&&de.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),l&&ft.set(Xl),bt.set(void 0),gt.set("waiting"),de.clearScore()}};function Gs(l,e,t){const s=l.slice();return s[25]=e[t],s[27]=t,s}function Ms(l,e,t){const s=l.slice();return s[30]=e[t],s}function Vs(l,e,t){const s=l.slice();return s[8]=e[t],s}function Os(l,e,t){const s=l.slice();return s[25]=e[t],s[27]=t,s}function Us(l,e,t){const s=l.slice();return s[30]=e[t],s}function Ks(l,e,t){const s=l.slice();return s[8]=e[t],s}function Hn(l){let e,t=se(l[25].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=xs(Us(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r[0]&64){t=se(n[25].intervals);let a;for(a=0;a<t.length;a+=1){const i=Us(n,t,a);s[a]?s[a].p(i,r):(s[a]=xs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function zn(l){let e,t=se(l[2][l[27]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=$s(Ks(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r[0]&4){t=se(n[2][n[27]]);let a;for(a=0;a<t.length;a+=1){const i=Ks(n,t,a);s[a]?s[a].p(i,r):(s[a]=$s(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function xs(l){let e,t=l[30].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&64&&t!==(t=n[30].interval+"")&&ae(s,t)},d(n){n&&m(e)}}}function $s(l){let e,t=l[8].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&4&&t!==(t=n[8].note+"")&&ae(s,t)},d(n){n&&m(e)}}}function Fs(l){let e,t,s,n,r,a,i=l[25].suffixes[0]+"",o,c,f,h,p,b,g=l[25].name+"",A,k,D,G;n=new at({props:{icon:l[25].selected?qt:Wt,width:12}});function B(){return l[21](l[25])}function w(j,O){return j[2][j[27]]&&j[2][j[27]].length>0?zn:Hn}let I=w(l),N=I(l);return{c(){e=_("li"),t=_("button"),s=_("span"),me(n.$$.fragment),r=L(),a=_("div"),o=J(i),c=L(),f=_("li"),N.c(),p=L(),b=_("li"),A=J(g),this.h()},l(j){e=v(j,"LI",{});var O=T(e);t=v(O,"BUTTON",{class:!0});var C=T(t);s=v(C,"SPAN",{class:!0});var V=T(s);pe(n.$$.fragment,V),V.forEach(m),r=P(C),a=v(C,"DIV",{class:!0});var E=T(a);o=Q(E,i),E.forEach(m),C.forEach(m),O.forEach(m),c=P(j),f=v(j,"LI",{class:!0,title:!0});var y=T(f);N.l(y),y.forEach(m),p=P(j),b=v(j,"LI",{class:!0});var S=T(b);A=Q(S,g),S.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded"),q(s,"text-green-500",l[25].selected),q(s,"text-gray-400",!l[25].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1j99daw"),d(t,"class","flex items-center justify-center w-full select-btn svelte-1j99daw"),q(t,"hidden",l[7]),d(f,"class","intervals svelte-1j99daw"),d(f,"title",h=l[25].intervals.map(Ws).join("-")),d(b,"class","text-xs")},m(j,O){K(j,e,O),u(e,t),u(t,s),_e(n,s,null),u(t,r),u(t,a),u(a,o),K(j,c,O),K(j,f,O),N.m(f,null),K(j,p,O),K(j,b,O),u(b,A),k=!0,D||(G=R(t,"click",B),D=!0)},p(j,O){l=j;const C={};O[0]&64&&(C.icon=l[25].selected?qt:Wt),n.$set(C),(!k||O[0]&64)&&q(s,"text-green-500",l[25].selected),(!k||O[0]&64)&&q(s,"text-gray-400",!l[25].selected),(!k||O[0]&64)&&i!==(i=l[25].suffixes[0]+"")&&ae(o,i),(!k||O[0]&128)&&q(t,"hidden",l[7]),I===(I=w(l))&&N?N.p(l,O):(N.d(1),N=I(l),N&&(N.c(),N.m(f,null))),(!k||O[0]&64&&h!==(h=l[25].intervals.map(Ws).join("-")))&&d(f,"title",h),(!k||O[0]&64)&&g!==(g=l[25].name+"")&&ae(A,g)},i(j){k||(F(n.$$.fragment,j),k=!0)},o(j){W(n.$$.fragment,j),k=!1},d(j){j&&(m(e),m(c),m(f),m(p),m(b)),ve(n),N.d(),D=!1,G()}}}function qn(l){let e,t=se(l[25].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=Rs(Ms(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r[0]&32){t=se(n[25].intervals);let a;for(a=0;a<t.length;a+=1){const i=Ms(n,t,a);s[a]?s[a].p(i,r):(s[a]=Rs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Wn(l){let e,t=se(l[3][l[27]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Hs(Vs(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r[0]&8){t=se(n[3][n[27]]);let a;for(a=0;a<t.length;a+=1){const i=Vs(n,t,a);s[a]?s[a].p(i,r):(s[a]=Hs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Rs(l){let e,t=l[30].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&32&&t!==(t=n[30].interval+"")&&ae(s,t)},d(n){n&&m(e)}}}function Hs(l){let e,t=l[8].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&8&&t!==(t=n[8].note+"")&&ae(s,t)},d(n){n&&m(e)}}}function zs(l){let e,t,s,n,r,a,i=l[25].suffixes[0]+"",o,c,f,h,p,b,g=l[25].name+"",A,k,D,G;n=new at({props:{icon:l[25].selected?qt:Wt,width:12}});function B(){return l[22](l[25])}function w(j,O){return j[3][j[27]]&&j[3][j[27]].length>0?Wn:qn}let I=w(l),N=I(l);return{c(){e=_("li"),t=_("button"),s=_("span"),me(n.$$.fragment),r=L(),a=_("div"),o=J(i),c=L(),f=_("li"),N.c(),p=L(),b=_("li"),A=J(g),this.h()},l(j){e=v(j,"LI",{});var O=T(e);t=v(O,"BUTTON",{class:!0});var C=T(t);s=v(C,"SPAN",{class:!0});var V=T(s);pe(n.$$.fragment,V),V.forEach(m),r=P(C),a=v(C,"DIV",{class:!0});var E=T(a);o=Q(E,i),E.forEach(m),C.forEach(m),O.forEach(m),c=P(j),f=v(j,"LI",{class:!0,title:!0});var y=T(f);N.l(y),y.forEach(m),p=P(j),b=v(j,"LI",{class:!0});var S=T(b);A=Q(S,g),S.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded"),q(s,"text-green-500",l[25].selected),q(s,"text-gray-400",!l[25].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1j99daw"),d(t,"class","flex items-center justify-center w-full select-btn svelte-1j99daw"),q(t,"hidden",l[7]),d(f,"class","intervals svelte-1j99daw"),d(f,"title",h=l[25].intervals.map(Js).join("-")),d(b,"class","text-xs")},m(j,O){K(j,e,O),u(e,t),u(t,s),_e(n,s,null),u(t,r),u(t,a),u(a,o),K(j,c,O),K(j,f,O),N.m(f,null),K(j,p,O),K(j,b,O),u(b,A),k=!0,D||(G=R(t,"click",B),D=!0)},p(j,O){l=j;const C={};O[0]&32&&(C.icon=l[25].selected?qt:Wt),n.$set(C),(!k||O[0]&32)&&q(s,"text-green-500",l[25].selected),(!k||O[0]&32)&&q(s,"text-gray-400",!l[25].selected),(!k||O[0]&32)&&i!==(i=l[25].suffixes[0]+"")&&ae(o,i),(!k||O[0]&128)&&q(t,"hidden",l[7]),I===(I=w(l))&&N?N.p(l,O):(N.d(1),N=I(l),N&&(N.c(),N.m(f,null))),(!k||O[0]&32&&h!==(h=l[25].intervals.map(Js).join("-")))&&d(f,"title",h),(!k||O[0]&32)&&g!==(g=l[25].name+"")&&ae(A,g)},i(j){k||(F(n.$$.fragment,j),k=!0)},o(j){W(n.$$.fragment,j),k=!1},d(j){j&&(m(e),m(c),m(f),m(p),m(b)),ve(n),N.d(),D=!1,G()}}}function Jn(l){let e,t,s,n,r="Chords",a,i,o,c,f,h,p,b,g,A,k,D,G,B,w,I,N,j="Key",O,C,V,E,y="Scale",S,M,U,$,z="Note",le,te,fe,ce,Te,xe,Me,ge,qe,Ke;c=new at({props:{icon:mn,width:20}}),p=new at({props:{icon:pn,width:16}}),A=new at({props:{icon:l[4]?Ns:Ts,width:16}}),G=new at({props:{icon:Hl,width:16}});let Ie=se(l[6]),re=[];for(let x=0;x<Ie.length;x+=1)re[x]=Fs(Os(l,Ie,x));const Ne=x=>W(re[x],1,1,()=>{re[x]=null});let he=se(l[5]),Y=[];for(let x=0;x<he.length;x+=1)Y[x]=zs(Gs(l,he,x));const ne=x=>W(Y[x],1,1,()=>{Y[x]=null});return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=L(),i=_("div"),o=_("button"),me(c.$$.fragment),f=L(),h=_("button"),me(p.$$.fragment),b=L(),g=_("button"),me(A.$$.fragment),k=L(),D=_("button"),me(G.$$.fragment),B=L(),w=_("div"),I=_("div"),N=_("label"),N.textContent=j,O=L(),C=_("input"),V=L(),E=_("label"),E.textContent=y,S=L(),M=_("input"),U=L(),$=_("label"),$.textContent=z,le=L(),te=_("input"),fe=L(),ce=_("ul");for(let x=0;x<re.length;x+=1)re[x].c();Te=L(),xe=_("ul");for(let x=0;x<Y.length;x+=1)Y[x].c();this.h()},l(x){e=v(x,"DIV",{class:!0});var X=T(e);t=v(X,"FIELDSET",{class:!0});var oe=T(t);s=v(oe,"LEGEND",{class:!0});var ee=T(s);n=v(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1knqzl6"&&(n.textContent=r),ee.forEach(m),a=P(oe),i=v(oe,"DIV",{class:!0});var Ce=T(i);o=v(Ce,"BUTTON",{class:!0});var Pe=T(o);pe(c.$$.fragment,Pe),Pe.forEach(m),f=P(Ce),h=v(Ce,"BUTTON",{class:!0});var nt=T(h);pe(p.$$.fragment,nt),nt.forEach(m),b=P(Ce),g=v(Ce,"BUTTON",{class:!0});var We=T(g);pe(A.$$.fragment,We),We.forEach(m),k=P(Ce),D=v(Ce,"BUTTON",{class:!0});var Ve=T(D);pe(G.$$.fragment,Ve),Ve.forEach(m),Ce.forEach(m),B=P(oe),w=v(oe,"DIV",{class:!0});var je=T(w);I=v(je,"DIV",{class:!0});var Ee=T(I);N=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(N)!=="svelte-14m38zf"&&(N.textContent=j),O=P(Ee),C=v(Ee,"INPUT",{class:!0,id:!0}),V=P(Ee),E=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(E)!=="svelte-bxhcb0"&&(E.textContent=y),S=P(Ee),M=v(Ee,"INPUT",{class:!0,id:!0}),U=P(Ee),$=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z($)!=="svelte-dmbfli"&&($.textContent=z),le=P(Ee),te=v(Ee,"INPUT",{class:!0,id:!0}),Ee.forEach(m),fe=P(je),ce=v(je,"UL",{class:!0});var It=T(ce);for(let Oe=0;Oe<re.length;Oe+=1)re[Oe].l(It);It.forEach(m),Te=P(je),xe=v(je,"UL",{class:!0});var yt=T(xe);for(let Oe=0;Oe<Y.length;Oe+=1)Y[Oe].l(yt);yt.forEach(m),je.forEach(m),oe.forEach(m),X.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(o,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),q(o,"hidden",l[7]),d(h,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(h,"hidden",l[7]),d(g,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(g,"hidden",l[7]),d(D,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(D,"hidden",l[7]),d(i,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),d(N,"class","mr-4 font-bold svelte-1j99daw"),d(N,"for","scale-key"),d(C,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(C,"id","scale-key"),C.value=l[0],d(E,"class","font-bold svelte-1j99daw"),d(E,"for","scale-key"),d(M,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(M,"id","scale-key"),M.value="Major",M.disabled=!0,d($,"class","font-bold svelte-1j99daw"),d($,"for","scale-key"),d(te,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(te,"id","scale-key"),te.value=l[1],d(I,"class","flex mb-2 input svelte-1j99daw"),d(ce,"class","chord-list w-full svelte-1j99daw"),d(xe,"class","chord-list w-full svelte-1j99daw"),d(w,"class","body svelte-1j99daw"),q(w,"hidden",l[7]),d(t,"class","flex flex-col relative rounded border-2 px-4 py-2 my-4 text-sm svelte-1j99daw"),q(t,"collapsed",l[7]),d(e,"class",Me=Ae(`${l[18].class||""}`)+" svelte-1j99daw")},m(x,X){K(x,e,X),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,o),_e(c,o,null),u(i,f),u(i,h),_e(p,h,null),u(i,b),u(i,g),_e(A,g,null),u(i,k),u(i,D),_e(G,D,null),u(t,B),u(t,w),u(w,I),u(I,N),u(I,O),u(I,C),u(I,V),u(I,E),u(I,S),u(I,M),u(I,U),u(I,$),u(I,le),u(I,te),u(w,fe),u(w,ce);for(let oe=0;oe<re.length;oe+=1)re[oe]&&re[oe].m(ce,null);u(w,Te),u(w,xe);for(let oe=0;oe<Y.length;oe+=1)Y[oe]&&Y[oe].m(xe,null);ge=!0,qe||(Ke=[R(n,"click",l[10]),R(o,"click",l[14]),R(h,"click",l[15]),R(g,"click",l[16]),R(D,"click",l[17]),R(C,"input",l[11]),R(te,"input",l[12])],qe=!0)},p(x,X){(!ge||X[0]&128)&&q(o,"hidden",x[7]),(!ge||X[0]&128)&&q(h,"hidden",x[7]);const oe={};if(X[0]&16&&(oe.icon=x[4]?Ns:Ts),A.$set(oe),(!ge||X[0]&128)&&q(g,"hidden",x[7]),(!ge||X[0]&128)&&q(D,"hidden",x[7]),(!ge||X[0]&1&&C.value!==x[0])&&(C.value=x[0]),(!ge||X[0]&2&&te.value!==x[1])&&(te.value=x[1]),X[0]&8388){Ie=se(x[6]);let ee;for(ee=0;ee<Ie.length;ee+=1){const Ce=Os(x,Ie,ee);re[ee]?(re[ee].p(Ce,X),F(re[ee],1)):(re[ee]=Fs(Ce),re[ee].c(),F(re[ee],1),re[ee].m(ce,null))}for(tt(),ee=Ie.length;ee<re.length;ee+=1)Ne(ee);st()}if(X[0]&8360){he=se(x[5]);let ee;for(ee=0;ee<he.length;ee+=1){const Ce=Gs(x,he,ee);Y[ee]?(Y[ee].p(Ce,X),F(Y[ee],1)):(Y[ee]=zs(Ce),Y[ee].c(),F(Y[ee],1),Y[ee].m(xe,null))}for(tt(),ee=he.length;ee<Y.length;ee+=1)ne(ee);st()}(!ge||X[0]&128)&&q(w,"hidden",x[7]),(!ge||X[0]&128)&&q(t,"collapsed",x[7]),(!ge||X[0]&262144&&Me!==(Me=Ae(`${x[18].class||""}`)+" svelte-1j99daw"))&&d(e,"class",Me)},i(x){if(!ge){F(c.$$.fragment,x),F(p.$$.fragment,x),F(A.$$.fragment,x),F(G.$$.fragment,x);for(let X=0;X<Ie.length;X+=1)F(re[X]);for(let X=0;X<he.length;X+=1)F(Y[X]);ge=!0}},o(x){W(c.$$.fragment,x),W(p.$$.fragment,x),W(A.$$.fragment,x),W(G.$$.fragment,x),re=re.filter(Boolean);for(let X=0;X<re.length;X+=1)W(re[X]);Y=Y.filter(Boolean);for(let X=0;X<Y.length;X+=1)W(Y[X]);ge=!1},d(x){x&&m(e),ve(c),ve(p),ve(A),ve(G),De(re,x),De(Y,x),qe=!1,rt(Ke)}}}let qs="Major";const Ws=l=>l.interval,Js=l=>l.interval;function Qn(l,e,t){let s,n,r,a,i,o;ie(l,vs,E=>t(20,i=E));let c="C",f=Jt(c,qs),h="",p,b=[],g=[];const A=ht(Ge(!0),{key:"chords-hidden"});ie(l,A,E=>t(7,o=E));function k(){A.update(E=>!E)}function D(){const E=p&&60+p.semitones;if("err"in f||!E)t(2,b=[]),t(3,g=[]);else{const y=f.data;t(2,b=n.map(S=>os(E,y,S.intervals))),t(3,g=r.map(S=>os(E,y,S.intervals)))}}function G({currentTarget:{value:E}}){t(0,c=`${E.charAt(0).toUpperCase()}${E.charAt(1).toLowerCase()}`),f=Jt(c,qs),D()}function B({currentTarget:{value:E}}){t(1,h=`${E.charAt(0).toUpperCase()}${E.charAt(1).toLowerCase()}`),t(8,p=Yl(h)),D()}function w(E){ke.toggleChords(y=>y.name===E.name?!y.selected:y.selected)}function I(){const E=S=>S.suffixes[0]==="maj"||S.suffixes[0]==="m",y=i.filter(E).every(S=>S.selected);ke.toggleChords(S=>E(S)?!y:S.selected)}function N(){const E=S=>S.suffixes[0]==="maj7"||S.suffixes[0]==="m7"||S.suffixes[0]==="7"||S.suffixes[0]==="dim7"||S.suffixes[0]==="aug7",y=i.filter(E).every(S=>S.selected);ke.toggleChords(S=>E(S)?!y:S.selected)}function j(){ke.toggleChords(E=>!a)}function O(){ke.toggleChords(E=>!0)}const C=E=>w(E),V=E=>w(E);return l.$$set=E=>{t(18,e=ye(ye({},e),we(E)))},l.$$.update=()=>{l.$$.dirty[0]&1048576&&t(19,s=i),l.$$.dirty[0]&524288&&t(6,n=s.filter((E,y)=>y<s.length/2)),l.$$.dirty[0]&524288&&t(5,r=s.filter((E,y)=>y>=s.length/2)),l.$$.dirty[0]&524288&&t(4,a=s.every(E=>E.selected))},e=we(e),[c,h,b,g,a,r,n,o,p,A,k,G,B,w,I,N,j,O,e,s,i,C,V]}class Yn extends Re{constructor(e){super(),He(this,e,Qn,Jn,ze,{},null,[-1,-1])}}function Qs(l,e,t){const s=l.slice();return s[10]=e[t],s}function Xn(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){K(t,e,s)},p:ue,d(t){t&&m(e)}}}function Zn(l){let e,t,s="Played:",n,r=se(l[2]),a=[];for(let i=0;i<r.length;i+=1)a[i]=Ys(Qs(l,r,i));return{c(){e=_("div"),t=_("span"),t.textContent=s,n=L();for(let i=0;i<a.length;i+=1)a[i].c()},l(i){e=v(i,"DIV",{});var o=T(e);t=v(o,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1g6xxhn"&&(t.textContent=s),n=P(o);for(let c=0;c<a.length;c+=1)a[c].l(o);o.forEach(m)},m(i,o){K(i,e,o),u(e,t),u(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(i,o){if(o&4){r=se(i[2]);let c;for(c=0;c<r.length;c+=1){const f=Qs(i,r,c);a[c]?a[c].p(f,o):(a[c]=Ys(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}},d(i){i&&m(e),De(a,i)}}}function ea(l){let e,t,s="Result:",n,r,a,i=l[0].correct+"",o,c,f=l[0].sampled.length+"",h,p,b,g,A,k=l[0].avgTime+"",D,G;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=L(),r=_("span"),a=J("["),o=J(i),c=J(" / "),h=J(f),p=J("]"),b=L(),g=_("span"),A=J("avg "),D=J(k),G=J("s"),this.h()},l(B){e=v(B,"DIV",{class:!0});var w=T(e);t=v(w,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1eqfbgx"&&(t.textContent=s),n=P(w),r=v(w,"SPAN",{class:!0});var I=T(r);a=Q(I,"["),o=Q(I,i),c=Q(I," / "),h=Q(I,f),p=Q(I,"]"),I.forEach(m),b=P(w),g=v(w,"SPAN",{});var N=T(g);A=Q(N,"avg "),D=Q(N,k),G=Q(N,"s"),N.forEach(m),w.forEach(m),this.h()},h(){d(r,"class","mx-2"),d(e,"class","flex")},m(B,w){K(B,e,w),u(e,t),u(e,n),u(e,r),u(r,a),u(r,o),u(r,c),u(r,h),u(r,p),u(e,b),u(e,g),u(g,A),u(g,D),u(g,G)},p(B,w){w&1&&i!==(i=B[0].correct+"")&&ae(o,i),w&1&&f!==(f=B[0].sampled.length+"")&&ae(h,f),w&1&&k!==(k=B[0].avgTime+"")&&ae(D,k)},d(B){B&&m(e)}}}function ta(l){var j,O,C,V;let e,t,s="Target:",n,r,a=((j=l[0].latestGuess.target)==null?void 0:j.chord)+"",i,o,c,f=((O=l[0].latestGuess.target)==null?void 0:O.notes.map(Xs).join(" "))+"",h,p,b,g="Guessed:",A,k,D=((C=l[0].latestGuess.guessed)==null?void 0:C.chord)+"",G,B,w,I=((V=l[0].latestGuess.guessed)==null?void 0:V.notes.map(Zs).join(" "))+"",N;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=L(),r=_("span"),i=J(a),o=L(),c=_("span"),h=J(f),p=L(),b=_("span"),b.textContent=g,A=L(),k=_("span"),G=J(D),B=L(),w=_("span"),N=J(I),this.h()},l(E){e=v(E,"DIV",{class:!0});var y=T(e);t=v(y,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=P(y),r=v(y,"SPAN",{});var S=T(r);i=Q(S,a),S.forEach(m),o=P(y),c=v(y,"SPAN",{});var M=T(c);h=Q(M,f),M.forEach(m),p=P(y),b=v(y,"SPAN",{"data-svelte-h":!0}),Z(b)!=="svelte-104368"&&(b.textContent=g),A=P(y),k=v(y,"SPAN",{});var U=T(k);G=Q(U,D),U.forEach(m),B=P(y),w=v(y,"SPAN",{});var $=T(w);N=Q($,I),$.forEach(m),y.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(E,y){K(E,e,y),u(e,t),u(e,n),u(e,r),u(r,i),u(e,o),u(e,c),u(c,h),u(e,p),u(e,b),u(e,A),u(e,k),u(k,G),u(e,B),u(e,w),u(w,N)},p(E,y){var S,M,U,$;y&1&&a!==(a=((S=E[0].latestGuess.target)==null?void 0:S.chord)+"")&&ae(i,a),y&1&&f!==(f=((M=E[0].latestGuess.target)==null?void 0:M.notes.map(Xs).join(" "))+"")&&ae(h,f),y&1&&D!==(D=((U=E[0].latestGuess.guessed)==null?void 0:U.chord)+"")&&ae(G,D),y&1&&I!==(I=(($=E[0].latestGuess.guessed)==null?void 0:$.notes.map(Zs).join(" "))+"")&&ae(N,I)},d(E){E&&m(e)}}}function sa(l){let e,t,s="Target:",n,r,a=l[0].latestGuess.target+"",i,o,c,f,h,p="Guessed:",b,g,A=l[0].latestGuess.guessed+"",k,D,G;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=L(),r=_("span"),i=J(a),o=L(),c=_("span"),f=L(),h=_("span"),h.textContent=p,b=L(),g=_("span"),k=J(A),D=L(),G=_("span"),this.h()},l(B){e=v(B,"DIV",{class:!0});var w=T(e);t=v(w,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=P(w),r=v(w,"SPAN",{});var I=T(r);i=Q(I,a),I.forEach(m),o=P(w),c=v(w,"SPAN",{}),T(c).forEach(m),f=P(w),h=v(w,"SPAN",{"data-svelte-h":!0}),Z(h)!=="svelte-104368"&&(h.textContent=p),b=P(w),g=v(w,"SPAN",{});var N=T(g);k=Q(N,A),N.forEach(m),D=P(w),G=v(w,"SPAN",{}),T(G).forEach(m),w.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(B,w){K(B,e,w),u(e,t),u(e,n),u(e,r),u(r,i),u(e,o),u(e,c),u(e,f),u(e,h),u(e,b),u(e,g),u(g,k),u(e,D),u(e,G)},p(B,w){w&1&&a!==(a=B[0].latestGuess.target+"")&&ae(i,a),w&1&&A!==(A=B[0].latestGuess.guessed+"")&&ae(k,A)},d(B){B&&m(e)}}}function la(l){let e,t,s="Target:",n,r,a=Ye(St(l[0].latestGuess.target||0))+"",i,o,c,f,h,p="Guessed:",b,g,A=Ye(St(l[0].latestGuess.guessed||0))+"",k,D,G;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=L(),r=_("span"),i=J(a),o=L(),c=_("span"),f=L(),h=_("span"),h.textContent=p,b=L(),g=_("span"),k=J(A),D=L(),G=_("span"),this.h()},l(B){e=v(B,"DIV",{class:!0});var w=T(e);t=v(w,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=P(w),r=v(w,"SPAN",{});var I=T(r);i=Q(I,a),I.forEach(m),o=P(w),c=v(w,"SPAN",{}),T(c).forEach(m),f=P(w),h=v(w,"SPAN",{"data-svelte-h":!0}),Z(h)!=="svelte-104368"&&(h.textContent=p),b=P(w),g=v(w,"SPAN",{});var N=T(g);k=Q(N,A),N.forEach(m),D=P(w),G=v(w,"SPAN",{}),T(G).forEach(m),w.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(B,w){K(B,e,w),u(e,t),u(e,n),u(e,r),u(r,i),u(e,o),u(e,c),u(e,f),u(e,h),u(e,b),u(e,g),u(g,k),u(e,D),u(e,G)},p(B,w){w&1&&a!==(a=Ye(St(B[0].latestGuess.target||0))+"")&&ae(i,a),w&1&&A!==(A=Ye(St(B[0].latestGuess.guessed||0))+"")&&ae(k,A)},d(B){B&&m(e)}}}function Ys(l){let e,t=Ye(l[10])+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","mx-1")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r&4&&t!==(t=Ye(n[10])+"")&&ae(s,t)},d(n){n&&m(e)}}}function na(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){K(t,e,s)},p:ue,d(t){t&&m(e)}}}function aa(l){let e,t="Next",s,n,r="Autoplay",a,i;return{c(){e=_("button"),e.textContent=t,s=L(),n=_("button"),n.textContent=r,this.h()},l(o){e=v(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1nvnoba"&&(e.textContent=t),s=P(o),n=v(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1cfj1sl"&&(n.textContent=r),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(o,c){K(o,e,c),K(o,s,c),K(o,n,c),a||(i=[R(e,"click",l[4]),R(n,"click",l[5])],a=!0)},p:ue,d(o){o&&(m(e),m(s),m(n)),a=!1,rt(i)}}}function ra(l){let e,t="Stop autoplay",s,n;return{c(){e=_("button"),e.textContent=t,this.h()},l(r){e=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){d(e,"class","btn primary")},m(r,a){K(r,e,a),s||(n=R(e,"click",l[9]),s=!0)},p:ue,d(r){r&&m(e),s=!1,n()}}}function ia(l){let e,t="Try Again",s,n,r="Clear",a,i;return{c(){e=_("button"),e.textContent=t,s=L(),n=_("button"),n.textContent=r,this.h()},l(o){e=v(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-y911ux"&&(e.textContent=t),s=P(o),n=v(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-11mnk9v"&&(n.textContent=r),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(o,c){K(o,e,c),K(o,s,c),K(o,n,c),a||(i=[R(e,"click",l[6]),R(n,"click",l[7])],a=!0)},p:ue,d(o){o&&(m(e),m(s),m(n)),a=!1,rt(i)}}}function oa(l){let e,t,s,n;function r(h,p){return h[0]instanceof At&&(h[1]==="correct"||h[1]==="wrong")?la:h[0]instanceof Dt&&(h[1]==="correct"||h[1]==="wrong")?sa:h[0]instanceof ut&&(h[1]==="correct"||h[1]==="wrong")?ta:h[0]&&h[1]==="ended"?ea:h[2].length>0?Zn:Xn}let a=r(l),i=a(l);function o(h,p){return h[0]&&h[1]==="ended"?ia:h[0]&&h[3].autoplay?ra:h[0]?aa:na}let c=o(l),f=c(l);return{c(){e=_("div"),i.c(),s=L(),n=_("div"),f.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var p=T(e);i.l(p),p.forEach(m),s=P(h),n=v(h,"DIV",{class:!0});var b=T(n);f.l(b),b.forEach(m),this.h()},h(){d(e,"class",t=Ae(`${l[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),d(n,"class","mt-2 h-8")},m(h,p){K(h,e,p),i.m(e,null),K(h,s,p),K(h,n,p),f.m(n,null)},p(h,[p]){a===(a=r(h))&&i?i.p(h,p):(i.d(1),i=a(h),i&&(i.c(),i.m(e,null))),p&256&&t!==(t=Ae(`${h[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&d(e,"class",t),c===(c=o(h))&&f?f.p(h,p):(f.d(1),f=c(h),f&&(f.c(),f.m(n,null)))},i:ue,o:ue,d(h){h&&(m(e),m(s),m(n)),i.d(),f.d()}}}const Xs=l=>l.note,Zs=l=>l.note;function ca(l,e,t){let s,n,r;ie(l,gt,p=>t(1,s=p)),ie(l,vt,p=>t(2,n=p)),ie(l,ft,p=>t(3,r=p));let{game:a}=e;function i(){ke.nextGuess()}function o(){ke.setOptionValue("autoplay",!0),ke.nextGuess()}function c(){a instanceof ut?ke.play(a.type,a.opts):a&&ke.play(a.type,void 0)}function f(){ke.clearGame()}const h=()=>ke.setOptionValue("autoplay",!1);return l.$$set=p=>{t(8,e=ye(ye({},e),we(p))),"game"in p&&t(0,a=p.game)},e=we(e),[a,s,n,r,i,o,c,f,e,h]}class ua extends Re{constructor(e){super(),He(this,e,ca,oa,ze,{game:0})}}function el(l,e,t){const s=l.slice();return s[14]=e[t].key,s[15]=e[t].value,s[16]=e[t].icon,s[18]=t,s}const fa=l=>({}),tl=l=>({}),ha=l=>({}),sl=l=>({});function ll(l){let e,t,s,n,r,a,i,o,c,f;const h=l[11].header,p=Kl(h,l,l[10],tl);let b=se(l[0]),g=[];for(let k=0;k<b.length;k+=1)g[k]=nl(el(l,b,k));const A=k=>W(g[k],1,1,()=>{g[k]=null});return{c(){e=_("button"),s=L(),n=_("ul"),r=_("li"),p&&p.c(),a=L();for(let k=0;k<g.length;k+=1)g[k].c();this.h()},l(k){e=v(k,"BUTTON",{class:!0,tabindex:!0}),T(e).forEach(m),s=P(k),n=v(k,"UL",{class:!0});var D=T(n);r=v(D,"LI",{});var G=T(r);p&&p.l(G),G.forEach(m),a=P(D);for(let B=0;B<g.length;B+=1)g[B].l(D);D.forEach(m),this.h()},h(){d(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),d(e,"tabindex","-1"),d(n,"class","items-list bg-white py-1.5 py-2 w-48 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl svelte-h65upg")},m(k,D){K(k,e,D),K(k,s,D),K(k,n,D),u(n,r),p&&p.m(r,null),u(n,a);for(let G=0;G<g.length;G+=1)g[G]&&g[G].m(n,null);o=!0,c||(f=R(e,"click",l[6]),c=!0)},p(k,D){if(l=k,p&&p.p&&(!o||D&1024)&&xl(p,h,l,l[10],o?Fl(h,l[10],D,fa):$l(l[10]),tl),D&133){b=se(l[0]);let G;for(G=0;G<b.length;G+=1){const B=el(l,b,G);g[G]?(g[G].p(B,D),F(g[G],1)):(g[G]=nl(B),g[G].c(),F(g[G],1),g[G].m(n,null))}for(tt(),G=b.length;G<g.length;G+=1)A(G);st()}},i(k){if(!o){k&&Es(()=>{o&&(t||(t=Ft(e,Ss,{duration:Ht},!0)),t.run(1))}),F(p,k);for(let D=0;D<b.length;D+=1)F(g[D]);k&&Es(()=>{o&&(i||(i=Ft(n,As,{duration:Ht},!0)),i.run(1))}),o=!0}},o(k){k&&(t||(t=Ft(e,Ss,{duration:Ht},!1)),t.run(0)),W(p,k),g=g.filter(Boolean);for(let D=0;D<g.length;D+=1)W(g[D]);k&&(i||(i=Ft(n,As,{duration:Ht},!1)),i.run(0)),o=!1},d(k){k&&(m(e),m(s),m(n)),k&&t&&t.end(),p&&p.d(k),De(g,k),k&&i&&i.end(),c=!1,f()}}}function da(l){let e;return{c(){e=_("div"),this.h()},l(t){e=v(t,"DIV",{class:!0}),T(e).forEach(m),this.h()},h(){d(e,"class","w-[24px]")},m(t,s){K(t,e,s)},p:ue,i:ue,o:ue,d(t){t&&m(e)}}}function ma(l){let e,t;return e=new at({props:{class:"mr-2",icon:l[16],width:16}}),{c(){me(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){_e(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.icon=s[16]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function nl(l){let e,t,s,n,r,a,i=l[15]+"",o,c,f,h,p;const b=[ma,da],g=[];function A(D,G){return D[16]?0:1}s=A(l),n=g[s]=b[s](l);function k(){return l[12](l[14])}return{c(){e=_("li"),t=_("button"),n.c(),r=L(),a=_("div"),o=J(i),c=L(),this.h()},l(D){e=v(D,"LI",{});var G=T(e);t=v(G,"BUTTON",{class:!0});var B=T(t);n.l(B),r=P(B),a=v(B,"DIV",{});var w=T(a);o=Q(w,i),w.forEach(m),B.forEach(m),c=P(G),G.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),q(t,"selected",l[14]===l[2])},m(D,G){K(D,e,G),u(e,t),g[s].m(t,null),u(t,r),u(t,a),u(a,o),u(e,c),f=!0,h||(p=R(t,"click",k),h=!0)},p(D,G){l=D;let B=s;s=A(l),s===B?g[s].p(l,G):(tt(),W(g[B],1,1,()=>{g[B]=null}),st(),n=g[s],n?n.p(l,G):(n=g[s]=b[s](l),n.c()),F(n,1),n.m(t,r)),(!f||G&1)&&i!==(i=l[15]+"")&&ae(o,i),(!f||G&5)&&q(t,"selected",l[14]===l[2])},i(D){f||(F(n),f=!0)},o(D){W(n),f=!1},d(D){D&&m(e),g[s].d(),h=!1,p()}}}function pa(l){let e,t,s,n,r,a,i,o;const c=l[11].value,f=Kl(c,l,l[10],sl);let h=l[5]&&ll(l);return{c(){e=_("div"),t=_("button"),f&&f.c(),r=L(),h&&h.c(),this.h()},l(p){e=v(p,"DIV",{class:!0,id:!0});var b=T(e);t=v(b,"BUTTON",{class:!0,title:!0});var g=T(t);f&&f.l(g),g.forEach(m),r=P(b),h&&h.l(b),b.forEach(m),this.h()},h(){d(t,"class",s=Ae(`${l[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),d(t,"title",n=l[8].title||""),q(t,"disabled",l[3]),q(t,"open",l[5]),d(e,"class","relative"),d(e,"id",l[1])},m(p,b){K(p,e,b),u(e,t),f&&f.m(t,null),u(e,r),h&&h.m(e,null),l[13](e),a=!0,i||(o=R(t,"click",l[6]),i=!0)},p(p,[b]){f&&f.p&&(!a||b&1024)&&xl(f,c,p,p[10],a?Fl(c,p[10],b,ha):$l(p[10]),sl),(!a||b&256&&s!==(s=Ae(`${p[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&d(t,"class",s),(!a||b&256&&n!==(n=p[8].title||""))&&d(t,"title",n),(!a||b&264)&&q(t,"disabled",p[3]),(!a||b&288)&&q(t,"open",p[5]),p[5]?h?(h.p(p,b),b&32&&F(h,1)):(h=ll(p),h.c(),F(h,1),h.m(e,null)):h&&(tt(),W(h,1,1,()=>{h=null}),st()),(!a||b&2)&&d(e,"id",p[1])},i(p){a||(F(f,p),F(h),a=!0)},o(p){W(f,p),W(h),a=!1},d(p){p&&m(e),f&&f.d(p),h&&h.d(),l[13](null),i=!1,o()}}}const Ht=400;function _a(l,e,t){let{$$slots:s={},$$scope:n}=e,{options:r,id:a=void 0,selected:i=void 0,disabled:o=void 0,onSelect:c}=e,f,h=!1;function p(){o||t(5,h=!h)}function b(k){t(5,h=c(k))}const g=k=>b(k);function A(k){cn[k?"unshift":"push"](()=>{f=k,t(4,f)})}return l.$$set=k=>{t(8,e=ye(ye({},e),we(k))),"options"in k&&t(0,r=k.options),"id"in k&&t(1,a=k.id),"selected"in k&&t(2,i=k.selected),"disabled"in k&&t(3,o=k.disabled),"onSelect"in k&&t(9,c=k.onSelect),"$$scope"in k&&t(10,n=k.$$scope)},e=we(e),[r,a,i,o,f,h,p,b,e,c,n,s,g,A]}class Zl extends Re{constructor(e){super(),He(this,e,_a,pa,ze,{options:0,id:1,selected:2,disabled:3,onSelect:9})}}function al(l){let e;return{c(){e=_("li"),this.h()},l(t){e=v(t,"LI",{class:!0}),T(e).forEach(m),this.h()},h(){d(e,"class","m-[0.175rem] mr-0")},m(t,s){K(t,e,s)},d(t){t&&m(e)}}}function rl(l){let e;return{c(){e=_("div"),this.h()},l(t){e=v(t,"DIV",{class:!0}),T(e).forEach(m),this.h()},h(){d(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-jvhfju")},m(t,s){K(t,e,s)},d(t){t&&m(e)}}}function il(l){let e,t=l[0].note.note+"",s;return{c(){e=_("div"),s=J(t),this.h()},l(n){e=v(n,"DIV",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","absolute top-0 left-0")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r&1&&t!==(t=n[0].note.note+"")&&ae(s,t)},d(n){n&&m(e)}}}function va(l){let e,t,s,n,r,a,i=l[0].key+"",o,c,f,h,p=l[0].key==="{enter}"&&al(),b=l[0].key==="{enter}"&&rl(),g=l[0].note&&il(l);return{c(){p&&p.c(),e=L(),t=_("li"),s=_("button"),b&&b.c(),n=L(),g&&g.c(),r=L(),a=_("div"),o=J(i),this.h()},l(A){p&&p.l(A),e=P(A),t=v(A,"LI",{class:!0});var k=T(t);s=v(k,"BUTTON",{class:!0});var D=T(s);b&&b.l(D),n=P(D),g&&g.l(D),r=P(D),a=v(D,"DIV",{});var G=T(a);o=Q(G,i),G.forEach(m),D.forEach(m),k.forEach(m),this.h()},h(){d(s,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex items-center justify-center svelte-jvhfju"),d(t,"class",c=Ae(`${l[1].class||""} m-[0.175rem] ${ol(l[0].size)}`)+" svelte-jvhfju"),q(t,"enter",l[0].key==="{enter}")},m(A,k){p&&p.m(A,k),K(A,e,k),K(A,t,k),u(t,s),b&&b.m(s,null),u(s,n),g&&g.m(s,null),u(s,r),u(s,a),u(a,o),f||(h=R(s,"click",l[2]),f=!0)},p(A,[k]){A[0].key==="{enter}"?p||(p=al(),p.c(),p.m(e.parentNode,e)):p&&(p.d(1),p=null),A[0].key==="{enter}"?b||(b=rl(),b.c(),b.m(s,n)):b&&(b.d(1),b=null),A[0].note?g?g.p(A,k):(g=il(A),g.c(),g.m(s,r)):g&&(g.d(1),g=null),k&1&&i!==(i=A[0].key+"")&&ae(o,i),k&3&&c!==(c=Ae(`${A[1].class||""} m-[0.175rem] ${ol(A[0].size)}`)+" svelte-jvhfju")&&d(t,"class",c),k&3&&q(t,"enter",A[0].key==="{enter}")},i:ue,o:ue,d(A){A&&(m(e),m(t)),p&&p.d(A),b&&b.d(),g&&g.d(),f=!1,h()}}}function ol(l){return l&&Number.isInteger(l)?`size-${l}`:l?`size-${Math.floor(l)}-${Math.floor(l*10)-Math.floor(l)*10}`:"size-1"}function ga(l,e,t){let{value:s}=e;function n(r){ds.call(this,l,r)}return l.$$set=r=>{t(1,e=ye(ye({},e),we(r))),"value"in r&&t(0,s=r.value)},e=we(e),[s,e,n]}class ba extends Re{constructor(e){super(),He(this,e,ga,va,ze,{value:0})}}const ka={ar:"arabic",hye:"armenianEastern",hyw:"armenianWestern",as:"assamese",balochi:"balochi",be:"belarusian",bn:"bengali",pt:"brazilian",my:"burmese",zh:"chinese",cs:"czech",en:"english",fa:"farsi",fr:"french",ka:"georgian",de:"german",gilaki:"gilaki",el:"greek",he:"hebrew",hi:"hindi",hu:"hungarian",it:"italian",ja:"japanese",kn:"kannada",ko:"korean",ku:"kurdish",mk:"macedonian",ml:"malayalam",yo:"nigerian",nko:"nko",no:"norwegian",odia:"odia",pl:"polish",pa:"punjabi",ru:"russian",ru2:"russianOld",sd:"sindhi",es:"spanish",sv:"swedish",te:"telugu",th:"thai",tr:"turkish",uk:"ukrainian",ur:"urdu",ur2:"urduStandard",ug:"uyghur"},ya={layout:{default:["§ 1 2 3 4 5 6 7 8 9 0 + ´ {bksp}","{tab} q w e r t y u i o p å ¨ {enter}","{lock} a s d f g h j k l ö ä '","{shift} < z x c v b n m , . - {shift}",".com @ {space}"],shift:['° ! " # $ % & / ( ) = ? ` {bksp}',"{tab} Q W E R T Y U I O P Å ^","{lock} A S D F G H J K L Ö Ä * {enter}","{shift} > Z X C V B N M ; : _ {shift}",".com @ {space}"]}},wa=[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Enter"],["Capslock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"]];function Ca(l,e){return l[1].forEach((t,s)=>{let n;s===2?n={...e[1]}:s===3?n={...e[3]}:s===5?n={...e[6]}:s===6?n={...e[8]}:s===7?n={...e[10]}:s===9?(n={...e[1]},n.semitones+=12):s===10&&(n={...e[3]},n.semitones+=12),l[1][s].note=n}),l[2].forEach((t,s)=>{let n;s===1?n={...e[0]}:s===2?n={...e[2]}:s===3?n={...e[4]}:s===4?n={...e[5]}:s===5?n={...e[7]}:s===6?n={...e[9]}:s===7?n={...e[11]}:s===8?(n={...e[0]},n.semitones+=12):s===9?(n={...e[2]},n.semitones+=12):s===10?(n={...e[4]},n.semitones+=12):s===11?(n={...e[5]},n.semitones+=12):s===12&&(n={...e[7]},n.semitones+=12),l[2][s].note=n}),l}class Ea{constructor(e){this.language="en",this.rows=[[],[],[],[]],this.opts={hotkeydRows:"middle-row",layoutName:"en",...e},this.setLayout(ya)}setOptions(e){this.opts={...this.opts,...e}}setLayout(e){const t=[[],[],[],[]];e.layout.default.forEach((s,n)=>{s.split(" ").forEach((r,a)=>{n<4&&t[n].push({key:r,code:wa[n][a]})})}),this.rows=t}setNotes(e){if(this.opts.hotkeydRows==="middle-row")this.rows=Ca(this.rows,e);else throw Error("not implemented")}}const gs=/^[a-gA-G]$/,en=/^[♭Bb#♯sS]$/,Sa=/^[0-9]$/;let H="",ct;const tn=ht(Ge({layoutName:"American",hotkeydRows:"middle-row"}),{key:"keyboard-options"}),sn=Tt([Nt,tn],([l,e])=>{const t=new Ea(e);return t.setNotes(Array.from(l.notesMap.values())),t}),Aa=Tt(sn,l=>l.rows.map(e=>e.map((t,s)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&s===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t}))),Xt=Tt(sn,l=>new Map([...l.rows[0].map(e=>[e.code,e]),...l.rows[1].map(e=>[e.code,e]),...l.rows[2].map(e=>[e.code,e]),...l.rows[3].map(e=>[e.code,e])])),Na=Tt(Xt,l=>Array.from(l.values()).map(e=>e.note).filter(e=>e!==void 0));function Ta(l,e){const{useHotkeys:t}=be(lt),s=be(Xt).get(l);if(t&&H.length===0&&s&&s.note)return H="",{e:"guessed-key",data:s.note.note};if(!t&&H.length===0&&gs.test(e))return H+=e.toUpperCase(),{e:"string",data:H};if(!t&&H.length>0&&en.test(e))return e==="b"||e==="B"?H+="♭":H+="♯",{e:"string",data:H};if(l==="Backspace"&&H.length>0)return H=H.slice(0,-1),{e:"string",data:H};if(l==="Enter"&&H.length>0){const n=H;return H="",{e:"guessed-key",data:n}}return!1}function Ia(l,e,t){if(l==="Enter"&&H.length>0){const s={note:"",flats:0,sharps:0,chord:""};for(let n=0;n<H.length;n+=1)n===0?s.note+=H[n]:s.chord.length>0?s.chord+=H[n].toLowerCase():H[n]==="♭"?(s.note+=H[n],s.flats+=1):H[n]==="♯"?(s.note+=H[n],s.sharps+=1):s.chord+=H[n].toLowerCase();return H="",{e:"guessed-chord",data:s}}else{if(l==="Backspace"&&H.length>0)return H=H.slice(0,-1),{e:"string",data:H};if(H.length===0&&gs.test(e))return H+=e.toUpperCase(),{e:"string",data:H};if(H.length>0&&e.length===1)return H.length===1&&(e==="b"||e==="B")?H+="♭":H.length===1&&e==="#"?H+="♯":H+=e,{e:"string",data:H}}return!1}function ja(l,e,t){const{useAutoOctave:s,useHotkeys:n}=be(lt);let r;const i=be(Xt).get(l),o=(i==null?void 0:i.key)||"";let c=!1;if(!ct&&n&&(i!=null&&i.note)?(ct=i.note,s&&(r=Ql(be(Yt)[0].midi)),c="note"):!n&&H.length===0&&gs.test(e)?(H+=e.toUpperCase(),c="input"):!n&&H.length>0&&en.test(e)&&(e==="b"||e==="B"?H+="♭":H+="♯",c="input"),Sa.test(o))try{r=parseInt(o)}catch{}if(ct&&r!==void 0){const f=ct.semitones+(r+1+(t?1:0))*12;return ct=void 0,{e:"guessed-note",data:f}}else if(H&&r!==void 0){const f=ln.findNote(H),h=f?f.semitones+(r+1)*12:void 0;return ct=void 0,H="",h!==void 0?{e:"guessed-note",data:h}:{e:"string",data:H}}else if(l==="Backspace"&&(ct||H.length>0))return ct=void 0,H=H.slice(0,-1),{e:"string",data:H};return c==="note"?{e:"note",data:ct}:c==="input"?{e:"string",data:H}:!1}const ln={setLayout(l){},findNote(l){return be(Na).find(e=>{if(e.note.charAt(0)===l.charAt(0)){const t=l.slice(1).split("").reduce((s,n)=>s+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},handleInput(l,e,t=!1){const s=be(bt);return s instanceof Dt?Ta(l,e.toUpperCase()):s instanceof ut&&s.type==="chords-write"?Ia(l,e):be(lt).useKeyboard?ja(l,e.toUpperCase(),t):!1}};function cl(l,e,t){const s=l.slice();return s[9]=e[t],s[11]=t,s}function ul(l,e,t){const s=l.slice();return s[12]=e[t],s}function Da(l){let e,t=l[2].layoutName+"",s;return{c(){e=_("div"),s=J(t),this.h()},l(n){e=v(n,"DIV",{slot:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"slot","value")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r&4&&t!==(t=n[2].layoutName+"")&&ae(s,t)},d(n){n&&m(e)}}}function fl(l){let e,t;return e=new ba({props:{value:l[12]}}),{c(){me(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){_e(e,s,n),t=!0},p(s,n){const r={};n&8&&(r.value=s[12]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function hl(l){let e,t,s,n,r=se(l[9]),a=[];for(let o=0;o<r.length;o+=1)a[o]=fl(ul(l,r,o));const i=o=>W(a[o],1,1,()=>{a[o]=null});return{c(){e=_("li"),t=L();for(let o=0;o<a.length;o+=1)a[o].c();s=Le(),this.h()},l(o){e=v(o,"LI",{class:!0}),T(e).forEach(m),t=P(o);for(let c=0;c<a.length;c+=1)a[c].l(o);s=Le(),this.h()},h(){d(e,"class","col-span-2 svelte-cgcsqn")},m(o,c){K(o,e,c),K(o,t,c);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,c);K(o,s,c),n=!0},p(o,c){if(c&8){r=se(o[9]);let f;for(f=0;f<r.length;f+=1){const h=ul(o,r,f);a[f]?(a[f].p(h,c),F(a[f],1)):(a[f]=fl(h),a[f].c(),F(a[f],1),a[f].m(s.parentNode,s))}for(tt(),f=r.length;f<a.length;f+=1)i(f);st()}},i(o){if(!n){for(let c=0;c<r.length;c+=1)F(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)W(a[c]);n=!1},d(o){o&&(m(e),m(t),m(s)),De(a,o)}}}function La(l){let e,t,s,n,r="Layout",a,i,o,c,f,h="Middle-row",p,b,g,A,k,D="Two rows",G,B,w,I,N,j,O,C,V;i=new Zl({props:{id:"keyboard-lang",class:"p-1",options:l[4],onSelect:Pa,$$slots:{value:[Da]},$$scope:{ctx:l}}});let E=se(l[3]),y=[];for(let M=0;M<E.length;M+=1)y[M]=hl(cl(l,E,M));const S=M=>W(y[M],1,1,()=>{y[M]=null});return{c(){e=_("div"),t=_("div"),s=_("div"),n=_("label"),n.textContent=r,a=L(),me(i.$$.fragment),o=L(),c=_("div"),f=_("label"),f.textContent=h,p=L(),b=_("input"),g=L(),A=_("div"),k=_("label"),k.textContent=D,G=L(),B=_("input"),w=L(),I=_("div"),N=_("ul");for(let M=0;M<y.length;M+=1)y[M].c();this.h()},l(M){e=v(M,"DIV",{class:!0});var U=T(e);t=v(U,"DIV",{class:!0});var $=T(t);s=v($,"DIV",{class:!0});var z=T(s);n=v(z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1xsr9lq"&&(n.textContent=r),a=P(z),pe(i.$$.fragment,z),z.forEach(m),o=P($),c=v($,"DIV",{class:!0});var le=T(c);f=v(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(f)!=="svelte-1ssbs6o"&&(f.textContent=h),p=P(le),b=v(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(m),g=P($),A=v($,"DIV",{class:!0});var te=T(A);k=v(te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(k)!=="svelte-3aw9ul"&&(k.textContent=D),G=P(te),B=v(te,"INPUT",{class:!0,id:!0,type:!0}),te.forEach(m),$.forEach(m),w=P(U),I=v(U,"DIV",{class:!0});var fe=T(I);N=v(fe,"UL",{class:!0});var ce=T(N);for(let Te=0;Te<y.length;Te+=1)y[Te].l(ce);ce.forEach(m),fe.forEach(m),U.forEach(m),this.h()},h(){d(n,"class","font-bold mr-4"),d(n,"for","middle-row"),d(s,"class","my-1 flex items-center justify-between mr-12"),d(f,"class","font-bold mr-4"),d(f,"for","middle-row"),d(b,"class","h-[20px]"),d(b,"id","middle-row"),d(b,"type","checkbox"),d(c,"class","my-1 flex items-center justify-between mr-12"),d(k,"class","font-bold mr-4"),d(k,"for","two-rows"),d(B,"class","h-[20px]"),d(B,"id","two-rows"),d(B,"type","checkbox"),d(A,"class","my-1 flex items-center justify-between mr-12"),d(t,"class","flex"),d(N,"class","keyboard svelte-cgcsqn"),d(I,"class","flex flex-col gap-1.5"),d(e,"class",j=Ae(`${l[5].class||""} `)+" svelte-cgcsqn")},m(M,U){K(M,e,U),u(e,t),u(t,s),u(s,n),u(s,a),_e(i,s,null),u(t,o),u(t,c),u(c,f),u(c,p),u(c,b),b.checked=l[0],u(t,g),u(t,A),u(A,k),u(A,G),u(A,B),B.checked=l[1],u(e,w),u(e,I),u(I,N);for(let $=0;$<y.length;$+=1)y[$]&&y[$].m(N,null);O=!0,C||(V=[R(b,"change",l[6]),R(B,"change",l[7])],C=!0)},p(M,[U]){const $={};if(U&32772&&($.$$scope={dirty:U,ctx:M}),i.$set($),U&1&&(b.checked=M[0]),U&2&&(B.checked=M[1]),U&8){E=se(M[3]);let z;for(z=0;z<E.length;z+=1){const le=cl(M,E,z);y[z]?(y[z].p(le,U),F(y[z],1)):(y[z]=hl(le),y[z].c(),F(y[z],1),y[z].m(N,null))}for(tt(),z=E.length;z<y.length;z+=1)S(z);st()}(!O||U&32&&j!==(j=Ae(`${M[5].class||""} `)+" svelte-cgcsqn"))&&d(e,"class",j)},i(M){if(!O){F(i.$$.fragment,M);for(let U=0;U<E.length;U+=1)F(y[U]);O=!0}},o(M){W(i.$$.fragment,M),y=y.filter(Boolean);for(let U=0;U<y.length;U+=1)W(y[U]);O=!1},d(M){M&&m(e),ve(i),De(y,M),C=!1,rt(V)}}}function Pa(l){return console.log("key ",l),!1}function Ba(l,e,t){let s,n,r;ie(l,Xt,h=>t(8,s=h)),ie(l,tn,h=>t(2,n=h)),ie(l,Aa,h=>t(3,r=h)),Rl(()=>{console.log(s)});let a=!0,i=!1;const o=Object.entries(ka).map(([h,p])=>({key:h,value:p}));function c(){a=this.checked,t(0,a)}function f(){i=this.checked,t(1,i)}return l.$$set=h=>{t(5,e=ye(ye({},e),we(h)))},e=we(e),[a,i,n,r,o,e,c,f]}class Ga extends Re{constructor(e){super(),He(this,e,Ba,La,ze,{})}}function dl(l){let e,t;return e=new Ga({props:{class:"mt-4"}}),{c(){me(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){_e(e,s,n),t=!0},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Ma(l){let e,t,s,n,r="I/O",a,i,o,c,f="Device",h,p,b,g,A,k,D="Prompt",G,B,w="Disable",I,N,j,O,C="Sound",V,E,y,S,M,U,$="Fixed velocity",z,le,te,fe,ce,Te,xe="Keyboard",Me,ge,qe,Ke,Ie,re,Ne="Hotkeys",he,Y,ne,x,X,oe,ee="Auto-octave",Ce,Pe,nt,We,Ve,je,Ee,It="Set hotkeys",yt,Oe,dt,bs="Fade timeout",Zt,it,es,mt,Lt,ts,pt,ks="Reset all",ss,Pt,Je,ls,ys,Be=l[2]&&dl();return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=L(),i=_("div"),o=_("div"),c=_("label"),c.textContent=f,h=L(),p=_("input"),g=L(),A=_("div"),k=_("button"),k.textContent=D,G=L(),B=_("button"),B.textContent=w,I=L(),N=_("div"),j=_("div"),O=_("label"),O.textContent=C,V=L(),E=_("input"),S=L(),M=_("div"),U=_("label"),U.textContent=$,z=L(),le=_("input"),te=L(),fe=_("div"),ce=_("div"),Te=_("label"),Te.textContent=xe,Me=L(),ge=_("input"),Ke=L(),Ie=_("div"),re=_("label"),re.textContent=Ne,he=L(),Y=_("input"),x=L(),X=_("div"),oe=_("label"),oe.textContent=ee,Ce=L(),Pe=_("input"),We=L(),Ve=_("div"),je=_("div"),Ee=_("button"),Ee.textContent=It,yt=L(),Oe=_("div"),dt=_("label"),dt.textContent=bs,Zt=L(),it=_("input"),es=L(),mt=_("div"),Lt=_("div"),ts=L(),pt=_("button"),pt.textContent=ks,ss=L(),Be&&Be.c(),this.h()},l(Se){e=v(Se,"DIV",{class:!0});var Ue=T(e);t=v(Ue,"FIELDSET",{class:!0});var ot=T(t);s=v(ot,"LEGEND",{class:!0});var ws=T(s);n=v(ws,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1jbbsti"&&(n.textContent=r),ws.forEach(m),a=P(ot),i=v(ot,"DIV",{class:!0});var _t=T(i);o=v(_t,"DIV",{class:!0});var wt=T(o);c=v(wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-crpa7y"&&(c.textContent=f),h=P(wt),p=v(wt,"INPUT",{class:!0,id:!0}),g=P(wt),A=v(wt,"DIV",{class:!0});var Bt=T(A);k=v(Bt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(k)!=="svelte-mj6mct"&&(k.textContent=D),G=P(Bt),B=v(Bt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(B)!=="svelte-1sl6oxh"&&(B.textContent=w),Bt.forEach(m),wt.forEach(m),I=P(_t),N=v(_t,"DIV",{class:!0});var Gt=T(N);j=v(Gt,"DIV",{class:!0});var Mt=T(j);O=v(Mt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(O)!=="svelte-wgxtkw"&&(O.textContent=C),V=P(Mt),E=v(Mt,"INPUT",{class:!0,id:!0,type:!0}),Mt.forEach(m),S=P(Gt),M=v(Gt,"DIV",{class:!0});var Vt=T(M);U=v(Vt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(U)!=="svelte-1tm2bth"&&(U.textContent=$),z=P(Vt),le=v(Vt,"INPUT",{class:!0,id:!0,placeholder:!0}),Vt.forEach(m),Gt.forEach(m),te=P(_t),fe=v(_t,"DIV",{class:!0});var Ct=T(fe);ce=v(Ct,"DIV",{class:!0});var Ot=T(ce);Te=v(Ot,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(Te)!=="svelte-1js269u"&&(Te.textContent=xe),Me=P(Ot),ge=v(Ot,"INPUT",{class:!0,id:!0,type:!0}),Ot.forEach(m),Ke=P(Ct),Ie=v(Ct,"DIV",{class:!0});var Ut=T(Ie);re=v(Ut,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(re)!=="svelte-21h39k"&&(re.textContent=Ne),he=P(Ut),Y=v(Ut,"INPUT",{class:!0,id:!0,type:!0}),Ut.forEach(m),x=P(Ct),X=v(Ct,"DIV",{class:!0});var Kt=T(X);oe=v(Kt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(oe)!=="svelte-33lczu"&&(oe.textContent=ee),Ce=P(Kt),Pe=v(Kt,"INPUT",{class:!0,id:!0,type:!0}),Kt.forEach(m),Ct.forEach(m),We=P(_t),Ve=v(_t,"DIV",{class:!0});var Et=T(Ve);je=v(Et,"DIV",{class:!0});var Cs=T(je);Ee=v(Cs,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(Ee)!=="svelte-1v9okg9"&&(Ee.textContent=It),Cs.forEach(m),yt=P(Et),Oe=v(Et,"DIV",{class:!0});var xt=T(Oe);dt=v(xt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(dt)!=="svelte-vd5i27"&&(dt.textContent=bs),Zt=P(xt),it=v(xt,"INPUT",{class:!0,id:!0}),xt.forEach(m),es=P(Et),mt=v(Et,"DIV",{class:!0});var $t=T(mt);Lt=v($t,"DIV",{}),T(Lt).forEach(m),ts=P($t),pt=v($t,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(pt)!=="svelte-jjt0c3"&&(pt.textContent=ks),$t.forEach(m),Et.forEach(m),_t.forEach(m),ss=P(ot),Be&&Be.l(ot),ot.forEach(m),Ue.forEach(m),this.h()},h(){var Se;d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(c,"class","font-bold"),d(c,"for","device"),d(p,"class","px-1 my-1 rounded w-50"),d(p,"id","device"),p.disabled=!0,p.value=b=((Se=l[5])==null?void 0:Se.name)??"No device",d(k,"class","btn-sm primary mr-2"),d(B,"class","btn-sm primary"),d(A,"class","flex my-[auto]"),d(o,"class","h-full flex flex-col"),d(O,"class","font-bold"),d(O,"for","sound"),d(E,"class","h-[20px]"),d(E,"id","sound"),d(E,"type","checkbox"),E.checked=y=l[3].useSound,d(j,"class","my-1 flex justify-between mr-12"),d(U,"class","font-bold"),d(U,"for","fixed-velocity"),d(le,"class","h-[20px] w-16"),d(le,"id","fixed-velocity"),d(le,"placeholder","0-127"),d(M,"class","flex justify-between"),d(N,"class","flex flex-col h-full"),d(Te,"class","font-bold"),d(Te,"for","keyboard"),d(ge,"class","h-[20px]"),d(ge,"id","keyboard"),d(ge,"type","checkbox"),ge.checked=qe=l[3].useKeyboard,d(ce,"class","my-1 flex justify-between mr-12"),d(re,"class","font-bold"),d(re,"for","hotkeys"),d(Y,"class","h-[20px]"),d(Y,"id","hotkeys"),d(Y,"type","checkbox"),Y.checked=ne=l[3].useHotkeys,d(Ie,"class","my-1 flex justify-between mr-12"),d(oe,"class","font-bold"),d(oe,"for","auto-octave"),d(Pe,"class","h-[20px]"),d(Pe,"id","auto-octave"),d(Pe,"type","checkbox"),Pe.checked=nt=l[3].useAutoOctave,d(X,"class","my-1 flex justify-between mr-12"),d(fe,"class","flex flex-col h-full"),d(Ee,"class","w-full btn-sm primary"),d(je,"class","flex justify-between"),d(dt,"class","font-bold"),d(dt,"for","fade-timeout"),d(it,"class","h-[20px] w-16"),d(it,"id","fade-timeout"),it.value=l[1],d(Oe,"class","flex justify-between"),d(pt,"class","btn-sm primary"),d(mt,"class","flex justify-between"),d(Ve,"class","flex flex-col justify-between h-full"),d(i,"class","body svelte-1bpw69s"),q(i,"hidden",l[4]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-1bpw69s"),q(t,"collapsed",l[4]),d(e,"class",Pt=Ae(`${l[11].class||""}`)+" svelte-1bpw69s")},m(Se,Ue){K(Se,e,Ue),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,o),u(o,c),u(o,h),u(o,p),u(o,g),u(o,A),u(A,k),u(A,G),u(A,B),u(i,I),u(i,N),u(N,j),u(j,O),u(j,V),u(j,E),u(N,S),u(N,M),u(M,U),u(M,z),u(M,le),Qe(le,l[0]),u(i,te),u(i,fe),u(fe,ce),u(ce,Te),u(ce,Me),u(ce,ge),u(fe,Ke),u(fe,Ie),u(Ie,re),u(Ie,he),u(Ie,Y),u(fe,x),u(fe,X),u(X,oe),u(X,Ce),u(X,Pe),u(i,We),u(i,Ve),u(Ve,je),u(je,Ee),u(Ve,yt),u(Ve,Oe),u(Oe,dt),u(Oe,Zt),u(Oe,it),u(Ve,es),u(Ve,mt),u(mt,Lt),u(mt,ts),u(mt,pt),u(t,ss),Be&&Be.m(t,null),Je=!0,ls||(ys=[R(n,"click",l[7]),R(k,"click",Fe.openMidi),R(B,"click",Fe.disableMidi),R(E,"change",l[12]),R(le,"input",l[13]),R(le,"change",l[8]),R(ge,"change",l[14]),R(Y,"change",l[15]),R(Pe,"change",l[16]),R(Ee,"click",l[17]),R(it,"input",l[9]),R(pt,"click",l[10])],ls=!0)},p(Se,[Ue]){var ot;(!Je||Ue&32&&b!==(b=((ot=Se[5])==null?void 0:ot.name)??"No device")&&p.value!==b)&&(p.value=b),(!Je||Ue&8&&y!==(y=Se[3].useSound))&&(E.checked=y),Ue&1&&le.value!==Se[0]&&Qe(le,Se[0]),(!Je||Ue&8&&qe!==(qe=Se[3].useKeyboard))&&(ge.checked=qe),(!Je||Ue&8&&ne!==(ne=Se[3].useHotkeys))&&(Y.checked=ne),(!Je||Ue&8&&nt!==(nt=Se[3].useAutoOctave))&&(Pe.checked=nt),(!Je||Ue&2&&it.value!==Se[1])&&(it.value=Se[1]),(!Je||Ue&16)&&q(i,"hidden",Se[4]),Se[2]?Be?Ue&4&&F(Be,1):(Be=dl(),Be.c(),F(Be,1),Be.m(t,null)):Be&&(tt(),W(Be,1,1,()=>{Be=null}),st()),(!Je||Ue&16)&&q(t,"collapsed",Se[4]),(!Je||Ue&2048&&Pt!==(Pt=Ae(`${Se[11].class||""}`)+" svelte-1bpw69s"))&&d(e,"class",Pt)},i(Se){Je||(F(Be),Je=!0)},o(Se){W(Be),Je=!1},d(Se){Se&&m(e),Be&&Be.d(),ls=!1,rt(ys)}}}function Va(l,e,t){let s,n,r;ie(l,lt,w=>t(3,s=w)),ie(l,Qt,w=>t(5,r=w));const a=ht(Ge(!1),{key:"inputs-hidden"});ie(l,a,w=>t(4,n=w));let i=s.fixedVelocity??"",o=s.keyFadeTimeout,c=!1;lt.subscribe(w=>{t(0,i=w.fixedVelocity??""),t(1,o=w.keyFadeTimeout)});function f(){a.update(w=>!w)}function h(w){const{value:I}=w.currentTarget;let N;if(I)try{N=parseInt(I)}catch{}N!==void 0&&N>=0&&N<=127?Fe.setInputValue("fixedVelocity",N):I?t(0,i=s.fixedVelocity||""):Fe.setInputValue("fixedVelocity",void 0)}function p(w){try{const I=parseInt(w.currentTarget.value);Fe.setInputValue("keyFadeTimeout",I)}catch{t(1,o=s.keyFadeTimeout)}}function b(){Pn()}const g=w=>Fe.setInputValue("useSound",w.currentTarget.checked);function A(){i=this.value,t(0,i)}const k=w=>Fe.setInputValue("useKeyboard",w.currentTarget.checked),D=w=>Fe.setInputValue("useHotkeys",w.currentTarget.checked),G=w=>Fe.setInputValue("useAutoOctave",w.currentTarget.checked),B=()=>t(2,c=!c);return l.$$set=w=>{t(11,e=ye(ye({},e),we(w)))},e=we(e),[i,o,c,s,n,r,a,f,h,p,b,e,g,A,k,D,G,B]}class Oa extends Re{constructor(e){super(),He(this,e,Va,Ma,ze,{})}}function Ua(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){K(t,e,s)},p:ue,d(t){t&&m(e)}}}function Ka(l){let e,t=l[1].note+"",s;return{c(){e=J("Input: "),s=J(t)},l(n){e=Q(n,"Input: "),s=Q(n,t)},m(n,r){K(n,e,r),K(n,s,r)},p(n,r){r&2&&t!==(t=n[1].note+"")&&ae(s,t)},d(n){n&&(m(e),m(s))}}}function xa(l){let e,t;return{c(){e=J("Input: "),t=J(l[0])},l(s){e=Q(s,"Input: "),t=Q(s,l[0])},m(s,n){K(s,e,n),K(s,t,n)},p(s,n){n&1&&ae(t,s[0])},d(s){s&&(m(e),m(t))}}}function $a(l){let e;return{c(){e=J(hs)},l(t){e=Q(t,hs)},m(t,s){K(t,e,s)},p:ue,d(t){t&&m(e)}}}function Fa(l){let e,t,s,n;function r(o,c){return o[2].useKeyboard&&hs?$a:o[2].useKeyboard&&o[0]?xa:o[2].useKeyboard&&o[1]?Ka:Ua}let a=r(l),i=a(l);return{c(){e=_("div"),i.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var c=T(e);i.l(c),c.forEach(m),this.h()},h(){d(e,"class",t=`${l[4].class||""}`)},m(o,c){K(o,e,c),i.m(e,null),s||(n=R(window,"keydown",l[3]),s=!0)},p(o,[c]){a===(a=r(o))&&i?i.p(o,c):(i.d(1),i=a(o),i&&(i.c(),i.m(e,null))),c&16&&t!==(t=`${o[4].class||""}`)&&d(e,"class",t)},i:ue,o:ue,d(o){o&&m(e),i.d(),s=!1,n()}}}let hs="";function Ra(l,e,t){let s;ie(l,lt,c=>t(2,s=c));let{debounced:n}=e,r="",a;const i=un();function o(c){const f=c.target;if(n||!(f instanceof HTMLElement)||f.tagName==="INPUT")return;const h=ln.handleInput(c.code,c.key,c.shiftKey);h&&h.e==="note"?t(1,a=h.data):h&&h.e==="string"?t(0,r=h.data):h&&i(h.e,h.data)}return l.$$set=c=>{t(4,e=ye(ye({},e),we(c))),"debounced"in c&&t(5,n=c.debounced)},e=we(e),[r,a,s,o,e,n]}class Ha extends Re{constructor(e){super(),He(this,e,Ra,Fa,ze,{debounced:5})}}function za(l){let e,t,s,n="Count",r,a,i,o,c,f="Duplicates",h,p,b,g,A,k,D="Autoplay",G,B,w,I,N,j,O="Wait seconds",C,V,E,y,S;return{c(){e=_("ul"),t=_("li"),s=_("label"),s.textContent=n,r=L(),a=_("input"),i=L(),o=_("li"),c=_("label"),c.textContent=f,h=L(),p=_("input"),g=L(),A=_("li"),k=_("label"),k.textContent=D,G=L(),B=_("input"),I=L(),N=_("li"),j=_("label"),j.textContent=O,C=L(),V=_("input"),this.h()},l(M){e=v(M,"UL",{class:!0});var U=T(e);t=v(U,"LI",{class:!0});var $=T(t);s=v($,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(s)!=="svelte-wgq9fc"&&(s.textContent=n),r=P($),a=v($,"INPUT",{class:!0,id:!0,type:!0}),$.forEach(m),i=P(U),o=v(U,"LI",{class:!0});var z=T(o);c=v(z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-hcg9dq"&&(c.textContent=f),h=P(z),p=v(z,"INPUT",{class:!0,id:!0,type:!0}),z.forEach(m),g=P(U),A=v(U,"LI",{class:!0});var le=T(A);k=v(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(k)!=="svelte-lr68n2"&&(k.textContent=D),G=P(le),B=v(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(m),I=P(U),N=v(U,"LI",{class:!0});var te=T(N);j=v(te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(j)!=="svelte-1qj2vcy"&&(j.textContent=O),C=P(te),V=v(te,"INPUT",{class:!0,id:!0,type:!0}),te.forEach(m),U.forEach(m),this.h()},h(){d(s,"class","font-bold"),d(s,"for","guess-count"),d(a,"class","h-[20px] w-10"),d(a,"id","guess-count"),d(a,"type","number"),d(t,"class","flex items-center justify-between svelte-1elvih2"),d(c,"class","font-bold"),d(c,"for","duplicates"),d(p,"class","h-[20px]"),d(p,"id","duplicates"),d(p,"type","checkbox"),p.checked=b=l[2].duplicates,d(o,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(k,"class","font-bold"),d(k,"for","autoplay"),d(B,"class","h-[20px]"),d(B,"id","autoplay"),d(B,"type","checkbox"),B.checked=w=l[2].autoplay,d(A,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(j,"class","font-bold"),d(j,"for","wait-ms"),d(V,"class","h-[20px] w-10"),d(V,"id","wait-ms"),d(V,"type","number"),d(N,"class","flex items-center justify-between svelte-1elvih2"),d(e,"class",E=Ae(`${l[5].class||""}`)+" svelte-1elvih2")},m(M,U){K(M,e,U),u(e,t),u(t,s),u(t,r),u(t,a),Qe(a,l[0]),u(e,i),u(e,o),u(o,c),u(o,h),u(o,p),u(e,g),u(e,A),u(A,k),u(A,G),u(A,B),u(e,I),u(e,N),u(N,j),u(N,C),u(N,V),Qe(V,l[1]),y||(S=[R(a,"input",l[6]),R(a,"input",l[3]),R(p,"input",l[7]),R(B,"input",l[8]),R(V,"input",l[9]),R(V,"input",l[4])],y=!0)},p(M,[U]){U&1&&zt(a.value)!==M[0]&&Qe(a,M[0]),U&4&&b!==(b=M[2].duplicates)&&(p.checked=b),U&4&&w!==(w=M[2].autoplay)&&(B.checked=w),U&2&&zt(V.value)!==M[1]&&Qe(V,M[1]),U&32&&E!==(E=Ae(`${M[5].class||""}`)+" svelte-1elvih2")&&d(e,"class",E)},i:ue,o:ue,d(M){M&&m(e),y=!1,rt(S)}}}function qa(l,e,t){let s;ie(l,ft,p=>t(2,s=p));let n=s.count||"",r=s.waitSeconds||"";ft.subscribe(p=>{t(0,n=p.count||""),t(1,r=p.waitSeconds||"")});function a({currentTarget:{value:p}}){let b;try{b=parseInt(p),b<=0&&(b=1),ke.setOptionValue("count",b)}catch{t(0,n=s.count)}}function i({currentTarget:{value:p}}){let b;try{b=parseInt(p),b<0&&(b=0),ke.setOptionValue("waitSeconds",b)}catch{t(1,r=s.waitSeconds)}}function o(){n=zt(this.value),t(0,n)}const c=p=>ke.setOptionValue("duplicates",p.currentTarget.checked),f=p=>ke.setOptionValue("autoplay",p.currentTarget.checked);function h(){r=zt(this.value),t(1,r)}return l.$$set=p=>{t(5,e=ye(ye({},e),we(p)))},e=we(e),[n,r,s,a,i,e,o,c,f,h]}class Wa extends Re{constructor(e){super(),He(this,e,qa,za,ze,{})}}function ml(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function pl(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function _l(l){let e,t,s=l[21]+"",n,r,a,i,o,c,f,h;function p(){return l[13](l[20])}i=new at({props:{icon:is,width:20}});function b(...g){return l[14](l[20],...g)}return{c(){e=_("li"),t=_("button"),n=J(s),r=L(),a=_("button"),me(i.$$.fragment),o=L(),this.h()},l(g){e=v(g,"LI",{class:!0});var A=T(e);t=v(A,"BUTTON",{class:!0});var k=T(t);n=Q(k,s),k.forEach(m),r=P(A),a=v(A,"BUTTON",{class:!0});var D=T(a);pe(i.$$.fragment,D),D.forEach(m),o=P(A),A.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",l[20]===l[0]),d(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),d(e,"class","flex svelte-1okhpct")},m(g,A){K(g,e,A),u(e,t),u(t,n),u(e,r),u(e,a),_e(i,a,null),u(e,o),c=!0,f||(h=[R(t,"click",p),R(a,"click",b)],f=!0)},p(g,A){l=g,(!c||A&17)&&q(t,"selected",l[20]===l[0])},i(g){c||(F(i.$$.fragment,g),c=!0)},o(g){W(i.$$.fragment,g),c=!1},d(g){g&&m(e),ve(i),f=!1,rt(h)}}}function vl(l){let e,t=se(l[2]),s=[];for(let n=0;n<t.length;n+=1)s[n]=gl(ml(l,t,n));return{c(){e=_("ul");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"UL",{class:!0});var r=T(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","svelte-1okhpct")},m(n,r){K(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r&518){t=se(n[2]);let a;for(a=0;a<t.length;a+=1){const i=ml(n,t,a);s[a]?s[a].p(i,r):(s[a]=gl(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function gl(l){let e,t,s=l[21]+"",n,r,a,i;function o(){return l[15](l[20])}return{c(){e=_("li"),t=_("button"),n=J(s),r=L(),this.h()},l(c){e=v(c,"LI",{class:!0});var f=T(e);t=v(f,"BUTTON",{class:!0});var h=T(t);n=Q(h,s),h.forEach(m),r=P(f),f.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",l[20]===l[1]),d(e,"class","svelte-1okhpct")},m(c,f){K(c,e,f),u(e,t),u(t,n),u(e,r),a||(i=R(t,"click",o),a=!0)},p(c,f){l=c,f&4&&s!==(s=l[21]+"")&&ae(n,s),f&6&&q(t,"selected",l[20]===l[1])},d(c){c&&m(e),a=!1,i()}}}function Ja(l){let e,t,s="Play",n,r,a,i,o,c,f,h,p,b,g="Reset",A,k,D,G,B=l[3]?"Quit":"Play",w,I,N,j,O,C=se(l[4]),V=[];for(let S=0;S<C.length;S+=1)V[S]=_l(pl(l,C,S));const E=S=>W(V[S],1,1,()=>{V[S]=null});let y=(l[0]==="chords-write"||l[0]==="chords-play")&&vl(l);return f=new Wa({props:{class:"game-options"}}),D=new at({props:{class:"mr-1",icon:l[3]?Is:is,width:20}}),{c(){e=_("fieldset"),t=_("legend"),t.textContent=s,n=L(),r=_("div"),a=_("ul");for(let S=0;S<V.length;S+=1)V[S].c();i=L(),o=_("div"),y&&y.c(),c=L(),me(f.$$.fragment),h=L(),p=_("div"),b=_("button"),b.textContent=g,A=L(),k=_("button"),me(D.$$.fragment),G=L(),w=J(B),this.h()},l(S){e=v(S,"FIELDSET",{class:!0});var M=T(e);t=v(M,"LEGEND",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1409tnk"&&(t.textContent=s),n=P(M),r=v(M,"DIV",{class:!0});var U=T(r);a=v(U,"UL",{class:!0});var $=T(a);for(let fe=0;fe<V.length;fe+=1)V[fe].l($);$.forEach(m),i=P(U),o=v(U,"DIV",{class:!0});var z=T(o);y&&y.l(z),z.forEach(m),c=P(U),pe(f.$$.fragment,U),h=P(U),p=v(U,"DIV",{class:!0});var le=T(p);b=v(le,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-10rv0bu"&&(b.textContent=g),A=P(le),k=v(le,"BUTTON",{class:!0});var te=T(k);pe(D.$$.fragment,te),G=P(te),w=Q(te,B),te.forEach(m),le.forEach(m),U.forEach(m),M.forEach(m),this.h()},h(){d(t,"class","px-1 text-base"),d(a,"class","games svelte-1okhpct"),d(o,"class","options svelte-1okhpct"),d(b,"class","w-full btn hover:bg-gray-200"),d(k,"class","w-full mt-2 flex items-center justify-center btn primary"),d(p,"class","h-full flex flex-col justify-end"),d(r,"class","body pb-2 h-full svelte-1okhpct"),d(e,"class",I=Ae(`${l[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct")},m(S,M){K(S,e,M),u(e,t),u(e,n),u(e,r),u(r,a);for(let U=0;U<V.length;U+=1)V[U]&&V[U].m(a,null);u(r,i),u(r,o),y&&y.m(o,null),u(r,c),_e(f,r,null),u(r,h),u(r,p),u(p,b),u(p,A),u(p,k),_e(D,k,null),u(k,G),u(k,w),N=!0,j||(O=[R(b,"click",l[5]),R(k,"click",l[16])],j=!0)},p(S,[M]){if(M&401){C=se(S[4]);let $;for($=0;$<C.length;$+=1){const z=pl(S,C,$);V[$]?(V[$].p(z,M),F(V[$],1)):(V[$]=_l(z),V[$].c(),F(V[$],1),V[$].m(a,null))}for(tt(),$=C.length;$<V.length;$+=1)E($);st()}S[0]==="chords-write"||S[0]==="chords-play"?y?y.p(S,M):(y=vl(S),y.c(),y.m(o,null)):y&&(y.d(1),y=null);const U={};M&8&&(U.icon=S[3]?Is:is),D.$set(U),(!N||M&8)&&B!==(B=S[3]?"Quit":"Play")&&ae(w,B),(!N||M&1024&&I!==(I=Ae(`${S[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct"))&&d(e,"class",I)},i(S){if(!N){for(let M=0;M<C.length;M+=1)F(V[M]);F(f.$$.fragment,S),F(D.$$.fragment,S),N=!0}},o(S){V=V.filter(Boolean);for(let M=0;M<V.length;M+=1)W(V[M]);W(f.$$.fragment,S),W(D.$$.fragment,S),N=!1},d(S){S&&m(e),De(V,S),y&&y.d(),ve(f),ve(D),j=!1,rt(O)}}}function Qa(l,e,t){let s,n,r,a,i;ie(l,vs,w=>t(12,r=w)),ie(l,ft,w=>t(19,a=w)),ie(l,bt,w=>t(3,i=w));const o=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let c=o[4].key,f="maj-m";a.count,a.waitSeconds,ft.subscribe(w=>{w.count,w.waitSeconds});function h(){ke.clearGame(!0)}function p(w,I){if(I==="chords-write"||I==="chords-play"||I==="chords-diatonic"){let N=[];f==="selected"?N=r.filter(j=>j.selected):f==="all"?N=r:f==="maj-m"?N=r.filter(j=>j.suffixes[0]==="maj"||j.suffixes[0]==="m"):f==="seventh"&&(N=r.filter(j=>j.suffixes[0]==="maj7"||j.suffixes[0]==="m7"||j.suffixes[0]==="7"||j.suffixes[0]==="dim7"||j.suffixes[0]==="aug7")),ke.play(I,{chords:N})}else ke.play(I,void 0);w.currentTarget instanceof HTMLElement&&w.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function b(w){t(0,c=w)}function g(w,I){t(0,c=I),p(w,I)}function A(w){t(1,f=w)}const k=w=>b(w),D=(w,I)=>g(I,w),G=w=>A(w),B=w=>p(w,c);return l.$$set=w=>{t(10,e=ye(ye({},e),we(w)))},l.$$.update=()=>{l.$$.dirty&4096&&t(11,s=r.reduce((w,I)=>I.selected?w+1:w,0)),l.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${s} chords`},{key:"all",value:"All"}])},e=we(e),[c,f,n,i,o,h,p,b,g,A,e,s,r,k,D,G,B]}class Ya extends Re{constructor(e){super(),He(this,e,Qa,Ja,ze,{})}}function bl(l,e,t){const s=l.slice();return s[7]=e[t],s}function kl(l,e,t){const s=l.slice();return s[4]=e[t],s}function Xa(l){let e,t=se(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=yl(bl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r&2){t=se(n[1]);let a;for(a=0;a<t.length;a+=1){const i=bl(n,t,a);s[a]?s[a].p(i,r):(s[a]=yl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Za(l){let e,t=se(l[0].scaleNotes||[]),s=[];for(let n=0;n<t.length;n+=1)s[n]=wl(kl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r&1){t=se(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const i=kl(n,t,a);s[a]?s[a].p(i,r):(s[a]=wl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function yl(l){let e,t=l[7].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r&2&&t!==(t=n[7].interval+"")&&ae(s,t)},d(n){n&&m(e)}}}function wl(l){let e,t=l[4].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r&1&&t!==(t=n[4].note+"")&&ae(s,t)},d(n){n&&m(e)}}}function er(l){let e,t,s,n,r,a;function i(f,h){return f[0]?Za:Xa}let o=i(l),c=o(l);return{c(){e=_("div"),t=_("button"),c.c(),this.h()},l(f){e=v(f,"DIV",{class:!0,title:!0});var h=T(e);t=v(h,"BUTTON",{class:!0});var p=T(t);c.l(p),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","intervals svelte-my4m0t"),d(e,"class",s=`${l[2].class||""} `),d(e,"title",n=l[1].map(Cl).join("-"))},m(f,h){K(f,e,h),u(e,t),c.m(t,null),r||(a=R(t,"click",l[3]),r=!0)},p(f,[h]){o===(o=i(f))&&c?c.p(f,h):(c.d(1),c=o(f),c&&(c.c(),c.m(t,null))),h&4&&s!==(s=`${f[2].class||""} `)&&d(e,"class",s),h&2&&n!==(n=f[1].map(Cl).join("-"))&&d(e,"title",n)},i:ue,o:ue,d(f){f&&m(e),c.d(),r=!1,a()}}}const Cl=l=>l.interval;function tr(l,e,t){let{scale:s,intervals:n}=e;function r(a){ds.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),we(a))),"scale"in a&&t(0,s=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=we(e),[s,n,e,r]}class nn extends Re{constructor(e){super(),He(this,e,tr,er,ze,{scale:0,intervals:1})}}function El(l,e,t){const s=l.slice();return s[7]=e[t],s}function Sl(l,e,t){const s=l.slice();return s[4]=e[t],s}function sr(l){let e,t=se(l[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Al(El(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r&1){t=se(n[0]);let a;for(a=0;a<t.length;a+=1){const i=El(n,t,a);s[a]?s[a].p(i,r):(s[a]=Al(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function lr(l){let e,t=se(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Nl(Sl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Le()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=Le()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);K(n,e,r)},p(n,r){if(r&2){t=se(n[1]);let a;for(a=0;a<t.length;a+=1){const i=Sl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Nl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Al(l){let e,t,s=l[7].roman+"",n,r,a,i=l[7].suffix+"",o,c;return{c(){e=_("span"),t=_("span"),n=J(s),r=L(),a=_("sup"),o=J(i),c=L(),this.h()},l(f){e=v(f,"SPAN",{class:!0});var h=T(e);t=v(h,"SPAN",{class:!0});var p=T(t);n=Q(p,s),p.forEach(m),r=P(h),a=v(h,"SUP",{class:!0});var b=T(a);o=Q(b,i),b.forEach(m),c=P(h),h.forEach(m),this.h()},h(){d(t,"class","block"),d(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),q(a,"super-text",l[7].suffix.length>2),d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(f,h){K(f,e,h),u(e,t),u(t,n),u(e,r),u(e,a),u(a,o),u(e,c)},p(f,h){h&1&&s!==(s=f[7].roman+"")&&ae(n,s),h&1&&i!==(i=f[7].suffix+"")&&ae(o,i),h&1&&q(a,"super-text",f[7].suffix.length>2)},d(f){f&&m(e)}}}function Nl(l){let e,t,s=l[4]+"",n,r;return{c(){e=_("span"),t=_("span"),n=J(s),r=L(),this.h()},l(a){e=v(a,"SPAN",{class:!0});var i=T(e);t=v(i,"SPAN",{});var o=T(t);n=Q(o,s),o.forEach(m),r=P(i),i.forEach(m),this.h()},h(){d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,i){K(a,e,i),u(e,t),u(t,n),u(e,r)},p(a,i){i&2&&s!==(s=a[4]+"")&&ae(n,s)},d(a){a&&m(e)}}}function nr(l){let e,t,s,n,r,a;function i(f,h){return f[1].length>0?lr:sr}let o=i(l),c=o(l);return{c(){e=_("div"),t=_("button"),c.c(),this.h()},l(f){e=v(f,"DIV",{class:!0,title:!0});var h=T(e);t=v(h,"BUTTON",{class:!0});var p=T(t);c.l(p),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","triads flex flex-wrap svelte-1roj1mi"),d(e,"class",s=Ae(`${l[2].class||""} `)+" svelte-1roj1mi"),d(e,"title",n=l[0].map(Tl).join("-"))},m(f,h){K(f,e,h),u(e,t),c.m(t,null),r||(a=R(t,"click",l[3]),r=!0)},p(f,[h]){o===(o=i(f))&&c?c.p(f,h):(c.d(1),c=o(f),c&&(c.c(),c.m(t,null))),h&4&&s!==(s=Ae(`${f[2].class||""} `)+" svelte-1roj1mi")&&d(e,"class",s),h&1&&n!==(n=f[0].map(Tl).join("-"))&&d(e,"title",n)},i:ue,o:ue,d(f){f&&m(e),c.d(),r=!1,a()}}}const Tl=l=>l.roman+l.suffix;function ar(l,e,t){let{triads:s,chords:n}=e;function r(a){ds.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),we(a))),"triads"in a&&t(0,s=a.triads),"chords"in a&&t(1,n=a.chords)},e=we(e),[s,n,e,r]}class an extends Re{constructor(e){super(),He(this,e,ar,nr,ze,{triads:0,chords:1})}}function Il(l,e,t){const s=l.slice();return s[23]=e[t],s}function jl(l,e,t){const s=l.slice();return s[23]=e[t],s}function Dl(l){let e,t,s=l[23].raw.names[0]+"",n,r,a,i,o,c,f;function h(){return l[11](l[23])}a=new nn({props:{scale:l[23].scale,intervals:l[23].raw.intervals}}),a.$on("click",h);function p(){return l[12](l[23])}return o=new an({props:{triads:l[23].triads,chords:l[23].triadChords}}),o.$on("click",p),{c(){e=_("li"),t=_("div"),n=J(s),r=L(),me(a.$$.fragment),i=L(),me(o.$$.fragment),c=L(),this.h()},l(b){e=v(b,"LI",{class:!0});var g=T(e);t=v(g,"DIV",{class:!0});var A=T(t);n=Q(A,s),A.forEach(m),r=P(g),pe(a.$$.fragment,g),i=P(g),pe(o.$$.fragment,g),c=P(g),g.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,g){K(b,e,g),u(e,t),u(t,n),u(e,r),_e(a,e,null),u(e,i),_e(o,e,null),u(e,c),f=!0},p(b,g){l=b,(!f||g&4)&&s!==(s=l[23].raw.names[0]+"")&&ae(n,s);const A={};g&4&&(A.scale=l[23].scale),g&4&&(A.intervals=l[23].raw.intervals),a.$set(A);const k={};g&4&&(k.triads=l[23].triads),g&4&&(k.chords=l[23].triadChords),o.$set(k)},i(b){f||(F(a.$$.fragment,b),F(o.$$.fragment,b),f=!0)},o(b){W(a.$$.fragment,b),W(o.$$.fragment,b),f=!1},d(b){b&&m(e),ve(a),ve(o)}}}function Ll(l){let e,t,s=l[23].raw.names[0]+"",n,r,a,i,o,c,f;function h(){return l[13](l[23])}a=new nn({props:{scale:l[23].scale,intervals:l[23].raw.intervals}}),a.$on("click",h);function p(){return l[14](l[23])}return o=new an({props:{triads:l[23].triads,chords:l[23].triadChords}}),o.$on("click",p),{c(){e=_("li"),t=_("div"),n=J(s),r=L(),me(a.$$.fragment),i=L(),me(o.$$.fragment),c=L(),this.h()},l(b){e=v(b,"LI",{class:!0});var g=T(e);t=v(g,"DIV",{class:!0});var A=T(t);n=Q(A,s),A.forEach(m),r=P(g),pe(a.$$.fragment,g),i=P(g),pe(o.$$.fragment,g),c=P(g),g.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,g){K(b,e,g),u(e,t),u(t,n),u(e,r),_e(a,e,null),u(e,i),_e(o,e,null),u(e,c),f=!0},p(b,g){l=b,(!f||g&2)&&s!==(s=l[23].raw.names[0]+"")&&ae(n,s);const A={};g&2&&(A.scale=l[23].scale),g&2&&(A.intervals=l[23].raw.intervals),a.$set(A);const k={};g&2&&(k.triads=l[23].triads),g&2&&(k.chords=l[23].triadChords),o.$set(k)},i(b){f||(F(a.$$.fragment,b),F(o.$$.fragment,b),f=!0)},o(b){W(a.$$.fragment,b),W(o.$$.fragment,b),f=!1},d(b){b&&m(e),ve(a),ve(o)}}}function rr(l){let e,t,s,n,r="Scales",a,i,o,c,f="Key",h,p,b,g,A,k,D,G,B,w,I=se(l[2]),N=[];for(let E=0;E<I.length;E+=1)N[E]=Dl(jl(l,I,E));const j=E=>W(N[E],1,1,()=>{N[E]=null});let O=se(l[1]),C=[];for(let E=0;E<O.length;E+=1)C[E]=Ll(Il(l,O,E));const V=E=>W(C[E],1,1,()=>{C[E]=null});return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=L(),i=_("div"),o=_("div"),c=_("label"),c.textContent=f,h=L(),p=_("input"),b=L(),g=_("ul");for(let E=0;E<N.length;E+=1)N[E].c();A=L(),k=_("ul");for(let E=0;E<C.length;E+=1)C[E].c();this.h()},l(E){e=v(E,"DIV",{class:!0});var y=T(e);t=v(y,"FIELDSET",{class:!0});var S=T(t);s=v(S,"LEGEND",{class:!0});var M=T(s);n=v(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-lhx60e"&&(n.textContent=r),M.forEach(m),a=P(S),i=v(S,"DIV",{class:!0});var U=T(i);o=v(U,"DIV",{class:!0});var $=T(o);c=v($,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-14m38zf"&&(c.textContent=f),h=P($),p=v($,"INPUT",{class:!0,id:!0}),$.forEach(m),b=P(U),g=v(U,"UL",{class:!0});var z=T(g);for(let te=0;te<N.length;te+=1)N[te].l(z);z.forEach(m),A=P(U),k=v(U,"UL",{class:!0});var le=T(k);for(let te=0;te<C.length;te+=1)C[te].l(le);le.forEach(m),U.forEach(m),S.forEach(m),y.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(c,"class","mr-4 font-bold"),d(c,"for","scale-key"),d(p,"class","bg-gray-100 w-16 px-1 rounded"),d(p,"id","scale-key"),p.value=l[0],d(o,"class","flex w-1/2 mb-2 input svelte-4hctsl"),d(g,"class","list odd w-full svelte-4hctsl"),d(k,"class","list even w-full svelte-4hctsl"),d(i,"class","body svelte-4hctsl"),q(i,"hidden",l[3]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-4hctsl"),q(t,"collapsed",l[3]),d(e,"class",D=Ae(`${l[9].class||""}`)+" svelte-4hctsl")},m(E,y){K(E,e,y),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,o),u(o,c),u(o,h),u(o,p),u(i,b),u(i,g);for(let S=0;S<N.length;S+=1)N[S]&&N[S].m(g,null);u(i,A),u(i,k);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(k,null);G=!0,B||(w=[R(n,"click",l[5]),R(p,"input",l[6])],B=!0)},p(E,[y]){if((!G||y&1&&p.value!==E[0])&&(p.value=E[0]),y&388){I=se(E[2]);let S;for(S=0;S<I.length;S+=1){const M=jl(E,I,S);N[S]?(N[S].p(M,y),F(N[S],1)):(N[S]=Dl(M),N[S].c(),F(N[S],1),N[S].m(g,null))}for(tt(),S=I.length;S<N.length;S+=1)j(S);st()}if(y&386){O=se(E[1]);let S;for(S=0;S<O.length;S+=1){const M=Il(E,O,S);C[S]?(C[S].p(M,y),F(C[S],1)):(C[S]=Ll(M),C[S].c(),F(C[S],1),C[S].m(k,null))}for(tt(),S=O.length;S<C.length;S+=1)V(S);st()}(!G||y&8)&&q(i,"hidden",E[3]),(!G||y&8)&&q(t,"collapsed",E[3]),(!G||y&512&&D!==(D=Ae(`${E[9].class||""}`)+" svelte-4hctsl"))&&d(e,"class",D)},i(E){if(!G){for(let y=0;y<I.length;y+=1)F(N[y]);for(let y=0;y<O.length;y+=1)F(C[y]);G=!0}},o(E){N=N.filter(Boolean);for(let y=0;y<N.length;y+=1)W(N[y]);C=C.filter(Boolean);for(let y=0;y<C.length;y+=1)W(C[y]);G=!1},d(E){E&&m(e),De(N,E),De(C,E),B=!1,rt(w)}}}function ir(l,e,t){let s,n,r,a,i,o,c;ie(l,Yt,C=>t(17,r=C)),ie(l,Nt,C=>t(18,a=C)),ie(l,lt,C=>t(19,i=C)),ie(l,et,C=>t(20,o=C));let h=ms().map(C=>({key:C.names[0],raw:C,scale:void 0,triads:C.triads,triadChords:[]})),p="",b=[a.key,a.scale],g;const A=ht(Ge(!0),{key:"scales-hidden"});ie(l,A,C=>t(3,c=C));function k(){A.update(C=>!C)}function D({currentTarget:{value:C}}){t(0,p=`${C.charAt(0).toUpperCase()}${C.charAt(1).toLowerCase()}`),t(10,h=h.map(V=>{const E=Jt(p,V.key),y=p&&"data"in E?E.data:void 0;let S=[];return y&&(S=V.triads.map((M,U)=>`${y.scaleNotes[U].note}${!M.suffix.includes("°")&&M.minor?"m":""}${M.suffix}`)),{...V,scale:y,triadChords:S}}))}function G(C,V,E){if(C<V.length){const y=V[C++];de.setPlayed(y),o==null||o.playChord(y.map(S=>S.midi),i.fixedVelocity),g=setTimeout(()=>G(C,V,E),E)}else de.setPlayed([]),de.setKeyAndScale(b[0],b[1])}function B(C){clearTimeout(g);let V,E;C.scale?(E=C.scale,b=[a.key,a.scale],de.setKeyAndScale(C.scale.key,C.scale.scale)):E=a;const y=r[0].midi+E.scaleNotes[0].semitones;V=C.raw.intervals.map(S=>[{...E.notesMap.get(S.semitones%12),midi:y+S.semitones}]),V[0][0].semitones!==V[V.length-1][0].semitones&&V.push(V[0].map(S=>({...S,midi:S.midi+12}))),G(0,V,500)}function w(C){clearTimeout(g);const{intervals:V}=C.raw;let E,y;C.scale?(y=C.scale,b=[a.key,a.scale],de.setKeyAndScale(C.scale.key,C.scale.scale)):y=a;const S=r[0].midi+y.scaleNotes[0].semitones;E=Jl(C.triads).map((U,$)=>os(S+y.intervals[$].semitones,y,U.intervals)),V[V.length-1].interval_seq!==1&&E.push(E[0].map(U=>({...U,midi:U.midi+12}))),G(0,E,750)}const I=C=>B(C),N=C=>w(C),j=C=>B(C),O=C=>w(C);return l.$$set=C=>{t(9,e=ye(ye({},e),we(C)))},l.$$.update=()=>{l.$$.dirty&1024&&t(2,s=h.filter((C,V)=>V<h.length/2)),l.$$.dirty&1024&&t(1,n=h.filter((C,V)=>V>=h.length/2))},e=we(e),[p,n,s,c,A,k,D,B,w,e,h,I,N,j,O]}class or extends Re{constructor(e){super(),He(this,e,ir,rr,ze,{})}}function Pl(l,e,t){const s=l.slice();return s[26]=e[t],s}function Bl(l,e,t){const s=l.slice();return s[29]=e[t],s}function Gl(l){let e,t;return{c(){e=_("div"),t=J(l[3]),this.h()},l(s){e=v(s,"DIV",{class:!0});var n=T(e);t=Q(n,l[3]),n.forEach(m),this.h()},h(){d(e,"class","error svelte-1u7ze7x")},m(s,n){K(s,e,n),u(e,t)},p(s,n){n[0]&8&&ae(t,s[3])},d(s){s&&m(e)}}}function cr(l){let e,t;return{c(){e=_("div"),t=J(l[0]),this.h()},l(s){e=v(s,"DIV",{slot:!0});var n=T(e);t=Q(n,l[0]),n.forEach(m),this.h()},h(){d(e,"slot","value")},m(s,n){K(s,e,n),u(e,t)},p(s,n){n[0]&1&&ae(t,s[0])},d(s){s&&m(e)}}}function Ml(l){let e,t=se(l[5]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Vl(Bl(l,t,n));return{c(){e=_("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var r=T(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){K(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r[0]&32){t=se(n[5]);let a;for(a=0;a<t.length;a+=1){const i=Bl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Vl(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Vl(l){let e,t=l[29].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&32&&t!==(t=n[29].interval+"")&&ae(s,t)},d(n){n&&m(e)}}}function Ol(l){let e,t=se(l[8].scaleNotes),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ul(Pl(l,t,n));return{c(){e=_("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var r=T(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){K(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r[0]&256){t=se(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const i=Pl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Ul(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),De(s,n)}}}function Ul(l){let e,t=l[26].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=T(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,r){K(n,e,r),u(e,s)},p(n,r){r[0]&256&&t!==(t=n[26].note+"")&&ae(s,t)},d(n){n&&m(e)}}}function ur(l){let e,t,s,n="Score",r,a,i,o,c,f,h,p="Range",b,g,A,k,D,G="—",B,w,I,N,j,O,C,V="Scale",E,y,S,M,U,$,z,le="Key",te,fe,ce,Te,xe,Me,ge="",qe,Ke,Ie,re;i=new at({props:{icon:Hl,width:16}});let Ne=l[3]&&Gl(l);S=new Zl({props:{id:"scales",class:"p-1",options:l[10],onSelect:l[14],$$slots:{value:[cr]},$$scope:{ctx:l}}});let he=!l[7]&&Ml(l),Y=!l[7]&&Ol(l);return{c(){e=_("fieldset"),t=_("legend"),s=_("button"),s.textContent=n,r=L(),a=_("button"),me(i.$$.fragment),o=L(),c=_("div"),f=_("div"),h=_("label"),h.textContent=p,b=L(),g=_("div"),A=_("input"),k=L(),D=_("span"),D.textContent=G,B=L(),w=_("input"),I=L(),N=_("div"),Ne&&Ne.c(),j=L(),O=_("div"),C=_("label"),C.textContent=V,E=L(),y=_("div"),me(S.$$.fragment),M=L(),he&&he.c(),U=L(),$=_("div"),z=_("label"),z.textContent=le,te=L(),fe=_("div"),ce=_("input"),Te=L(),Y&&Y.c(),xe=L(),Me=_("div"),Me.innerHTML=ge,this.h()},l(ne){e=v(ne,"FIELDSET",{class:!0});var x=T(e);t=v(x,"LEGEND",{class:!0});var X=T(t);s=v(X,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-lqyol"&&(s.textContent=n),X.forEach(m),r=P(x),a=v(x,"BUTTON",{class:!0});var oe=T(a);pe(i.$$.fragment,oe),oe.forEach(m),o=P(x),c=v(x,"DIV",{class:!0});var ee=T(c);f=v(ee,"DIV",{class:!0});var Ce=T(f);h=v(Ce,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(h)!=="svelte-10u0679"&&(h.textContent=p),b=P(Ce),g=v(Ce,"DIV",{class:!0});var Pe=T(g);A=v(Pe,"INPUT",{class:!0,id:!0}),k=P(Pe),D=v(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),Z(D)!=="svelte-8q1xz4"&&(D.textContent=G),B=P(Pe),w=v(Pe,"INPUT",{class:!0,id:!0}),Pe.forEach(m),I=P(Ce),N=v(Ce,"DIV",{class:!0});var nt=T(N);Ne&&Ne.l(nt),nt.forEach(m),Ce.forEach(m),j=P(ee),O=v(ee,"DIV",{class:!0});var We=T(O);C=v(We,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(C)!=="svelte-ld2d07"&&(C.textContent=V),E=P(We),y=v(We,"DIV",{class:!0});var Ve=T(y);pe(S.$$.fragment,Ve),Ve.forEach(m),M=P(We),he&&he.l(We),We.forEach(m),U=P(ee),$=v(ee,"DIV",{class:!0});var je=T($);z=v(je,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(z)!=="svelte-17pcm6g"&&(z.textContent=le),te=P(je),fe=v(je,"DIV",{class:!0});var Ee=T(fe);ce=v(Ee,"INPUT",{class:!0,id:!0}),Ee.forEach(m),Te=P(je),Y&&Y.l(je),je.forEach(m),xe=P(ee),Me=v(ee,"DIV",{class:!0,"data-svelte-h":!0}),Z(Me)!=="svelte-hp3bkp"&&(Me.innerHTML=ge),ee.forEach(m),x.forEach(m),this.h()},h(){d(s,"class","px-1 rounded hover:bg-gray-100"),d(t,"class","px-1 text-base"),d(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(a,"hidden",l[6]),d(h,"class","font-bold"),d(h,"for","range_min"),d(A,"class","h-[28px] w-full"),d(A,"id","range_min"),d(D,"class","mx-2 mt-1"),d(w,"class","h-[28px] w-full"),d(w,"id","range_max"),d(g,"class","my-1 flex w-full"),d(N,"class","flex justify-between my-1"),d(f,"class","flex flex-col h-full"),d(C,"class","font-bold"),d(C,"for","scales"),d(y,"class","my-1 w-full"),d(O,"class","flex flex-col h-full"),d(z,"class","font-bold"),d(z,"for","key"),d(ce,"class","h-[28px]"),d(ce,"id","key"),d(fe,"class","my-1 flex"),d($,"class","flex flex-col h-full"),d(Me,"class","h-full flex flex-col justify-between"),d(c,"class","options svelte-1u7ze7x"),q(c,"hidden",l[6]),d(e,"class",qe=Ae(`${l[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),q(e,"collapsed",l[6])},m(ne,x){K(ne,e,x),u(e,t),u(t,s),u(e,r),u(e,a),_e(i,a,null),u(e,o),u(e,c),u(c,f),u(f,h),u(f,b),u(f,g),u(g,A),Qe(A,l[1]),u(g,k),u(g,D),u(g,B),u(g,w),Qe(w,l[2]),u(f,I),u(f,N),Ne&&Ne.m(N,null),u(c,j),u(c,O),u(O,C),u(O,E),u(O,y),_e(S,y,null),u(O,M),he&&he.m(O,null),u(c,U),u(c,$),u($,z),u($,te),u($,fe),u(fe,ce),Qe(ce,l[4]),u($,Te),Y&&Y.m($,null),u(c,xe),u(c,Me),Ke=!0,Ie||(re=[R(s,"click",l[15]),R(a,"click",l[16]),R(A,"input",l[18]),R(A,"change",l[19]),R(A,"focus",l[12]),R(w,"input",l[20]),R(w,"change",l[21]),R(w,"focus",l[12]),R(ce,"input",l[22]),R(ce,"input",l[13])],Ie=!0)},p(ne,x){(!Ke||x[0]&64)&&q(a,"hidden",ne[6]),x[0]&2&&A.value!==ne[1]&&Qe(A,ne[1]),x[0]&4&&w.value!==ne[2]&&Qe(w,ne[2]),ne[3]?Ne?Ne.p(ne,x):(Ne=Gl(ne),Ne.c(),Ne.m(N,null)):Ne&&(Ne.d(1),Ne=null);const X={};x[0]&1|x[1]&2&&(X.$$scope={dirty:x,ctx:ne}),S.$set(X),ne[7]?he&&(he.d(1),he=null):he?he.p(ne,x):(he=Ml(ne),he.c(),he.m(O,null)),x[0]&16&&ce.value!==ne[4]&&Qe(ce,ne[4]),ne[7]?Y&&(Y.d(1),Y=null):Y?Y.p(ne,x):(Y=Ol(ne),Y.c(),Y.m($,null)),(!Ke||x[0]&64)&&q(c,"hidden",ne[6]),(!Ke||x[0]&131072&&qe!==(qe=Ae(`${ne[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&d(e,"class",qe),(!Ke||x[0]&131136)&&q(e,"collapsed",ne[6])},i(ne){Ke||(F(i.$$.fragment,ne),F(S.$$.fragment,ne),Ke=!0)},o(ne){W(i.$$.fragment,ne),W(S.$$.fragment,ne),Ke=!1},d(ne){ne&&m(e),ve(i),Ne&&Ne.d(),ve(S),he&&he.d(),Y&&Y.d(),Ie=!1,rt(re)}}}function fr(l,e,t){let s,n,r,a,i,o;ie(l,Yt,y=>t(23,n=y)),ie(l,kt,y=>t(24,r=y)),ie(l,bt,y=>t(7,i=y)),ie(l,Nt,y=>t(8,o=y));let c=Ye(n[0]),f=Ye(n[1]),h="";const p=ht(Ge(!1),{key:"score-options-hidden"});ie(l,p,y=>t(6,a=y));let b=r[0],g=r[1];const A=ms(),k=A.map(y=>({key:y.names[0],value:y.names[0]}));Yt.subscribe(y=>{t(1,c=Ye(y[0])),t(2,f=Ye(y[1]))}),kt.subscribe(y=>{t(4,b=y[0]),t(0,g=y[1])});function D(y,S){const M=Nn(S.currentTarget.value,!0,!0);if("data"in M){const{midi:U}=M.data,$=n,z=[y==="min"?U:$[0].midi,y==="max"?U:$[1].midi];Fe.setMidiRange(z),t(3,h="")}else t(3,h=M.err),y==="min"?t(1,c=Ye(n[0])):t(2,f=Ye(n[1]))}function G(){t(3,h="")}function B({currentTarget:{value:y}}){t(4,b=`${y.charAt(0).toUpperCase()}${y.charAt(1).toLowerCase()}`),de.setKey(b)}function w(y){var S;return t(0,g=(S=k.find(M=>y===M.key))==null?void 0:S.value),de.setScale(g),!1}function I(){p.update(y=>!y)}function N(){de.clearScore(!0),Fe.setMidiRange([60,84])}function j(){c=this.value,t(1,c)}const O=y=>D("min",y);function C(){f=this.value,t(2,f)}const V=y=>D("max",y);function E(){b=this.value,t(4,b)}return l.$$set=y=>{t(17,e=ye(ye({},e),we(y)))},l.$$.update=()=>{var y;l.$$.dirty[0]&1&&t(5,s=((y=A.find(S=>S.names[0]===g))==null?void 0:y.intervals)||[])},e=we(e),[g,c,f,h,b,s,a,i,o,p,k,D,G,B,w,I,N,e,j,O,C,V,E]}class hr extends Re{constructor(e){super(),He(this,e,fr,ur,ze,{},null,[-1,-1])}}function dr(l){l[19]=l[20].default}function mr(l){return{c:ue,l:ue,m:ue,i:ue,o:ue,d:ue}}function pr(l){dr(l);let e,t,s;var n=l[19];function r(a,i){return{props:{class:"px-4 md:px-0"}}}return n&&(e=dn(n,r())),{c(){e&&me(e.$$.fragment),t=Le()},l(a){e&&pe(e.$$.fragment,a),t=Le()},m(a,i){e&&_e(e,a,i),K(a,t,i),s=!0},i(a){s||(e&&F(e.$$.fragment,a),s=!0)},o(a){e&&W(e.$$.fragment,a),s=!1},d(a){a&&m(t),e&&ve(e,a)}}}function _r(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){K(t,e,s)},i:ue,o:ue,d(t){t&&m(e)}}}function vr(l){let e,t,s,n='<a class="hover:underline" href="https://github.com/TeemuKoivisto/midi-note-trainer">MIDI Note Trainer</a>',r,a,i,o,c,f,h,p,b,g,A,k,D,G,B,w,I,N,j;i=new Oa({}),c=new or({}),h=new Yn({}),g=new hr({props:{class:"score-options mr-4"}}),k=new Ya({props:{class:"play-form"}});let O={ctx:l,current:null,token:null,hasCatch:!1,pending:_r,then:pr,catch:mr,value:20,blocks:[,,,]};return fn(rn(()=>import("./Score.6e128b48.js"),["./Score.6e128b48.js","./vendor_svelte.9533a558.js","./vendor.1acf520b.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),O),w=new Ha({props:{class:"min-h-32",debounced:!!l[0]}}),w.$on("guessed-chord",l[2]),w.$on("guessed-key",l[3]),w.$on("guessed-note",l[4]),N=new ua({props:{game:l[1]}}),{c(){e=_("meta"),t=L(),s=_("h1"),s.innerHTML=n,r=L(),a=_("section"),me(i.$$.fragment),o=L(),me(c.$$.fragment),f=L(),me(h.$$.fragment),p=L(),b=_("div"),me(g.$$.fragment),A=L(),me(k.$$.fragment),D=L(),O.block.c(),G=L(),B=_("section"),me(w.$$.fragment),I=L(),me(N.$$.fragment),this.h()},l(C){const V=hn("svelte-1w2oado",document.head);e=v(V,"META",{name:!0,content:!0}),V.forEach(m),t=P(C),s=v(C,"H1",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-1l8ebwf"&&(s.innerHTML=n),r=P(C),a=v(C,"SECTION",{class:!0});var E=T(a);pe(i.$$.fragment,E),o=P(E),pe(c.$$.fragment,E),f=P(E),pe(h.$$.fragment,E),p=P(E),b=v(E,"DIV",{class:!0});var y=T(b);pe(g.$$.fragment,y),A=P(y),pe(k.$$.fragment,y),y.forEach(m),E.forEach(m),D=P(C),O.block.l(C),G=P(C),B=v(C,"SECTION",{class:!0});var S=T(B);pe(w.$$.fragment,S),I=P(S),pe(N.$$.fragment,S),S.forEach(m),this.h()},h(){d(e,"name","description"),d(e,"content","App to practise music notation, scales and chords using MIDI"),d(s,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight"),d(b,"class","play svelte-qjpqy3"),d(a,"class","px-4 md:px-0"),d(B,"class","mb-8 px-4 md:px-0 flex flex-col")},m(C,V){u(document.head,e),K(C,t,V),K(C,s,V),K(C,r,V),K(C,a,V),_e(i,a,null),u(a,o),_e(c,a,null),u(a,f),_e(h,a,null),u(a,p),u(a,b),_e(g,b,null),u(b,A),_e(k,b,null),K(C,D,V),O.block.m(C,O.anchor=V),O.mount=()=>G.parentNode,O.anchor=G,K(C,G,V),K(C,B,V),_e(w,B,null),u(B,I),_e(N,B,null),j=!0},p(C,[V]){l=C;const E={};V&1&&(E.debounced=!!l[0]),w.$set(E);const y={};V&2&&(y.game=l[1]),N.$set(y)},i(C){j||(F(i.$$.fragment,C),F(c.$$.fragment,C),F(h.$$.fragment,C),F(g.$$.fragment,C),F(k.$$.fragment,C),F(O.block),F(w.$$.fragment,C),F(N.$$.fragment,C),j=!0)},o(C){W(i.$$.fragment,C),W(c.$$.fragment,C),W(h.$$.fragment,C),W(g.$$.fragment,C),W(k.$$.fragment,C);for(let V=0;V<3;V+=1){const E=O.blocks[V];W(E)}W(w.$$.fragment,C),W(N.$$.fragment,C),j=!1},d(C){C&&(m(t),m(s),m(r),m(a),m(D),m(G),m(B)),m(e),ve(i),ve(c),ve(h),ve(g),ve(k),O.block.d(C),O.token=null,O=null,ve(w),ve(N)}}}function gr(l,e,t){let s,n,r,a,i,o;ie(l,gt,I=>t(7,s=I)),ie(l,bt,I=>t(1,n=I)),ie(l,ft,I=>t(8,r=I)),ie(l,lt,I=>t(9,a=I)),ie(l,et,I=>t(10,i=I)),ie(l,us,I=>t(11,o=I));let c,f;Rl(()=>(o&&w(),window.addEventListener("keydown",h),window.addEventListener("mousedown",h),window.addEventListener("touchstart",h),()=>{window.removeEventListener("keydown",h),window.removeEventListener("mousedown",h),window.removeEventListener("touchstart",h)})),Qt.subscribe(I=>{I&&I.channels[1].addListener("noteon",p)});function h(){Fe.initAudio(),window.removeEventListener("keydown",h),window.removeEventListener("mousedown",h),window.removeEventListener("touchstart",h)}function p(I){if(c)return;const N=I.rawData;b(N[1],N[2])}function b(I,N){const j=n;j instanceof At&&!(j!=null&&j.ended)&&s==="waiting"?k(I):j instanceof ut&&!(j!=null&&j.ended)&&s==="waiting"?(j.addPlayedNote(I),f||(f=setTimeout(A,2e3))):j||de.pushPlayed(I),i&&i.noteOn(I,a.fixedVelocity??N)}function g(){r.autoplay&&r.waitSeconds>0?t(0,c=setTimeout(()=>{r.autoplay&&ke.nextGuess(),t(0,c=void 0)},r.waitSeconds*1e3)):r.autoplay?ke.nextGuess():t(0,c=void 0)}function A(){var N;const I=n;if(I instanceof ut){const j=I.guess();de.setPlayed(((N=I.latestGuess.guessed)==null?void 0:N.notes)||[],j,-1),ke.updateState(j?"correct":"wrong"),g()}f=void 0}function k(I){const N=n;if(N instanceof At&&s==="waiting"){de.setTarget([de.getNote(N.current)]);const j=N.guess(I);ke.updateState(j?"correct":"wrong"),de.pushPlayed(I,j,4e3),g()}}function D(I){const N=n;if(N instanceof ut&&s==="waiting"){const j=N.guessWrittenChord(I.detail);ke.updateState(j?"correct":"wrong"),g()}}function G(I){const N=n;if(N instanceof Dt&&s==="waiting"){const j=I.detail.replaceAll("♭","b").replaceAll("♯","#"),O=N.guess(j);ke.updateState(O?"correct":"wrong"),g()}}function B(I){b(I.detail,80)}async function w(){const I=await Fe.openMidi();"data"in I?I.data.name:(I.err,console.error(I.err))}return[c,n,D,G,B]}class wr extends Re{constructor(e){super(),He(this,e,gr,vr,ze,{})}}export{Ds as F,ut as G,wr as P,gn as S,At as a,ke as b,bt as c,vt as d,Ql as e,gt as g,et as p,Nt as s,Bs as t};
