import{_ as nn}from"./preload-helper.a4192956.js";import{R as me,Q as Nt,T as Be,U as an,S as Re,i as He,s as qe,O as at,V as ee,e as _,m as B,H as pe,a as v,b as N,n as Z,d as m,o as G,I as _e,f as d,L as q,W as Ae,g as O,h as u,J as ve,p as R,t as $,C as tt,w as st,l as W,K as ge,X as je,Y as rt,M as oe,N as ye,P as ke,z as J,A as Q,B as se,v as De,q as ce,Z as ds,r as Kl,_ as Qe,$ as rn,a0 as qt,c as xl,u as Fl,j as $l,k as Rl,a1 as Es,a2 as $t,F as on,a3 as Ss,a4 as As,a5 as cn,a6 as un,G as fn}from"./vendor_svelte.555721fe.js";import{w as Rt,b as hn,c as dn,e as Ts,f as Ns,g as Hl,h as zt,i as Wt,a as Is,j as is}from"./vendor.1acf520b.js";const js={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function Fe(l,e=0,t=0){return{interval:`${l}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:l,semitones:ql(l,e,t),flats:e,sharps:t}}function ql(l,e,t){return(l<8?js[l]:js[l%7])-e+t+Math.floor(l/8)*12}function zl(l){let e,t=0,s=0;l<0?(t=1+Math.floor(-l/100),e=-l%100):l>100?(s=Math.floor(l/100),e=l%100):e=l;const n=ql(e,t,s);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(s)}`,interval_seq:e,semitones:n,flats:t,sharps:s}}const mn=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let ns=[];function Wl(){return mn.map(l=>{const e=l[3].map(zl);return{suffixes:l[0],name:l[1][0],type:l[2],intervals:e}})}function jt(l){ns.length===0&&(ns=Wl());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return ns.find(t=>t.suffixes.find(s=>s===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function pn(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const r=(l.semitones+e)%12;return{...l,semitones:r<0?r+12:r,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function os(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=l+r.semitones,i=e.scaleNotes.find(p=>p.semitones===a%12),c=r.flats>0,o=r.sharps>0,f=(c?a+1:o?a-1:a)%12,h=c?-1:o?1:0;s.push(pn(i??e.notesMap.get(f),i?0:h,a))}return s}const Ds=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],_n=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],Ls=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function vn(l){let e=0,t=0;for(let s=0;s<Ds.length;s+=1){const n=l.find(a=>a.note.slice(0,2)===Ds[s]),r=l.find(a=>a.note.slice(0,2)===_n[s]);if(n)e+=1;else if(r)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:Ls.get(e*-1)}:{flats:0,sharps:t,majorSignature:Ls.get(t)}}function gn(l){return l>=9?`${l>=10?"X":""}${l===9?"IX":"I".repeat(l%10)}`:`${l>=5?"V":""}${l===4?"IV":"I".repeat(l%5)}`}function Jl(l){return l.map(e=>{const t=[Fe(1)];let s;return e.major?(t.push(Fe(3)),e.suffix.startsWith("+")?t.push(Fe(5,0,1)):e.suffix.startsWith("6")?t.push(Fe(6)):e.suffix.startsWith("7")?t.push(Fe(7,1)):e.suffix.startsWith("maj7")?t.push(Fe(7)):s=jt("maj")):e.minor?(t.push(Fe(3,1)),e.suffix.startsWith("°")?t.push(Fe(5,1)):e.suffix.startsWith("6")?(t.push(Fe(6)),s=jt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push(Fe(7,1)),s=jt("m"+e.suffix)):s=jt("m")):e.suffix.startsWith("sus2")?t.push(Fe(2)):e.suffix.startsWith("sus4")&&t.push(Fe(4)),t.length<=2&&t.push(Fe(5)),t.length<=2&&t.push(Fe(8)),s||(s=jt(e.suffix)),{...s,intervals:t}})}function bn(l,e){let t=e.has(4)&&e.has(7),s=e.has(3)&&e.has(7);const n=gn(l);let r="";return t||s||(e.has(3)&&e.has(6)?(r="°",s=!0):e.has(4)&&e.has(8)?(r="+",t=!0):e.has(3)&&e.has(10)?(s=!0,r="7"):e.has(4)&&e.has(10)?(r="7",t=!0):e.has(4)&&e.has(11)?(r="maj7",t=!0):e.has(3)&&e.has(8)?(r="6",s=!0):e.has(4)&&e.has(9)?(r="6",t=!0):e.has(2)?r="sus2":e.has(5)?r="sus4":e.has(7)?r="5":r="?"),{degree:l,roman:s?n.toLowerCase():n,suffix:r,major:t,minor:s,semitones:e}}function yn(l){const e=l.length;return l.map((t,s)=>{const n=t.semitones,r=new Set;for(let a=1;a<e;a+=1){const i=l[(s+a)%e].semitones,c=i<=n?i+12-n:i-n;r.add(c)}return bn(t.interval_seq,r)})}const kn=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let as=[];function ms(){return kn.map(l=>{const e=l[0],t=l[1].map(zl),s=yn(t);return{names:e,intervals:t,triads:s}})}function Cn(l){as.length===0&&(as=ms());const e=l.replaceAll(/-|\s/g,"").toLowerCase().trim();return as.find(t=>t.names.find(s=>s.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const wn=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,En=/^[0-9]$/,Ze=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Ql(l){return l===12?1:Math.floor((l-12)/12)}function Ye(l){return`${l.note}${Ql(l.midi)}`}function St(l){const t=(l-12)%12;return{...Ze[t],semitones:t,midi:l}}function Sn(l,e=!0,t=!1){if(e&&!wn.test(l))return{err:`Unrecognized note "${l}"`,code:400};const s=l.trim(),n=s.charAt(0).toUpperCase(),r=Ze.find(h=>h.note.charAt(0)===n&&h.note.length===1);if(!r)return{err:`Unable to find note ${s}`,code:500};const a=s.slice(1).split("").reduce((h,p)=>h+(p.toLowerCase()==="b"||p==="♭"?-1:p==="#"||p==="♯"?1:0),0);let i;if(En.test(s.charAt(s.length-1)))try{i=parseInt(s.charAt(s.length-1),10)}catch{}if(t&&i===void 0)return{err:`No octave provided: ${l}`,code:400};i===void 0&&(i=0);let c=(r.semitones+a)%12;c=c<0?c+12:c;const o=a<0?-a:0,f=a>0?a:0;return{data:{note:`${n}${"♭".repeat(o)}${"♯".repeat(f)}`,semitones:c,midi:12+i*12+c,flats:o,sharps:f}}}function Yl(l){const e=Ze.find(t=>t.note.charAt(0)===l.charAt(0)&&t.note.length===1);if(e){const t=l.slice(1).split("").reduce((n,r)=>n+(r.toLowerCase()==="b"||r==="♭"?-1:r==="#"||r==="♯"?1:0),0),s=(e.semitones+t)%12;return{note:l,semitones:s<0?s+12:s,flats:t<0?-t:0,sharps:t>0?t:0}}}const An=/^[a-gA-G][♭b#♯]?$/,rs="ABCDEFG";function Tn(l,e){return e.map(t=>rs.charAt((rs.indexOf(l)+t.interval_seq-1)%rs.length))}function Nn(l,e,t){return t.map((s,n)=>{const r=e[n],a=(l+s.semitones)%12,i=Ze[a],c=i.note.charAt(0);if(c<r&&(c!=="A"||r!=="G")||c==="G"&&r==="A"){let o=1,f=Ze[(a+o)%12];for(;f.note.charAt(0)!==r;)o+=1,f=Ze[(a+o)%12];return{semitones:a,note:f.note+"♭".repeat(o),flats:o+(f.note.includes("♭")?1:0),sharps:0}}else if(c>r||c==="A"&&r==="G"){let o=1,f=a===0?Ze.length-1:a-o,h=Ze[f];for(;h.note.charAt(0)!==r;)o+=1,f=f===0?Ze.length-1:f-1,h=Ze[f];return{semitones:a,note:h.note+"♯".repeat(o),flats:0,sharps:o+(h.note.includes("♯")?1:0)}}else return{semitones:a,note:i.note,flats:i.flats,sharps:i.sharps}})}function Jt(l,e){if(!An.test(l))return{err:`Unknown key: ${l}`,code:400};const t=Cn(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const s=`${l.charAt(0).toUpperCase()}${l.charAt(1).replace("b","♭").replace("#","♯")}`,n=Yl(s);if(!n)return{err:`Unable to find root for note: ${s}`,code:404};const r=Tn(s.charAt(0),t.intervals),a=Nn(n.semitones,r,t.intervals),i=new Map(Ze.map(c=>{const o=a.find(f=>f.semitones===c.semitones);return o?[c.semitones,o]:[c.semitones,{...c}]}));return{data:{key:s,scale:t.names[0],names:t.names,...vn(a),intervals:t.intervals.map(c=>({...c})),triads:t.triads.map(c=>({...c})),scaleNotes:a,notesMap:i}}}const cs=new Map;function In(l,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(l)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function jn(l,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(l)),{data:void 0}}catch(s){return{err:`Failed to store the value: ${s}`,code:400}}}function ht(l,e){const{key:t,storage:s="local",namespace:n="default"}=e,r=In(t,s),a=me(l);"data"in r?l.set(e.deserialize?e.deserialize(r.data):r.data):"err"in r&&(e!=null&&e.debug)&&console.info(r.err);const i=l.subscribe(o=>{const f=jn(e.serialize?e.serialize(o):o,t,s);"err"in f&&(e!=null&&e.debug)&&console.error(f.err)}),c=cs.get(n);return c?c.push({key:t,storage:s,value:l,defaultValue:a,unsubscribe:i}):cs.set(n,[{key:t,storage:s,value:l,defaultValue:a,unsubscribe:i}]),l}function Dn(l=["default"],e){l.forEach(t=>{var s;(s=cs.get(t))==null||s.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function Ln(l,e){const t=await fetch(l);if(!t.ok)return{err:t.statusText,code:t.status};const s=await t.arrayBuffer();return{data:await e.decodeAudioData(s)}}async function Pn(l,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],s=await Promise.all(t.map(r=>Ln(`${l}${r}`,e))),n=[];return s.forEach(r=>{"err"in r?console.error(`Failed to load audio: ${r.err}`):n.push(r.data)}),n}class Bn{constructor(e,t,s,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(s),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(s))}on(e,t,s,n,r,a,i,c){this.noteA.buffer=e,this.noteA.playbackRate.value=s,this.biquadFilter.frequency.value=r,this.gainA.gain.value=a,this.gain.gain.value=c,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=i,this.noteB.start(0)),this.noteA.start(0)}off(e,t,s){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(s),this.noteB.stop(s),(n=this.damp)==null||n.start(0)}}class Gn{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,s)=>{this.bufferlists.push(t),s===8?this.damper=t:s===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(s=>{this.noteOn(s,t)})}noteOn(e,t=80){if(e<109&&e>20){const s=this.notes.get(e);s&&(s.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),r=n+1,a=n*12+21,i=2**((e-69)/12)*440,c=t/127;let o=i*(2-(e-21)/50)+3*i*c;e<60&&(o=440*(3-(60-21)/50)+3*i*c);const f=1-(e%12/12+1)/12,h=Math.pow(2,(e-a)/12),p=0,b=0,g=c**1.4,T=new Bn(e,this.context,this.directGain,this.damper);T.on(this.bufferlists[n],this.bufferlists[r],h,p,o,f,b,g),this.notes.set(e,T)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const Mn="/midi-note-trainer/",us=ht(Be(!1),{key:"midi-access"}),Qt=Be(void 0),ps=ht(Be([60,84]),{key:"midi-range",storage:"session"}),Yt=Nt(ps,l=>[St(l[0]),St(l[1])]),Ps=Be(void 0),et=Be(void 0),lt=ht(Be({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),$e={async openMidi(){return Rt.enable().then(()=>(us.set(!0),Rt.inputs.length>0?(Qt.set(Rt.inputs[0]),{data:Rt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(l=>({err:l.toString(),code:403}))},disableMidi(){us.set(!1),Qt.set(void 0)},setMidiRange(l){ps.set(l)},setInputValue(l,e){lt.update(t=>({...t,[l]:e})),l==="useSound"&&!e?et.set(void 0):l==="useSound"&&!me(et)&&this.initAudio()},async initAudio(){let l=me(Ps);if(l||(l=new AudioContext,Ps.set(l)),!me(et)){const e=new Gn(l),t=await Pn(`${Mn}audio`,l);e.load(t),et.set(e)}}};let Xe;an({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}});const yt=Be(["C","Major"]),Tt=Nt(yt,l=>{const e=Jt(l[0],l[1]);return"data"in e?e.data:{key:l[0],scale:l[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),Bs=Be([]),vt=Be([]);function fs(l,e){if(l.length>0){const t=Date.now();let s=t;const n=l.filter(r=>(r.started+e>t&&(s=Math.min(s,r.started)),r.started+e>t));return!Xe&&n.length>0&&(Xe=setTimeout(()=>{Xe=void 0,vt.update(r=>fs(r,e))},e-(t-s)+100)),n}return l}const fe={setKey(l){yt.update(e=>[l,e[1]])},setScale(l){yt.update(e=>[e[0],l])},setKeyAndScale(l,e){yt.set([l,e])},setTarget(l=[]){Bs.set(l)},getNote(l){return{...me(Tt).notesMap.get(l%12),midi:l}},pushPlayed(l,e,t){const n={...me(Tt).notesMap.get(l%12),midi:l},r=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(vt.update(i=>{const c=i.findIndex(o=>o.midi===l);return c>=0&&i.splice(c,1),[...i,{...n,color:a,started:r}]}),!Xe&&t!==-1){const i=t??me(lt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,vt.update(c=>fs(c,i))},i)}},setPlayed(l,e,t){const s=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(vt.update(r=>[...l.map(a=>({...a,color:n,started:s}))]),!Xe&&t!==-1){const r=t??me(lt).keyFadeTimeout;Xe=setTimeout(()=>{Xe=void 0,vt.update(a=>fs(a,r))},r)}},clearPlayed(){vt.set([]),clearTimeout(Xe),Xe=void 0},clearScore(l=!1){l&&yt.set(["C","Major"]),Bs.set([]),vt.set([])}};class _s{constructor(e,t,s){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=s;const n=[],{count:r}=s,a=t.map(c=>typeof c=="object"&&c!==null?{...c}:c);let i=s.duplicates;!s.duplicates&&r>a.length&&(console.warn(`Trying to create game with count ${r} larger than available unique values ${t.length}`),i=!0);for(let c=0;c<r;c+=1){const o=Math.floor(Math.random()*a.length);if(i)n.push(a[o]);else{const f=a.splice(o,1);f.length>0&&n.push(f[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function Vn(l,e,t){let s=e<0?l.flats-e:l.flats,n=e>0?l.sharps+e:l.sharps;if(s>0&&n>0){const a=Math.min(s,n);s-=a,n-=a}const r=(l.semitones+e)%12;return{...l,semitones:r<0?r+12:r,note:`${l.note.charAt(0)}${"♭".repeat(s)}${"♯".repeat(n)}`,flats:s,sharps:n,midi:t}}function On(l,e,t){const s=[];for(let n=0;n<t.length;n+=1){const r=t[n],a=l+r.semitones,i=e.scaleNotes.find(p=>p.semitones===a%12),c=r.flats>0,o=r.sharps>0,f=(c?a+1:o?a-1:a)%12,h=c?-1:o?1:0;s.push(Vn(i??e.notesMap.get(f),i?0:h,a))}return s}const Un=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function Kn(l){const t=(l-12)%12;return{...Un[t],semitones:t,midi:l}}function xn(l){return`${l.note.trim().charAt(0).toUpperCase()}${"♭".repeat(l.flats)}${"♯".repeat(l.sharps)}`}class ut extends _s{constructor(e,t,s){const n=t.range[0],r=t.range[1],a=new Set(t.scale.scaleNotes.map(c=>c.semitones)),i=s.chords.flatMap(c=>{const o=[],f=c.intervals.reduce((h,p)=>p.semitones>h?p.semitones:h,0);for(let h=n;h<=r-f;h+=1)if((!s.onlyScale||a.has(h%12))&&(!c.allowed||c.allowed.has(h%12))){const p=On(h,t.scale,c.intervals);o.push({...c,rootNote:p[0].note,chord:`${p[0].note}${c.suffixes[0]}`,notes:p})}return o});super(e,i,t),this.played=new Set,this.opts=s}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${xn(e)}${e.chord.toLowerCase()}`,notes:[]},s=this.current.chord===t.chord;return this.addGuessed(t,s)}guess(){const e=Array.from(this.played.values()).map(n=>Kn(n)).sort((n,r)=>n.midi-r.midi);this.played.clear();const t={chord:"",notes:e},s=this.current.notes.every(n=>e.find(r=>r.midi%12===n.midi%12));return this.addGuessed(t,s)}}const Fn={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Dt extends _s{constructor(e,t){const s=e==="keys-major"?"major":"minor";super(e,Object.keys(Fn[s]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class At extends _s{constructor(e,t){const s=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-s+1)).map((r,a)=>s+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const Xl={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},gt=Be("waiting"),ft=ht(Be(Xl),{key:"game-options"}),bt=Be(void 0),vs=Be(Wl().map(l=>({...l,selected:!0}))),be={play(...[l,e]){var c,o,f;let t;const s=me(Tt),n=me(ps),r=me(ft),a={scale:s,range:n,duplicates:r.duplicates,count:r.count};let i=[s.key,s.scale];if(l==="notes")t=new At(l,a),fe.setTarget([fe.getNote(t.current)]),(c=me(et))==null||c.noteOn(t.current);else if(l==="pitches")t=new At(l,a),fe.setTarget(),$e.setInputValue("useSound",!0),(o=me(et))==null||o.noteOn(t.current);else if(l==="keys-major"||l=="keys-minor")t=new Dt(l,a),i=[t.current,l==="keys-major"?"major":"minor"];else if(l==="chords-play"||l==="chords-write")t=new ut(l,a,e);else if(l==="chords-diatonic"){const h=Jl(s.triads).map((p,b)=>({...p,allowed:new Set([s.scaleNotes[b].semitones])}));t=new ut(l,a,{chords:h})}else throw Error("Unknown game type: "+l);return typeof t.current!="number"&&typeof t.current!="string"&&((f=me(et))==null||f.playChord(t.current.notes.map(h=>h.midi)),fe.setTarget(t.current.notes)),fe.setKeyAndScale(i[0],i[1]),fe.clearPlayed(),gt.set("waiting"),bt.set(t),t},updateState(l){gt.set(l)},setOptionValue(l,e){ft.update(t=>({...t,[l]:e}))},toggleChords(l){vs.update(e=>e.map(t=>({...t,selected:l(t)})))},nextGuess(){var e,t;const l=me(bt);l!=null&&l.ended?gt.set("ended"):l instanceof At?(l.type==="notes"?fe.setTarget([fe.getNote(l.current)]):fe.setTarget(),fe.clearPlayed(),(e=me(et))==null||e.noteOn(l.current),be.updateState("waiting"),l.startTime()):l instanceof ut?(fe.setTarget(l.current.notes),fe.clearPlayed(),(t=me(et))==null||t.playChord(l==null?void 0:l.current.notes.map(s=>s.midi)),gt.set("waiting"),l.startTime()):l instanceof Dt&&(fe.setKey(l.current),gt.set("waiting"),l.startTime())},clearGame(l=!1){const e=me(bt);e&&fe.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),l&&ft.set(Xl),bt.set(void 0),gt.set("waiting"),fe.clearScore()}};function Gs(l,e,t){const s=l.slice();return s[25]=e[t],s[27]=t,s}function Ms(l,e,t){const s=l.slice();return s[30]=e[t],s}function Vs(l,e,t){const s=l.slice();return s[8]=e[t],s}function Os(l,e,t){const s=l.slice();return s[25]=e[t],s[27]=t,s}function Us(l,e,t){const s=l.slice();return s[30]=e[t],s}function Ks(l,e,t){const s=l.slice();return s[8]=e[t],s}function $n(l){let e,t=ee(l[25].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=xs(Us(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r[0]&64){t=ee(n[25].intervals);let a;for(a=0;a<t.length;a+=1){const i=Us(n,t,a);s[a]?s[a].p(i,r):(s[a]=xs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Rn(l){let e,t=ee(l[2][l[27]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Fs(Ks(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r[0]&4){t=ee(n[2][n[27]]);let a;for(a=0;a<t.length;a+=1){const i=Ks(n,t,a);s[a]?s[a].p(i,r):(s[a]=Fs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function xs(l){let e,t=l[30].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&64&&t!==(t=n[30].interval+"")&&se(s,t)},d(n){n&&m(e)}}}function Fs(l){let e,t=l[8].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&4&&t!==(t=n[8].note+"")&&se(s,t)},d(n){n&&m(e)}}}function $s(l){let e,t,s,n,r,a,i=l[25].suffixes[0]+"",c,o,f,h,p,b,g=l[25].name+"",T,y,j,M;n=new at({props:{icon:l[25].selected?zt:Wt,width:12}});function V(){return l[21](l[25])}function C(L,P){return L[2][L[27]]&&L[2][L[27]].length>0?Rn:$n}let I=C(l),w=I(l);return{c(){e=_("li"),t=_("button"),s=_("span"),pe(n.$$.fragment),r=B(),a=_("div"),c=J(i),o=B(),f=_("li"),w.c(),p=B(),b=_("li"),T=J(g),this.h()},l(L){e=v(L,"LI",{});var P=N(e);t=v(P,"BUTTON",{class:!0});var k=N(t);s=v(k,"SPAN",{class:!0});var D=N(s);_e(n.$$.fragment,D),D.forEach(m),r=G(k),a=v(k,"DIV",{class:!0});var S=N(a);c=Q(S,i),S.forEach(m),k.forEach(m),P.forEach(m),o=G(L),f=v(L,"LI",{class:!0,title:!0});var E=N(f);w.l(E),E.forEach(m),p=G(L),b=v(L,"LI",{class:!0});var A=N(b);T=Q(A,g),A.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded"),q(s,"text-green-500",l[25].selected),q(s,"text-gray-400",!l[25].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1j99daw"),d(t,"class","flex items-center justify-center w-full select-btn svelte-1j99daw"),q(t,"hidden",l[7]),d(f,"class","intervals svelte-1j99daw"),d(f,"title",h=l[25].intervals.map(Ws).join("-")),d(b,"class","text-xs")},m(L,P){O(L,e,P),u(e,t),u(t,s),ve(n,s,null),u(t,r),u(t,a),u(a,c),O(L,o,P),O(L,f,P),w.m(f,null),O(L,p,P),O(L,b,P),u(b,T),y=!0,j||(M=R(t,"click",V),j=!0)},p(L,P){l=L;const k={};P[0]&64&&(k.icon=l[25].selected?zt:Wt),n.$set(k),(!y||P[0]&64)&&q(s,"text-green-500",l[25].selected),(!y||P[0]&64)&&q(s,"text-gray-400",!l[25].selected),(!y||P[0]&64)&&i!==(i=l[25].suffixes[0]+"")&&se(c,i),(!y||P[0]&128)&&q(t,"hidden",l[7]),I===(I=C(l))&&w?w.p(l,P):(w.d(1),w=I(l),w&&(w.c(),w.m(f,null))),(!y||P[0]&64&&h!==(h=l[25].intervals.map(Ws).join("-")))&&d(f,"title",h),(!y||P[0]&64)&&g!==(g=l[25].name+"")&&se(T,g)},i(L){y||($(n.$$.fragment,L),y=!0)},o(L){W(n.$$.fragment,L),y=!1},d(L){L&&(m(e),m(o),m(f),m(p),m(b)),ge(n),w.d(),j=!1,M()}}}function Hn(l){let e,t=ee(l[25].intervals),s=[];for(let n=0;n<t.length;n+=1)s[n]=Rs(Ms(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r[0]&32){t=ee(n[25].intervals);let a;for(a=0;a<t.length;a+=1){const i=Ms(n,t,a);s[a]?s[a].p(i,r):(s[a]=Rs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function qn(l){let e,t=ee(l[3][l[27]]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Hs(Vs(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r[0]&8){t=ee(n[3][n[27]]);let a;for(a=0;a<t.length;a+=1){const i=Vs(n,t,a);s[a]?s[a].p(i,r):(s[a]=Hs(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Rs(l){let e,t=l[30].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&32&&t!==(t=n[30].interval+"")&&se(s,t)},d(n){n&&m(e)}}}function Hs(l){let e,t=l[8].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1j99daw")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&8&&t!==(t=n[8].note+"")&&se(s,t)},d(n){n&&m(e)}}}function qs(l){let e,t,s,n,r,a,i=l[25].suffixes[0]+"",c,o,f,h,p,b,g=l[25].name+"",T,y,j,M;n=new at({props:{icon:l[25].selected?zt:Wt,width:12}});function V(){return l[22](l[25])}function C(L,P){return L[3][L[27]]&&L[3][L[27]].length>0?qn:Hn}let I=C(l),w=I(l);return{c(){e=_("li"),t=_("button"),s=_("span"),pe(n.$$.fragment),r=B(),a=_("div"),c=J(i),o=B(),f=_("li"),w.c(),p=B(),b=_("li"),T=J(g),this.h()},l(L){e=v(L,"LI",{});var P=N(e);t=v(P,"BUTTON",{class:!0});var k=N(t);s=v(k,"SPAN",{class:!0});var D=N(s);_e(n.$$.fragment,D),D.forEach(m),r=G(k),a=v(k,"DIV",{class:!0});var S=N(a);c=Q(S,i),S.forEach(m),k.forEach(m),P.forEach(m),o=G(L),f=v(L,"LI",{class:!0,title:!0});var E=N(f);w.l(E),E.forEach(m),p=G(L),b=v(L,"LI",{class:!0});var A=N(b);T=Q(A,g),A.forEach(m),this.h()},h(){d(s,"class","px-1 py-1 rounded"),q(s,"text-green-500",l[25].selected),q(s,"text-gray-400",!l[25].selected),d(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1j99daw"),d(t,"class","flex items-center justify-center w-full select-btn svelte-1j99daw"),q(t,"hidden",l[7]),d(f,"class","intervals svelte-1j99daw"),d(f,"title",h=l[25].intervals.map(Js).join("-")),d(b,"class","text-xs")},m(L,P){O(L,e,P),u(e,t),u(t,s),ve(n,s,null),u(t,r),u(t,a),u(a,c),O(L,o,P),O(L,f,P),w.m(f,null),O(L,p,P),O(L,b,P),u(b,T),y=!0,j||(M=R(t,"click",V),j=!0)},p(L,P){l=L;const k={};P[0]&32&&(k.icon=l[25].selected?zt:Wt),n.$set(k),(!y||P[0]&32)&&q(s,"text-green-500",l[25].selected),(!y||P[0]&32)&&q(s,"text-gray-400",!l[25].selected),(!y||P[0]&32)&&i!==(i=l[25].suffixes[0]+"")&&se(c,i),(!y||P[0]&128)&&q(t,"hidden",l[7]),I===(I=C(l))&&w?w.p(l,P):(w.d(1),w=I(l),w&&(w.c(),w.m(f,null))),(!y||P[0]&32&&h!==(h=l[25].intervals.map(Js).join("-")))&&d(f,"title",h),(!y||P[0]&32)&&g!==(g=l[25].name+"")&&se(T,g)},i(L){y||($(n.$$.fragment,L),y=!0)},o(L){W(n.$$.fragment,L),y=!1},d(L){L&&(m(e),m(o),m(f),m(p),m(b)),ge(n),w.d(),j=!1,M()}}}function zn(l){let e,t,s,n,r="Chords",a,i,c,o,f,h,p,b,g,T,y,j,M,V,C,I,w,L="Key",P,k,D,S,E="Scale",A,U,x,F,ae="Note",re,ne,Ce,he,Ge,xe,Me,de,ze,Ke;o=new at({props:{icon:hn,width:20}}),p=new at({props:{icon:dn,width:16}}),T=new at({props:{icon:l[4]?Ts:Ns,width:16}}),M=new at({props:{icon:Hl,width:16}});let Ne=ee(l[6]),le=[];for(let K=0;K<Ne.length;K+=1)le[K]=$s(Os(l,Ne,K));const Te=K=>W(le[K],1,1,()=>{le[K]=null});let ue=ee(l[5]),z=[];for(let K=0;K<ue.length;K+=1)z[K]=qs(Gs(l,ue,K));const te=K=>W(z[K],1,1,()=>{z[K]=null});return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=B(),i=_("div"),c=_("button"),pe(o.$$.fragment),f=B(),h=_("button"),pe(p.$$.fragment),b=B(),g=_("button"),pe(T.$$.fragment),y=B(),j=_("button"),pe(M.$$.fragment),V=B(),C=_("div"),I=_("div"),w=_("label"),w.textContent=L,P=B(),k=_("input"),D=B(),S=_("label"),S.textContent=E,A=B(),U=_("input"),x=B(),F=_("label"),F.textContent=ae,re=B(),ne=_("input"),Ce=B(),he=_("ul");for(let K=0;K<le.length;K+=1)le[K].c();Ge=B(),xe=_("ul");for(let K=0;K<z.length;K+=1)z[K].c();this.h()},l(K){e=v(K,"DIV",{class:!0});var Y=N(e);t=v(Y,"FIELDSET",{class:!0});var ie=N(t);s=v(ie,"LEGEND",{class:!0});var X=N(s);n=v(X,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1knqzl6"&&(n.textContent=r),X.forEach(m),a=G(ie),i=v(ie,"DIV",{class:!0});var we=N(i);c=v(we,"BUTTON",{class:!0});var Le=N(c);_e(o.$$.fragment,Le),Le.forEach(m),f=G(we),h=v(we,"BUTTON",{class:!0});var nt=N(h);_e(p.$$.fragment,nt),nt.forEach(m),b=G(we),g=v(we,"BUTTON",{class:!0});var We=N(g);_e(T.$$.fragment,We),We.forEach(m),y=G(we),j=v(we,"BUTTON",{class:!0});var Ve=N(j);_e(M.$$.fragment,Ve),Ve.forEach(m),we.forEach(m),V=G(ie),C=v(ie,"DIV",{class:!0});var Ie=N(C);I=v(Ie,"DIV",{class:!0});var Ee=N(I);w=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(w)!=="svelte-14m38zf"&&(w.textContent=L),P=G(Ee),k=v(Ee,"INPUT",{class:!0,id:!0}),D=G(Ee),S=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(S)!=="svelte-bxhcb0"&&(S.textContent=E),A=G(Ee),U=v(Ee,"INPUT",{class:!0,id:!0}),x=G(Ee),F=v(Ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(F)!=="svelte-dmbfli"&&(F.textContent=ae),re=G(Ee),ne=v(Ee,"INPUT",{class:!0,id:!0}),Ee.forEach(m),Ce=G(Ie),he=v(Ie,"UL",{class:!0});var It=N(he);for(let Oe=0;Oe<le.length;Oe+=1)le[Oe].l(It);It.forEach(m),Ge=G(Ie),xe=v(Ie,"UL",{class:!0});var kt=N(xe);for(let Oe=0;Oe<z.length;Oe+=1)z[Oe].l(kt);kt.forEach(m),Ie.forEach(m),ie.forEach(m),Y.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(c,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),q(c,"hidden",l[7]),d(h,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(h,"hidden",l[7]),d(g,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(g,"hidden",l[7]),d(j,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(j,"hidden",l[7]),d(i,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),d(w,"class","mr-4 font-bold svelte-1j99daw"),d(w,"for","scale-key"),d(k,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(k,"id","scale-key"),k.value=l[0],d(S,"class","font-bold svelte-1j99daw"),d(S,"for","scale-key"),d(U,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(U,"id","scale-key"),U.value="Major",U.disabled=!0,d(F,"class","font-bold svelte-1j99daw"),d(F,"for","scale-key"),d(ne,"class","bg-gray-100 w-16 px-1 rounded svelte-1j99daw"),d(ne,"id","scale-key"),ne.value=l[1],d(I,"class","flex mb-2 input svelte-1j99daw"),d(he,"class","chord-list w-full svelte-1j99daw"),d(xe,"class","chord-list w-full svelte-1j99daw"),d(C,"class","body svelte-1j99daw"),q(C,"hidden",l[7]),d(t,"class","flex flex-col relative rounded border-2 px-4 py-2 my-4 text-sm svelte-1j99daw"),q(t,"collapsed",l[7]),d(e,"class",Me=Ae(`${l[18].class||""}`)+" svelte-1j99daw")},m(K,Y){O(K,e,Y),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,c),ve(o,c,null),u(i,f),u(i,h),ve(p,h,null),u(i,b),u(i,g),ve(T,g,null),u(i,y),u(i,j),ve(M,j,null),u(t,V),u(t,C),u(C,I),u(I,w),u(I,P),u(I,k),u(I,D),u(I,S),u(I,A),u(I,U),u(I,x),u(I,F),u(I,re),u(I,ne),u(C,Ce),u(C,he);for(let ie=0;ie<le.length;ie+=1)le[ie]&&le[ie].m(he,null);u(C,Ge),u(C,xe);for(let ie=0;ie<z.length;ie+=1)z[ie]&&z[ie].m(xe,null);de=!0,ze||(Ke=[R(n,"click",l[10]),R(c,"click",l[14]),R(h,"click",l[15]),R(g,"click",l[16]),R(j,"click",l[17]),R(k,"input",l[11]),R(ne,"input",l[12])],ze=!0)},p(K,Y){(!de||Y[0]&128)&&q(c,"hidden",K[7]),(!de||Y[0]&128)&&q(h,"hidden",K[7]);const ie={};if(Y[0]&16&&(ie.icon=K[4]?Ts:Ns),T.$set(ie),(!de||Y[0]&128)&&q(g,"hidden",K[7]),(!de||Y[0]&128)&&q(j,"hidden",K[7]),(!de||Y[0]&1&&k.value!==K[0])&&(k.value=K[0]),(!de||Y[0]&2&&ne.value!==K[1])&&(ne.value=K[1]),Y[0]&8388){Ne=ee(K[6]);let X;for(X=0;X<Ne.length;X+=1){const we=Os(K,Ne,X);le[X]?(le[X].p(we,Y),$(le[X],1)):(le[X]=$s(we),le[X].c(),$(le[X],1),le[X].m(he,null))}for(tt(),X=Ne.length;X<le.length;X+=1)Te(X);st()}if(Y[0]&8360){ue=ee(K[5]);let X;for(X=0;X<ue.length;X+=1){const we=Gs(K,ue,X);z[X]?(z[X].p(we,Y),$(z[X],1)):(z[X]=qs(we),z[X].c(),$(z[X],1),z[X].m(xe,null))}for(tt(),X=ue.length;X<z.length;X+=1)te(X);st()}(!de||Y[0]&128)&&q(C,"hidden",K[7]),(!de||Y[0]&128)&&q(t,"collapsed",K[7]),(!de||Y[0]&262144&&Me!==(Me=Ae(`${K[18].class||""}`)+" svelte-1j99daw"))&&d(e,"class",Me)},i(K){if(!de){$(o.$$.fragment,K),$(p.$$.fragment,K),$(T.$$.fragment,K),$(M.$$.fragment,K);for(let Y=0;Y<Ne.length;Y+=1)$(le[Y]);for(let Y=0;Y<ue.length;Y+=1)$(z[Y]);de=!0}},o(K){W(o.$$.fragment,K),W(p.$$.fragment,K),W(T.$$.fragment,K),W(M.$$.fragment,K),le=le.filter(Boolean);for(let Y=0;Y<le.length;Y+=1)W(le[Y]);z=z.filter(Boolean);for(let Y=0;Y<z.length;Y+=1)W(z[Y]);de=!1},d(K){K&&m(e),ge(o),ge(p),ge(T),ge(M),je(le,K),je(z,K),ze=!1,rt(Ke)}}}let zs="Major";const Ws=l=>l.interval,Js=l=>l.interval;function Wn(l,e,t){let s,n,r,a,i,c;oe(l,vs,S=>t(20,i=S));let o="C",f=Jt(o,zs),h="",p,b=[],g=[];const T=ht(Be(!0),{key:"chords-hidden"});oe(l,T,S=>t(7,c=S));function y(){T.update(S=>!S)}function j(){const S=p&&60+p.semitones;if("err"in f||!S)t(2,b=[]),t(3,g=[]);else{const E=f.data;t(2,b=n.map(A=>os(S,E,A.intervals))),t(3,g=r.map(A=>os(S,E,A.intervals)))}}function M({currentTarget:{value:S}}){t(0,o=`${S.charAt(0).toUpperCase()}${S.charAt(1).toLowerCase()}`),f=Jt(o,zs),j()}function V({currentTarget:{value:S}}){t(1,h=`${S.charAt(0).toUpperCase()}${S.charAt(1).toLowerCase()}`),t(8,p=Yl(h)),j()}function C(S){be.toggleChords(E=>E.name===S.name?!E.selected:E.selected)}function I(){const S=A=>A.suffixes[0]==="maj"||A.suffixes[0]==="m",E=i.filter(S).every(A=>A.selected);be.toggleChords(A=>S(A)?!E:A.selected)}function w(){const S=A=>A.suffixes[0]==="maj7"||A.suffixes[0]==="m7"||A.suffixes[0]==="7"||A.suffixes[0]==="dim7"||A.suffixes[0]==="aug7",E=i.filter(S).every(A=>A.selected);be.toggleChords(A=>S(A)?!E:A.selected)}function L(){be.toggleChords(S=>!a)}function P(){be.toggleChords(S=>!0)}const k=S=>C(S),D=S=>C(S);return l.$$set=S=>{t(18,e=ye(ye({},e),ke(S)))},l.$$.update=()=>{l.$$.dirty[0]&1048576&&t(19,s=i),l.$$.dirty[0]&524288&&t(6,n=s.filter((S,E)=>E<s.length/2)),l.$$.dirty[0]&524288&&t(5,r=s.filter((S,E)=>E>=s.length/2)),l.$$.dirty[0]&524288&&t(4,a=s.every(S=>S.selected))},e=ke(e),[o,h,b,g,a,r,n,c,p,T,y,M,V,C,I,w,L,P,e,s,i,k,D]}class Jn extends Re{constructor(e){super(),He(this,e,Wn,zn,qe,{},null,[-1,-1])}}function Qs(l,e,t){const s=l.slice();return s[10]=e[t],s}function Qn(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){O(t,e,s)},p:ce,d(t){t&&m(e)}}}function Yn(l){let e,t,s="Played:",n,r=ee(l[2]),a=[];for(let i=0;i<r.length;i+=1)a[i]=Ys(Qs(l,r,i));return{c(){e=_("div"),t=_("span"),t.textContent=s,n=B();for(let i=0;i<a.length;i+=1)a[i].c()},l(i){e=v(i,"DIV",{});var c=N(e);t=v(c,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1g6xxhn"&&(t.textContent=s),n=G(c);for(let o=0;o<a.length;o+=1)a[o].l(c);c.forEach(m)},m(i,c){O(i,e,c),u(e,t),u(e,n);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null)},p(i,c){if(c&4){r=ee(i[2]);let o;for(o=0;o<r.length;o+=1){const f=Qs(i,r,o);a[o]?a[o].p(f,c):(a[o]=Ys(f),a[o].c(),a[o].m(e,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},d(i){i&&m(e),je(a,i)}}}function Xn(l){let e,t,s="Result:",n,r,a,i=l[0].correct+"",c,o,f=l[0].sampled.length+"",h,p,b,g,T,y=l[0].avgTime+"",j,M;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=B(),r=_("span"),a=J("["),c=J(i),o=J(" / "),h=J(f),p=J("]"),b=B(),g=_("span"),T=J("avg "),j=J(y),M=J("s"),this.h()},l(V){e=v(V,"DIV",{class:!0});var C=N(e);t=v(C,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1eqfbgx"&&(t.textContent=s),n=G(C),r=v(C,"SPAN",{class:!0});var I=N(r);a=Q(I,"["),c=Q(I,i),o=Q(I," / "),h=Q(I,f),p=Q(I,"]"),I.forEach(m),b=G(C),g=v(C,"SPAN",{});var w=N(g);T=Q(w,"avg "),j=Q(w,y),M=Q(w,"s"),w.forEach(m),C.forEach(m),this.h()},h(){d(r,"class","mx-2"),d(e,"class","flex")},m(V,C){O(V,e,C),u(e,t),u(e,n),u(e,r),u(r,a),u(r,c),u(r,o),u(r,h),u(r,p),u(e,b),u(e,g),u(g,T),u(g,j),u(g,M)},p(V,C){C&1&&i!==(i=V[0].correct+"")&&se(c,i),C&1&&f!==(f=V[0].sampled.length+"")&&se(h,f),C&1&&y!==(y=V[0].avgTime+"")&&se(j,y)},d(V){V&&m(e)}}}function Zn(l){var L,P,k,D;let e,t,s="Target:",n,r,a=((L=l[0].latestGuess.target)==null?void 0:L.chord)+"",i,c,o,f=((P=l[0].latestGuess.target)==null?void 0:P.notes.map(Xs).join(" "))+"",h,p,b,g="Guessed:",T,y,j=((k=l[0].latestGuess.guessed)==null?void 0:k.chord)+"",M,V,C,I=((D=l[0].latestGuess.guessed)==null?void 0:D.notes.map(Zs).join(" "))+"",w;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=B(),r=_("span"),i=J(a),c=B(),o=_("span"),h=J(f),p=B(),b=_("span"),b.textContent=g,T=B(),y=_("span"),M=J(j),V=B(),C=_("span"),w=J(I),this.h()},l(S){e=v(S,"DIV",{class:!0});var E=N(e);t=v(E,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=G(E),r=v(E,"SPAN",{});var A=N(r);i=Q(A,a),A.forEach(m),c=G(E),o=v(E,"SPAN",{});var U=N(o);h=Q(U,f),U.forEach(m),p=G(E),b=v(E,"SPAN",{"data-svelte-h":!0}),Z(b)!=="svelte-104368"&&(b.textContent=g),T=G(E),y=v(E,"SPAN",{});var x=N(y);M=Q(x,j),x.forEach(m),V=G(E),C=v(E,"SPAN",{});var F=N(C);w=Q(F,I),F.forEach(m),E.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(S,E){O(S,e,E),u(e,t),u(e,n),u(e,r),u(r,i),u(e,c),u(e,o),u(o,h),u(e,p),u(e,b),u(e,T),u(e,y),u(y,M),u(e,V),u(e,C),u(C,w)},p(S,E){var A,U,x,F;E&1&&a!==(a=((A=S[0].latestGuess.target)==null?void 0:A.chord)+"")&&se(i,a),E&1&&f!==(f=((U=S[0].latestGuess.target)==null?void 0:U.notes.map(Xs).join(" "))+"")&&se(h,f),E&1&&j!==(j=((x=S[0].latestGuess.guessed)==null?void 0:x.chord)+"")&&se(M,j),E&1&&I!==(I=((F=S[0].latestGuess.guessed)==null?void 0:F.notes.map(Zs).join(" "))+"")&&se(w,I)},d(S){S&&m(e)}}}function ea(l){let e,t,s="Target:",n,r,a=l[0].latestGuess.target+"",i,c,o,f,h,p="Guessed:",b,g,T=l[0].latestGuess.guessed+"",y,j,M;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=B(),r=_("span"),i=J(a),c=B(),o=_("span"),f=B(),h=_("span"),h.textContent=p,b=B(),g=_("span"),y=J(T),j=B(),M=_("span"),this.h()},l(V){e=v(V,"DIV",{class:!0});var C=N(e);t=v(C,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=G(C),r=v(C,"SPAN",{});var I=N(r);i=Q(I,a),I.forEach(m),c=G(C),o=v(C,"SPAN",{}),N(o).forEach(m),f=G(C),h=v(C,"SPAN",{"data-svelte-h":!0}),Z(h)!=="svelte-104368"&&(h.textContent=p),b=G(C),g=v(C,"SPAN",{});var w=N(g);y=Q(w,T),w.forEach(m),j=G(C),M=v(C,"SPAN",{}),N(M).forEach(m),C.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(V,C){O(V,e,C),u(e,t),u(e,n),u(e,r),u(r,i),u(e,c),u(e,o),u(e,f),u(e,h),u(e,b),u(e,g),u(g,y),u(e,j),u(e,M)},p(V,C){C&1&&a!==(a=V[0].latestGuess.target+"")&&se(i,a),C&1&&T!==(T=V[0].latestGuess.guessed+"")&&se(y,T)},d(V){V&&m(e)}}}function ta(l){let e,t,s="Target:",n,r,a=Ye(St(l[0].latestGuess.target||0))+"",i,c,o,f,h,p="Guessed:",b,g,T=Ye(St(l[0].latestGuess.guessed||0))+"",y,j,M;return{c(){e=_("div"),t=_("span"),t.textContent=s,n=B(),r=_("span"),i=J(a),c=B(),o=_("span"),f=B(),h=_("span"),h.textContent=p,b=B(),g=_("span"),y=J(T),j=B(),M=_("span"),this.h()},l(V){e=v(V,"DIV",{class:!0});var C=N(e);t=v(C,"SPAN",{"data-svelte-h":!0}),Z(t)!=="svelte-1s5czg5"&&(t.textContent=s),n=G(C),r=v(C,"SPAN",{});var I=N(r);i=Q(I,a),I.forEach(m),c=G(C),o=v(C,"SPAN",{}),N(o).forEach(m),f=G(C),h=v(C,"SPAN",{"data-svelte-h":!0}),Z(h)!=="svelte-104368"&&(h.textContent=p),b=G(C),g=v(C,"SPAN",{});var w=N(g);y=Q(w,T),w.forEach(m),j=G(C),M=v(C,"SPAN",{}),N(M).forEach(m),C.forEach(m),this.h()},h(){d(e,"class","guessed svelte-1lxfpqs")},m(V,C){O(V,e,C),u(e,t),u(e,n),u(e,r),u(r,i),u(e,c),u(e,o),u(e,f),u(e,h),u(e,b),u(e,g),u(g,y),u(e,j),u(e,M)},p(V,C){C&1&&a!==(a=Ye(St(V[0].latestGuess.target||0))+"")&&se(i,a),C&1&&T!==(T=Ye(St(V[0].latestGuess.guessed||0))+"")&&se(y,T)},d(V){V&&m(e)}}}function Ys(l){let e,t=Ye(l[10])+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","mx-1")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r&4&&t!==(t=Ye(n[10])+"")&&se(s,t)},d(n){n&&m(e)}}}function sa(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){O(t,e,s)},p:ce,d(t){t&&m(e)}}}function la(l){let e,t="Next",s,n,r="Autoplay",a,i;return{c(){e=_("button"),e.textContent=t,s=B(),n=_("button"),n.textContent=r,this.h()},l(c){e=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1nvnoba"&&(e.textContent=t),s=G(c),n=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1cfj1sl"&&(n.textContent=r),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(c,o){O(c,e,o),O(c,s,o),O(c,n,o),a||(i=[R(e,"click",l[4]),R(n,"click",l[5])],a=!0)},p:ce,d(c){c&&(m(e),m(s),m(n)),a=!1,rt(i)}}}function na(l){let e,t="Stop autoplay",s,n;return{c(){e=_("button"),e.textContent=t,this.h()},l(r){e=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){d(e,"class","btn primary")},m(r,a){O(r,e,a),s||(n=R(e,"click",l[9]),s=!0)},p:ce,d(r){r&&m(e),s=!1,n()}}}function aa(l){let e,t="Try Again",s,n,r="Clear",a,i;return{c(){e=_("button"),e.textContent=t,s=B(),n=_("button"),n.textContent=r,this.h()},l(c){e=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-y911ux"&&(e.textContent=t),s=G(c),n=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-11mnk9v"&&(n.textContent=r),this.h()},h(){d(e,"class","btn primary"),d(n,"class","btn primary")},m(c,o){O(c,e,o),O(c,s,o),O(c,n,o),a||(i=[R(e,"click",l[6]),R(n,"click",l[7])],a=!0)},p:ce,d(c){c&&(m(e),m(s),m(n)),a=!1,rt(i)}}}function ra(l){let e,t,s,n;function r(h,p){return h[0]instanceof At&&(h[1]==="correct"||h[1]==="wrong")?ta:h[0]instanceof Dt&&(h[1]==="correct"||h[1]==="wrong")?ea:h[0]instanceof ut&&(h[1]==="correct"||h[1]==="wrong")?Zn:h[0]&&h[1]==="ended"?Xn:h[2].length>0?Yn:Qn}let a=r(l),i=a(l);function c(h,p){return h[0]&&h[1]==="ended"?aa:h[0]&&h[3].autoplay?na:h[0]?la:sa}let o=c(l),f=o(l);return{c(){e=_("div"),i.c(),s=B(),n=_("div"),f.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var p=N(e);i.l(p),p.forEach(m),s=G(h),n=v(h,"DIV",{class:!0});var b=N(n);f.l(b),b.forEach(m),this.h()},h(){d(e,"class",t=Ae(`${l[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),d(n,"class","mt-2 h-8")},m(h,p){O(h,e,p),i.m(e,null),O(h,s,p),O(h,n,p),f.m(n,null)},p(h,[p]){a===(a=r(h))&&i?i.p(h,p):(i.d(1),i=a(h),i&&(i.c(),i.m(e,null))),p&256&&t!==(t=Ae(`${h[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&d(e,"class",t),o===(o=c(h))&&f?f.p(h,p):(f.d(1),f=o(h),f&&(f.c(),f.m(n,null)))},i:ce,o:ce,d(h){h&&(m(e),m(s),m(n)),i.d(),f.d()}}}const Xs=l=>l.note,Zs=l=>l.note;function ia(l,e,t){let s,n,r;oe(l,gt,p=>t(1,s=p)),oe(l,vt,p=>t(2,n=p)),oe(l,ft,p=>t(3,r=p));let{game:a}=e;function i(){be.nextGuess()}function c(){be.setOptionValue("autoplay",!0),be.nextGuess()}function o(){a instanceof ut?be.play(a.type,a.opts):a&&be.play(a.type,void 0)}function f(){be.clearGame()}const h=()=>be.setOptionValue("autoplay",!1);return l.$$set=p=>{t(8,e=ye(ye({},e),ke(p))),"game"in p&&t(0,a=p.game)},e=ke(e),[a,s,n,r,i,c,o,f,e,h]}class oa extends Re{constructor(e){super(),He(this,e,ia,ra,qe,{game:0})}}function el(l){let e;return{c(){e=_("li"),this.h()},l(t){e=v(t,"LI",{class:!0}),N(e).forEach(m),this.h()},h(){d(e,"class","m-[0.175rem] mr-0")},m(t,s){O(t,e,s)},d(t){t&&m(e)}}}function tl(l){let e;return{c(){e=_("div"),this.h()},l(t){e=v(t,"DIV",{class:!0}),N(e).forEach(m),this.h()},h(){d(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-jvhfju")},m(t,s){O(t,e,s)},d(t){t&&m(e)}}}function sl(l){let e,t=l[0].note.note+"",s;return{c(){e=_("div"),s=J(t),this.h()},l(n){e=v(n,"DIV",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","absolute top-0 left-0")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r&1&&t!==(t=n[0].note.note+"")&&se(s,t)},d(n){n&&m(e)}}}function ca(l){let e,t,s,n,r,a,i=l[0].key+"",c,o,f,h,p=l[0].key==="{enter}"&&el(),b=l[0].key==="{enter}"&&tl(),g=l[0].note&&sl(l);return{c(){p&&p.c(),e=B(),t=_("li"),s=_("button"),b&&b.c(),n=B(),g&&g.c(),r=B(),a=_("div"),c=J(i),this.h()},l(T){p&&p.l(T),e=G(T),t=v(T,"LI",{class:!0});var y=N(t);s=v(y,"BUTTON",{class:!0});var j=N(s);b&&b.l(j),n=G(j),g&&g.l(j),r=G(j),a=v(j,"DIV",{});var M=N(a);c=Q(M,i),M.forEach(m),j.forEach(m),y.forEach(m),this.h()},h(){d(s,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex items-center justify-center svelte-jvhfju"),d(t,"class",o=Ae(`${l[1].class||""} m-[0.175rem] ${ll(l[0].size)}`)+" svelte-jvhfju"),q(t,"enter",l[0].key==="{enter}")},m(T,y){p&&p.m(T,y),O(T,e,y),O(T,t,y),u(t,s),b&&b.m(s,null),u(s,n),g&&g.m(s,null),u(s,r),u(s,a),u(a,c),f||(h=R(s,"click",l[2]),f=!0)},p(T,[y]){T[0].key==="{enter}"?p||(p=el(),p.c(),p.m(e.parentNode,e)):p&&(p.d(1),p=null),T[0].key==="{enter}"?b||(b=tl(),b.c(),b.m(s,n)):b&&(b.d(1),b=null),T[0].note?g?g.p(T,y):(g=sl(T),g.c(),g.m(s,r)):g&&(g.d(1),g=null),y&1&&i!==(i=T[0].key+"")&&se(c,i),y&3&&o!==(o=Ae(`${T[1].class||""} m-[0.175rem] ${ll(T[0].size)}`)+" svelte-jvhfju")&&d(t,"class",o),y&3&&q(t,"enter",T[0].key==="{enter}")},i:ce,o:ce,d(T){T&&(m(e),m(t)),p&&p.d(T),b&&b.d(),g&&g.d(),f=!1,h()}}}function ll(l){return l&&Number.isInteger(l)?`size-${l}`:l?`size-${Math.floor(l)}-${Math.floor(l*10)-Math.floor(l)*10}`:"size-1"}function ua(l,e,t){let{value:s}=e;function n(r){ds.call(this,l,r)}return l.$$set=r=>{t(1,e=ye(ye({},e),ke(r))),"value"in r&&t(0,s=r.value)},e=ke(e),[s,e,n]}class fa extends Re{constructor(e){super(),He(this,e,ua,ca,qe,{value:0})}}const ha={layout:{default:["§ 1 2 3 4 5 6 7 8 9 0 + ´ {bksp}","{tab} q w e r t y u i o p å ¨ {enter}","{lock} a s d f g h j k l ö ä '","{shift} < z x c v b n m , . - {shift}",".com @ {space}"],shift:['° ! " # $ % & / ( ) = ? ` {bksp}',"{tab} Q W E R T Y U I O P Å ^","{lock} A S D F G H J K L Ö Ä * {enter}","{shift} > Z X C V B N M ; : _ {shift}",".com @ {space}"]}},da=[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Enter"],["Capslock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"]];function ma(l,e){return l[1].forEach((t,s)=>{let n;s===2?n={...e[1]}:s===3?n={...e[3]}:s===5?n={...e[6]}:s===6?n={...e[8]}:s===7?n={...e[10]}:s===9?(n={...e[1]},n.semitones+=12):s===10&&(n={...e[3]},n.semitones+=12),l[1][s].note=n}),l[2].forEach((t,s)=>{let n;s===1?n={...e[0]}:s===2?n={...e[2]}:s===3?n={...e[4]}:s===4?n={...e[5]}:s===5?n={...e[7]}:s===6?n={...e[9]}:s===7?n={...e[11]}:s===8?(n={...e[0]},n.semitones+=12):s===9?(n={...e[2]},n.semitones+=12):s===10?(n={...e[4]},n.semitones+=12):s===11?(n={...e[5]},n.semitones+=12):s===12&&(n={...e[7]},n.semitones+=12),l[2][s].note=n}),l}class pa{constructor(e={layout:"middle-row"}){this.language="en",this.rows=[[],[],[],[]],this.opts=e,this.setLayout(ha)}setOptions(e){this.opts={...this.opts,...e}}setLayout(e){const t=[[],[],[],[]];e.layout.default.forEach((s,n)=>{s.split(" ").forEach((r,a)=>{n<4&&t[n].push({key:r,code:da[n][a]})})}),this.rows=t}setNotes(e){this.opts.layout==="middle-row"&&(this.rows=ma(this.rows,e))}}const gs=/^[a-gA-G]$/,Zl=/^[♭Bb#♯sS]$/,_a=/^[0-9]$/;let H="",ct;const va=ht(Be({layout:"middle-row"}),{key:"keyboard-options"}),en=Nt([Tt,va],([l,e])=>{const t=new pa(e);return t.setNotes(Array.from(l.notesMap.values())),t}),ga=Nt(en,l=>l.rows.map(e=>e.map((t,s)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&s===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t}))),Xt=Nt(en,l=>new Map([...l.rows[0].map(e=>[e.code,e]),...l.rows[1].map(e=>[e.code,e]),...l.rows[2].map(e=>[e.code,e]),...l.rows[3].map(e=>[e.code,e])])),ba=Nt(Xt,l=>Array.from(l.values()).map(e=>e.note).filter(e=>e!==void 0));function ya(l,e){const{useHotkeys:t}=me(lt),s=me(Xt).get(l);if(t&&H.length===0&&s&&s.note)return H="",{e:"guessed-key",data:s.note.note};if(!t&&H.length===0&&gs.test(e))return H+=e.toUpperCase(),{e:"string",data:H};if(!t&&H.length>0&&Zl.test(e))return e==="b"||e==="B"?H+="♭":H+="♯",{e:"string",data:H};if(l==="Backspace"&&H.length>0)return H=H.slice(0,-1),{e:"string",data:H};if(l==="Enter"&&H.length>0){const n=H;return H="",{e:"guessed-key",data:n}}return!1}function ka(l,e,t){if(l==="Enter"&&H.length>0){const s={note:"",flats:0,sharps:0,chord:""};for(let n=0;n<H.length;n+=1)n===0?s.note+=H[n]:s.chord.length>0?s.chord+=H[n].toLowerCase():H[n]==="♭"?(s.note+=H[n],s.flats+=1):H[n]==="♯"?(s.note+=H[n],s.sharps+=1):s.chord+=H[n].toLowerCase();return H="",{e:"guessed-chord",data:s}}else{if(l==="Backspace"&&H.length>0)return H=H.slice(0,-1),{e:"string",data:H};if(H.length===0&&gs.test(e))return H+=e.toUpperCase(),{e:"string",data:H};if(H.length>0&&e.length===1)return H.length===1&&(e==="b"||e==="B")?H+="♭":H.length===1&&e==="#"?H+="♯":H+=e,{e:"string",data:H}}return!1}function Ca(l,e,t){const{useAutoOctave:s,useHotkeys:n}=me(lt);let r;const i=me(Xt).get(l),c=(i==null?void 0:i.key)||"";let o=!1;if(!ct&&n&&(i!=null&&i.note)?(ct=i.note,s&&(r=Ql(me(Yt)[0].midi)),o="note"):!n&&H.length===0&&gs.test(e)?(H+=e.toUpperCase(),o="input"):!n&&H.length>0&&Zl.test(e)&&(e==="b"||e==="B"?H+="♭":H+="♯",o="input"),_a.test(c))try{r=parseInt(c)}catch{}if(ct&&r!==void 0){const f=ct.semitones+(r+1+(t?1:0))*12;return ct=void 0,{e:"guessed-note",data:f}}else if(H&&r!==void 0){const f=tn.findNote(H),h=f?f.semitones+(r+1)*12:void 0;return ct=void 0,H="",h!==void 0?{e:"guessed-note",data:h}:{e:"string",data:H}}else if(l==="Backspace"&&(ct||H.length>0))return ct=void 0,H=H.slice(0,-1),{e:"string",data:H};return o==="note"?{e:"note",data:ct}:o==="input"?{e:"string",data:H}:!1}const tn={findNote(l){return me(ba).find(e=>{if(e.note.charAt(0)===l.charAt(0)){const t=l.slice(1).split("").reduce((s,n)=>s+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},handleInput(l,e,t=!1){const s=me(bt);return s instanceof Dt?ya(l,e.toUpperCase()):s instanceof ut&&s.type==="chords-write"?ka(l,e):me(lt).useKeyboard?Ca(l,e.toUpperCase(),t):!1}};function nl(l,e,t){const s=l.slice();return s[7]=e[t],s[9]=t,s}function al(l,e,t){const s=l.slice();return s[10]=e[t],s}function rl(l){let e,t;return e=new fa({props:{value:l[10]}}),{c(){pe(e.$$.fragment)},l(s){_e(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},p(s,n){const r={};n&4&&(r.value=s[10]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function il(l){let e,t,s,n,r=ee(l[7]),a=[];for(let c=0;c<r.length;c+=1)a[c]=rl(al(l,r,c));const i=c=>W(a[c],1,1,()=>{a[c]=null});return{c(){e=_("li"),t=B();for(let c=0;c<a.length;c+=1)a[c].c();s=De(),this.h()},l(c){e=v(c,"LI",{class:!0}),N(e).forEach(m),t=G(c);for(let o=0;o<a.length;o+=1)a[o].l(c);s=De(),this.h()},h(){d(e,"class","col-span-2 svelte-cgcsqn")},m(c,o){O(c,e,o),O(c,t,o);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(c,o);O(c,s,o),n=!0},p(c,o){if(o&4){r=ee(c[7]);let f;for(f=0;f<r.length;f+=1){const h=al(c,r,f);a[f]?(a[f].p(h,o),$(a[f],1)):(a[f]=rl(h),a[f].c(),$(a[f],1),a[f].m(s.parentNode,s))}for(tt(),f=r.length;f<a.length;f+=1)i(f);st()}},i(c){if(!n){for(let o=0;o<r.length;o+=1)$(a[o]);n=!0}},o(c){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)W(a[o]);n=!1},d(c){c&&(m(e),m(t),m(s)),je(a,c)}}}function wa(l){let e,t,s,n,r="Middle-row",a,i,c,o,f,h="Two rows",p,b,g,T,y,j,M,V,C,I=ee(l[2]),w=[];for(let P=0;P<I.length;P+=1)w[P]=il(nl(l,I,P));const L=P=>W(w[P],1,1,()=>{w[P]=null});return{c(){e=_("div"),t=_("div"),s=_("div"),n=_("label"),n.textContent=r,a=B(),i=_("input"),c=B(),o=_("div"),f=_("label"),f.textContent=h,p=B(),b=_("input"),g=B(),T=_("div"),y=_("ul");for(let P=0;P<w.length;P+=1)w[P].c();this.h()},l(P){e=v(P,"DIV",{class:!0});var k=N(e);t=v(k,"DIV",{class:!0});var D=N(t);s=v(D,"DIV",{class:!0});var S=N(s);n=v(S,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1ssbs6o"&&(n.textContent=r),a=G(S),i=v(S,"INPUT",{class:!0,id:!0,type:!0}),S.forEach(m),c=G(D),o=v(D,"DIV",{class:!0});var E=N(o);f=v(E,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(f)!=="svelte-3aw9ul"&&(f.textContent=h),p=G(E),b=v(E,"INPUT",{class:!0,id:!0,type:!0}),E.forEach(m),D.forEach(m),g=G(k),T=v(k,"DIV",{class:!0});var A=N(T);y=v(A,"UL",{class:!0});var U=N(y);for(let x=0;x<w.length;x+=1)w[x].l(U);U.forEach(m),A.forEach(m),k.forEach(m),this.h()},h(){d(n,"class","font-bold mr-4"),d(n,"for","middle-row"),d(i,"class","h-[20px]"),d(i,"id","middle-row"),d(i,"type","checkbox"),d(s,"class","my-1 flex items-center justify-between mr-12"),d(f,"class","font-bold mr-4"),d(f,"for","two-rows"),d(b,"class","h-[20px]"),d(b,"id","two-rows"),d(b,"type","checkbox"),d(o,"class","my-1 flex items-center justify-between mr-12"),d(t,"class","flex"),d(y,"class","keyboard svelte-cgcsqn"),d(T,"class","flex flex-col gap-1.5"),d(e,"class",j=Ae(`${l[3].class||""} `)+" svelte-cgcsqn")},m(P,k){O(P,e,k),u(e,t),u(t,s),u(s,n),u(s,a),u(s,i),i.checked=l[0],u(t,c),u(t,o),u(o,f),u(o,p),u(o,b),b.checked=l[1],u(e,g),u(e,T),u(T,y);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(y,null);M=!0,V||(C=[R(i,"change",l[4]),R(b,"change",l[5])],V=!0)},p(P,[k]){if(k&1&&(i.checked=P[0]),k&2&&(b.checked=P[1]),k&4){I=ee(P[2]);let D;for(D=0;D<I.length;D+=1){const S=nl(P,I,D);w[D]?(w[D].p(S,k),$(w[D],1)):(w[D]=il(S),w[D].c(),$(w[D],1),w[D].m(y,null))}for(tt(),D=I.length;D<w.length;D+=1)L(D);st()}(!M||k&8&&j!==(j=Ae(`${P[3].class||""} `)+" svelte-cgcsqn"))&&d(e,"class",j)},i(P){if(!M){for(let k=0;k<I.length;k+=1)$(w[k]);M=!0}},o(P){w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)W(w[k]);M=!1},d(P){P&&m(e),je(w,P),V=!1,rt(C)}}}function Ea(l,e,t){let s,n;oe(l,Xt,o=>t(6,s=o)),oe(l,ga,o=>t(2,n=o)),Kl(()=>{console.log(s)});let r=!0,a=!1;function i(){r=this.checked,t(0,r)}function c(){a=this.checked,t(1,a)}return l.$$set=o=>{t(3,e=ye(ye({},e),ke(o)))},e=ke(e),[r,a,n,e,i,c]}class Sa extends Re{constructor(e){super(),He(this,e,Ea,wa,qe,{})}}function ol(l){let e,t;return e=new Sa({props:{class:"mt-4"}}),{c(){pe(e.$$.fragment)},l(s){_e(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function Aa(l){let e,t,s,n,r="I/O",a,i,c,o,f="Device",h,p,b,g,T,y,j="Prompt",M,V,C="Disable",I,w,L,P,k="Sound",D,S,E,A,U,x,F="Fixed velocity",ae,re,ne,Ce,he,Ge,xe="Keyboard",Me,de,ze,Ke,Ne,le,Te="Hotkeys",ue,z,te,K,Y,ie,X="Auto-octave",we,Le,nt,We,Ve,Ie,Ee,It="Set keys",kt,Oe,dt,bs="Fade timeout",Zt,it,es,mt,Lt,ts,pt,ys="Reset all",ss,Pt,Je,ls,ks,Pe=l[2]&&ol();return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=B(),i=_("div"),c=_("div"),o=_("label"),o.textContent=f,h=B(),p=_("input"),g=B(),T=_("div"),y=_("button"),y.textContent=j,M=B(),V=_("button"),V.textContent=C,I=B(),w=_("div"),L=_("div"),P=_("label"),P.textContent=k,D=B(),S=_("input"),A=B(),U=_("div"),x=_("label"),x.textContent=F,ae=B(),re=_("input"),ne=B(),Ce=_("div"),he=_("div"),Ge=_("label"),Ge.textContent=xe,Me=B(),de=_("input"),Ke=B(),Ne=_("div"),le=_("label"),le.textContent=Te,ue=B(),z=_("input"),K=B(),Y=_("div"),ie=_("label"),ie.textContent=X,we=B(),Le=_("input"),We=B(),Ve=_("div"),Ie=_("div"),Ee=_("button"),Ee.textContent=It,kt=B(),Oe=_("div"),dt=_("label"),dt.textContent=bs,Zt=B(),it=_("input"),es=B(),mt=_("div"),Lt=_("div"),ts=B(),pt=_("button"),pt.textContent=ys,ss=B(),Pe&&Pe.c(),this.h()},l(Se){e=v(Se,"DIV",{class:!0});var Ue=N(e);t=v(Ue,"FIELDSET",{class:!0});var ot=N(t);s=v(ot,"LEGEND",{class:!0});var Cs=N(s);n=v(Cs,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1jbbsti"&&(n.textContent=r),Cs.forEach(m),a=G(ot),i=v(ot,"DIV",{class:!0});var _t=N(i);c=v(_t,"DIV",{class:!0});var Ct=N(c);o=v(Ct,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(o)!=="svelte-crpa7y"&&(o.textContent=f),h=G(Ct),p=v(Ct,"INPUT",{class:!0,id:!0}),g=G(Ct),T=v(Ct,"DIV",{class:!0});var Bt=N(T);y=v(Bt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(y)!=="svelte-mj6mct"&&(y.textContent=j),M=G(Bt),V=v(Bt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(V)!=="svelte-1sl6oxh"&&(V.textContent=C),Bt.forEach(m),Ct.forEach(m),I=G(_t),w=v(_t,"DIV",{class:!0});var Gt=N(w);L=v(Gt,"DIV",{class:!0});var Mt=N(L);P=v(Mt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(P)!=="svelte-wgxtkw"&&(P.textContent=k),D=G(Mt),S=v(Mt,"INPUT",{class:!0,id:!0,type:!0}),Mt.forEach(m),A=G(Gt),U=v(Gt,"DIV",{class:!0});var Vt=N(U);x=v(Vt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(x)!=="svelte-1tm2bth"&&(x.textContent=F),ae=G(Vt),re=v(Vt,"INPUT",{class:!0,id:!0,placeholder:!0}),Vt.forEach(m),Gt.forEach(m),ne=G(_t),Ce=v(_t,"DIV",{class:!0});var wt=N(Ce);he=v(wt,"DIV",{class:!0});var Ot=N(he);Ge=v(Ot,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(Ge)!=="svelte-1js269u"&&(Ge.textContent=xe),Me=G(Ot),de=v(Ot,"INPUT",{class:!0,id:!0,type:!0}),Ot.forEach(m),Ke=G(wt),Ne=v(wt,"DIV",{class:!0});var Ut=N(Ne);le=v(Ut,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(le)!=="svelte-21h39k"&&(le.textContent=Te),ue=G(Ut),z=v(Ut,"INPUT",{class:!0,id:!0,type:!0}),Ut.forEach(m),K=G(wt),Y=v(wt,"DIV",{class:!0});var Kt=N(Y);ie=v(Kt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(ie)!=="svelte-33lczu"&&(ie.textContent=X),we=G(Kt),Le=v(Kt,"INPUT",{class:!0,id:!0,type:!0}),Kt.forEach(m),wt.forEach(m),We=G(_t),Ve=v(_t,"DIV",{class:!0});var Et=N(Ve);Ie=v(Et,"DIV",{class:!0});var ws=N(Ie);Ee=v(ws,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(Ee)!=="svelte-1npcis2"&&(Ee.textContent=It),ws.forEach(m),kt=G(Et),Oe=v(Et,"DIV",{class:!0});var xt=N(Oe);dt=v(xt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(dt)!=="svelte-vd5i27"&&(dt.textContent=bs),Zt=G(xt),it=v(xt,"INPUT",{class:!0,id:!0}),xt.forEach(m),es=G(Et),mt=v(Et,"DIV",{class:!0});var Ft=N(mt);Lt=v(Ft,"DIV",{}),N(Lt).forEach(m),ts=G(Ft),pt=v(Ft,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(pt)!=="svelte-jjt0c3"&&(pt.textContent=ys),Ft.forEach(m),Et.forEach(m),_t.forEach(m),ss=G(ot),Pe&&Pe.l(ot),ot.forEach(m),Ue.forEach(m),this.h()},h(){var Se;d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(o,"class","font-bold"),d(o,"for","device"),d(p,"class","px-1 my-1 rounded w-50"),d(p,"id","device"),p.disabled=!0,p.value=b=((Se=l[5])==null?void 0:Se.name)??"No device",d(y,"class","btn-sm primary mr-2"),d(V,"class","btn-sm primary"),d(T,"class","flex my-[auto]"),d(c,"class","h-full flex flex-col"),d(P,"class","font-bold"),d(P,"for","sound"),d(S,"class","h-[20px]"),d(S,"id","sound"),d(S,"type","checkbox"),S.checked=E=l[3].useSound,d(L,"class","my-1 flex justify-between mr-12"),d(x,"class","font-bold"),d(x,"for","fixed-velocity"),d(re,"class","h-[20px] w-16"),d(re,"id","fixed-velocity"),d(re,"placeholder","0-127"),d(U,"class","flex justify-between"),d(w,"class","flex flex-col h-full"),d(Ge,"class","font-bold"),d(Ge,"for","keyboard"),d(de,"class","h-[20px]"),d(de,"id","keyboard"),d(de,"type","checkbox"),de.checked=ze=l[3].useKeyboard,d(he,"class","my-1 flex justify-between mr-12"),d(le,"class","font-bold"),d(le,"for","hotkeys"),d(z,"class","h-[20px]"),d(z,"id","hotkeys"),d(z,"type","checkbox"),z.checked=te=l[3].useHotkeys,d(Ne,"class","my-1 flex justify-between mr-12"),d(ie,"class","font-bold"),d(ie,"for","auto-octave"),d(Le,"class","h-[20px]"),d(Le,"id","auto-octave"),d(Le,"type","checkbox"),Le.checked=nt=l[3].useAutoOctave,d(Y,"class","my-1 flex justify-between mr-12"),d(Ce,"class","flex flex-col h-full"),d(Ee,"class","w-full btn-sm primary"),d(Ie,"class","flex justify-between"),d(dt,"class","font-bold"),d(dt,"for","fade-timeout"),d(it,"class","h-[20px] w-16"),d(it,"id","fade-timeout"),it.value=l[1],d(Oe,"class","flex justify-between"),d(pt,"class","btn-sm primary"),d(mt,"class","flex justify-between"),d(Ve,"class","flex flex-col justify-between h-full"),d(i,"class","body svelte-1bpw69s"),q(i,"hidden",l[4]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-1bpw69s"),q(t,"collapsed",l[4]),d(e,"class",Pt=Ae(`${l[11].class||""}`)+" svelte-1bpw69s")},m(Se,Ue){O(Se,e,Ue),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,c),u(c,o),u(c,h),u(c,p),u(c,g),u(c,T),u(T,y),u(T,M),u(T,V),u(i,I),u(i,w),u(w,L),u(L,P),u(L,D),u(L,S),u(w,A),u(w,U),u(U,x),u(U,ae),u(U,re),Qe(re,l[0]),u(i,ne),u(i,Ce),u(Ce,he),u(he,Ge),u(he,Me),u(he,de),u(Ce,Ke),u(Ce,Ne),u(Ne,le),u(Ne,ue),u(Ne,z),u(Ce,K),u(Ce,Y),u(Y,ie),u(Y,we),u(Y,Le),u(i,We),u(i,Ve),u(Ve,Ie),u(Ie,Ee),u(Ve,kt),u(Ve,Oe),u(Oe,dt),u(Oe,Zt),u(Oe,it),u(Ve,es),u(Ve,mt),u(mt,Lt),u(mt,ts),u(mt,pt),u(t,ss),Pe&&Pe.m(t,null),Je=!0,ls||(ks=[R(n,"click",l[7]),R(y,"click",$e.openMidi),R(V,"click",$e.disableMidi),R(S,"change",l[12]),R(re,"input",l[13]),R(re,"change",l[8]),R(de,"change",l[14]),R(z,"change",l[15]),R(Le,"change",l[16]),R(Ee,"click",l[17]),R(it,"input",l[9]),R(pt,"click",l[10])],ls=!0)},p(Se,[Ue]){var ot;(!Je||Ue&32&&b!==(b=((ot=Se[5])==null?void 0:ot.name)??"No device")&&p.value!==b)&&(p.value=b),(!Je||Ue&8&&E!==(E=Se[3].useSound))&&(S.checked=E),Ue&1&&re.value!==Se[0]&&Qe(re,Se[0]),(!Je||Ue&8&&ze!==(ze=Se[3].useKeyboard))&&(de.checked=ze),(!Je||Ue&8&&te!==(te=Se[3].useHotkeys))&&(z.checked=te),(!Je||Ue&8&&nt!==(nt=Se[3].useAutoOctave))&&(Le.checked=nt),(!Je||Ue&2&&it.value!==Se[1])&&(it.value=Se[1]),(!Je||Ue&16)&&q(i,"hidden",Se[4]),Se[2]?Pe?Ue&4&&$(Pe,1):(Pe=ol(),Pe.c(),$(Pe,1),Pe.m(t,null)):Pe&&(tt(),W(Pe,1,1,()=>{Pe=null}),st()),(!Je||Ue&16)&&q(t,"collapsed",Se[4]),(!Je||Ue&2048&&Pt!==(Pt=Ae(`${Se[11].class||""}`)+" svelte-1bpw69s"))&&d(e,"class",Pt)},i(Se){Je||($(Pe),Je=!0)},o(Se){W(Pe),Je=!1},d(Se){Se&&m(e),Pe&&Pe.d(),ls=!1,rt(ks)}}}function Ta(l,e,t){let s,n,r;oe(l,lt,C=>t(3,s=C)),oe(l,Qt,C=>t(5,r=C));const a=ht(Be(!1),{key:"inputs-hidden"});oe(l,a,C=>t(4,n=C));let i=s.fixedVelocity??"",c=s.keyFadeTimeout,o=!1;lt.subscribe(C=>{t(0,i=C.fixedVelocity??""),t(1,c=C.keyFadeTimeout)});function f(){a.update(C=>!C)}function h(C){const{value:I}=C.currentTarget;let w;if(I)try{w=parseInt(I)}catch{}w!==void 0&&w>=0&&w<=127?$e.setInputValue("fixedVelocity",w):I?t(0,i=s.fixedVelocity||""):$e.setInputValue("fixedVelocity",void 0)}function p(C){try{const I=parseInt(C.currentTarget.value);$e.setInputValue("keyFadeTimeout",I)}catch{t(1,c=s.keyFadeTimeout)}}function b(){Dn()}const g=C=>$e.setInputValue("useSound",C.currentTarget.checked);function T(){i=this.value,t(0,i)}const y=C=>$e.setInputValue("useKeyboard",C.currentTarget.checked),j=C=>$e.setInputValue("useHotkeys",C.currentTarget.checked),M=C=>$e.setInputValue("useAutoOctave",C.currentTarget.checked),V=()=>t(2,o=!o);return l.$$set=C=>{t(11,e=ye(ye({},e),ke(C)))},e=ke(e),[i,c,o,s,n,r,a,f,h,p,b,e,g,T,y,j,M,V]}class Na extends Re{constructor(e){super(),He(this,e,Ta,Aa,qe,{})}}function Ia(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){O(t,e,s)},p:ce,d(t){t&&m(e)}}}function ja(l){let e,t=l[1].note+"",s;return{c(){e=J("Input: "),s=J(t)},l(n){e=Q(n,"Input: "),s=Q(n,t)},m(n,r){O(n,e,r),O(n,s,r)},p(n,r){r&2&&t!==(t=n[1].note+"")&&se(s,t)},d(n){n&&(m(e),m(s))}}}function Da(l){let e,t;return{c(){e=J("Input: "),t=J(l[0])},l(s){e=Q(s,"Input: "),t=Q(s,l[0])},m(s,n){O(s,e,n),O(s,t,n)},p(s,n){n&1&&se(t,s[0])},d(s){s&&(m(e),m(t))}}}function La(l){let e;return{c(){e=J(hs)},l(t){e=Q(t,hs)},m(t,s){O(t,e,s)},p:ce,d(t){t&&m(e)}}}function Pa(l){let e,t,s,n;function r(c,o){return c[2].useKeyboard&&hs?La:c[2].useKeyboard&&c[0]?Da:c[2].useKeyboard&&c[1]?ja:Ia}let a=r(l),i=a(l);return{c(){e=_("div"),i.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var o=N(e);i.l(o),o.forEach(m),this.h()},h(){d(e,"class",t=`${l[4].class||""}`)},m(c,o){O(c,e,o),i.m(e,null),s||(n=R(window,"keydown",l[3]),s=!0)},p(c,[o]){a===(a=r(c))&&i?i.p(c,o):(i.d(1),i=a(c),i&&(i.c(),i.m(e,null))),o&16&&t!==(t=`${c[4].class||""}`)&&d(e,"class",t)},i:ce,o:ce,d(c){c&&m(e),i.d(),s=!1,n()}}}let hs="";function Ba(l,e,t){let s;oe(l,lt,o=>t(2,s=o));let{debounced:n}=e,r="",a;const i=rn();function c(o){const f=o.target;if(n||!(f instanceof HTMLElement)||f.tagName==="INPUT")return;const h=tn.handleInput(o.code,o.key,o.shiftKey);h&&h.e==="note"?t(1,a=h.data):h&&h.e==="string"?t(0,r=h.data):h&&i(h.e,h.data)}return l.$$set=o=>{t(4,e=ye(ye({},e),ke(o))),"debounced"in o&&t(5,n=o.debounced)},e=ke(e),[r,a,s,c,e,n]}class Ga extends Re{constructor(e){super(),He(this,e,Ba,Pa,qe,{debounced:5})}}function Ma(l){let e,t,s,n="Count",r,a,i,c,o,f="Duplicates",h,p,b,g,T,y,j="Autoplay",M,V,C,I,w,L,P="Wait seconds",k,D,S,E,A;return{c(){e=_("ul"),t=_("li"),s=_("label"),s.textContent=n,r=B(),a=_("input"),i=B(),c=_("li"),o=_("label"),o.textContent=f,h=B(),p=_("input"),g=B(),T=_("li"),y=_("label"),y.textContent=j,M=B(),V=_("input"),I=B(),w=_("li"),L=_("label"),L.textContent=P,k=B(),D=_("input"),this.h()},l(U){e=v(U,"UL",{class:!0});var x=N(e);t=v(x,"LI",{class:!0});var F=N(t);s=v(F,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(s)!=="svelte-wgq9fc"&&(s.textContent=n),r=G(F),a=v(F,"INPUT",{class:!0,id:!0,type:!0}),F.forEach(m),i=G(x),c=v(x,"LI",{class:!0});var ae=N(c);o=v(ae,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(o)!=="svelte-hcg9dq"&&(o.textContent=f),h=G(ae),p=v(ae,"INPUT",{class:!0,id:!0,type:!0}),ae.forEach(m),g=G(x),T=v(x,"LI",{class:!0});var re=N(T);y=v(re,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(y)!=="svelte-lr68n2"&&(y.textContent=j),M=G(re),V=v(re,"INPUT",{class:!0,id:!0,type:!0}),re.forEach(m),I=G(x),w=v(x,"LI",{class:!0});var ne=N(w);L=v(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(L)!=="svelte-1qj2vcy"&&(L.textContent=P),k=G(ne),D=v(ne,"INPUT",{class:!0,id:!0,type:!0}),ne.forEach(m),x.forEach(m),this.h()},h(){d(s,"class","font-bold"),d(s,"for","guess-count"),d(a,"class","h-[20px] w-10"),d(a,"id","guess-count"),d(a,"type","number"),d(t,"class","flex items-center justify-between svelte-1elvih2"),d(o,"class","font-bold"),d(o,"for","duplicates"),d(p,"class","h-[20px]"),d(p,"id","duplicates"),d(p,"type","checkbox"),p.checked=b=l[2].duplicates,d(c,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(y,"class","font-bold"),d(y,"for","autoplay"),d(V,"class","h-[20px]"),d(V,"id","autoplay"),d(V,"type","checkbox"),V.checked=C=l[2].autoplay,d(T,"class","flex items-center justify-between mr-6 svelte-1elvih2"),d(L,"class","font-bold"),d(L,"for","wait-ms"),d(D,"class","h-[20px] w-10"),d(D,"id","wait-ms"),d(D,"type","number"),d(w,"class","flex items-center justify-between svelte-1elvih2"),d(e,"class",S=Ae(`${l[5].class||""}`)+" svelte-1elvih2")},m(U,x){O(U,e,x),u(e,t),u(t,s),u(t,r),u(t,a),Qe(a,l[0]),u(e,i),u(e,c),u(c,o),u(c,h),u(c,p),u(e,g),u(e,T),u(T,y),u(T,M),u(T,V),u(e,I),u(e,w),u(w,L),u(w,k),u(w,D),Qe(D,l[1]),E||(A=[R(a,"input",l[6]),R(a,"input",l[3]),R(p,"input",l[7]),R(V,"input",l[8]),R(D,"input",l[9]),R(D,"input",l[4])],E=!0)},p(U,[x]){x&1&&qt(a.value)!==U[0]&&Qe(a,U[0]),x&4&&b!==(b=U[2].duplicates)&&(p.checked=b),x&4&&C!==(C=U[2].autoplay)&&(V.checked=C),x&2&&qt(D.value)!==U[1]&&Qe(D,U[1]),x&32&&S!==(S=Ae(`${U[5].class||""}`)+" svelte-1elvih2")&&d(e,"class",S)},i:ce,o:ce,d(U){U&&m(e),E=!1,rt(A)}}}function Va(l,e,t){let s;oe(l,ft,p=>t(2,s=p));let n=s.count||"",r=s.waitSeconds||"";ft.subscribe(p=>{t(0,n=p.count||""),t(1,r=p.waitSeconds||"")});function a({currentTarget:{value:p}}){let b;try{b=parseInt(p),b<=0&&(b=1),be.setOptionValue("count",b)}catch{t(0,n=s.count)}}function i({currentTarget:{value:p}}){let b;try{b=parseInt(p),b<0&&(b=0),be.setOptionValue("waitSeconds",b)}catch{t(1,r=s.waitSeconds)}}function c(){n=qt(this.value),t(0,n)}const o=p=>be.setOptionValue("duplicates",p.currentTarget.checked),f=p=>be.setOptionValue("autoplay",p.currentTarget.checked);function h(){r=qt(this.value),t(1,r)}return l.$$set=p=>{t(5,e=ye(ye({},e),ke(p)))},e=ke(e),[n,r,s,a,i,e,c,o,f,h]}class Oa extends Re{constructor(e){super(),He(this,e,Va,Ma,qe,{})}}function cl(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function ul(l,e,t){const s=l.slice();return s[20]=e[t].key,s[21]=e[t].value,s}function fl(l){let e,t,s=l[21]+"",n,r,a,i,c,o,f,h;function p(){return l[13](l[20])}i=new at({props:{icon:is,width:20}});function b(...g){return l[14](l[20],...g)}return{c(){e=_("li"),t=_("button"),n=J(s),r=B(),a=_("button"),pe(i.$$.fragment),c=B(),this.h()},l(g){e=v(g,"LI",{class:!0});var T=N(e);t=v(T,"BUTTON",{class:!0});var y=N(t);n=Q(y,s),y.forEach(m),r=G(T),a=v(T,"BUTTON",{class:!0});var j=N(a);_e(i.$$.fragment,j),j.forEach(m),c=G(T),T.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",l[20]===l[0]),d(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),d(e,"class","flex svelte-1okhpct")},m(g,T){O(g,e,T),u(e,t),u(t,n),u(e,r),u(e,a),ve(i,a,null),u(e,c),o=!0,f||(h=[R(t,"click",p),R(a,"click",b)],f=!0)},p(g,T){l=g,(!o||T&17)&&q(t,"selected",l[20]===l[0])},i(g){o||($(i.$$.fragment,g),o=!0)},o(g){W(i.$$.fragment,g),o=!1},d(g){g&&m(e),ge(i),f=!1,rt(h)}}}function hl(l){let e,t=ee(l[2]),s=[];for(let n=0;n<t.length;n+=1)s[n]=dl(cl(l,t,n));return{c(){e=_("ul");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"UL",{class:!0});var r=N(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","svelte-1okhpct")},m(n,r){O(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r&518){t=ee(n[2]);let a;for(a=0;a<t.length;a+=1){const i=cl(n,t,a);s[a]?s[a].p(i,r):(s[a]=dl(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function dl(l){let e,t,s=l[21]+"",n,r,a,i;function c(){return l[15](l[20])}return{c(){e=_("li"),t=_("button"),n=J(s),r=B(),this.h()},l(o){e=v(o,"LI",{class:!0});var f=N(e);t=v(f,"BUTTON",{class:!0});var h=N(t);n=Q(h,s),h.forEach(m),r=G(f),f.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),q(t,"selected",l[20]===l[1]),d(e,"class","svelte-1okhpct")},m(o,f){O(o,e,f),u(e,t),u(t,n),u(e,r),a||(i=R(t,"click",c),a=!0)},p(o,f){l=o,f&4&&s!==(s=l[21]+"")&&se(n,s),f&6&&q(t,"selected",l[20]===l[1])},d(o){o&&m(e),a=!1,i()}}}function Ua(l){let e,t,s="Play",n,r,a,i,c,o,f,h,p,b,g="Reset",T,y,j,M,V=l[3]?"Quit":"Play",C,I,w,L,P,k=ee(l[4]),D=[];for(let A=0;A<k.length;A+=1)D[A]=fl(ul(l,k,A));const S=A=>W(D[A],1,1,()=>{D[A]=null});let E=(l[0]==="chords-write"||l[0]==="chords-play")&&hl(l);return f=new Oa({props:{class:"game-options"}}),j=new at({props:{class:"mr-1",icon:l[3]?Is:is,width:20}}),{c(){e=_("fieldset"),t=_("legend"),t.textContent=s,n=B(),r=_("div"),a=_("ul");for(let A=0;A<D.length;A+=1)D[A].c();i=B(),c=_("div"),E&&E.c(),o=B(),pe(f.$$.fragment),h=B(),p=_("div"),b=_("button"),b.textContent=g,T=B(),y=_("button"),pe(j.$$.fragment),M=B(),C=J(V),this.h()},l(A){e=v(A,"FIELDSET",{class:!0});var U=N(e);t=v(U,"LEGEND",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1409tnk"&&(t.textContent=s),n=G(U),r=v(U,"DIV",{class:!0});var x=N(r);a=v(x,"UL",{class:!0});var F=N(a);for(let Ce=0;Ce<D.length;Ce+=1)D[Ce].l(F);F.forEach(m),i=G(x),c=v(x,"DIV",{class:!0});var ae=N(c);E&&E.l(ae),ae.forEach(m),o=G(x),_e(f.$$.fragment,x),h=G(x),p=v(x,"DIV",{class:!0});var re=N(p);b=v(re,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-10rv0bu"&&(b.textContent=g),T=G(re),y=v(re,"BUTTON",{class:!0});var ne=N(y);_e(j.$$.fragment,ne),M=G(ne),C=Q(ne,V),ne.forEach(m),re.forEach(m),x.forEach(m),U.forEach(m),this.h()},h(){d(t,"class","px-1 text-base"),d(a,"class","games svelte-1okhpct"),d(c,"class","options svelte-1okhpct"),d(b,"class","w-full btn hover:bg-gray-200"),d(y,"class","w-full mt-2 flex items-center justify-center btn primary"),d(p,"class","h-full flex flex-col justify-end"),d(r,"class","body pb-2 h-full svelte-1okhpct"),d(e,"class",I=Ae(`${l[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct")},m(A,U){O(A,e,U),u(e,t),u(e,n),u(e,r),u(r,a);for(let x=0;x<D.length;x+=1)D[x]&&D[x].m(a,null);u(r,i),u(r,c),E&&E.m(c,null),u(r,o),ve(f,r,null),u(r,h),u(r,p),u(p,b),u(p,T),u(p,y),ve(j,y,null),u(y,M),u(y,C),w=!0,L||(P=[R(b,"click",l[5]),R(y,"click",l[16])],L=!0)},p(A,[U]){if(U&401){k=ee(A[4]);let F;for(F=0;F<k.length;F+=1){const ae=ul(A,k,F);D[F]?(D[F].p(ae,U),$(D[F],1)):(D[F]=fl(ae),D[F].c(),$(D[F],1),D[F].m(a,null))}for(tt(),F=k.length;F<D.length;F+=1)S(F);st()}A[0]==="chords-write"||A[0]==="chords-play"?E?E.p(A,U):(E=hl(A),E.c(),E.m(c,null)):E&&(E.d(1),E=null);const x={};U&8&&(x.icon=A[3]?Is:is),j.$set(x),(!w||U&8)&&V!==(V=A[3]?"Quit":"Play")&&se(C,V),(!w||U&1024&&I!==(I=Ae(`${A[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct"))&&d(e,"class",I)},i(A){if(!w){for(let U=0;U<k.length;U+=1)$(D[U]);$(f.$$.fragment,A),$(j.$$.fragment,A),w=!0}},o(A){D=D.filter(Boolean);for(let U=0;U<D.length;U+=1)W(D[U]);W(f.$$.fragment,A),W(j.$$.fragment,A),w=!1},d(A){A&&m(e),je(D,A),E&&E.d(),ge(f),ge(j),L=!1,rt(P)}}}function Ka(l,e,t){let s,n,r,a,i;oe(l,vs,C=>t(12,r=C)),oe(l,ft,C=>t(19,a=C)),oe(l,bt,C=>t(3,i=C));const c=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let o=c[4].key,f="maj-m";a.count,a.waitSeconds,ft.subscribe(C=>{C.count,C.waitSeconds});function h(){be.clearGame(!0)}function p(C,I){if(I==="chords-write"||I==="chords-play"||I==="chords-diatonic"){let w=[];f==="selected"?w=r.filter(L=>L.selected):f==="all"?w=r:f==="maj-m"?w=r.filter(L=>L.suffixes[0]==="maj"||L.suffixes[0]==="m"):f==="seventh"&&(w=r.filter(L=>L.suffixes[0]==="maj7"||L.suffixes[0]==="m7"||L.suffixes[0]==="7"||L.suffixes[0]==="dim7"||L.suffixes[0]==="aug7")),be.play(I,{chords:w})}else be.play(I,void 0);C.currentTarget instanceof HTMLElement&&C.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function b(C){t(0,o=C)}function g(C,I){t(0,o=I),p(C,I)}function T(C){t(1,f=C)}const y=C=>b(C),j=(C,I)=>g(I,C),M=C=>T(C),V=C=>p(C,o);return l.$$set=C=>{t(10,e=ye(ye({},e),ke(C)))},l.$$.update=()=>{l.$$.dirty&4096&&t(11,s=r.reduce((C,I)=>I.selected?C+1:C,0)),l.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${s} chords`},{key:"all",value:"All"}])},e=ke(e),[o,f,n,i,c,h,p,b,g,T,e,s,r,y,j,M,V]}class xa extends Re{constructor(e){super(),He(this,e,Ka,Ua,qe,{})}}function ml(l,e,t){const s=l.slice();return s[7]=e[t],s}function pl(l,e,t){const s=l.slice();return s[4]=e[t],s}function Fa(l){let e,t=ee(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=_l(ml(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r&2){t=ee(n[1]);let a;for(a=0;a<t.length;a+=1){const i=ml(n,t,a);s[a]?s[a].p(i,r):(s[a]=_l(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function $a(l){let e,t=ee(l[0].scaleNotes||[]),s=[];for(let n=0;n<t.length;n+=1)s[n]=vl(pl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r&1){t=ee(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const i=pl(n,t,a);s[a]?s[a].p(i,r):(s[a]=vl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function _l(l){let e,t=l[7].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r&2&&t!==(t=n[7].interval+"")&&se(s,t)},d(n){n&&m(e)}}}function vl(l){let e,t=l[4].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-my4m0t")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r&1&&t!==(t=n[4].note+"")&&se(s,t)},d(n){n&&m(e)}}}function Ra(l){let e,t,s,n,r,a;function i(f,h){return f[0]?$a:Fa}let c=i(l),o=c(l);return{c(){e=_("div"),t=_("button"),o.c(),this.h()},l(f){e=v(f,"DIV",{class:!0,title:!0});var h=N(e);t=v(h,"BUTTON",{class:!0});var p=N(t);o.l(p),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","intervals svelte-my4m0t"),d(e,"class",s=`${l[2].class||""} `),d(e,"title",n=l[1].map(gl).join("-"))},m(f,h){O(f,e,h),u(e,t),o.m(t,null),r||(a=R(t,"click",l[3]),r=!0)},p(f,[h]){c===(c=i(f))&&o?o.p(f,h):(o.d(1),o=c(f),o&&(o.c(),o.m(t,null))),h&4&&s!==(s=`${f[2].class||""} `)&&d(e,"class",s),h&2&&n!==(n=f[1].map(gl).join("-"))&&d(e,"title",n)},i:ce,o:ce,d(f){f&&m(e),o.d(),r=!1,a()}}}const gl=l=>l.interval;function Ha(l,e,t){let{scale:s,intervals:n}=e;function r(a){ds.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),ke(a))),"scale"in a&&t(0,s=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=ke(e),[s,n,e,r]}class sn extends Re{constructor(e){super(),He(this,e,Ha,Ra,qe,{scale:0,intervals:1})}}function bl(l,e,t){const s=l.slice();return s[7]=e[t],s}function yl(l,e,t){const s=l.slice();return s[4]=e[t],s}function qa(l){let e,t=ee(l[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=kl(bl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r&1){t=ee(n[0]);let a;for(a=0;a<t.length;a+=1){const i=bl(n,t,a);s[a]?s[a].p(i,r):(s[a]=kl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function za(l){let e,t=ee(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Cl(yl(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=De()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=De()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r)},p(n,r){if(r&2){t=ee(n[1]);let a;for(a=0;a<t.length;a+=1){const i=yl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Cl(i),s[a].c(),s[a].m(e.parentNode,e))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function kl(l){let e,t,s=l[7].roman+"",n,r,a,i=l[7].suffix+"",c,o;return{c(){e=_("span"),t=_("span"),n=J(s),r=B(),a=_("sup"),c=J(i),o=B(),this.h()},l(f){e=v(f,"SPAN",{class:!0});var h=N(e);t=v(h,"SPAN",{class:!0});var p=N(t);n=Q(p,s),p.forEach(m),r=G(h),a=v(h,"SUP",{class:!0});var b=N(a);c=Q(b,i),b.forEach(m),o=G(h),h.forEach(m),this.h()},h(){d(t,"class","block"),d(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),q(a,"super-text",l[7].suffix.length>2),d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(f,h){O(f,e,h),u(e,t),u(t,n),u(e,r),u(e,a),u(a,c),u(e,o)},p(f,h){h&1&&s!==(s=f[7].roman+"")&&se(n,s),h&1&&i!==(i=f[7].suffix+"")&&se(c,i),h&1&&q(a,"super-text",f[7].suffix.length>2)},d(f){f&&m(e)}}}function Cl(l){let e,t,s=l[4]+"",n,r;return{c(){e=_("span"),t=_("span"),n=J(s),r=B(),this.h()},l(a){e=v(a,"SPAN",{class:!0});var i=N(e);t=v(i,"SPAN",{});var c=N(t);n=Q(c,s),c.forEach(m),r=G(i),i.forEach(m),this.h()},h(){d(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,i){O(a,e,i),u(e,t),u(t,n),u(e,r)},p(a,i){i&2&&s!==(s=a[4]+"")&&se(n,s)},d(a){a&&m(e)}}}function Wa(l){let e,t,s,n,r,a;function i(f,h){return f[1].length>0?za:qa}let c=i(l),o=c(l);return{c(){e=_("div"),t=_("button"),o.c(),this.h()},l(f){e=v(f,"DIV",{class:!0,title:!0});var h=N(e);t=v(h,"BUTTON",{class:!0});var p=N(t);o.l(p),p.forEach(m),h.forEach(m),this.h()},h(){d(t,"class","triads flex flex-wrap svelte-1roj1mi"),d(e,"class",s=Ae(`${l[2].class||""} `)+" svelte-1roj1mi"),d(e,"title",n=l[0].map(wl).join("-"))},m(f,h){O(f,e,h),u(e,t),o.m(t,null),r||(a=R(t,"click",l[3]),r=!0)},p(f,[h]){c===(c=i(f))&&o?o.p(f,h):(o.d(1),o=c(f),o&&(o.c(),o.m(t,null))),h&4&&s!==(s=Ae(`${f[2].class||""} `)+" svelte-1roj1mi")&&d(e,"class",s),h&1&&n!==(n=f[0].map(wl).join("-"))&&d(e,"title",n)},i:ce,o:ce,d(f){f&&m(e),o.d(),r=!1,a()}}}const wl=l=>l.roman+l.suffix;function Ja(l,e,t){let{triads:s,chords:n}=e;function r(a){ds.call(this,l,a)}return l.$$set=a=>{t(2,e=ye(ye({},e),ke(a))),"triads"in a&&t(0,s=a.triads),"chords"in a&&t(1,n=a.chords)},e=ke(e),[s,n,e,r]}class ln extends Re{constructor(e){super(),He(this,e,Ja,Wa,qe,{triads:0,chords:1})}}function El(l,e,t){const s=l.slice();return s[23]=e[t],s}function Sl(l,e,t){const s=l.slice();return s[23]=e[t],s}function Al(l){let e,t,s=l[23].raw.names[0]+"",n,r,a,i,c,o,f;function h(){return l[11](l[23])}a=new sn({props:{scale:l[23].scale,intervals:l[23].raw.intervals}}),a.$on("click",h);function p(){return l[12](l[23])}return c=new ln({props:{triads:l[23].triads,chords:l[23].triadChords}}),c.$on("click",p),{c(){e=_("li"),t=_("div"),n=J(s),r=B(),pe(a.$$.fragment),i=B(),pe(c.$$.fragment),o=B(),this.h()},l(b){e=v(b,"LI",{class:!0});var g=N(e);t=v(g,"DIV",{class:!0});var T=N(t);n=Q(T,s),T.forEach(m),r=G(g),_e(a.$$.fragment,g),i=G(g),_e(c.$$.fragment,g),o=G(g),g.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,g){O(b,e,g),u(e,t),u(t,n),u(e,r),ve(a,e,null),u(e,i),ve(c,e,null),u(e,o),f=!0},p(b,g){l=b,(!f||g&4)&&s!==(s=l[23].raw.names[0]+"")&&se(n,s);const T={};g&4&&(T.scale=l[23].scale),g&4&&(T.intervals=l[23].raw.intervals),a.$set(T);const y={};g&4&&(y.triads=l[23].triads),g&4&&(y.chords=l[23].triadChords),c.$set(y)},i(b){f||($(a.$$.fragment,b),$(c.$$.fragment,b),f=!0)},o(b){W(a.$$.fragment,b),W(c.$$.fragment,b),f=!1},d(b){b&&m(e),ge(a),ge(c)}}}function Tl(l){let e,t,s=l[23].raw.names[0]+"",n,r,a,i,c,o,f;function h(){return l[13](l[23])}a=new sn({props:{scale:l[23].scale,intervals:l[23].raw.intervals}}),a.$on("click",h);function p(){return l[14](l[23])}return c=new ln({props:{triads:l[23].triads,chords:l[23].triadChords}}),c.$on("click",p),{c(){e=_("li"),t=_("div"),n=J(s),r=B(),pe(a.$$.fragment),i=B(),pe(c.$$.fragment),o=B(),this.h()},l(b){e=v(b,"LI",{class:!0});var g=N(e);t=v(g,"DIV",{class:!0});var T=N(t);n=Q(T,s),T.forEach(m),r=G(g),_e(a.$$.fragment,g),i=G(g),_e(c.$$.fragment,g),o=G(g),g.forEach(m),this.h()},h(){d(t,"class","text-xs font-bold"),d(e,"class","svelte-4hctsl")},m(b,g){O(b,e,g),u(e,t),u(t,n),u(e,r),ve(a,e,null),u(e,i),ve(c,e,null),u(e,o),f=!0},p(b,g){l=b,(!f||g&2)&&s!==(s=l[23].raw.names[0]+"")&&se(n,s);const T={};g&2&&(T.scale=l[23].scale),g&2&&(T.intervals=l[23].raw.intervals),a.$set(T);const y={};g&2&&(y.triads=l[23].triads),g&2&&(y.chords=l[23].triadChords),c.$set(y)},i(b){f||($(a.$$.fragment,b),$(c.$$.fragment,b),f=!0)},o(b){W(a.$$.fragment,b),W(c.$$.fragment,b),f=!1},d(b){b&&m(e),ge(a),ge(c)}}}function Qa(l){let e,t,s,n,r="Scales",a,i,c,o,f="Key",h,p,b,g,T,y,j,M,V,C,I=ee(l[2]),w=[];for(let S=0;S<I.length;S+=1)w[S]=Al(Sl(l,I,S));const L=S=>W(w[S],1,1,()=>{w[S]=null});let P=ee(l[1]),k=[];for(let S=0;S<P.length;S+=1)k[S]=Tl(El(l,P,S));const D=S=>W(k[S],1,1,()=>{k[S]=null});return{c(){e=_("div"),t=_("fieldset"),s=_("legend"),n=_("button"),n.textContent=r,a=B(),i=_("div"),c=_("div"),o=_("label"),o.textContent=f,h=B(),p=_("input"),b=B(),g=_("ul");for(let S=0;S<w.length;S+=1)w[S].c();T=B(),y=_("ul");for(let S=0;S<k.length;S+=1)k[S].c();this.h()},l(S){e=v(S,"DIV",{class:!0});var E=N(e);t=v(E,"FIELDSET",{class:!0});var A=N(t);s=v(A,"LEGEND",{class:!0});var U=N(s);n=v(U,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-lhx60e"&&(n.textContent=r),U.forEach(m),a=G(A),i=v(A,"DIV",{class:!0});var x=N(i);c=v(x,"DIV",{class:!0});var F=N(c);o=v(F,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(o)!=="svelte-14m38zf"&&(o.textContent=f),h=G(F),p=v(F,"INPUT",{class:!0,id:!0}),F.forEach(m),b=G(x),g=v(x,"UL",{class:!0});var ae=N(g);for(let ne=0;ne<w.length;ne+=1)w[ne].l(ae);ae.forEach(m),T=G(x),y=v(x,"UL",{class:!0});var re=N(y);for(let ne=0;ne<k.length;ne+=1)k[ne].l(re);re.forEach(m),x.forEach(m),A.forEach(m),E.forEach(m),this.h()},h(){d(n,"class","px-1 rounded hover:bg-gray-100"),d(s,"class","text-base"),d(o,"class","mr-4 font-bold"),d(o,"for","scale-key"),d(p,"class","bg-gray-100 w-16 px-1 rounded"),d(p,"id","scale-key"),p.value=l[0],d(c,"class","flex w-1/2 mb-2 input svelte-4hctsl"),d(g,"class","list odd w-full svelte-4hctsl"),d(y,"class","list even w-full svelte-4hctsl"),d(i,"class","body svelte-4hctsl"),q(i,"hidden",l[3]),d(t,"class","flex flex-col rounded border-2 px-4 py-2 my-4 text-sm svelte-4hctsl"),q(t,"collapsed",l[3]),d(e,"class",j=Ae(`${l[9].class||""}`)+" svelte-4hctsl")},m(S,E){O(S,e,E),u(e,t),u(t,s),u(s,n),u(t,a),u(t,i),u(i,c),u(c,o),u(c,h),u(c,p),u(i,b),u(i,g);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(g,null);u(i,T),u(i,y);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(y,null);M=!0,V||(C=[R(n,"click",l[5]),R(p,"input",l[6])],V=!0)},p(S,[E]){if((!M||E&1&&p.value!==S[0])&&(p.value=S[0]),E&388){I=ee(S[2]);let A;for(A=0;A<I.length;A+=1){const U=Sl(S,I,A);w[A]?(w[A].p(U,E),$(w[A],1)):(w[A]=Al(U),w[A].c(),$(w[A],1),w[A].m(g,null))}for(tt(),A=I.length;A<w.length;A+=1)L(A);st()}if(E&386){P=ee(S[1]);let A;for(A=0;A<P.length;A+=1){const U=El(S,P,A);k[A]?(k[A].p(U,E),$(k[A],1)):(k[A]=Tl(U),k[A].c(),$(k[A],1),k[A].m(y,null))}for(tt(),A=P.length;A<k.length;A+=1)D(A);st()}(!M||E&8)&&q(i,"hidden",S[3]),(!M||E&8)&&q(t,"collapsed",S[3]),(!M||E&512&&j!==(j=Ae(`${S[9].class||""}`)+" svelte-4hctsl"))&&d(e,"class",j)},i(S){if(!M){for(let E=0;E<I.length;E+=1)$(w[E]);for(let E=0;E<P.length;E+=1)$(k[E]);M=!0}},o(S){w=w.filter(Boolean);for(let E=0;E<w.length;E+=1)W(w[E]);k=k.filter(Boolean);for(let E=0;E<k.length;E+=1)W(k[E]);M=!1},d(S){S&&m(e),je(w,S),je(k,S),V=!1,rt(C)}}}function Ya(l,e,t){let s,n,r,a,i,c,o;oe(l,Yt,k=>t(17,r=k)),oe(l,Tt,k=>t(18,a=k)),oe(l,lt,k=>t(19,i=k)),oe(l,et,k=>t(20,c=k));let h=ms().map(k=>({key:k.names[0],raw:k,scale:void 0,triads:k.triads,triadChords:[]})),p="",b=[a.key,a.scale],g;const T=ht(Be(!0),{key:"scales-hidden"});oe(l,T,k=>t(3,o=k));function y(){T.update(k=>!k)}function j({currentTarget:{value:k}}){t(0,p=`${k.charAt(0).toUpperCase()}${k.charAt(1).toLowerCase()}`),t(10,h=h.map(D=>{const S=Jt(p,D.key),E=p&&"data"in S?S.data:void 0;let A=[];return E&&(A=D.triads.map((U,x)=>`${E.scaleNotes[x].note}${!U.suffix.includes("°")&&U.minor?"m":""}${U.suffix}`)),{...D,scale:E,triadChords:A}}))}function M(k,D,S){if(k<D.length){const E=D[k++];fe.setPlayed(E),c==null||c.playChord(E.map(A=>A.midi),i.fixedVelocity),g=setTimeout(()=>M(k,D,S),S)}else fe.setPlayed([]),fe.setKeyAndScale(b[0],b[1])}function V(k){clearTimeout(g);let D,S;k.scale?(S=k.scale,b=[a.key,a.scale],fe.setKeyAndScale(k.scale.key,k.scale.scale)):S=a;const E=r[0].midi+S.scaleNotes[0].semitones;D=k.raw.intervals.map(A=>[{...S.notesMap.get(A.semitones%12),midi:E+A.semitones}]),D[0][0].semitones!==D[D.length-1][0].semitones&&D.push(D[0].map(A=>({...A,midi:A.midi+12}))),M(0,D,500)}function C(k){clearTimeout(g);const{intervals:D}=k.raw;let S,E;k.scale?(E=k.scale,b=[a.key,a.scale],fe.setKeyAndScale(k.scale.key,k.scale.scale)):E=a;const A=r[0].midi+E.scaleNotes[0].semitones;S=Jl(k.triads).map((x,F)=>os(A+E.intervals[F].semitones,E,x.intervals)),D[D.length-1].interval_seq!==1&&S.push(S[0].map(x=>({...x,midi:x.midi+12}))),M(0,S,750)}const I=k=>V(k),w=k=>C(k),L=k=>V(k),P=k=>C(k);return l.$$set=k=>{t(9,e=ye(ye({},e),ke(k)))},l.$$.update=()=>{l.$$.dirty&1024&&t(2,s=h.filter((k,D)=>D<h.length/2)),l.$$.dirty&1024&&t(1,n=h.filter((k,D)=>D>=h.length/2))},e=ke(e),[p,n,s,o,T,y,j,V,C,e,h,I,w,L,P]}class Xa extends Re{constructor(e){super(),He(this,e,Ya,Qa,qe,{})}}function Nl(l,e,t){const s=l.slice();return s[14]=e[t].key,s[15]=e[t].value,s[16]=e[t].icon,s[18]=t,s}const Za=l=>({}),Il=l=>({}),er=l=>({}),jl=l=>({});function Dl(l){let e,t,s,n,r,a,i,c,o,f;const h=l[11].header,p=xl(h,l,l[10],Il);let b=ee(l[0]),g=[];for(let y=0;y<b.length;y+=1)g[y]=Ll(Nl(l,b,y));const T=y=>W(g[y],1,1,()=>{g[y]=null});return{c(){e=_("button"),s=B(),n=_("ul"),r=_("li"),p&&p.c(),a=B();for(let y=0;y<g.length;y+=1)g[y].c();this.h()},l(y){e=v(y,"BUTTON",{class:!0,tabindex:!0}),N(e).forEach(m),s=G(y),n=v(y,"UL",{class:!0});var j=N(n);r=v(j,"LI",{});var M=N(r);p&&p.l(M),M.forEach(m),a=G(j);for(let V=0;V<g.length;V+=1)g[V].l(j);j.forEach(m),this.h()},h(){d(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),d(e,"tabindex","-1"),d(n,"class","items-list bg-white py-1.5 py-2 w-48 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl svelte-h65upg")},m(y,j){O(y,e,j),O(y,s,j),O(y,n,j),u(n,r),p&&p.m(r,null),u(n,a);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(n,null);c=!0,o||(f=R(e,"click",l[6]),o=!0)},p(y,j){if(l=y,p&&p.p&&(!c||j&1024)&&Fl(p,h,l,l[10],c?Rl(h,l[10],j,Za):$l(l[10]),Il),j&133){b=ee(l[0]);let M;for(M=0;M<b.length;M+=1){const V=Nl(l,b,M);g[M]?(g[M].p(V,j),$(g[M],1)):(g[M]=Ll(V),g[M].c(),$(g[M],1),g[M].m(n,null))}for(tt(),M=b.length;M<g.length;M+=1)T(M);st()}},i(y){if(!c){y&&Es(()=>{c&&(t||(t=$t(e,Ss,{duration:Ht},!0)),t.run(1))}),$(p,y);for(let j=0;j<b.length;j+=1)$(g[j]);y&&Es(()=>{c&&(i||(i=$t(n,As,{duration:Ht},!0)),i.run(1))}),c=!0}},o(y){y&&(t||(t=$t(e,Ss,{duration:Ht},!1)),t.run(0)),W(p,y),g=g.filter(Boolean);for(let j=0;j<g.length;j+=1)W(g[j]);y&&(i||(i=$t(n,As,{duration:Ht},!1)),i.run(0)),c=!1},d(y){y&&(m(e),m(s),m(n)),y&&t&&t.end(),p&&p.d(y),je(g,y),y&&i&&i.end(),o=!1,f()}}}function tr(l){let e;return{c(){e=_("div"),this.h()},l(t){e=v(t,"DIV",{class:!0}),N(e).forEach(m),this.h()},h(){d(e,"class","w-[24px]")},m(t,s){O(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&m(e)}}}function sr(l){let e,t;return e=new at({props:{class:"mr-2",icon:l[16],width:16}}),{c(){pe(e.$$.fragment)},l(s){_e(e.$$.fragment,s)},m(s,n){ve(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.icon=s[16]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){W(e.$$.fragment,s),t=!1},d(s){ge(e,s)}}}function Ll(l){let e,t,s,n,r,a,i=l[15]+"",c,o,f,h,p;const b=[sr,tr],g=[];function T(j,M){return j[16]?0:1}s=T(l),n=g[s]=b[s](l);function y(){return l[12](l[14])}return{c(){e=_("li"),t=_("button"),n.c(),r=B(),a=_("div"),c=J(i),o=B(),this.h()},l(j){e=v(j,"LI",{});var M=N(e);t=v(M,"BUTTON",{class:!0});var V=N(t);n.l(V),r=G(V),a=v(V,"DIV",{});var C=N(a);c=Q(C,i),C.forEach(m),V.forEach(m),o=G(M),M.forEach(m),this.h()},h(){d(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),q(t,"selected",l[14]===l[2])},m(j,M){O(j,e,M),u(e,t),g[s].m(t,null),u(t,r),u(t,a),u(a,c),u(e,o),f=!0,h||(p=R(t,"click",y),h=!0)},p(j,M){l=j;let V=s;s=T(l),s===V?g[s].p(l,M):(tt(),W(g[V],1,1,()=>{g[V]=null}),st(),n=g[s],n?n.p(l,M):(n=g[s]=b[s](l),n.c()),$(n,1),n.m(t,r)),(!f||M&1)&&i!==(i=l[15]+"")&&se(c,i),(!f||M&5)&&q(t,"selected",l[14]===l[2])},i(j){f||($(n),f=!0)},o(j){W(n),f=!1},d(j){j&&m(e),g[s].d(),h=!1,p()}}}function lr(l){let e,t,s,n,r,a,i,c;const o=l[11].value,f=xl(o,l,l[10],jl);let h=l[5]&&Dl(l);return{c(){e=_("div"),t=_("button"),f&&f.c(),r=B(),h&&h.c(),this.h()},l(p){e=v(p,"DIV",{class:!0,id:!0});var b=N(e);t=v(b,"BUTTON",{class:!0,title:!0});var g=N(t);f&&f.l(g),g.forEach(m),r=G(b),h&&h.l(b),b.forEach(m),this.h()},h(){d(t,"class",s=Ae(`${l[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),d(t,"title",n=l[8].title||""),q(t,"disabled",l[3]),q(t,"open",l[5]),d(e,"class","relative"),d(e,"id",l[1])},m(p,b){O(p,e,b),u(e,t),f&&f.m(t,null),u(e,r),h&&h.m(e,null),l[13](e),a=!0,i||(c=R(t,"click",l[6]),i=!0)},p(p,[b]){f&&f.p&&(!a||b&1024)&&Fl(f,o,p,p[10],a?Rl(o,p[10],b,er):$l(p[10]),jl),(!a||b&256&&s!==(s=Ae(`${p[8].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&d(t,"class",s),(!a||b&256&&n!==(n=p[8].title||""))&&d(t,"title",n),(!a||b&264)&&q(t,"disabled",p[3]),(!a||b&288)&&q(t,"open",p[5]),p[5]?h?(h.p(p,b),b&32&&$(h,1)):(h=Dl(p),h.c(),$(h,1),h.m(e,null)):h&&(tt(),W(h,1,1,()=>{h=null}),st()),(!a||b&2)&&d(e,"id",p[1])},i(p){a||($(f,p),$(h),a=!0)},o(p){W(f,p),W(h),a=!1},d(p){p&&m(e),f&&f.d(p),h&&h.d(),l[13](null),i=!1,c()}}}const Ht=400;function nr(l,e,t){let{$$slots:s={},$$scope:n}=e,{options:r,id:a=void 0,selected:i=void 0,disabled:c=void 0,onSelect:o}=e,f,h=!1;function p(){c||t(5,h=!h)}function b(y){t(5,h=o(y))}const g=y=>b(y);function T(y){on[y?"unshift":"push"](()=>{f=y,t(4,f)})}return l.$$set=y=>{t(8,e=ye(ye({},e),ke(y))),"options"in y&&t(0,r=y.options),"id"in y&&t(1,a=y.id),"selected"in y&&t(2,i=y.selected),"disabled"in y&&t(3,c=y.disabled),"onSelect"in y&&t(9,o=y.onSelect),"$$scope"in y&&t(10,n=y.$$scope)},e=ke(e),[r,a,i,c,f,h,p,b,e,o,n,s,g,T]}class ar extends Re{constructor(e){super(),He(this,e,nr,lr,qe,{options:0,id:1,selected:2,disabled:3,onSelect:9})}}function Pl(l,e,t){const s=l.slice();return s[26]=e[t],s}function Bl(l,e,t){const s=l.slice();return s[29]=e[t],s}function Gl(l){let e,t;return{c(){e=_("div"),t=J(l[3]),this.h()},l(s){e=v(s,"DIV",{class:!0});var n=N(e);t=Q(n,l[3]),n.forEach(m),this.h()},h(){d(e,"class","error svelte-1u7ze7x")},m(s,n){O(s,e,n),u(e,t)},p(s,n){n[0]&8&&se(t,s[3])},d(s){s&&m(e)}}}function rr(l){let e,t;return{c(){e=_("div"),t=J(l[0]),this.h()},l(s){e=v(s,"DIV",{slot:!0});var n=N(e);t=Q(n,l[0]),n.forEach(m),this.h()},h(){d(e,"slot","value")},m(s,n){O(s,e,n),u(e,t)},p(s,n){n[0]&1&&se(t,s[0])},d(s){s&&m(e)}}}function Ml(l){let e,t=ee(l[5]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Vl(Bl(l,t,n));return{c(){e=_("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var r=N(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){O(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r[0]&32){t=ee(n[5]);let a;for(a=0;a<t.length;a+=1){const i=Bl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Vl(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Vl(l){let e,t=l[29].interval+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&32&&t!==(t=n[29].interval+"")&&se(s,t)},d(n){n&&m(e)}}}function Ol(l){let e,t=ee(l[8].scaleNotes),s=[];for(let n=0;n<t.length;n+=1)s[n]=Ul(Pl(l,t,n));return{c(){e=_("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var r=N(e);for(let a=0;a<s.length;a+=1)s[a].l(r);r.forEach(m),this.h()},h(){d(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,r){O(n,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(n,r){if(r[0]&256){t=ee(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const i=Pl(n,t,a);s[a]?s[a].p(i,r):(s[a]=Ul(i),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),je(s,n)}}}function Ul(l){let e,t=l[26].note+"",s;return{c(){e=_("span"),s=J(t),this.h()},l(n){e=v(n,"SPAN",{class:!0});var r=N(e);s=Q(r,t),r.forEach(m),this.h()},h(){d(e,"class","svelte-1u7ze7x")},m(n,r){O(n,e,r),u(e,s)},p(n,r){r[0]&256&&t!==(t=n[26].note+"")&&se(s,t)},d(n){n&&m(e)}}}function ir(l){let e,t,s,n="Score",r,a,i,c,o,f,h,p="Range",b,g,T,y,j,M="—",V,C,I,w,L,P,k,D="Scale",S,E,A,U,x,F,ae,re="Key",ne,Ce,he,Ge,xe,Me,de="",ze,Ke,Ne,le;i=new at({props:{icon:Hl,width:16}});let Te=l[3]&&Gl(l);A=new ar({props:{id:"scales",class:"p-1",options:l[10],onSelect:l[14],$$slots:{value:[rr]},$$scope:{ctx:l}}});let ue=!l[7]&&Ml(l),z=!l[7]&&Ol(l);return{c(){e=_("fieldset"),t=_("legend"),s=_("button"),s.textContent=n,r=B(),a=_("button"),pe(i.$$.fragment),c=B(),o=_("div"),f=_("div"),h=_("label"),h.textContent=p,b=B(),g=_("div"),T=_("input"),y=B(),j=_("span"),j.textContent=M,V=B(),C=_("input"),I=B(),w=_("div"),Te&&Te.c(),L=B(),P=_("div"),k=_("label"),k.textContent=D,S=B(),E=_("div"),pe(A.$$.fragment),U=B(),ue&&ue.c(),x=B(),F=_("div"),ae=_("label"),ae.textContent=re,ne=B(),Ce=_("div"),he=_("input"),Ge=B(),z&&z.c(),xe=B(),Me=_("div"),Me.innerHTML=de,this.h()},l(te){e=v(te,"FIELDSET",{class:!0});var K=N(e);t=v(K,"LEGEND",{class:!0});var Y=N(t);s=v(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-lqyol"&&(s.textContent=n),Y.forEach(m),r=G(K),a=v(K,"BUTTON",{class:!0});var ie=N(a);_e(i.$$.fragment,ie),ie.forEach(m),c=G(K),o=v(K,"DIV",{class:!0});var X=N(o);f=v(X,"DIV",{class:!0});var we=N(f);h=v(we,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(h)!=="svelte-10u0679"&&(h.textContent=p),b=G(we),g=v(we,"DIV",{class:!0});var Le=N(g);T=v(Le,"INPUT",{class:!0,id:!0}),y=G(Le),j=v(Le,"SPAN",{class:!0,"data-svelte-h":!0}),Z(j)!=="svelte-8q1xz4"&&(j.textContent=M),V=G(Le),C=v(Le,"INPUT",{class:!0,id:!0}),Le.forEach(m),I=G(we),w=v(we,"DIV",{class:!0});var nt=N(w);Te&&Te.l(nt),nt.forEach(m),we.forEach(m),L=G(X),P=v(X,"DIV",{class:!0});var We=N(P);k=v(We,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(k)!=="svelte-ld2d07"&&(k.textContent=D),S=G(We),E=v(We,"DIV",{class:!0});var Ve=N(E);_e(A.$$.fragment,Ve),Ve.forEach(m),U=G(We),ue&&ue.l(We),We.forEach(m),x=G(X),F=v(X,"DIV",{class:!0});var Ie=N(F);ae=v(Ie,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(ae)!=="svelte-17pcm6g"&&(ae.textContent=re),ne=G(Ie),Ce=v(Ie,"DIV",{class:!0});var Ee=N(Ce);he=v(Ee,"INPUT",{class:!0,id:!0}),Ee.forEach(m),Ge=G(Ie),z&&z.l(Ie),Ie.forEach(m),xe=G(X),Me=v(X,"DIV",{class:!0,"data-svelte-h":!0}),Z(Me)!=="svelte-hp3bkp"&&(Me.innerHTML=de),X.forEach(m),K.forEach(m),this.h()},h(){d(s,"class","px-1 rounded hover:bg-gray-100"),d(t,"class","px-1 text-base"),d(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),q(a,"hidden",l[6]),d(h,"class","font-bold"),d(h,"for","range_min"),d(T,"class","h-[28px] w-full"),d(T,"id","range_min"),d(j,"class","mx-2 mt-1"),d(C,"class","h-[28px] w-full"),d(C,"id","range_max"),d(g,"class","my-1 flex w-full"),d(w,"class","flex justify-between my-1"),d(f,"class","flex flex-col h-full"),d(k,"class","font-bold"),d(k,"for","scales"),d(E,"class","my-1 w-full"),d(P,"class","flex flex-col h-full"),d(ae,"class","font-bold"),d(ae,"for","key"),d(he,"class","h-[28px]"),d(he,"id","key"),d(Ce,"class","my-1 flex"),d(F,"class","flex flex-col h-full"),d(Me,"class","h-full flex flex-col justify-between"),d(o,"class","options svelte-1u7ze7x"),q(o,"hidden",l[6]),d(e,"class",ze=Ae(`${l[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),q(e,"collapsed",l[6])},m(te,K){O(te,e,K),u(e,t),u(t,s),u(e,r),u(e,a),ve(i,a,null),u(e,c),u(e,o),u(o,f),u(f,h),u(f,b),u(f,g),u(g,T),Qe(T,l[1]),u(g,y),u(g,j),u(g,V),u(g,C),Qe(C,l[2]),u(f,I),u(f,w),Te&&Te.m(w,null),u(o,L),u(o,P),u(P,k),u(P,S),u(P,E),ve(A,E,null),u(P,U),ue&&ue.m(P,null),u(o,x),u(o,F),u(F,ae),u(F,ne),u(F,Ce),u(Ce,he),Qe(he,l[4]),u(F,Ge),z&&z.m(F,null),u(o,xe),u(o,Me),Ke=!0,Ne||(le=[R(s,"click",l[15]),R(a,"click",l[16]),R(T,"input",l[18]),R(T,"change",l[19]),R(T,"focus",l[12]),R(C,"input",l[20]),R(C,"change",l[21]),R(C,"focus",l[12]),R(he,"input",l[22]),R(he,"input",l[13])],Ne=!0)},p(te,K){(!Ke||K[0]&64)&&q(a,"hidden",te[6]),K[0]&2&&T.value!==te[1]&&Qe(T,te[1]),K[0]&4&&C.value!==te[2]&&Qe(C,te[2]),te[3]?Te?Te.p(te,K):(Te=Gl(te),Te.c(),Te.m(w,null)):Te&&(Te.d(1),Te=null);const Y={};K[0]&1|K[1]&2&&(Y.$$scope={dirty:K,ctx:te}),A.$set(Y),te[7]?ue&&(ue.d(1),ue=null):ue?ue.p(te,K):(ue=Ml(te),ue.c(),ue.m(P,null)),K[0]&16&&he.value!==te[4]&&Qe(he,te[4]),te[7]?z&&(z.d(1),z=null):z?z.p(te,K):(z=Ol(te),z.c(),z.m(F,null)),(!Ke||K[0]&64)&&q(o,"hidden",te[6]),(!Ke||K[0]&131072&&ze!==(ze=Ae(`${te[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&d(e,"class",ze),(!Ke||K[0]&131136)&&q(e,"collapsed",te[6])},i(te){Ke||($(i.$$.fragment,te),$(A.$$.fragment,te),Ke=!0)},o(te){W(i.$$.fragment,te),W(A.$$.fragment,te),Ke=!1},d(te){te&&m(e),ge(i),Te&&Te.d(),ge(A),ue&&ue.d(),z&&z.d(),Ne=!1,rt(le)}}}function or(l,e,t){let s,n,r,a,i,c;oe(l,Yt,E=>t(23,n=E)),oe(l,yt,E=>t(24,r=E)),oe(l,bt,E=>t(7,i=E)),oe(l,Tt,E=>t(8,c=E));let o=Ye(n[0]),f=Ye(n[1]),h="";const p=ht(Be(!1),{key:"score-options-hidden"});oe(l,p,E=>t(6,a=E));let b=r[0],g=r[1];const T=ms(),y=T.map(E=>({key:E.names[0],value:E.names[0]}));Yt.subscribe(E=>{t(1,o=Ye(E[0])),t(2,f=Ye(E[1]))}),yt.subscribe(E=>{t(4,b=E[0]),t(0,g=E[1])});function j(E,A){const U=Sn(A.currentTarget.value,!0,!0);if("data"in U){const{midi:x}=U.data,F=n,ae=[E==="min"?x:F[0].midi,E==="max"?x:F[1].midi];$e.setMidiRange(ae),t(3,h="")}else t(3,h=U.err),E==="min"?t(1,o=Ye(n[0])):t(2,f=Ye(n[1]))}function M(){t(3,h="")}function V({currentTarget:{value:E}}){t(4,b=`${E.charAt(0).toUpperCase()}${E.charAt(1).toLowerCase()}`),fe.setKey(b)}function C(E){var A;return t(0,g=(A=y.find(U=>E===U.key))==null?void 0:A.value),fe.setScale(g),!1}function I(){p.update(E=>!E)}function w(){fe.clearScore(!0),$e.setMidiRange([60,84])}function L(){o=this.value,t(1,o)}const P=E=>j("min",E);function k(){f=this.value,t(2,f)}const D=E=>j("max",E);function S(){b=this.value,t(4,b)}return l.$$set=E=>{t(17,e=ye(ye({},e),ke(E)))},l.$$.update=()=>{var E;l.$$.dirty[0]&1&&t(5,s=((E=T.find(A=>A.names[0]===g))==null?void 0:E.intervals)||[])},e=ke(e),[g,o,f,h,b,s,a,i,c,p,y,j,M,V,C,I,w,e,L,P,k,D,S]}class cr extends Re{constructor(e){super(),He(this,e,or,ir,qe,{},null,[-1,-1])}}function ur(l){l[19]=l[20].default}function fr(l){return{c:ce,l:ce,m:ce,i:ce,o:ce,d:ce}}function hr(l){ur(l);let e,t,s;var n=l[19];function r(a,i){return{props:{class:"px-4 md:px-0"}}}return n&&(e=fn(n,r())),{c(){e&&pe(e.$$.fragment),t=De()},l(a){e&&_e(e.$$.fragment,a),t=De()},m(a,i){e&&ve(e,a,i),O(a,t,i),s=!0},i(a){s||(e&&$(e.$$.fragment,a),s=!0)},o(a){e&&W(e.$$.fragment,a),s=!1},d(a){a&&m(t),e&&ge(e,a)}}}function dr(l){let e;return{c(){e=J(" ")},l(t){e=Q(t," ")},m(t,s){O(t,e,s)},i:ce,o:ce,d(t){t&&m(e)}}}function mr(l){let e,t,s,n='<a class="hover:underline" href="https://github.com/TeemuKoivisto/midi-note-trainer">MIDI Note Trainer</a>',r,a,i,c,o,f,h,p,b,g,T,y,j,M,V,C,I,w,L;i=new Na({}),o=new Xa({}),h=new Jn({}),g=new cr({props:{class:"score-options mr-4"}}),y=new xa({props:{class:"play-form"}});let P={ctx:l,current:null,token:null,hasCatch:!1,pending:dr,then:hr,catch:fr,value:20,blocks:[,,,]};return cn(nn(()=>import("./Score.12e491b5.js"),["./Score.12e491b5.js","./vendor_svelte.555721fe.js","./vendor.1acf520b.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),P),C=new Ga({props:{class:"min-h-32",debounced:!!l[0]}}),C.$on("guessed-chord",l[2]),C.$on("guessed-key",l[3]),C.$on("guessed-note",l[4]),w=new oa({props:{game:l[1]}}),{c(){e=_("meta"),t=B(),s=_("h1"),s.innerHTML=n,r=B(),a=_("section"),pe(i.$$.fragment),c=B(),pe(o.$$.fragment),f=B(),pe(h.$$.fragment),p=B(),b=_("div"),pe(g.$$.fragment),T=B(),pe(y.$$.fragment),j=B(),P.block.c(),M=B(),V=_("section"),pe(C.$$.fragment),I=B(),pe(w.$$.fragment),this.h()},l(k){const D=un("svelte-1w2oado",document.head);e=v(D,"META",{name:!0,content:!0}),D.forEach(m),t=G(k),s=v(k,"H1",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-1l8ebwf"&&(s.innerHTML=n),r=G(k),a=v(k,"SECTION",{class:!0});var S=N(a);_e(i.$$.fragment,S),c=G(S),_e(o.$$.fragment,S),f=G(S),_e(h.$$.fragment,S),p=G(S),b=v(S,"DIV",{class:!0});var E=N(b);_e(g.$$.fragment,E),T=G(E),_e(y.$$.fragment,E),E.forEach(m),S.forEach(m),j=G(k),P.block.l(k),M=G(k),V=v(k,"SECTION",{class:!0});var A=N(V);_e(C.$$.fragment,A),I=G(A),_e(w.$$.fragment,A),A.forEach(m),this.h()},h(){d(e,"name","description"),d(e,"content","App to practise music notation, scales and chords using MIDI"),d(s,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight"),d(b,"class","play svelte-qjpqy3"),d(a,"class","px-4 md:px-0"),d(V,"class","mb-8 px-4 md:px-0 flex flex-col")},m(k,D){u(document.head,e),O(k,t,D),O(k,s,D),O(k,r,D),O(k,a,D),ve(i,a,null),u(a,c),ve(o,a,null),u(a,f),ve(h,a,null),u(a,p),u(a,b),ve(g,b,null),u(b,T),ve(y,b,null),O(k,j,D),P.block.m(k,P.anchor=D),P.mount=()=>M.parentNode,P.anchor=M,O(k,M,D),O(k,V,D),ve(C,V,null),u(V,I),ve(w,V,null),L=!0},p(k,[D]){l=k;const S={};D&1&&(S.debounced=!!l[0]),C.$set(S);const E={};D&2&&(E.game=l[1]),w.$set(E)},i(k){L||($(i.$$.fragment,k),$(o.$$.fragment,k),$(h.$$.fragment,k),$(g.$$.fragment,k),$(y.$$.fragment,k),$(P.block),$(C.$$.fragment,k),$(w.$$.fragment,k),L=!0)},o(k){W(i.$$.fragment,k),W(o.$$.fragment,k),W(h.$$.fragment,k),W(g.$$.fragment,k),W(y.$$.fragment,k);for(let D=0;D<3;D+=1){const S=P.blocks[D];W(S)}W(C.$$.fragment,k),W(w.$$.fragment,k),L=!1},d(k){k&&(m(t),m(s),m(r),m(a),m(j),m(M),m(V)),m(e),ge(i),ge(o),ge(h),ge(g),ge(y),P.block.d(k),P.token=null,P=null,ge(C),ge(w)}}}function pr(l,e,t){let s,n,r,a,i,c;oe(l,gt,I=>t(7,s=I)),oe(l,bt,I=>t(1,n=I)),oe(l,ft,I=>t(8,r=I)),oe(l,lt,I=>t(9,a=I)),oe(l,et,I=>t(10,i=I)),oe(l,us,I=>t(11,c=I));let o,f;Kl(()=>(c&&C(),window.addEventListener("keydown",h),window.addEventListener("mousedown",h),window.addEventListener("touchstart",h),()=>{window.removeEventListener("keydown",h),window.removeEventListener("mousedown",h),window.removeEventListener("touchstart",h)})),Qt.subscribe(I=>{I&&I.channels[1].addListener("noteon",p)});function h(){$e.initAudio(),window.removeEventListener("keydown",h),window.removeEventListener("mousedown",h),window.removeEventListener("touchstart",h)}function p(I){if(o)return;const w=I.rawData;b(w[1],w[2])}function b(I,w){const L=n;L instanceof At&&!(L!=null&&L.ended)&&s==="waiting"?y(I):L instanceof ut&&!(L!=null&&L.ended)&&s==="waiting"?(L.addPlayedNote(I),f||(f=setTimeout(T,2e3))):L||fe.pushPlayed(I),i&&i.noteOn(I,a.fixedVelocity??w)}function g(){r.autoplay&&r.waitSeconds>0?t(0,o=setTimeout(()=>{r.autoplay&&be.nextGuess(),t(0,o=void 0)},r.waitSeconds*1e3)):r.autoplay?be.nextGuess():t(0,o=void 0)}function T(){var w;const I=n;if(I instanceof ut){const L=I.guess();fe.setPlayed(((w=I.latestGuess.guessed)==null?void 0:w.notes)||[],L,-1),be.updateState(L?"correct":"wrong"),g()}f=void 0}function y(I){const w=n;if(w instanceof At&&s==="waiting"){fe.setTarget([fe.getNote(w.current)]);const L=w.guess(I);be.updateState(L?"correct":"wrong"),fe.pushPlayed(I,L,4e3),g()}}function j(I){const w=n;if(w instanceof ut&&s==="waiting"){const L=w.guessWrittenChord(I.detail);be.updateState(L?"correct":"wrong"),g()}}function M(I){const w=n;if(w instanceof Dt&&s==="waiting"){const L=I.detail.replaceAll("♭","b").replaceAll("♯","#"),P=w.guess(L);be.updateState(P?"correct":"wrong"),g()}}function V(I){b(I.detail,80)}async function C(){const I=await $e.openMidi();"data"in I?I.data.name:(I.err,console.error(I.err))}return[o,n,j,M,V]}class br extends Re{constructor(e){super(),He(this,e,pr,mr,qe,{})}}export{Ds as F,ut as G,br as P,_n as S,At as a,be as b,bt as c,vt as d,Ql as e,gt as g,et as p,Tt as s,Bs as t};
