import{_ as de}from"./preload-helper.a4192956.js";import{S as We,i as qe,s as $e,e as b,m as V,a as k,b as T,o as j,d as m,f as h,R as me,L as W,g as U,h as f,T as Qe,p as x,t as H,C as xe,l as z,w as ze,U as st,N as Ee,P as we,c as Ns,V as ae,u as Ls,j as Ds,k as Ps,W as es,X as yt,Y as Be,v as je,F as Os,Z as ts,_ as ss,z as Y,A as Q,B as oe,q as ue,O as et,H as pe,I as ve,J as ge,K as be,$ as Te,Q as Tt,a0 as Ue,a1 as Tn,n as se,M as he,a2 as cs,r as fn,a3 as In,a4 as ls,a5 as An,a6 as Sn,G as Nn}from"./vendor_svelte.687df11a.js";import{w as Yt,b as Ln,c as Dn,e as zs,f as Ws,g as Vs,h as ns,i as as,j as Pn,a as qs,k as Es}from"./vendor.13a9dfeb.js";function $s(s,e,t){const l=s.slice();return l[22]=e[t].key,l[23]=e[t].value,l[24]=e[t].icon,l[26]=t,l}const On=s=>({}),Js=s=>({});function Ys(s){let e,t,l,n,o,a,r,i,c,d,u;const _=s[17].header,v=Ns(_,s,s[16],Js);let p=ae(s[0]),g=[];for(let y=0;y<p.length;y+=1)g[y]=Xs($s(s,p,y));const N=y=>z(g[y],1,1,()=>{g[y]=null});return{c(){e=b("button"),l=V(),n=b("ul"),o=b("li"),v&&v.c(),a=V();for(let y=0;y<g.length;y+=1)g[y].c();this.h()},l(y){e=k(y,"BUTTON",{class:!0,tabindex:!0}),T(e).forEach(m),l=j(y),n=k(y,"UL",{class:!0});var I=T(n);o=k(I,"LI",{});var C=T(o);v&&v.l(C),C.forEach(m),a=j(I);for(let E=0;E<g.length;E+=1)g[E].l(I);I.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",r=me(`items-list bg-white py-1.5 py-2 w-48 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(y,I){U(y,e,I),U(y,l,I),U(y,n,I),f(n,o),v&&v.m(o,null),f(n,a);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(n,null);c=!0,d||(u=x(e,"click",s[11]),d=!0)},p(y,I){if(s=y,v&&v.p&&(!c||I&65536)&&Ls(v,_,s,s[16],c?Ps(_,s[16],I,On):Ds(s[16]),Js),I&8457){p=ae(s[0]);let C;for(C=0;C<p.length;C+=1){const E=$s(s,p,C);g[C]?(g[C].p(E,I),H(g[C],1)):(g[C]=Xs(E),g[C].c(),H(g[C],1),g[C].m(n,null))}for(xe(),C=p.length;C<g.length;C+=1)N(C);ze()}(!c||I&4&&r!==(r=me(`items-list bg-white py-1.5 py-2 w-48 max-h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",r)},i(y){if(!c){y&&es(()=>{c&&(t||(t=yt(e,ts,{duration:Qt},!0)),t.run(1))}),H(v,y);for(let I=0;I<p.length;I+=1)H(g[I]);y&&es(()=>{c&&(i||(i=yt(n,ss,{duration:Qt},!0)),i.run(1))}),c=!0}},o(y){y&&(t||(t=yt(e,ts,{duration:Qt},!1)),t.run(0)),z(v,y),g=g.filter(Boolean);for(let I=0;I<g.length;I+=1)z(g[I]);y&&(i||(i=yt(n,ss,{duration:Qt},!1)),i.run(0)),c=!1},d(y){y&&(m(e),m(l),m(n)),y&&t&&t.end(),v&&v.d(y),Be(g,y),y&&i&&i.end(),d=!1,u()}}}function Qs(s){let e,t,l,n,o,a,r=s[23]+"",i,c,d,u,_;const v=[jn,Vn],p=[];function g(y,I){return y[24]?0:1}l=g(s),n=p[l]=v[l](s);function N(){return s[20](s[22])}return{c(){e=b("li"),t=b("button"),n.c(),o=V(),a=b("div"),i=Y(r),c=V(),this.h()},l(y){e=k(y,"LI",{});var I=T(e);t=k(I,"BUTTON",{class:!0});var C=T(t);n.l(C),o=j(C),a=k(C,"DIV",{});var E=T(a);i=Q(E,r),E.forEach(m),C.forEach(m),c=j(I),I.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),W(t,"selected",s[22]===s[3])},m(y,I){U(y,e,I),f(e,t),p[l].m(t,null),f(t,o),f(t,a),f(a,i),f(e,c),d=!0,u||(_=x(t,"click",N),u=!0)},p(y,I){s=y;let C=l;l=g(s),l===C?p[l].p(s,I):(xe(),z(p[C],1,1,()=>{p[C]=null}),ze(),n=p[l],n?n.p(s,I):(n=p[l]=v[l](s),n.c()),H(n,1),n.m(t,o)),(!d||I&1)&&r!==(r=s[23]+"")&&oe(i,r),(!d||I&9)&&W(t,"selected",s[22]===s[3])},i(y){d||(H(n),d=!0)},o(y){z(n),d=!1},d(y){y&&m(e),p[l].d(),u=!1,_()}}}function Vn(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){U(t,e,l)},p:ue,i:ue,o:ue,d(t){t&&m(e)}}}function jn(s){let e,t;return e=new et({props:{class:"mr-2",icon:s[24],width:16}}),{c(){pe(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},p(l,n){const o={};n&1&&(o.icon=l[24]),e.$set(o)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function Xs(s){let e,t,l=!s[8][s[26]]&&Qs(s);return{c(){l&&l.c(),e=je()},l(n){l&&l.l(n),e=je()},m(n,o){l&&l.m(n,o),U(n,e,o),t=!0},p(n,o){n[8][n[26]]?l&&(xe(),z(l,1,1,()=>{l=null}),ze()):l?(l.p(n,o),o&256&&H(l,1)):(l=Qs(n),l.c(),H(l,1),l.m(e.parentNode,e))},i(n){t||(H(l),t=!0)},o(n){z(l),t=!1},d(n){n&&m(e),l&&l.d(n)}}}function Bn(s){let e,t,l,n,o,a,r,i,c,d=s[6]&&Ys(s);return{c(){e=b("div"),t=b("input"),o=V(),d&&d.c(),this.h()},l(u){e=k(u,"DIV",{class:!0,id:!0});var _=T(e);t=k(_,"INPUT",{class:!0,title:!0}),o=j(_),d&&d.l(_),_.forEach(m),this.h()},h(){h(t,"class",l=me(`${s[14].class||""} open-btn w-full text-justify text-sm rounded`)+" svelte-h65upg"),h(t,"title",n=s[14].title||""),W(t,"disabled",s[4]),W(t,"open",s[6]),h(e,"class",a=me(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(u,_){U(u,e,_),f(e,t),Qe(t,s[7]),f(e,o),d&&d.m(e,null),s[21](e),r=!0,i||(c=[x(t,"input",s[18]),x(t,"click",s[9]),x(t,"focus",s[19]),x(t,"input",s[10]),x(t,"keydown",s[12])],i=!0)},p(u,[_]){(!r||_&16384&&l!==(l=me(`${u[14].class||""} open-btn w-full text-justify text-sm rounded`)+" svelte-h65upg"))&&h(t,"class",l),(!r||_&16384&&n!==(n=u[14].title||""))&&h(t,"title",n),_&128&&t.value!==u[7]&&Qe(t,u[7]),(!r||_&16400)&&W(t,"disabled",u[4]),(!r||_&16448)&&W(t,"open",u[6]),u[6]?d?(d.p(u,_),_&64&&H(d,1)):(d=Ys(u),d.c(),H(d,1),d.m(e,null)):d&&(xe(),z(d,1,1,()=>{d=null}),ze()),(!r||_&4&&a!==(a=me(`relative ${u[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!r||_&2)&&h(e,"id",u[1])},i(u){r||(H(d),r=!0)},o(u){z(d),r=!1},d(u){u&&m(e),d&&d.d(),s[21](null),i=!1,st(c)}}}const Qt=400;function Gn(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:o,id:a=void 0,containerClass:r=void 0,selected:i,disabled:c=void 0,onSelect:d}=e,u,_=!1,v=i,p=o.map(P=>!1);function g(){c||t(6,_=!_)}function N(P){t(8,p=o.map(w=>!w.value.toLowerCase().includes(P.currentTarget.value.toLowerCase())))}function y(){t(7,v=i),t(6,_=!1),t(8,p=o.map(P=>!1))}function I(P){if(P.key==="Enter"){const w=p.findIndex(M=>!M);v===i?y():w>-1&&t(6,_=d(o[w].key)),_||(t(8,p=o.map(M=>!1)),P.currentTarget instanceof HTMLElement&&P.currentTarget.blur())}else P.key==="Escape"&&(y(),P.currentTarget instanceof HTMLElement&&P.currentTarget.blur())}function C(P){t(6,_=d(P))}function E(){v=this.value,t(7,v),t(3,i)}const L=()=>t(6,_=!0),S=P=>C(P);function O(P){Os[P?"unshift":"push"](()=>{u=P,t(5,u)})}return s.$$set=P=>{t(14,e=Ee(Ee({},e),we(P))),"options"in P&&t(0,o=P.options),"id"in P&&t(1,a=P.id),"containerClass"in P&&t(2,r=P.containerClass),"selected"in P&&t(3,i=P.selected),"disabled"in P&&t(4,c=P.disabled),"onSelect"in P&&t(15,d=P.onSelect),"$$scope"in P&&t(16,n=P.$$scope)},s.$$.update=()=>{s.$$.dirty&8&&t(7,v=i),s.$$.dirty&1&&t(8,p=o.map(P=>!1))},e=we(e),[o,a,r,i,c,u,_,v,p,g,N,y,I,C,e,d,n,l,E,L,S,O]}class Mn extends We{constructor(e){super(),qe(this,e,Gn,Bn,$e,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:15})}}const Zs={1:0,2:2,3:4,4:5,5:7,6:9,7:11};function Je(s,e=0,t=0){return{interval:`${s}${"♭".repeat(e)}${"♯".repeat(t)}`,interval_seq:s,semitones:dn(s,e,t),flats:e,sharps:t}}function dn(s,e,t){return(s<8?Zs[s]:Zs[s%7])-e+t+Math.floor(s/8)*12}function hn(s){let e,t=0,l=0;s<0?(t=1+Math.floor(-s/100),e=-s%100):s>100?(l=Math.floor(s/100),e=s%100):e=s;const n=dn(e,t,l);return{interval:`${e}${"♭".repeat(t)}${"♯".repeat(l)}`,interval_seq:e,semitones:n,flats:t,sharps:l}}const Un=[[["maj"],["Major Chord"],"major",[1,3,5]],[["6"],["Major 6th Chord"],"major",[1,3,5,6]],[["6/9"],["Major 6th/9th Chord"],"major",[1,3,5,6,9]],[["maj7"],["Major 7th Chord"],"major",[1,3,5,7]],[["maj9"],["Major 9th Chord"],"major",[1,3,5,7,9]],[["maj11"],["Major 11th Chord"],"major",[1,3,5,7,9,11]],[["maj13"],["Major 13th Chord"],"major",[1,3,5,7,9,11,13]],[["m"],["Minor Chord"],"minor",[1,-3,5]],[["m6"],["Minor 6th Chord"],"minor",[1,-3,5,6]],[["m7"],["Minor 7th Chord"],"minor",[1,-3,5,-7]],[["m9"],["Minor 9th Chord"],"minor",[1,-3,5,-7,9]],[["m11"],["Minor 11th Chord"],"minor",[1,-3,5,-7,9,11]],[["m13"],["Minor 13th Chord"],"minor",[1,-3,5,-7,9,11,13]],[["sus2"],["Suspended 2nd Chord"],"suspended",[1,2,5]],[["sus4"],["Suspended 4th Chord"],"suspended",[1,4,5]],[["7sus4"],["Suspended 4th Seventh Chord"],"suspended",[1,4,5,-7]],[["7"],["Dominant 7th Chord"],"major",[1,3,5,-7]],[["7#9"],["Dominant 7th Sharp 9th Chord"],"major",[1,3,5,-7,109]],[["9"],["Dominant 9th Chord"],"major",[1,3,5,-7,9]],[["11"],["Dominant 11th Chord"],"major",[1,3,5,-7,9,11]],[["13"],["Dominant 13th Chord"],"major",[1,3,5,-7,9,11,13]],[["5"],["Power Chord"],"indeterminate",[1,5]],[["dim","°"],["Diminished Chord"],"diminished",[1,-3,-5]],[["dim7","°7"],["Diminished 7th Chord"],"diminished",[1,-3,-5,-107]],[["m7b5"],["Half-Diminished 7th Chord"],"diminished",[1,-3,-5,-7]],[["aug","+"],["Augmented Chord"],"augmented",[1,3,105]],[["aug7","+7"],["Augmented 7th Chord"],"augmented",[1,3,105,-7]]];let gs=[];function mn(){return Un.map(s=>{const e=s[3].map(hn);return{suffixes:s[0],name:s[1][0],type:s[2],intervals:e}})}function Bt(s){gs.length===0&&(gs=mn());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return gs.find(t=>t.suffixes.find(l=>l===e)||t.name.replaceAll(/-|\s/g,"").trim().toLowerCase()===e)}function Rn(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const o=(s.semitones+e)%12;return{...s,semitones:o<0?o+12:o,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function ws(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const o=t[n],a=s+o.semitones,r=e.scaleNotes.find(_=>_.semitones===a%12),i=o.flats>0,c=o.sharps>0,d=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(Rn(r??e.notesMap.get(d),r?0:u,a))}return l}const el=["B♭","E♭","A♭","D♭","G♭","C♭","F♭"],Kn=["F♯","C♯","G♯","D♯","A♯","E♯","B♯"],tl=new Map([[0,"C"],[-1,"F"],[-2,"B♭"],[-3,"E♭"],[-4,"A♭"],[-5,"D♭"],[-6,"G♭"],[-7,"C♭"],[1,"G"],[2,"D"],[3,"A"],[4,"E"],[5,"B"],[6,"F♯"],[7,"C♯"]]);function Fn(s){let e=0,t=0;for(let l=0;l<el.length;l+=1){const n=s.find(a=>a.note.slice(0,2)===el[l]),o=s.find(a=>a.note.slice(0,2)===Kn[l]);if(n)e+=1;else if(o)t+=1;else break}return e>t?{flats:e,sharps:0,majorSignature:tl.get(e*-1)}:{flats:0,sharps:t,majorSignature:tl.get(t)}}function Hn(s){return s>=9?`${s>=10?"X":""}${s===9?"IX":"I".repeat(s%10)}`:`${s>=5?"V":""}${s===4?"IV":"I".repeat(s%5)}`}function _n(s){return s.map(e=>{const t=[Je(1)];let l;return e.major?(t.push(Je(3)),e.suffix.startsWith("+")?t.push(Je(5,0,1)):e.suffix.startsWith("6")?t.push(Je(6)):e.suffix.startsWith("7")?t.push(Je(7,1)):e.suffix.startsWith("maj7")?t.push(Je(7)):l=Bt("maj")):e.minor?(t.push(Je(3,1)),e.suffix.startsWith("°")?t.push(Je(5,1)):e.suffix.startsWith("6")?(t.push(Je(6)),l=Bt("m"+e.suffix)):e.suffix.startsWith("7")?(t.push(Je(7,1)),l=Bt("m"+e.suffix)):l=Bt("m")):e.suffix.startsWith("sus2")?t.push(Je(2)):e.suffix.startsWith("sus4")&&t.push(Je(4)),t.length<=2&&t.push(Je(5)),t.length<=2&&t.push(Je(8)),l||(l=Bt(e.suffix)),{...l,intervals:t}})}function xn(s,e){let t=e.has(4)&&e.has(7),l=e.has(3)&&e.has(7);const n=Hn(s);let o="";return t||l||(e.has(3)&&e.has(6)?(o="°",l=!0):e.has(4)&&e.has(8)?(o="+",t=!0):e.has(3)&&e.has(10)?(l=!0,o="7"):e.has(4)&&e.has(10)?(o="7",t=!0):e.has(4)&&e.has(11)?(o="maj7",t=!0):e.has(3)&&e.has(8)?(o="6",l=!0):e.has(4)&&e.has(9)?(o="6",t=!0):e.has(2)?o="sus2":e.has(5)?o="sus4":e.has(7)?o="5":o="?"),{degree:s,roman:l?n.toLowerCase():n,suffix:o,major:t,minor:l,semitones:e}}function zn(s){const e=s.length;return s.map((t,l)=>{const n=t.semitones,o=new Set;for(let a=1;a<e;a+=1){const r=s[(l+a)%e].semitones,i=r<=n?r+12-n:r-n;o.add(i)}return xn(t.interval_seq,o)})}const Wn=[[["Major"],[1,2,3,4,5,6,7]],[["Major Pentatonic","Mongolian"],[1,2,3,5,6]],[["Major Pentatonic Blues"],[1,2,-3,3,5,6]],[["Suspended Pentatonic","Egyptian"],[1,2,4,5,-7]],[["Scottish Pentatonic"],[1,2,4,5,6]],[["Harmonic Major"],[1,2,3,4,5,-6,7]],[["Double Harmonic","Byzantine","Arabic"],[1,-2,3,4,5,-6,7]],[["Minor"],[1,2,-3,4,5,-6,-7]],[["Minor Pentatonic"],[1,-3,4,5,-7]],[["Minor Pentatonic Blues"],[1,-3,4,-5,5,-7]],[["Minor 6th Pentatonic"],[1,-3,4,5,6]],[["Harmonic Minor"],[1,2,-3,4,5,-6,7]],[["Melodic Minor Ascending"],[1,2,-3,4,5,6,7]],[["Melodic Minor Descending"],[1,-7,-6,5,4,-3,2,1]],[["Ionian"],[1,2,3,4,5,6,7]],[["Dorian"],[1,2,-3,4,5,6,-7]],[["Phrygian"],[1,-2,-3,4,5,-6,-7]],[["Phrygian Dominant"],[1,-2,3,4,5,-6,-7]],[["Lydian"],[1,2,3,104,5,6,7]],[["Lydian Dominant","Acoustic"],[1,2,3,104,5,6,-7]],[["Aeolian"],[1,2,-3,4,5,-6,-7]],[["Mixolydian"],[1,2,3,4,5,6,-7]],[["Mixolydian Flat-6"],[1,2,3,4,5,-6,-7]],[["Locrian"],[1,-2,-3,4,-5,-6,-7]],[["Locrian Natural-2","Half-Diminished"],[1,2,-3,4,-5,-6,-7]],[["Super Locrian","Altered scale"],[1,-2,-3,-4,-5,-6,-7]],[["Enigmatic Major"],[1,-2,3,104,105,106,7]],[["Enigmatic Minor"],[1,-2,-3,104,5,106,7]],[["Diminished Whole-Half"],[1,2,-3,4,-5,-6,6,7]],[["Diminished Half-Whole"],[1,-2,-3,-4,-5,5,6,-7]],[["Whole Tone"],[1,2,3,104,105,-7]],[["Augmented"],[1,-3,3,5,105,7]],[["Dominant 7th"],[1,2,4,5,6,-7]],[["Prometheus","Mystic"],[1,2,3,104,6,-7]],[["Overtone"],[1,2,3,104,5,6,-7]],[["Leading Tone"],[1,2,3,104,-6,-7,7]],[["Bebop Major"],[1,2,3,4,5,105,6,7]],[["Bebop Minor"],[1,2,-3,3,4,5,6,-7]],[["Bebop Dominant"],[1,2,3,4,5,6,-7,7]],[["Neapolitan Major"],[1,-2,-3,4,5,6,7]],[["Neapolitan Minor"],[1,-2,-3,4,5,-6,7]],[["Hungarian Major"],[1,102,3,104,5,6,-7]],[["Hungarian Minor"],[1,2,-3,104,5,-6,7]],[["Hungarian Gypsy"],[1,2,-3,104,5,-6,-7]],[["Spanish"],[1,-2,-3,3,-5,-6,-7]],[["Spanish Eight Tone","Jewish Eight Tone"],[1,-2,-3,3,4,-5,-6,-7]],[["Spanish Gypsy"],[1,-2,3,4,5,-6,-7]],[["Hirajoshi"],[1,2,-3,5,-6]],[["Japanese A"],[1,-2,4,-5,6]],[["Japanese B"],[1,2,4,-5,6]],[["Yo"],[1,2,4,5,6,-7]],[["Insen"],[1,-2,4,5,-7]],[["Iwato"],[1,-2,4,-5,-7]],[["Oriental"],[1,-2,3,4,-5,6,-7]],[["Persian"],[1,-2,3,4,-5,-6,7]],[["Arabian"],[1,2,3,4,104,105,-7]],[["Balinese"],[1,-2,-3,5,-6]],[["Kumoi"],[1,2,-3,5,6]],[["Pelog"],[1,-2,-3,5,-6]],[["Algerian"],[1,2,-3,4,104,5,-6,7]],[["Chinese"],[1,104,5,7]],[["Romanian Major"],[1,-2,3,104,5,6,-7]],[["Romanian Minor"],[1,2,-3,104,5,6,-7]],[["Hindu"],[1,2,3,4,5,-6,-7]],[["Istrian"],[1,-2,-3,-4,-5,5]],[["Ukrainian Dorian"],[1,2,-3,104,5,6,-7]]];let bs=[];function us(){return Wn.map(s=>{const e=s[0],t=s[1].map(hn),l=zn(t);return{names:e,intervals:t,triads:l}})}function qn(s){bs.length===0&&(bs=us());const e=s.replaceAll(/-|\s/g,"").toLowerCase().trim();return bs.find(t=>t.names.find(l=>l.replaceAll(/-|\s/g,"").trim().toLowerCase()===e))}const $n=/^[a-gA-G][♭Bb#♯sS]*[0-9]?$/,Jn=/^[0-9]$/,nt=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function js(s){const e=s.midi+s.flats-s.sharps;return e===12?1:Math.floor((e-12)/12)}function tt(s){return`${s.note}${js(s)}`}function Dt(s){const t=(s-12)%12;return{...nt[t],semitones:t,midi:s}}function Yn(s,e=!0,t=!1){if(e&&!$n.test(s))return{err:`Unrecognized note "${s}"`,code:400};const l=s.trim(),n=l.charAt(0).toUpperCase(),o=nt.find(u=>u.note.charAt(0)===n&&u.note.length===1);if(!o)return{err:`Unable to find note ${l}`,code:500};const a=l.slice(1).split("").reduce((u,_)=>u+(_.toLowerCase()==="b"||_==="♭"?-1:_==="#"||_==="♯"?1:0),0);let r;if(Jn.test(l.charAt(l.length-1)))try{r=parseInt(l.charAt(l.length-1),10)}catch{}if(t&&r===void 0)return{err:`No octave provided: ${s}`,code:400};r===void 0&&(r=0);let i=(o.semitones+a)%12;i=i<0?i+12:i;const c=a<0?-a:0,d=a>0?a:0;return{data:{note:`${n}${"♭".repeat(c)}${"♯".repeat(d)}`,semitones:i,midi:12+r*12+i,flats:c,sharps:d}}}function pn(s){const e=nt.find(t=>t.note.charAt(0)===s.charAt(0)&&t.note.length===1);if(e){const t=s.slice(1).split("").reduce((n,o)=>n+(o.toLowerCase()==="b"||o==="♭"?-1:o==="#"||o==="♯"?1:0),0),l=(e.semitones+t)%12;return{note:s,semitones:l<0?l+12:l,flats:t<0?-t:0,sharps:t>0?t:0}}}const Qn=/^[a-gA-G][♭b#♯]?$/,ks="ABCDEFG";function Xn(s,e){return e.map(t=>ks.charAt((ks.indexOf(s)+t.interval_seq-1)%ks.length))}function Zn(s,e,t){return t.map((l,n)=>{const o=e[n],a=(s+l.semitones)%12,r=nt[a],i=r.note.charAt(0);if(i<o&&(i!=="A"||o!=="G")||i==="G"&&o==="A"){let c=1,d=nt[(a+c)%12];for(;d.note.charAt(0)!==o;)c+=1,d=nt[(a+c)%12];return{semitones:a,note:d.note+"♭".repeat(c),flats:c+(d.note.includes("♭")?1:0),sharps:0}}else if(i>o||i==="A"&&o==="G"){let c=1,d=a===0?nt.length-1:a-c,u=nt[d];for(;u.note.charAt(0)!==o;)c+=1,d=d===0?nt.length-1:d-1,u=nt[d];return{semitones:a,note:u.note+"♯".repeat(c),flats:0,sharps:c+(u.note.includes("♯")?1:0)}}else return{semitones:a,note:r.note,flats:r.flats,sharps:r.sharps}})}function Gt(s,e){if(!Qn.test(s))return{err:`Unknown key: ${s}`,code:400};const t=qn(e);if(!t)return{err:`Unknown scale: ${e}`,code:404};const l=`${s.charAt(0).toUpperCase()}${s.charAt(1).replace("b","♭").replace("#","♯")}`,n=pn(l);if(!n)return{err:`Unable to find root for note: ${l}`,code:404};const o=Xn(l.charAt(0),t.intervals),a=Zn(n.semitones,o,t.intervals),r=new Map(nt.map(i=>{const c=a.find(d=>d.semitones===i.semitones);return c?[i.semitones,c]:[i.semitones,{...i}]}));return{data:{key:l,scale:t.names[0],names:t.names,...Fn(a),intervals:t.intervals.map(i=>({...i})),triads:t.triads.map(i=>({...i})),scaleNotes:a,notesMap:r}}}const Cs=new Map;function ea(s,e){try{const t=e==="local"?window.localStorage:window.sessionStorage;return{data:JSON.parse(t.getItem(s)||"")}}catch(t){return{err:`Failed to retrieve value from storage: ${t}`,code:400}}}function ta(s,e,t){try{return(t==="local"?window.localStorage:window.sessionStorage).setItem(e,JSON.stringify(s)),{data:void 0}}catch(l){return{err:`Failed to store the value: ${l}`,code:400}}}function ht(s,e){const{key:t,storage:l="local",namespace:n="default"}=e,o=ea(t,l),a=Te(s);"data"in o?s.set(e.deserialize?e.deserialize(o.data):o.data):"err"in o&&(e!=null&&e.debug)&&console.info(o.err);const r=s.subscribe(c=>{const d=ta(e.serialize?e.serialize(c):c,t,l);"err"in d&&(e!=null&&e.debug)&&console.error(d.err)}),i=Cs.get(n);return i?i.push({key:t,storage:l,value:s,defaultValue:a,unsubscribe:r}):Cs.set(n,[{key:t,storage:l,value:s,defaultValue:a,unsubscribe:r}]),s}function sa(s=["default"],e){s.forEach(t=>{var l;(l=Cs.get(t))==null||l.forEach(n=>{if(e!=null&&e.cb)e==null||e.cb(n);else try{e!=null&&e.unsubscribe&&n.unsubscribe(),n.value.set(n.defaultValue),(n.storage==="local"?window.localStorage:window.sessionStorage).removeItem(n.key)}catch{}})})}async function la(s,e){const t=await fetch(s);if(!t.ok)return{err:t.statusText,code:t.status};const l=await t.arrayBuffer();return{data:await e.decodeAudioData(l)}}async function na(s,e){const t=["/a0.mp3","/a1.mp3","/a2.mp3","/a3.mp3","/a4.mp3","/a5.mp3","/a6.mp3","/a7.mp3","/damper.mp3","/Piano Impulse6.mp3"],l=await Promise.all(t.map(o=>la(`${s}${o}`,e))),n=[];return l.forEach(o=>{"err"in o?console.error(`Failed to load audio: ${o.err}`):n.push(o.data)}),n}class aa{constructor(e,t,l,n){this.noteA=t.createBufferSource(),this.noteB=t.createBufferSource(),this.gainA=t.createGain(),this.gainB=t.createGain(),this.gain=t.createGain(),this.biquadFilter=t.createBiquadFilter(),this.biquadFilter.type="lowpass",this.biquadFilter.connect(l),this.gain.connect(this.biquadFilter),this.gainA.connect(this.gain),this.noteA.connect(this.gainA),this.gainB.connect(this.gain),this.noteB.connect(this.gainB),e<90&&(this.damp=t.createBufferSource(),this.damp.buffer=n,this.damp.connect(l))}on(e,t,l,n,o,a,r,i){this.noteA.buffer=e,this.noteA.playbackRate.value=l,this.biquadFilter.frequency.value=o,this.gainA.gain.value=a,this.gain.gain.value=i,t&&(this.noteB.buffer=t,this.noteB.playbackRate.value=n,this.gainB.gain.value=r,this.noteB.start(0)),this.noteA.start(0)}off(e,t,l){var n;this.gain.gain.setTargetAtTime(0,e,t),this.noteA.stop(l),this.noteB.stop(l),(n=this.damp)==null||n.start(0)}}class oa{constructor(e){return this.bufferlists=[],this.sus=!1,this.sustained=[],this.notes=new Map,this.context=e,this.convolver=e.createConvolver(),this.directGain=e.createGain(),this.convGain=e.createGain(),this.convGainAfter=e.createGain(),this.convGain.connect(this.convolver),this.convolver.connect(this.convGainAfter),this.convGainAfter.connect(e.destination),this.directGain.connect(e.destination),this.directGain.connect(this.convGain),this.directGain.gain.value=.75,this.convGain.gain.value=0,this.convGainAfter.gain.value=0,this}load(e){e.forEach((t,l)=>{this.bufferlists.push(t),l===8?this.damper=t:l===9&&(this.convolver.buffer=t)})}playChord(e,t=80){e.forEach(l=>{this.noteOn(l,t)})}noteOn(e,t=80){if(e<109&&e>20){const l=this.notes.get(e);l&&(l.off(this.context.currentTime,1.1,this.context.currentTime+2),this.sustained.splice(this.sustained.indexOf(e),1));const n=Math.floor((e-21)/12),o=n+1,a=n*12+21,r=2**((e-69)/12)*440,i=t/127;let c=r*(2-(e-21)/50)+3*r*i;e<60&&(c=440*(3-(60-21)/50)+3*r*i);const d=1-(e%12/12+1)/12,u=Math.pow(2,(e-a)/12),_=0,v=0,p=i**1.4,g=new aa(e,this.context,this.directGain,this.damper);g.on(this.bufferlists[n],this.bufferlists[o],u,_,c,d,v,p),this.notes.set(e,g)}}noteOff(e){if(this.sus)this.sustained.push(e);else{const t=this.notes.get(e);e<90&&t&&t.off(this.context.currentTime+.03,.08,this.context.currentTime+2),this.notes.delete(e)}}sustain(e){if(e==127)this.sus=!0,this.convGain.gain.value=1,this.convGainAfter.gain.value=1;else if(e==0){this.sus=!1,this.convGain.gain.value=0,this.convGainAfter.gain.value=0;for(let t=0;t<this.sustained.length;t++)this.notes.has(this.sustained[t])&&this.noteOff(this.sustained[t]);this.sustained.length=0}}}const ra="/midi-note-trainer/",Ts=ht(Ue(!1),{key:"midi-access"}),os=Ue(void 0),fs=ht(Ue([60,84]),{key:"midi-range",storage:"session"}),rs=Tt(fs,s=>[Dt(s[0]),Dt(s[1])]),sl=Ue(void 0),at=Ue(void 0),ot=ht(Ue({fixedVelocity:void 0,keyFadeTimeout:1500,useSound:!0,useKeyboard:!0,useHotkeys:!0,useAutoOctave:!0}),{key:"inputs"}),Ye={async openMidi(){return Yt.enable().then(()=>(Ts.set(!0),Yt.inputs.length>0?(os.set(Yt.inputs[0]),{data:Yt.inputs[0]}):{err:"No MIDI device found.",code:400})).catch(s=>({err:s.toString(),code:403}))},disableMidi(){Ts.set(!1),os.set(void 0)},setMidiRange(s){fs.set(s)},setInputValue(s,e){ot.update(t=>({...t,[s]:e})),s==="useSound"&&!e?at.set(void 0):s==="useSound"&&!Te(at)&&this.initAudio()},async initAudio(){let s=Te(sl);if(s||(s=new AudioContext,sl.set(s)),!Te(at)){const e=new oa(s),t=await na(`${ra}audio`,s);e.load(t),at.set(e)}}};let lt;Tn({A:{note:"C",semitones:0,flats:0,sharps:0},W:{note:"C♯",semitones:1,flats:0,sharps:1},S:{note:"D",semitones:2,flats:0,sharps:0},E:{note:"E♭",semitones:3,flats:1,sharps:0},D:{note:"E",semitones:4,flats:0,sharps:0},F:{note:"F",semitones:5,flats:0,sharps:0},T:{note:"F♯",semitones:6,flats:0,sharps:1},G:{note:"G",semitones:7,flats:0,sharps:0},Y:{note:"G♯",semitones:8,flats:0,sharps:1},H:{note:"A",semitones:9,flats:0,sharps:0},U:{note:"B♭",semitones:10,flats:1,sharps:0},J:{note:"B",semitones:11,flats:0,sharps:0},K:{note:"C",semitones:12,flats:0,sharps:0},O:{note:"C♯",semitones:13,flats:0,sharps:1},L:{note:"D",semitones:14,flats:0,sharps:0},P:{note:"E♭",semitones:15,flats:1,sharps:0},Ö:{note:"E",semitones:16,flats:0,sharps:0},Ä:{note:"F",semitones:17,flats:0,sharps:0},Å:{note:"F♯",semitones:18,flats:0,sharps:1}});const Ct=Ue(["C","Major"]),Vt=Tt(Ct,s=>{const e=Gt(s[0],s[1]);return"data"in e?e.data:{key:s[0],scale:s[1],names:["major"],flats:0,sharps:0,majorSignature:"C",intervals:[],scaleNotes:[],triads:[],notesMap:new Map}}),ll=Ue([]),gt=Ue([]);function Is(s,e){if(s.length>0){const t=Date.now();let l=t;const n=s.filter(o=>(o.started+e>t&&(l=Math.min(l,o.started)),o.started+e>t));return!lt&&n.length>0&&(lt=setTimeout(()=>{lt=void 0,gt.update(o=>Is(o,e))},e-(t-l)+100)),n}return s}const Ie={setKey(s){Ct.update(e=>[s,e[1]])},setScale(s){Ct.update(e=>[e[0],s])},setKeyAndScale(s,e){Ct.set([s,e])},setTarget(s=[]){ll.set(s)},getNote(s){return{...Te(Vt).notesMap.get(s%12),midi:s}},pushPlayed(s,e,t){const n={...Te(Vt).notesMap.get(s%12),midi:s},o=Date.now(),a=e===void 0?"default":e?"correct":"wrong";if(gt.update(r=>{const i=r.findIndex(c=>c.midi===s);return i>=0&&r.splice(i,1),[...r,{...n,color:a,started:o}]}),!lt&&t!==-1){const r=t??Te(ot).keyFadeTimeout;lt=setTimeout(()=>{lt=void 0,gt.update(i=>Is(i,r))},r)}},setPlayed(s,e,t){const l=Date.now(),n=e===void 0?"default":e?"correct":"wrong";if(gt.update(o=>[...s.map(a=>({...a,color:n,started:l}))]),!lt&&t!==-1){const o=t??Te(ot).keyFadeTimeout;lt=setTimeout(()=>{lt=void 0,gt.update(a=>Is(a,o))},o)}},clearPlayed(){gt.set([]),clearTimeout(lt),lt=void 0},clearScore(s=!1){s&&Ct.set(["C","Major"]),ll.set([]),gt.set([])}};class Bs{constructor(e,t,l){this.guesses=[],this.times=[],this.correct=0,this.guessed=0,this.idx=0,this.type=e,this.data=t,this.baseOptions=l;const n=[],{count:o}=l,a=t.map(i=>typeof i=="object"&&i!==null?{...i}:i);let r=l.duplicates;!l.duplicates&&o>a.length&&(console.warn(`Trying to create game with count ${o} larger than available unique values ${t.length}`),r=!0);for(let i=0;i<o;i+=1){const c=Math.floor(Math.random()*a.length);if(r)n.push(a[c]);else{const d=a.splice(c,1);d.length>0&&n.push(d[0])}}this.sampled=n,this.timing=performance.now()}get current(){return this.sampled[this.idx]}get latestGuess(){const e=this.sampled[this.idx-1],t=this.guesses[this.idx-1];return{target:e,guessed:t}}get ended(){return this.sampled.length<this.idx+1}get avgTime(){let e=0;for(let t=0;t<this.times.length;t+=1)e+=this.times[t];return Math.round(e/10/this.times.length)/100}addGuessed(e,t){return this.guesses.push(e),t&&(this.correct+=1),this.idx+=1,this.times.push(performance.now()-this.timing),t}guess(e){return!1}startTime(){this.timing=performance.now()}}function ia(s,e,t){let l=e<0?s.flats-e:s.flats,n=e>0?s.sharps+e:s.sharps;if(l>0&&n>0){const a=Math.min(l,n);l-=a,n-=a}const o=(s.semitones+e)%12;return{...s,semitones:o<0?o+12:o,note:`${s.note.charAt(0)}${"♭".repeat(l)}${"♯".repeat(n)}`,flats:l,sharps:n,midi:t}}function ca(s,e,t){const l=[];for(let n=0;n<t.length;n+=1){const o=t[n],a=s+o.semitones,r=e.scaleNotes.find(_=>_.semitones===a%12),i=o.flats>0,c=o.sharps>0,d=(i?a+1:c?a-1:a)%12,u=i?-1:c?1:0;l.push(ia(r??e.notesMap.get(d),r?0:u,a))}return l}const ua=[{note:"C",semitones:0,sharps:0,flats:0},{note:"C♯",semitones:1,sharps:1,flats:0},{note:"D",semitones:2,sharps:0,flats:0},{note:"E♭",semitones:3,sharps:0,flats:1},{note:"E",semitones:4,sharps:0,flats:0},{note:"F",semitones:5,sharps:0,flats:0},{note:"F♯",semitones:6,sharps:1,flats:0},{note:"G",semitones:7,sharps:0,flats:0},{note:"G♯",semitones:8,sharps:1,flats:0},{note:"A",semitones:9,sharps:0,flats:0},{note:"B♭",semitones:10,sharps:0,flats:1},{note:"B",semitones:11,sharps:0,flats:0}];function fa(s){const t=(s-12)%12;return{...ua[t],semitones:t,midi:s}}function da(s){return`${s.note.trim().charAt(0).toUpperCase()}${"♭".repeat(s.flats)}${"♯".repeat(s.sharps)}`}class ft extends Bs{constructor(e,t,l){const n=t.range[0],o=t.range[1],a=new Set(t.scale.scaleNotes.map(i=>i.semitones)),r=l.chords.flatMap(i=>{const c=[],d=i.intervals.reduce((u,_)=>_.semitones>u?_.semitones:u,0);for(let u=n;u<=o-d;u+=1)if((!l.onlyScale||a.has(u%12))&&(!i.allowed||i.allowed.has(u%12))){const _=ca(u,t.scale,i.intervals);c.push({...i,rootNote:_[0].note,chord:`${_[0].note}${i.suffixes[0]}`,notes:_})}return c});super(e,r,t),this.played=new Set,this.opts=l}addPlayedNote(e){this.played.add(e)}guessWrittenChord(e){const t={chord:`${da(e)}${e.chord.toLowerCase()}`,notes:[]};let l=this.current.chord===t.chord;return this.current.chord.slice(-3)==="maj"&&!l&&(l=this.current.chord.slice(0,-3)===t.chord),this.addGuessed(t,l)}guess(){const e=Array.from(this.played.values()).map(n=>fa(n)).sort((n,o)=>n.midi-o.midi);this.played.clear();const t={chord:"",notes:e},l=this.current.notes.every(n=>e.find(o=>o.midi%12===n.midi%12));return this.addGuessed(t,l)}}const ha={major:{C:{num:0},F:{acc:"b",num:1},Bb:{acc:"b",num:2},Eb:{acc:"b",num:3},Ab:{acc:"b",num:4},Db:{acc:"b",num:5},Gb:{acc:"b",num:6},Cb:{acc:"b",num:7},G:{acc:"#",num:1},D:{acc:"#",num:2},A:{acc:"#",num:3},E:{acc:"#",num:4},B:{acc:"#",num:5},"F#":{acc:"#",num:6},"C#":{acc:"#",num:7}},minor:{A:{num:0},D:{acc:"b",num:1},G:{acc:"b",num:2},C:{acc:"b",num:3},F:{acc:"b",num:4},Bb:{acc:"b",num:5},Eb:{acc:"b",num:6},Ab:{acc:"b",num:7},E:{acc:"#",num:1},B:{acc:"#",num:2},"F#":{acc:"#",num:3},"C#":{acc:"#",num:4},"G#":{acc:"#",num:5},"D#":{acc:"#",num:6},"A#":{acc:"#",num:7}}};class Mt extends Bs{constructor(e,t){const l=e==="keys-major"?"major":"minor";super(e,Object.keys(ha[l]),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}class Ot extends Bs{constructor(e,t){const l=t.range[0],n=t.range[1];super(e,Array.from(new Array(n-l+1)).map((o,a)=>l+a),t)}guess(e){const t=this.current===e;return this.addGuessed(e,t)}}const vn={count:10,duplicates:!0,autoplay:!0,waitSeconds:3},bt=Ue("waiting"),dt=ht(Ue(vn),{key:"game-options"}),Et=Ue(void 0),Gs=Ue(mn().map(s=>({...s,selected:!0}))),Se={play(...[s,e]){var i,c,d;let t;const l=Te(Vt),n=Te(fs),o=Te(dt),a={scale:l,range:n,duplicates:o.duplicates,count:o.count};let r=[l.key,l.scale];if(s==="notes")t=new Ot(s,a),Ie.setTarget([Ie.getNote(t.current)]),(i=Te(at))==null||i.noteOn(t.current);else if(s==="pitches")t=new Ot(s,a),Ie.setTarget(),Ye.setInputValue("useSound",!0),(c=Te(at))==null||c.noteOn(t.current);else if(s==="keys-major"||s=="keys-minor")t=new Mt(s,a),r=[t.current,s==="keys-major"?"major":"minor"];else if(s==="chords-play"||s==="chords-write")t=new ft(s,a,e);else if(s==="chords-diatonic"){const u=_n(l.triads).map((_,v)=>({..._,allowed:new Set([l.scaleNotes[v].semitones])}));t=new ft(s,a,{chords:u})}else throw Error("Unknown game type: "+s);return typeof t.current!="number"&&typeof t.current!="string"&&((d=Te(at))==null||d.playChord(t.current.notes.map(u=>u.midi)),Ie.setTarget(t.current.notes)),Ie.setKeyAndScale(r[0],r[1]),Ie.clearPlayed(),bt.set("waiting"),Et.set(t),t},updateState(s){bt.set(s)},setOptionValue(s,e){dt.update(t=>({...t,[s]:e}))},toggleChords(s){Gs.update(e=>e.map(t=>({...t,selected:s(t)})))},nextGuess(){var e,t;const s=Te(Et);s!=null&&s.ended?bt.set("ended"):s instanceof Ot?(s.type==="notes"?Ie.setTarget([Ie.getNote(s.current)]):Ie.setTarget(),Ie.clearPlayed(),(e=Te(at))==null||e.noteOn(s.current),Se.updateState("waiting"),s.startTime()):s instanceof ft?(Ie.setTarget(s.current.notes),Ie.clearPlayed(),(t=Te(at))==null||t.playChord(s==null?void 0:s.current.notes.map(l=>l.midi)),bt.set("waiting"),s.startTime()):s instanceof Mt&&(Ie.setKey(s.current),bt.set("waiting"),s.startTime())},clearGame(s=!1){const e=Te(Et);e&&Ie.setKeyAndScale(e.baseOptions.scale.key,e.baseOptions.scale.scale),s&&dt.set(vn),Et.set(void 0),bt.set("waiting"),Ie.clearScore()}};function nl(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function al(s,e,t){const l=s.slice();return l[34]=e[t],l}function ol(s,e,t){const l=s.slice();return l[9]=e[t],l}function rl(s,e,t){const l=s.slice();return l[29]=e[t],l[31]=t,l}function il(s,e,t){const l=s.slice();return l[34]=e[t],l}function cl(s,e,t){const l=s.slice();return l[9]=e[t],l}function ma(s){let e,t=ae(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=ul(il(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o[0]&128){t=ae(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const r=il(n,t,a);l[a]?l[a].p(r,o):(l[a]=ul(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function _a(s){let e,t=ae(s[3][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=fl(cl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o[0]&8){t=ae(n[3][n[31]]);let a;for(a=0;a<t.length;a+=1){const r=cl(n,t,a);l[a]?l[a].p(r,o):(l[a]=fl(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function ul(s){let e,t=s[34].interval+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1f0aomt")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&128&&t!==(t=n[34].interval+"")&&oe(l,t)},d(n){n&&m(e)}}}function fl(s){let e,t=s[9].note+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1f0aomt")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&8&&t!==(t=n[9].note+"")&&oe(l,t)},d(n){n&&m(e)}}}function dl(s){let e,t,l,n,o,a,r=s[29].suffixes[0]+"",i,c,d,u,_,v,p=s[29].name+"",g,N,y,I;n=new et({props:{icon:s[29].selected?ns:as,width:12}});function C(){return s[24](s[29])}function E(O,P){return O[3][O[31]]&&O[3][O[31]].length>0?_a:ma}let L=E(s),S=L(s);return{c(){e=b("li"),t=b("button"),l=b("span"),pe(n.$$.fragment),o=V(),a=b("div"),i=Y(r),c=V(),d=b("li"),S.c(),_=V(),v=b("li"),g=Y(p),this.h()},l(O){e=k(O,"LI",{});var P=T(e);t=k(P,"BUTTON",{class:!0});var w=T(t);l=k(w,"SPAN",{class:!0});var M=T(l);ve(n.$$.fragment,M),M.forEach(m),o=j(w),a=k(w,"DIV",{class:!0});var B=T(a);i=Q(B,r),B.forEach(m),w.forEach(m),P.forEach(m),c=j(O),d=k(O,"LI",{class:!0,title:!0});var A=T(d);S.l(A),A.forEach(m),_=j(O),v=k(O,"LI",{class:!0});var D=T(v);g=Q(D,p),D.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),W(l,"text-green-500",s[29].selected),W(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1f0aomt"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1f0aomt"),W(t,"hidden",s[8]),h(d,"class","intervals svelte-1f0aomt"),h(d,"title",u=s[29].intervals.map(pl).join("-")),h(v,"class","text-xs")},m(O,P){U(O,e,P),f(e,t),f(t,l),ge(n,l,null),f(t,o),f(t,a),f(a,i),U(O,c,P),U(O,d,P),S.m(d,null),U(O,_,P),U(O,v,P),f(v,g),N=!0,y||(I=x(t,"click",C),y=!0)},p(O,P){s=O;const w={};P[0]&128&&(w.icon=s[29].selected?ns:as),n.$set(w),(!N||P[0]&128)&&W(l,"text-green-500",s[29].selected),(!N||P[0]&128)&&W(l,"text-gray-400",!s[29].selected),(!N||P[0]&128)&&r!==(r=s[29].suffixes[0]+"")&&oe(i,r),(!N||P[0]&256)&&W(t,"hidden",s[8]),L===(L=E(s))&&S?S.p(s,P):(S.d(1),S=L(s),S&&(S.c(),S.m(d,null))),(!N||P[0]&128&&u!==(u=s[29].intervals.map(pl).join("-")))&&h(d,"title",u),(!N||P[0]&128)&&p!==(p=s[29].name+"")&&oe(g,p)},i(O){N||(H(n.$$.fragment,O),N=!0)},o(O){z(n.$$.fragment,O),N=!1},d(O){O&&(m(e),m(c),m(d),m(_),m(v)),be(n),S.d(),y=!1,I()}}}function pa(s){let e,t=ae(s[29].intervals),l=[];for(let n=0;n<t.length;n+=1)l[n]=hl(al(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o[0]&64){t=ae(n[29].intervals);let a;for(a=0;a<t.length;a+=1){const r=al(n,t,a);l[a]?l[a].p(r,o):(l[a]=hl(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function va(s){let e,t=ae(s[4][s[31]]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ml(ol(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o[0]&16){t=ae(n[4][n[31]]);let a;for(a=0;a<t.length;a+=1){const r=ol(n,t,a);l[a]?l[a].p(r,o):(l[a]=ml(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function hl(s){let e,t=s[34].interval+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1f0aomt")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&64&&t!==(t=n[34].interval+"")&&oe(l,t)},d(n){n&&m(e)}}}function ml(s){let e,t=s[9].note+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1f0aomt")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&16&&t!==(t=n[9].note+"")&&oe(l,t)},d(n){n&&m(e)}}}function _l(s){let e,t,l,n,o,a,r=s[29].suffixes[0]+"",i,c,d,u,_,v,p=s[29].name+"",g,N,y,I;n=new et({props:{icon:s[29].selected?ns:as,width:12}});function C(){return s[25](s[29])}function E(O,P){return O[4][O[31]]&&O[4][O[31]].length>0?va:pa}let L=E(s),S=L(s);return{c(){e=b("li"),t=b("button"),l=b("span"),pe(n.$$.fragment),o=V(),a=b("div"),i=Y(r),c=V(),d=b("li"),S.c(),_=V(),v=b("li"),g=Y(p),this.h()},l(O){e=k(O,"LI",{});var P=T(e);t=k(P,"BUTTON",{class:!0});var w=T(t);l=k(w,"SPAN",{class:!0});var M=T(l);ve(n.$$.fragment,M),M.forEach(m),o=j(w),a=k(w,"DIV",{class:!0});var B=T(a);i=Q(B,r),B.forEach(m),w.forEach(m),P.forEach(m),c=j(O),d=k(O,"LI",{class:!0,title:!0});var A=T(d);S.l(A),A.forEach(m),_=j(O),v=k(O,"LI",{class:!0});var D=T(v);g=Q(D,p),D.forEach(m),this.h()},h(){h(l,"class","px-1 py-1 rounded"),W(l,"text-green-500",s[29].selected),W(l,"text-gray-400",!s[29].selected),h(a,"class","ml-1 px-1 w-full bg-gray-200 svelte-1f0aomt"),h(t,"class","flex items-center justify-center w-full select-btn svelte-1f0aomt"),W(t,"hidden",s[8]),h(d,"class","intervals svelte-1f0aomt"),h(d,"title",u=s[29].intervals.map(vl).join("-")),h(v,"class","text-xs")},m(O,P){U(O,e,P),f(e,t),f(t,l),ge(n,l,null),f(t,o),f(t,a),f(a,i),U(O,c,P),U(O,d,P),S.m(d,null),U(O,_,P),U(O,v,P),f(v,g),N=!0,y||(I=x(t,"click",C),y=!0)},p(O,P){s=O;const w={};P[0]&64&&(w.icon=s[29].selected?ns:as),n.$set(w),(!N||P[0]&64)&&W(l,"text-green-500",s[29].selected),(!N||P[0]&64)&&W(l,"text-gray-400",!s[29].selected),(!N||P[0]&64)&&r!==(r=s[29].suffixes[0]+"")&&oe(i,r),(!N||P[0]&256)&&W(t,"hidden",s[8]),L===(L=E(s))&&S?S.p(s,P):(S.d(1),S=L(s),S&&(S.c(),S.m(d,null))),(!N||P[0]&64&&u!==(u=s[29].intervals.map(vl).join("-")))&&h(d,"title",u),(!N||P[0]&64)&&p!==(p=s[29].name+"")&&oe(g,p)},i(O){N||(H(n.$$.fragment,O),N=!0)},o(O){z(n.$$.fragment,O),N=!1},d(O){O&&(m(e),m(c),m(d),m(_),m(v)),be(n),S.d(),y=!1,I()}}}function ga(s){let e,t,l,n,o="Chords",a,r,i,c,d,u,_,v,p,g,N,y,I,C,E,L,S,O="Key",P,w,M,B,A="Scale",D,R,G,K,q="Note",fe,le,ee,Ce,te,re,Ae,_e,ce,Ve;c=new et({props:{icon:Ln,width:20}}),_=new et({props:{icon:Dn,width:16}}),g=new et({props:{icon:s[5]?zs:Ws,width:16}}),I=new et({props:{icon:Vs,width:16}}),R=new Mn({props:{class:"bg-gray-100 w-[12rem] mr-4",selected:s[1],options:s[10],onSelect:s[20]}});let Ne=ae(s[7]),ne=[];for(let F=0;F<Ne.length;F+=1)ne[F]=dl(rl(s,Ne,F));const De=F=>z(ne[F],1,1,()=>{ne[F]=null});let ke=ae(s[6]),$=[];for(let F=0;F<ke.length;F+=1)$[F]=_l(nl(s,ke,F));const ie=F=>z($[F],1,1,()=>{$[F]=null});return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=o,a=V(),r=b("div"),i=b("button"),pe(c.$$.fragment),d=V(),u=b("button"),pe(_.$$.fragment),v=V(),p=b("button"),pe(g.$$.fragment),N=V(),y=b("button"),pe(I.$$.fragment),C=V(),E=b("div"),L=b("div"),S=b("label"),S.textContent=O,P=V(),w=b("input"),M=V(),B=b("label"),B.textContent=A,D=V(),pe(R.$$.fragment),G=V(),K=b("label"),K.textContent=q,fe=V(),le=b("input"),ee=V(),Ce=b("ul");for(let F=0;F<ne.length;F+=1)ne[F].c();te=V(),re=b("ul");for(let F=0;F<$.length;F+=1)$[F].c();this.h()},l(F){e=k(F,"DIV",{class:!0});var X=T(e);t=k(X,"FIELDSET",{class:!0});var ye=T(t);l=k(ye,"LEGEND",{class:!0});var Re=T(l);n=k(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1knqzl6"&&(n.textContent=o),Re.forEach(m),a=j(ye),r=k(ye,"DIV",{class:!0});var Z=T(r);i=k(Z,"BUTTON",{class:!0});var Le=T(i);ve(c.$$.fragment,Le),Le.forEach(m),d=j(Z),u=k(Z,"BUTTON",{class:!0});var rt=T(u);ve(_.$$.fragment,rt),rt.forEach(m),v=j(Z),p=k(Z,"BUTTON",{class:!0});var Xe=T(p);ve(g.$$.fragment,Xe),Xe.forEach(m),N=j(Z),y=k(Z,"BUTTON",{class:!0});var Ke=T(y);ve(I.$$.fragment,Ke),Ke.forEach(m),Z.forEach(m),C=j(ye),E=k(ye,"DIV",{class:!0});var Ge=T(E);L=k(Ge,"DIV",{class:!0});var Pe=T(L);S=k(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(S)!=="svelte-14m38zf"&&(S.textContent=O),P=j(Pe),w=k(Pe,"INPUT",{class:!0,id:!0}),M=j(Pe),B=k(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(B)!=="svelte-bxhcb0"&&(B.textContent=A),D=j(Pe),ve(R.$$.fragment,Pe),G=j(Pe),K=k(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(K)!=="svelte-dmbfli"&&(K.textContent=q),fe=j(Pe),le=k(Pe,"INPUT",{class:!0,id:!0}),Pe.forEach(m),ee=j(Ge),Ce=k(Ge,"UL",{class:!0});var jt=T(Ce);for(let Fe=0;Fe<ne.length;Fe+=1)ne[Fe].l(jt);jt.forEach(m),te=j(Ge),re=k(Ge,"UL",{class:!0});var It=T(re);for(let Fe=0;Fe<$.length;Fe+=1)$[Fe].l(It);It.forEach(m),Ge.forEach(m),ye.forEach(m),X.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(i,"class","flex items-center justify-center rounded px-0.5 hover:bg-gray-200"),W(i,"hidden",s[8]),h(u,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),W(u,"hidden",s[8]),h(p,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),W(p,"hidden",s[8]),h(y,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),W(y,"hidden",s[8]),h(r,"class","absolute top-[-0.25rem] right-[0.5rem] flex"),h(S,"class","mr-4 font-bold svelte-1f0aomt"),h(S,"for","scale-key"),h(w,"class","bg-gray-100 w-12 px-1 rounded svelte-1f0aomt"),h(w,"id","scale-key"),w.value=s[0],h(B,"class","font-bold svelte-1f0aomt"),h(B,"for","scale-key"),h(K,"class","font-bold svelte-1f0aomt"),h(K,"for","scale-key"),h(le,"class","bg-gray-100 w-12 px-1 rounded svelte-1f0aomt"),h(le,"id","scale-key"),le.value=s[2],h(L,"class","flex mb-2 input svelte-1f0aomt"),h(Ce,"class","chord-list w-full svelte-1f0aomt"),h(re,"class","chord-list w-full svelte-1f0aomt"),h(E,"class","body svelte-1f0aomt"),W(E,"hidden",s[8]),h(t,"class","flex flex-col relative rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1f0aomt"),W(t,"collapsed",s[8]),h(e,"class",Ae=me(`${s[21].class||""}`)+" svelte-1f0aomt")},m(F,X){U(F,e,X),f(e,t),f(t,l),f(l,n),f(t,a),f(t,r),f(r,i),ge(c,i,null),f(r,d),f(r,u),ge(_,u,null),f(r,v),f(r,p),ge(g,p,null),f(r,N),f(r,y),ge(I,y,null),f(t,C),f(t,E),f(E,L),f(L,S),f(L,P),f(L,w),f(L,M),f(L,B),f(L,D),ge(R,L,null),f(L,G),f(L,K),f(L,fe),f(L,le),f(E,ee),f(E,Ce);for(let ye=0;ye<ne.length;ye+=1)ne[ye]&&ne[ye].m(Ce,null);f(E,te),f(E,re);for(let ye=0;ye<$.length;ye+=1)$[ye]&&$[ye].m(re,null);_e=!0,ce||(Ve=[x(n,"click",s[12]),x(i,"click",s[16]),x(u,"click",s[17]),x(p,"click",s[18]),x(y,"click",s[19]),x(w,"input",s[13]),x(le,"input",s[14])],ce=!0)},p(F,X){(!_e||X[0]&256)&&W(i,"hidden",F[8]),(!_e||X[0]&256)&&W(u,"hidden",F[8]);const ye={};X[0]&32&&(ye.icon=F[5]?zs:Ws),g.$set(ye),(!_e||X[0]&256)&&W(p,"hidden",F[8]),(!_e||X[0]&256)&&W(y,"hidden",F[8]),(!_e||X[0]&1&&w.value!==F[0])&&(w.value=F[0]);const Re={};if(X[0]&2&&(Re.selected=F[1]),R.$set(Re),(!_e||X[0]&4&&le.value!==F[2])&&(le.value=F[2]),X[0]&33160){Ne=ae(F[7]);let Z;for(Z=0;Z<Ne.length;Z+=1){const Le=rl(F,Ne,Z);ne[Z]?(ne[Z].p(Le,X),H(ne[Z],1)):(ne[Z]=dl(Le),ne[Z].c(),H(ne[Z],1),ne[Z].m(Ce,null))}for(xe(),Z=Ne.length;Z<ne.length;Z+=1)De(Z);ze()}if(X[0]&33104){ke=ae(F[6]);let Z;for(Z=0;Z<ke.length;Z+=1){const Le=nl(F,ke,Z);$[Z]?($[Z].p(Le,X),H($[Z],1)):($[Z]=_l(Le),$[Z].c(),H($[Z],1),$[Z].m(re,null))}for(xe(),Z=ke.length;Z<$.length;Z+=1)ie(Z);ze()}(!_e||X[0]&256)&&W(E,"hidden",F[8]),(!_e||X[0]&256)&&W(t,"collapsed",F[8]),(!_e||X[0]&2097152&&Ae!==(Ae=me(`${F[21].class||""}`)+" svelte-1f0aomt"))&&h(e,"class",Ae)},i(F){if(!_e){H(c.$$.fragment,F),H(_.$$.fragment,F),H(g.$$.fragment,F),H(I.$$.fragment,F),H(R.$$.fragment,F);for(let X=0;X<Ne.length;X+=1)H(ne[X]);for(let X=0;X<ke.length;X+=1)H($[X]);_e=!0}},o(F){z(c.$$.fragment,F),z(_.$$.fragment,F),z(g.$$.fragment,F),z(I.$$.fragment,F),z(R.$$.fragment,F),ne=ne.filter(Boolean);for(let X=0;X<ne.length;X+=1)z(ne[X]);$=$.filter(Boolean);for(let X=0;X<$.length;X+=1)z($[X]);_e=!1},d(F){F&&m(e),be(c),be(_),be(g),be(I),be(R),Be(ne,F),Be($,F),ce=!1,st(Ve)}}}const pl=s=>s.interval,vl=s=>s.interval;function ba(s,e,t){let l,n,o,a,r,i;he(s,Gs,G=>t(23,r=G));let c="C",d="Major",u=Gt(c,d),_="",v,p=[],g=[];const y=us().map(G=>({key:G.names[0],value:G.names[0]})),I=ht(Ue(!0),{key:"chords-hidden"});he(s,I,G=>t(8,i=G));function C(){I.update(G=>!G)}function E(){const G=v&&60+v.semitones;if("err"in u||!G)t(3,p=[]),t(4,g=[]);else{const K=u.data;t(3,p=n.map(q=>ws(G,K,q.intervals))),t(4,g=o.map(q=>ws(G,K,q.intervals)))}}function L({currentTarget:{value:G}}){t(0,c=`${G.charAt(0).toUpperCase()}${G.charAt(1).toLowerCase()}`),u=Gt(c,d),E()}function S({currentTarget:{value:G}}){t(2,_=`${G.charAt(0).toUpperCase()}${G.charAt(1).toLowerCase()}`),t(9,v=pn(_)),E()}function O(G){Se.toggleChords(K=>K.name===G.name?!K.selected:K.selected)}function P(){const G=q=>q.suffixes[0]==="maj"||q.suffixes[0]==="m",K=r.filter(G).every(q=>q.selected);Se.toggleChords(q=>G(q)?!K:q.selected)}function w(){const G=q=>q.suffixes[0]==="maj7"||q.suffixes[0]==="m7"||q.suffixes[0]==="7"||q.suffixes[0]==="dim7"||q.suffixes[0]==="aug7",K=r.filter(G).every(q=>q.selected);Se.toggleChords(q=>G(q)?!K:q.selected)}function M(){Se.toggleChords(G=>!a)}function B(){Se.toggleChords(G=>!0)}function A(G){var K;return t(1,d=(K=y.find(q=>G===q.key))==null?void 0:K.value),u=Gt(c,d),E(),!1}const D=G=>O(G),R=G=>O(G);return s.$$set=G=>{t(21,e=Ee(Ee({},e),we(G)))},s.$$.update=()=>{s.$$.dirty[0]&8388608&&t(22,l=r),s.$$.dirty[0]&4194304&&t(7,n=l.filter((G,K)=>K<l.length/2)),s.$$.dirty[0]&4194304&&t(6,o=l.filter((G,K)=>K>=l.length/2)),s.$$.dirty[0]&4194304&&t(5,a=l.every(G=>G.selected))},e=we(e),[c,d,_,p,g,a,o,n,i,v,y,I,C,L,S,O,P,w,M,B,A,e,l,r,D,R]}class ka extends We{constructor(e){super(),qe(this,e,ba,ga,$e,{},null,[-1,-1])}}function gl(s,e,t){const l=s.slice();return l[10]=e[t],l}function ya(s){let e;return{c(){e=Y(" ")},l(t){e=Q(t," ")},m(t,l){U(t,e,l)},p:ue,d(t){t&&m(e)}}}function Ea(s){let e,t,l="Played:",n,o=ae(s[2]),a=[];for(let r=0;r<o.length;r+=1)a[r]=bl(gl(s,o,r));return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V();for(let r=0;r<a.length;r+=1)a[r].c()},l(r){e=k(r,"DIV",{});var i=T(e);t=k(i,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1g6xxhn"&&(t.textContent=l),n=j(i);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(m)},m(r,i){U(r,e,i),f(e,t),f(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(r,i){if(i&4){o=ae(r[2]);let c;for(c=0;c<o.length;c+=1){const d=gl(r,o,c);a[c]?a[c].p(d,i):(a[c]=bl(d),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(r){r&&m(e),Be(a,r)}}}function wa(s){let e,t,l="Result:",n,o,a,r=s[0].correct+"",i,c,d=s[0].sampled.length+"",u,_,v,p,g,N=s[0].avgTime+"",y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),o=b("span"),a=Y("["),i=Y(r),c=Y(" / "),u=Y(d),_=Y("]"),v=V(),p=b("span"),g=Y("avg "),y=Y(N),I=Y("s"),this.h()},l(C){e=k(C,"DIV",{class:!0});var E=T(e);t=k(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1eqfbgx"&&(t.textContent=l),n=j(E),o=k(E,"SPAN",{class:!0});var L=T(o);a=Q(L,"["),i=Q(L,r),c=Q(L," / "),u=Q(L,d),_=Q(L,"]"),L.forEach(m),v=j(E),p=k(E,"SPAN",{});var S=T(p);g=Q(S,"avg "),y=Q(S,N),I=Q(S,"s"),S.forEach(m),E.forEach(m),this.h()},h(){h(o,"class","mx-2"),h(e,"class","flex")},m(C,E){U(C,e,E),f(e,t),f(e,n),f(e,o),f(o,a),f(o,i),f(o,c),f(o,u),f(o,_),f(e,v),f(e,p),f(p,g),f(p,y),f(p,I)},p(C,E){E&1&&r!==(r=C[0].correct+"")&&oe(i,r),E&1&&d!==(d=C[0].sampled.length+"")&&oe(u,d),E&1&&N!==(N=C[0].avgTime+"")&&oe(y,N)},d(C){C&&m(e)}}}function Ca(s){var O,P,w,M;let e,t,l="Target:",n,o,a=((O=s[0].latestGuess.target)==null?void 0:O.chord)+"",r,i,c,d=((P=s[0].latestGuess.target)==null?void 0:P.notes.map(kl).join(" "))+"",u,_,v,p="Guessed:",g,N,y=((w=s[0].latestGuess.guessed)==null?void 0:w.chord)+"",I,C,E,L=((M=s[0].latestGuess.guessed)==null?void 0:M.notes.map(yl).join(" "))+"",S;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),o=b("span"),r=Y(a),i=V(),c=b("span"),u=Y(d),_=V(),v=b("span"),v.textContent=p,g=V(),N=b("span"),I=Y(y),C=V(),E=b("span"),S=Y(L),this.h()},l(B){e=k(B,"DIV",{class:!0});var A=T(e);t=k(A,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(A),o=k(A,"SPAN",{});var D=T(o);r=Q(D,a),D.forEach(m),i=j(A),c=k(A,"SPAN",{});var R=T(c);u=Q(R,d),R.forEach(m),_=j(A),v=k(A,"SPAN",{"data-svelte-h":!0}),se(v)!=="svelte-104368"&&(v.textContent=p),g=j(A),N=k(A,"SPAN",{});var G=T(N);I=Q(G,y),G.forEach(m),C=j(A),E=k(A,"SPAN",{});var K=T(E);S=Q(K,L),K.forEach(m),A.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(B,A){U(B,e,A),f(e,t),f(e,n),f(e,o),f(o,r),f(e,i),f(e,c),f(c,u),f(e,_),f(e,v),f(e,g),f(e,N),f(N,I),f(e,C),f(e,E),f(E,S)},p(B,A){var D,R,G,K;A&1&&a!==(a=((D=B[0].latestGuess.target)==null?void 0:D.chord)+"")&&oe(r,a),A&1&&d!==(d=((R=B[0].latestGuess.target)==null?void 0:R.notes.map(kl).join(" "))+"")&&oe(u,d),A&1&&y!==(y=((G=B[0].latestGuess.guessed)==null?void 0:G.chord)+"")&&oe(I,y),A&1&&L!==(L=((K=B[0].latestGuess.guessed)==null?void 0:K.notes.map(yl).join(" "))+"")&&oe(S,L)},d(B){B&&m(e)}}}function Ta(s){let e,t,l="Target:",n,o,a=s[0].latestGuess.target+"",r,i,c,d,u,_="Guessed:",v,p,g=s[0].latestGuess.guessed+"",N,y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),o=b("span"),r=Y(a),i=V(),c=b("span"),d=V(),u=b("span"),u.textContent=_,v=V(),p=b("span"),N=Y(g),y=V(),I=b("span"),this.h()},l(C){e=k(C,"DIV",{class:!0});var E=T(e);t=k(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(E),o=k(E,"SPAN",{});var L=T(o);r=Q(L,a),L.forEach(m),i=j(E),c=k(E,"SPAN",{}),T(c).forEach(m),d=j(E),u=k(E,"SPAN",{"data-svelte-h":!0}),se(u)!=="svelte-104368"&&(u.textContent=_),v=j(E),p=k(E,"SPAN",{});var S=T(p);N=Q(S,g),S.forEach(m),y=j(E),I=k(E,"SPAN",{}),T(I).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(C,E){U(C,e,E),f(e,t),f(e,n),f(e,o),f(o,r),f(e,i),f(e,c),f(e,d),f(e,u),f(e,v),f(e,p),f(p,N),f(e,y),f(e,I)},p(C,E){E&1&&a!==(a=C[0].latestGuess.target+"")&&oe(r,a),E&1&&g!==(g=C[0].latestGuess.guessed+"")&&oe(N,g)},d(C){C&&m(e)}}}function Ia(s){let e,t,l="Target:",n,o,a=tt(Dt(s[0].latestGuess.target||0))+"",r,i,c,d,u,_="Guessed:",v,p,g=tt(Dt(s[0].latestGuess.guessed||0))+"",N,y,I;return{c(){e=b("div"),t=b("span"),t.textContent=l,n=V(),o=b("span"),r=Y(a),i=V(),c=b("span"),d=V(),u=b("span"),u.textContent=_,v=V(),p=b("span"),N=Y(g),y=V(),I=b("span"),this.h()},l(C){e=k(C,"DIV",{class:!0});var E=T(e);t=k(E,"SPAN",{"data-svelte-h":!0}),se(t)!=="svelte-1s5czg5"&&(t.textContent=l),n=j(E),o=k(E,"SPAN",{});var L=T(o);r=Q(L,a),L.forEach(m),i=j(E),c=k(E,"SPAN",{}),T(c).forEach(m),d=j(E),u=k(E,"SPAN",{"data-svelte-h":!0}),se(u)!=="svelte-104368"&&(u.textContent=_),v=j(E),p=k(E,"SPAN",{});var S=T(p);N=Q(S,g),S.forEach(m),y=j(E),I=k(E,"SPAN",{}),T(I).forEach(m),E.forEach(m),this.h()},h(){h(e,"class","guessed svelte-1lxfpqs")},m(C,E){U(C,e,E),f(e,t),f(e,n),f(e,o),f(o,r),f(e,i),f(e,c),f(e,d),f(e,u),f(e,v),f(e,p),f(p,N),f(e,y),f(e,I)},p(C,E){E&1&&a!==(a=tt(Dt(C[0].latestGuess.target||0))+"")&&oe(r,a),E&1&&g!==(g=tt(Dt(C[0].latestGuess.guessed||0))+"")&&oe(N,g)},d(C){C&&m(e)}}}function bl(s){let e,t=tt(s[10])+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","mx-1")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o&4&&t!==(t=tt(n[10])+"")&&oe(l,t)},d(n){n&&m(e)}}}function Aa(s){let e;return{c(){e=Y(" ")},l(t){e=Q(t," ")},m(t,l){U(t,e,l)},p:ue,d(t){t&&m(e)}}}function Sa(s){let e,t="Next",l,n,o="Autoplay",a,r;return{c(){e=b("button"),e.textContent=t,l=V(),n=b("button"),n.textContent=o,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1nvnoba"&&(e.textContent=t),l=j(i),n=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1cfj1sl"&&(n.textContent=o),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){U(i,e,c),U(i,l,c),U(i,n,c),a||(r=[x(e,"click",s[4]),x(n,"click",s[5])],a=!0)},p:ue,d(i){i&&(m(e),m(l),m(n)),a=!1,st(r)}}}function Na(s){let e,t="Stop autoplay",l,n;return{c(){e=b("button"),e.textContent=t,this.h()},l(o){e=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1xxta1i"&&(e.textContent=t),this.h()},h(){h(e,"class","btn primary")},m(o,a){U(o,e,a),l||(n=x(e,"click",s[9]),l=!0)},p:ue,d(o){o&&m(e),l=!1,n()}}}function La(s){let e,t="Try Again",l,n,o="Clear",a,r;return{c(){e=b("button"),e.textContent=t,l=V(),n=b("button"),n.textContent=o,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-y911ux"&&(e.textContent=t),l=j(i),n=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-11mnk9v"&&(n.textContent=o),this.h()},h(){h(e,"class","btn primary"),h(n,"class","btn primary")},m(i,c){U(i,e,c),U(i,l,c),U(i,n,c),a||(r=[x(e,"click",s[6]),x(n,"click",s[7])],a=!0)},p:ue,d(i){i&&(m(e),m(l),m(n)),a=!1,st(r)}}}function Da(s){let e,t,l,n;function o(u,_){return u[0]instanceof Ot&&(u[1]==="correct"||u[1]==="wrong")?Ia:u[0]instanceof Mt&&(u[1]==="correct"||u[1]==="wrong")?Ta:u[0]instanceof ft&&(u[1]==="correct"||u[1]==="wrong")?Ca:u[0]&&u[1]==="ended"?wa:u[2].length>0?Ea:ya}let a=o(s),r=a(s);function i(u,_){return u[0]&&u[1]==="ended"?La:u[0]&&u[3].autoplay?Na:u[0]?Sa:Aa}let c=i(s),d=c(s);return{c(){e=b("div"),r.c(),l=V(),n=b("div"),d.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var _=T(e);r.l(_),_.forEach(m),l=j(u),n=k(u,"DIV",{class:!0});var v=T(n);d.l(v),v.forEach(m),this.h()},h(){h(e,"class",t=me(`${s[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs"),h(n,"class","mt-2 h-8")},m(u,_){U(u,e,_),r.m(e,null),U(u,l,_),U(u,n,_),d.m(n,null)},p(u,[_]){a===(a=o(u))&&r?r.p(u,_):(r.d(1),r=a(u),r&&(r.c(),r.m(e,null))),_&256&&t!==(t=me(`${u[8].class||""} min-h-[3.25rem]`)+" svelte-1lxfpqs")&&h(e,"class",t),c===(c=i(u))&&d?d.p(u,_):(d.d(1),d=c(u),d&&(d.c(),d.m(n,null)))},i:ue,o:ue,d(u){u&&(m(e),m(l),m(n)),r.d(),d.d()}}}const kl=s=>s.note,yl=s=>s.note;function Pa(s,e,t){let l,n,o;he(s,bt,_=>t(1,l=_)),he(s,gt,_=>t(2,n=_)),he(s,dt,_=>t(3,o=_));let{game:a}=e;function r(){Se.nextGuess()}function i(){Se.setOptionValue("autoplay",!0),Se.nextGuess()}function c(){a instanceof ft?Se.play(a.type,a.opts):a&&Se.play(a.type,void 0)}function d(){Se.clearGame()}const u=()=>Se.setOptionValue("autoplay",!1);return s.$$set=_=>{t(8,e=Ee(Ee({},e),we(_))),"game"in _&&t(0,a=_.game)},e=we(e),[a,l,n,o,r,i,c,d,e,u]}class Oa extends We{constructor(e){super(),qe(this,e,Pa,Da,$e,{game:0})}}function El(s,e,t){const l=s.slice();return l[15]=e[t].key,l[16]=e[t].value,l[17]=e[t].icon,l[19]=t,l}const Va=s=>({}),wl=s=>({}),ja=s=>({}),Cl=s=>({});function Tl(s){let e,t,l,n,o,a,r,i,c,d,u;const _=s[12].header,v=Ns(_,s,s[11],wl);let p=ae(s[0]),g=[];for(let y=0;y<p.length;y+=1)g[y]=Il(El(s,p,y));const N=y=>z(g[y],1,1,()=>{g[y]=null});return{c(){e=b("button"),l=V(),n=b("ul"),o=b("li"),v&&v.c(),a=V();for(let y=0;y<g.length;y+=1)g[y].c();this.h()},l(y){e=k(y,"BUTTON",{class:!0,tabindex:!0}),T(e).forEach(m),l=j(y),n=k(y,"UL",{class:!0});var I=T(n);o=k(I,"LI",{});var C=T(o);v&&v.l(C),C.forEach(m),a=j(I);for(let E=0;E<g.length;E+=1)g[E].l(I);I.forEach(m),this.h()},h(){h(e,"class","fixed z-20 inset-0 h-full w-full outline-none cursor-default"),h(e,"tabindex","-1"),h(n,"class",r=me(`items-list bg-white py-1.5 py-2 w-48 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg")},m(y,I){U(y,e,I),U(y,l,I),U(y,n,I),f(n,o),v&&v.m(o,null),f(n,a);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(n,null);c=!0,d||(u=x(e,"click",s[7]),d=!0)},p(y,I){if(s=y,v&&v.p&&(!c||I&2048)&&Ls(v,_,s,s[11],c?Ps(_,s[11],I,Va):Ds(s[11]),wl),I&265){p=ae(s[0]);let C;for(C=0;C<p.length;C+=1){const E=El(s,p,C);g[C]?(g[C].p(E,I),H(g[C],1)):(g[C]=Il(E),g[C].c(),H(g[C],1),g[C].m(n,null))}for(xe(),C=p.length;C<g.length;C+=1)N(C);ze()}(!c||I&4&&r!==(r=me(`items-list bg-white py-1.5 py-2 w-48 h-64 overflow-y-scroll text-sm absolute left-0 z-30 rounded-b shadow-xl ${s[2]||""}`)+" svelte-h65upg"))&&h(n,"class",r)},i(y){if(!c){y&&es(()=>{c&&(t||(t=yt(e,ts,{duration:Xt},!0)),t.run(1))}),H(v,y);for(let I=0;I<p.length;I+=1)H(g[I]);y&&es(()=>{c&&(i||(i=yt(n,ss,{duration:Xt},!0)),i.run(1))}),c=!0}},o(y){y&&(t||(t=yt(e,ts,{duration:Xt},!1)),t.run(0)),z(v,y),g=g.filter(Boolean);for(let I=0;I<g.length;I+=1)z(g[I]);y&&(i||(i=yt(n,ss,{duration:Xt},!1)),i.run(0)),c=!1},d(y){y&&(m(e),m(l),m(n)),y&&t&&t.end(),v&&v.d(y),Be(g,y),y&&i&&i.end(),d=!1,u()}}}function Ba(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(m),this.h()},h(){h(e,"class","w-[24px]")},m(t,l){U(t,e,l)},p:ue,i:ue,o:ue,d(t){t&&m(e)}}}function Ga(s){let e,t;return e=new et({props:{class:"mr-2",icon:s[17],width:16}}),{c(){pe(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},p(l,n){const o={};n&1&&(o.icon=l[17]),e.$set(o)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function Il(s){let e,t,l,n,o,a,r=s[16]+"",i,c,d,u,_;const v=[Ga,Ba],p=[];function g(y,I){return y[17]?0:1}l=g(s),n=p[l]=v[l](s);function N(){return s[13](s[15])}return{c(){e=b("li"),t=b("button"),n.c(),o=V(),a=b("div"),i=Y(r),c=V(),this.h()},l(y){e=k(y,"LI",{});var I=T(e);t=k(I,"BUTTON",{class:!0});var C=T(t);n.l(C),o=j(C),a=k(C,"DIV",{});var E=T(a);i=Q(E,r),E.forEach(m),C.forEach(m),c=j(I),I.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 text-justify w-full h-full hover:bg-[#eee] svelte-h65upg"),W(t,"selected",s[15]===s[3])},m(y,I){U(y,e,I),f(e,t),p[l].m(t,null),f(t,o),f(t,a),f(a,i),f(e,c),d=!0,u||(_=x(t,"click",N),u=!0)},p(y,I){s=y;let C=l;l=g(s),l===C?p[l].p(s,I):(xe(),z(p[C],1,1,()=>{p[C]=null}),ze(),n=p[l],n?n.p(s,I):(n=p[l]=v[l](s),n.c()),H(n,1),n.m(t,o)),(!d||I&1)&&r!==(r=s[16]+"")&&oe(i,r),(!d||I&9)&&W(t,"selected",s[15]===s[3])},i(y){d||(H(n),d=!0)},o(y){z(n),d=!1},d(y){y&&m(e),p[l].d(),u=!1,_()}}}function Ma(s){let e,t,l,n,o,a,r,i,c;const d=s[12].value,u=Ns(d,s,s[11],Cl);let _=s[6]&&Tl(s);return{c(){e=b("div"),t=b("button"),u&&u.c(),o=V(),_&&_.c(),this.h()},l(v){e=k(v,"DIV",{class:!0,id:!0});var p=T(e);t=k(p,"BUTTON",{class:!0,title:!0});var g=T(t);u&&u.l(g),g.forEach(m),o=j(p),_&&_.l(p),p.forEach(m),this.h()},h(){h(t,"class",l=me(`${s[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"),h(t,"title",n=s[9].title||""),W(t,"disabled",s[4]),W(t,"open",s[6]),h(e,"class",a=me(`relative ${s[2]||""}`)+" svelte-h65upg"),h(e,"id",s[1])},m(v,p){U(v,e,p),f(e,t),u&&u.m(t,null),f(e,o),_&&_.m(e,null),s[14](e),r=!0,i||(c=x(t,"click",s[7]),i=!0)},p(v,[p]){u&&u.p&&(!r||p&2048)&&Ls(u,d,v,v[11],r?Ps(d,v[11],p,ja):Ds(v[11]),Cl),(!r||p&512&&l!==(l=me(`${v[9].class||""} open-btn w-full text-justify text-sm rounded hover:bg-[#eee]`)+" svelte-h65upg"))&&h(t,"class",l),(!r||p&512&&n!==(n=v[9].title||""))&&h(t,"title",n),(!r||p&528)&&W(t,"disabled",v[4]),(!r||p&576)&&W(t,"open",v[6]),v[6]?_?(_.p(v,p),p&64&&H(_,1)):(_=Tl(v),_.c(),H(_,1),_.m(e,null)):_&&(xe(),z(_,1,1,()=>{_=null}),ze()),(!r||p&4&&a!==(a=me(`relative ${v[2]||""}`)+" svelte-h65upg"))&&h(e,"class",a),(!r||p&2)&&h(e,"id",v[1])},i(v){r||(H(u,v),H(_),r=!0)},o(v){z(u,v),z(_),r=!1},d(v){v&&m(e),u&&u.d(v),_&&_.d(),s[14](null),i=!1,c()}}}const Xt=400;function Ua(s,e,t){let{$$slots:l={},$$scope:n}=e,{options:o,id:a=void 0,containerClass:r=void 0,selected:i=void 0,disabled:c=void 0,onSelect:d}=e,u,_=!1;function v(){c||t(6,_=!_)}function p(y){t(6,_=d(y))}const g=y=>p(y);function N(y){Os[y?"unshift":"push"](()=>{u=y,t(5,u)})}return s.$$set=y=>{t(9,e=Ee(Ee({},e),we(y))),"options"in y&&t(0,o=y.options),"id"in y&&t(1,a=y.id),"containerClass"in y&&t(2,r=y.containerClass),"selected"in y&&t(3,i=y.selected),"disabled"in y&&t(4,c=y.disabled),"onSelect"in y&&t(10,d=y.onSelect),"$$scope"in y&&t(11,n=y.$$scope)},e=we(e),[o,a,r,i,c,u,_,v,p,e,d,n,l,g,N]}class gn extends We{constructor(e){super(),qe(this,e,Ua,Ma,$e,{options:0,id:1,containerClass:2,selected:3,disabled:4,onSelect:10})}}function Ra(s){let e,t,l,n,o,a,r;return{c(){e=b("label"),t=b("input"),l=V(),n=b("div"),this.h()},l(i){e=k(i,"LABEL",{class:!0});var c=T(e);t=k(c,"INPUT",{type:!0,class:!0}),l=j(c),n=k(c,"DIV",{class:!0}),T(n).forEach(m),c.forEach(m),this.h()},h(){t.checked=s[0],h(t,"type","checkbox"),h(t,"class","svelte-3nm794"),h(n,"class","slider svelte-3nm794"),h(e,"class",o=me(`${s[3].class||""} toggle`)+" svelte-3nm794")},m(i,c){U(i,e,c),f(e,t),s[5](t),f(e,l),f(e,n),a||(r=[x(t,"change",s[4]),x(t,"keydown",s[2])],a=!0)},p(i,[c]){c&1&&(t.checked=i[0]),c&8&&o!==(o=me(`${i[3].class||""} toggle`)+" svelte-3nm794")&&h(e,"class",o)},i:ue,o:ue,d(i){i&&m(e),s[5](null),a=!1,st(r)}}}function Ka(s,e,t){let{checked:l}=e,n;function o(i){i.key==="Enter"&&n.click()}function a(i){cs.call(this,s,i)}function r(i){Os[i?"unshift":"push"](()=>{n=i,t(1,n)})}return s.$$set=i=>{t(3,e=Ee(Ee({},e),we(i))),"checked"in i&&t(0,l=i.checked)},e=we(e),[l,n,o,e,a,r]}class Fa extends We{constructor(e){super(),qe(this,e,Ka,Ra,$e,{checked:0})}}function Al(s){let e;return{c(){e=b("li"),this.h()},l(t){e=k(t,"LI",{class:!0}),T(e).forEach(m),this.h()},h(){h(e,"class","m-[0.175rem] mr-0")},m(t,l){U(t,e,l)},d(t){t&&m(e)}}}function Sl(s){let e;return{c(){e=b("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(m),this.h()},h(){h(e,"class","enter-part bg-[#ececf1] rounded-l absolute top-[-2px] left-[-12px] w-[13px] h-[2.8rem] svelte-1479mcy")},m(t,l){U(t,e,l)},d(t){t&&m(e)}}}function Nl(s){let e,t=s[0].note.note+"",l,n;return{c(){e=b("div"),l=Y(t),n=Y(s[2]),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=T(e);l=Q(a,t),n=Q(a,s[2]),a.forEach(m),this.h()},h(){h(e,"class","absolute top-0 left-0")},m(o,a){U(o,e,a),f(e,l),f(e,n)},p(o,a){a&1&&t!==(t=o[0].note.note+"")&&oe(l,t),a&4&&oe(n,o[2])},d(o){o&&m(e)}}}function Ha(s){let e,t,l,n,o,a,r=Dl(s[0].key)+"",i,c,d,u,_=s[0].key==="{enter}"&&Al(),v=s[0].key==="{enter}"&&Sl(),p=s[0].note&&Nl(s);return{c(){_&&_.c(),e=V(),t=b("li"),l=b("button"),v&&v.c(),n=V(),p&&p.c(),o=V(),a=b("div"),i=Y(r),this.h()},l(g){_&&_.l(g),e=j(g),t=k(g,"LI",{class:!0});var N=T(t);l=k(N,"BUTTON",{class:!0});var y=T(l);v&&v.l(y),n=j(y),p&&p.l(y),o=j(y),a=k(y,"DIV",{});var I=T(a);i=Q(I,r),I.forEach(m),y.forEach(m),N.forEach(m),this.h()},h(){h(l,"class","relative w-full h-full shadow bg-[#ececf1] rounded flex justify-center svelte-1479mcy"),W(l,"items-center",!s[0].note),W(l,"items-end",s[0].note),h(t,"class",c=me(`${s[3].class||""} m-[0.175rem] ${Ll(s[0].size)}`)+" svelte-1479mcy"),W(t,"enter",s[0].key==="{enter}"),W(t,"captured",s[1])},m(g,N){_&&_.m(g,N),U(g,e,N),U(g,t,N),f(t,l),v&&v.m(l,null),f(l,n),p&&p.m(l,null),f(l,o),f(l,a),f(a,i),d||(u=x(l,"click",s[5]),d=!0)},p(g,[N]){g[0].key==="{enter}"?_||(_=Al(),_.c(),_.m(e.parentNode,e)):_&&(_.d(1),_=null),g[0].key==="{enter}"?v||(v=Sl(),v.c(),v.m(l,n)):v&&(v.d(1),v=null),g[0].note?p?p.p(g,N):(p=Nl(g),p.c(),p.m(l,o)):p&&(p.d(1),p=null),N&1&&r!==(r=Dl(g[0].key)+"")&&oe(i,r),N&1&&W(l,"items-center",!g[0].note),N&1&&W(l,"items-end",g[0].note),N&9&&c!==(c=me(`${g[3].class||""} m-[0.175rem] ${Ll(g[0].size)}`)+" svelte-1479mcy")&&h(t,"class",c),N&9&&W(t,"enter",g[0].key==="{enter}"),N&11&&W(t,"captured",g[1])},i:ue,o:ue,d(g){g&&(m(e),m(t)),_&&_.d(g),v&&v.d(),p&&p.d(),d=!1,u()}}}function Ll(s){return s&&Number.isInteger(s)?`size-${s}`:s?`size-${Math.floor(s)}-${Math.floor(s*10)-Math.floor(s)*10}`:"size-1"}function Dl(s){return s==="{empty}"?"":s==="{bksp}"?"Backspace":s==="{tab}"?"Tab":s==="{enter}"?"Enter":s==="{lock}"?"Capslock":s==="{shift}"?"Shift":s}function xa(s,e,t){let l,n;he(s,fs,i=>t(4,n=i));let{value:o,captured:a}=e;function r(i){cs.call(this,s,i)}return s.$$set=i=>{t(3,e=Ee(Ee({},e),we(i))),"value"in i&&t(0,o=i.value),"captured"in i&&t(1,a=i.captured)},s.$$.update=()=>{s.$$.dirty&17&&t(2,l=o.note?js({midi:o.note.semitones+n[0],flats:0,sharps:0}):0)},e=we(e),[o,a,l,e,n,r]}class za extends We{constructor(e){super(),qe(this,e,xa,Ha,$e,{value:0,captured:1})}}const As={ar:{name:"Arabic",import:de(()=>import("./arabic-TJdw9TqS.cd2ea0d3.js"),[],import.meta.url)},hye:{name:"Armenian Eastern",import:de(()=>import("./armenianEastern-LNw2V_Kb.e28a3752.js"),[],import.meta.url)},hyw:{name:"Armenian Western",import:de(()=>import("./armenianWestern-zmIyLd1o.38785f27.js"),[],import.meta.url)},be:{name:"Belarusian",import:de(()=>import("./belarusian--mjombxK.1fcd2897.js"),[],import.meta.url)},bn:{name:"Bengali",import:de(()=>import("./bengali-2-qmZ9ZL.b883376f.js"),[],import.meta.url)},pt:{name:"Brazilian",import:de(()=>import("./brazilian-_aUR_EdS.2b1b1fd9.js"),[],import.meta.url)},my:{name:"Burmese",import:de(()=>import("./burmese-DNLMDG0C.87e404a2.js"),[],import.meta.url)},zh:{name:"Chinese",import:de(()=>import("./chinese-Vv6o_huT.c292fc41.js"),[],import.meta.url)},cs:{name:"Czech",import:de(()=>import("./czech-AAz70GMU.0cffa7b5.js"),[],import.meta.url)},en:{name:"English",import:Promise.resolve().then(()=>Wa)},fa:{name:"Farsi",import:de(()=>import("./farsi-akNUiiy1.62727da0.js"),[],import.meta.url)},fr:{name:"French",import:de(()=>import("./french-GKHnJmdK.94658ac4.js"),[],import.meta.url)},ka:{name:"Georgian",import:de(()=>import("./georgian-SQFgQD3n.89ef2935.js"),[],import.meta.url)},de:{name:"German",import:de(()=>import("./german-Wy-4wNPv.fa6f994f.js"),[],import.meta.url)},el:{name:"Greek",import:de(()=>import("./greek-lay7OJjb.9c2c2556.js"),[],import.meta.url)},he:{name:"Hebrew",import:de(()=>import("./hebrew-V6ZtD_jG.48875cb9.js"),[],import.meta.url)},hi:{name:"Hindi",import:de(()=>import("./hindi-uNDpRlqm.76d6c741.js"),[],import.meta.url)},hu:{name:"Hungarian",import:de(()=>import("./hungarian-Wnxix6n4.45652951.js"),[],import.meta.url)},it:{name:"Italian",import:de(()=>import("./italian-eDgp6wHT.50798155.js"),[],import.meta.url)},ja:{name:"Japanese",import:de(()=>import("./japanese-Zv_Q1DDl.d78f358a.js"),[],import.meta.url)},mk:{name:"Macedonian",import:de(()=>import("./macedonian-Dot-tKLH.04517113.js"),[],import.meta.url)},yo:{name:"Nigerian",import:de(()=>import("./nigerian-IYPkF_j3.5b26cce3.js"),[],import.meta.url)},nko:{name:"Nko",import:de(()=>import("./nko-EI8QPheE.3268d6cd.js"),[],import.meta.url)},no:{name:"Norwegian",import:de(()=>import("./norwegian-sal6SH2s.847bc0b5.js"),[],import.meta.url)},pl:{name:"Polish",import:de(()=>import("./polish-yYQdl0aw.936f6a15.js"),[],import.meta.url)},pa:{name:"Punjabi",import:de(()=>import("./punjabi-0AIiTj_p.01c98b73.js"),[],import.meta.url)},ru:{name:"Russian",import:de(()=>import("./russian-sQ885m4A.ff7543fb.js"),[],import.meta.url)},es:{name:"Spanish",import:de(()=>import("./spanish-Ww3zYGV_.0ed27470.js"),[],import.meta.url)},sv:{name:"Swedish",import:de(()=>import("./swedish-RpPWxHx_.af07bd5e.js"),[],import.meta.url)},te:{name:"Telugu",import:de(()=>import("./telugu-WPb3GXn5.f8d401d9.js"),[],import.meta.url)},th:{name:"Thai",import:de(()=>import("./thai-Q-LTk3Id.1148f3d0.js"),[],import.meta.url)},tr:{name:"Turkish",import:de(()=>import("./turkish-qQEi80RS.cb967a2e.js"),[],import.meta.url)},uk:{name:"Ukrainian",import:de(()=>import("./ukrainian-CLoogq0p.3e4781c0.js"),[],import.meta.url)},ug:{name:"Uyghur",import:de(()=>import("./uyghur-eF-99IjK.066cbfdb.js"),[],import.meta.url)}};function bn(s){if(!("default"in s.layout)||!("shift"in s.layout))throw console.error(s),Error("Invalid layout import");return{default:s.layout.default,shift:s.layout.shift}}async function kn(s=["en"]){let e={code:"en",layout:As.en,index:99};Object.entries(As).forEach(([l,n])=>{for(let o=0;o<s.length;o+=1)l===s[o]&&(!e||e.index>o)&&(e={code:l,layout:n,index:o})});const t=await e.layout.import;return{code:e.code,name:e.layout.name,imported:bn(t.default)}}const yn={layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},Wa=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"}));function Lt(s,e,t,l=0){const n=t?[0,2,4,5,7,9,11]:[-1,1,3,-1,6,8,10];let o=-1,a=0;return s.forEach((r,i)=>{const c=r.key.charAt(0)==="{";!c&&o===-1&&(o=i);const d=n[(i-o+l)%n.length];if(o!==-1&&i!==0&&!c&&d>=0){const u=e[d],_=Math.floor((l+i-o)/n.length);r.note={...u,semitones:u.semitones+(_>0?_:0)*12},r.note,a=i-o}}),a}const Zt=[["IntlBackslash","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Enter"],["Capslock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],["ShiftLeft","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"]];function qa(s){let e=[];const t=s.default.map((l,n)=>{if(n===0){const o=l.split(" ").filter(a=>a!=="{bksp}");for(;o.length!==13;)o.length<13?o.unshift("{empty}"):o.shift();return[...o,"{bksp}"]}else if(n===1){const o=l.split(" ");return e=o.slice(13),[...o.slice(0,13),"{enter}"]}else{if(n===2)return[...l.split(" ").slice(0,13).filter(o=>o!=="{enter}"),...e].slice(0,13);if(n===3){const o=["{shift}",...l.split(" ").slice(1,12).filter(r=>r!=="{shift}"),"{shift}"];let a=1;for(;o.length<13;)o.splice(a,0,"{empty}"),a=a===1?-1:1;return o}else return l.split(" ")}});return[t[0].map((l,n)=>({key:l,code:Zt[0][n]})),t[1].map((l,n)=>({key:l,code:Zt[1][n]})),t[2].map((l,n)=>({key:l,code:Zt[2][n]})),t[3].map((l,n)=>({key:l,code:Zt[3][n]}))]}class is{constructor(e){return this.rows=[[],[],[],[]],this.opts={hotkeydRows:"middle-row",layout:{code:"en",name:"English",imported:bn(yn)},...e},this.loadRowsFromImport(this.opts.layout.imported)}setOptions(e){this.opts={...this.opts,...e}}loadRowsFromImport(e){return this.rows=qa(e),this}setRows(e){return this.rows=e,this}setRowHotkeys(e,t){}setNotes(e){if(this.opts.hotkeydRows==="middle-row")Lt(this.rows[1],e,!1),Lt(this.rows[2],e,!0);else{Lt(this.rows[2],e,!1);const t=Lt(this.rows[3],e,!0);Lt(this.rows[0],e,!1,t),Lt(this.rows[1],e,!0,t+1)}}static createWithRows(e,t){return new is(e).setRows(t)}}const Ms=/^[a-gA-G]$/,En=/^[♭Bb#♯sS]$/,$a=/^[0-9]$/;let J="",ut;function Ja(s,e){const{useHotkeys:t}=Te(ot),l=Te(ds).get(s);if(t&&J.length===0&&l&&l.note)return J="",{e:"guessed-key",data:l.note.note};if(!t&&J.length===0&&Ms.test(e))return J+=e.toUpperCase(),{e:"string",data:J};if(!t&&J.length>0&&En.test(e))return e==="b"||e==="B"?J+="♭":J+="♯",{e:"string",data:J};if(s==="Backspace"&&J.length>0)return J=J.slice(0,-1),{e:"string",data:J};if(s==="Enter"&&J.length>0){const n=J;return J="",{e:"guessed-key",data:n}}return!1}function Ya(s,e){if(s==="Enter"&&J.length>0){const t={note:"",flats:0,sharps:0,chord:""};for(let l=0;l<J.length;l+=1)l===0?t.note+=J[l]:t.chord.length>0?t.chord+=J[l].toLowerCase():J[l]==="♭"?(t.note+=J[l],t.flats+=1):J[l]==="♯"?(t.note+=J[l],t.sharps+=1):t.chord+=J[l].toLowerCase();return J="",{e:"guessed-chord",data:t}}else{if(s==="Backspace"&&J.length>0)return J=J.slice(0,-1),{e:"string",data:J};if(J.length===0&&Ms.test(e))return J+=e.toUpperCase(),{e:"string",data:J};if(J.length>0&&e.length===1)return J.length===1&&(e==="b"||e==="B")?J+="♭":J.length===1&&e==="#"?J+="♯":J+=e,{e:"string",data:J}}return!1}function Qa(s,e,t){const{useAutoOctave:l,useHotkeys:n}=Te(ot);let o;const r=Te(ds).get(s),i=(r==null?void 0:r.key)||"";let c=!1;if(!ut&&n&&(r!=null&&r.note)?(ut=r.note,l&&(o=js({midi:Te(rs)[0].midi,flats:0,sharps:0})),c="note"):!n&&J.length===0&&Ms.test(e)?(J+=e.toUpperCase(),c="input"):!n&&J.length>0&&En.test(e)&&(e==="b"||e==="B"?J+="♭":J+="♯",c="input"),!c&&$a.test(i))try{o=parseInt(i)}catch{}if(ut&&o!==void 0){const d=ut.semitones+(o+1+(t?1:0))*12;return ut=void 0,{e:"guessed-note",data:d}}else if(J&&o!==void 0){const d=Pt.findNote(J),u=d?d.semitones+(o+1)*12:void 0;return ut=void 0,J="",u!==void 0?{e:"guessed-note",data:u}:{e:"string",data:J}}else if(s==="Backspace"&&(ut||J.length>0))return ut=void 0,J=J.slice(0,-1),{e:"string",data:J};return c==="note"?{e:"note",data:ut}:c==="input"?{e:"string",data:J}:!1}const Xa={code:"en",name:"English",imported:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]}},ys=[],wt=Ue(void 0);Tt(wt,s=>s?[s.rowIndex,s.nextIndex]:[-1,-1]);const kt=ht(Ue({useCustom:!1,customLayout:[[],[],[],[]],kbdOpts:{layout:Xa,hotkeydRows:"middle-row"}}),{key:"keyboard-settings"}),Us=Tt([Vt,kt],([s,e])=>{let t;return e.useCustom&&e.customLayout?t=is.createWithRows(e.kbdOpts,e.customLayout):t=new is(e.kbdOpts),t.setNotes(Array.from(s.notesMap.values())),t}),Za=Tt(Us,s=>s.rows.map(e=>e.map((t,l)=>{let n;return t.key==="{bksp}"?n=2:t.key==="{tab}"?n=1.5:t.key==="{enter}"?n=2:t.key==="{lock}"?n=1.75:t.key==="{shift}"&&l===0?n=1.5:t.key==="{shift}"&&(n=2.5),n?{...t,size:n}:t}))),ds=Tt(Us,s=>new Map([...s.rows[0].map(e=>[e.code,e]),...s.rows[1].map(e=>[e.code,e]),...s.rows[2].map(e=>[e.code,e]),...s.rows[3].map(e=>[e.code,e])])),eo=Tt(ds,s=>Array.from(s.values()).map(e=>e.note).filter(e=>e!==void 0)),Pt={async setLayout(s){const e=await kn([s]);kt.update(t=>({...t,layout:e}))},setCustomLayout(s){if(s){const e=Te(Us);kt.update(t=>({...t,useCustom:s,customLayout:t.customLayout.map((l,n)=>l.length===0?e.rows[n].map(o=>({...o})):l)}))}else kt.update(e=>({...e,useCustom:s}))},toggleRows(s){kt.update(e=>({...e,kbdOpts:{...e.kbdOpts,hotkeydRows:s??(e.kbdOpts.hotkeydRows==="middle-row"?"two-rows":"middle-row")}}))},captureHotkeyRow(s){let e=-1,t=0;const l=Te(kt).customLayout[s].map((n,o)=>(n.key.charAt(0)!=="{"&&e===-1&&(e=o),t+=n.key.charAt(0)!=="{"?1:0,n));console.log("count",t),wt.set({row:l,nextIndex:e,rowIndex:s,count:t})},findNote(s){return Te(eo).find(e=>{if(e.note.charAt(0)===s.charAt(0)){const t=s.slice(1).split("").reduce((l,n)=>l+(n.toLowerCase()==="b"||n==="♭"?-1:n.toLowerCase()==="s"||n==="#"||n==="♯"?1:0),0);return t>0?e.sharps===t:t<0?e.flats===t*-1:e.flats===0&&e.sharps===0}})},handleInput(s,e,t=!1){const l=Te(Et),n=Te(wt);if(n){console.log("capturing ",ys.length);const{nextIndex:o,row:a}=n;return s==="Escape"?wt.set(void 0):ys.find(i=>i.code===s)||(ys.push({code:s,key:e}),a[o]={...a[o],code:s,key:e},o===n.count?(kt.update(i=>({...i,customLayout:i.customLayout.map((c,d)=>d!==n.rowIndex?c:a)})),wt.set(void 0)):wt.set({...n,nextIndex:o+1,row:a})),!1}else{if(l instanceof Mt)return Ja(s,e.toUpperCase());if(l instanceof ft&&l.type==="chords-write")return Ya(s,e);if(Te(ot).useKeyboard)return Qa(s,e.toUpperCase(),t)}return!1}};function Pl(s,e,t){const l=s.slice();return l[13]=e[t],l[15]=t,l}function Ol(s,e,t){const l=s.slice();return l[16]=e[t],l[18]=t,l}function to(s){let e,t=s[0].kbdOpts.layout.name+"",l;return{c(){e=b("div"),l=Y(t),this.h()},l(n){e=k(n,"DIV",{slot:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"slot","value")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o&1&&t!==(t=n[0].kbdOpts.layout.name+"")&&oe(l,t)},d(n){n&&m(e)}}}function Vl(s){let e,t,l,n,o;t=new et({props:{icon:Pn,width:20}});function a(){return s[11](s[15])}return{c(){e=b("button"),pe(t.$$.fragment),this.h()},l(r){e=k(r,"BUTTON",{class:!0});var i=T(e);ve(t.$$.fragment,i),i.forEach(m),this.h()},h(){h(e,"class","flex items-center justify-center rounded w-full h-full hover:bg-gray-300")},m(r,i){U(r,e,i),ge(t,e,null),l=!0,n||(o=x(e,"click",a),n=!0)},p(r,i){s=r},i(r){l||(H(t.$$.fragment,r),l=!0)},o(r){z(t.$$.fragment,r),l=!1},d(r){r&&m(e),be(t),n=!1,o()}}}function jl(s){let e,t;return e=new za({props:{value:s[16],captured:s[4]&&s[4].rowIndex===s[15]&&s[4].nextIndex===s[18]||!1}}),{c(){pe(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},p(l,n){const o={};n&2&&(o.value=l[16]),n&16&&(o.captured=l[4]&&l[4].rowIndex===l[15]&&l[4].nextIndex===l[18]||!1),e.$set(o)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function Bl(s){let e,t,l,n,o=s[3][s[15]]&&Vl(s),a=ae(s[13]),r=[];for(let c=0;c<a.length;c+=1)r[c]=jl(Ol(s,a,c));const i=c=>z(r[c],1,1,()=>{r[c]=null});return{c(){e=b("li"),o&&o.c(),t=V();for(let c=0;c<r.length;c+=1)r[c].c();l=je(),this.h()},l(c){e=k(c,"LI",{class:!0});var d=T(e);o&&o.l(d),d.forEach(m),t=j(c);for(let u=0;u<r.length;u+=1)r[u].l(c);l=je(),this.h()},h(){h(e,"class","col-span-2 svelte-12ix7fc")},m(c,d){U(c,e,d),o&&o.m(e,null),U(c,t,d);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(c,d);U(c,l,d),n=!0},p(c,d){if(c[3][c[15]]?o?(o.p(c,d),d&8&&H(o,1)):(o=Vl(c),o.c(),H(o,1),o.m(e,null)):o&&(xe(),z(o,1,1,()=>{o=null}),ze()),d&18){a=ae(c[13]);let u;for(u=0;u<a.length;u+=1){const _=Ol(c,a,u);r[u]?(r[u].p(_,d),H(r[u],1)):(r[u]=jl(_),r[u].c(),H(r[u],1),r[u].m(l.parentNode,l))}for(xe(),u=a.length;u<r.length;u+=1)i(u);ze()}},i(c){if(!n){H(o);for(let d=0;d<a.length;d+=1)H(r[d]);n=!0}},o(c){z(o),r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)z(r[d]);n=!1},d(c){c&&(m(e),m(t),m(l)),o&&o.d(),Be(r,c)}}}function so(s){let e,t,l,n,o,a,r,i,c="Layout",d,u,_,v,p,g="Custom",N,y,I,C,E,L,S="One row",O,P,w,M,B="Two rows",A,D,R,G,K,q,fe;n=new et({props:{icon:Vs,width:16}}),u=new gn({props:{id:"keyboard-lang",containerClass:"w-36",class:"p-1",options:s[5],onSelect:s[6],$$slots:{value:[to]},$$scope:{ctx:s}}}),P=new Fa({props:{checked:!s[2]}}),P.$on("change",s[9]);let le=ae(s[1]),ee=[];for(let te=0;te<le.length;te+=1)ee[te]=Bl(Pl(s,le,te));const Ce=te=>z(ee[te],1,1,()=>{ee[te]=null});return{c(){e=b("div"),t=b("div"),l=b("button"),pe(n.$$.fragment),o=V(),a=b("div"),r=b("div"),i=b("label"),i.textContent=c,d=V(),pe(u.$$.fragment),_=V(),v=b("div"),p=b("label"),p.textContent=g,N=V(),y=b("input"),C=V(),E=b("div"),L=b("label"),L.textContent=S,O=V(),pe(P.$$.fragment),w=V(),M=b("label"),M.textContent=B,A=V(),D=b("div"),R=b("ul");for(let te=0;te<ee.length;te+=1)ee[te].c();this.h()},l(te){e=k(te,"DIV",{class:!0});var re=T(e);t=k(re,"DIV",{class:!0});var Ae=T(t);l=k(Ae,"BUTTON",{class:!0});var _e=T(l);ve(n.$$.fragment,_e),_e.forEach(m),Ae.forEach(m),o=j(re),a=k(re,"DIV",{class:!0});var ce=T(a);r=k(ce,"DIV",{class:!0});var Ve=T(r);i=k(Ve,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(i)!=="svelte-1xsr9lq"&&(i.textContent=c),d=j(Ve),ve(u.$$.fragment,Ve),Ve.forEach(m),_=j(ce),v=k(ce,"DIV",{class:!0});var Ne=T(v);p=k(Ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(p)!=="svelte-11aw8ub"&&(p.textContent=g),N=j(Ne),y=k(Ne,"INPUT",{class:!0,id:!0,type:!0}),Ne.forEach(m),C=j(ce),E=k(ce,"DIV",{class:!0});var ne=T(E);L=k(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(L)!=="svelte-17p0yvw"&&(L.textContent=S),O=j(ne),ve(P.$$.fragment,ne),w=j(ne),M=k(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(M)!=="svelte-1wr3nwv"&&(M.textContent=B),ne.forEach(m),ce.forEach(m),A=j(re),D=k(re,"DIV",{class:!0});var De=T(D);R=k(De,"UL",{class:!0});var ke=T(R);for(let $=0;$<ee.length;$+=1)ee[$].l(ke);ke.forEach(m),De.forEach(m),re.forEach(m),this.h()},h(){h(l,"class","flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),h(t,"class","absolute top-[0] right-[0] flex"),h(i,"class","font-bold mr-4"),h(i,"for","middle-row"),h(r,"class","my-1 flex items-center justify-between mr-2"),h(p,"class","font-bold mr-4"),h(p,"for","custom-layout"),h(y,"class","h-[20px]"),h(y,"id","custom-layout"),h(y,"type","checkbox"),y.checked=I=s[0].useCustom,h(v,"class","my-1 flex items-center justify-between mr-12"),h(L,"class","font-bold mr-4"),h(L,"for","two-rows"),h(M,"class","font-bold ml-4"),h(M,"for","two-rows"),h(E,"class","my-1 flex items-center justify-between mr-12"),h(a,"class","flex"),h(R,"class","keyboard svelte-12ix7fc"),h(D,"class","flex flex-col gap-1.5"),h(e,"class",G=me(`${s[10].class||""} relative`)+" svelte-12ix7fc")},m(te,re){U(te,e,re),f(e,t),f(t,l),ge(n,l,null),f(e,o),f(e,a),f(a,r),f(r,i),f(r,d),ge(u,r,null),f(a,_),f(a,v),f(v,p),f(v,N),f(v,y),f(a,C),f(a,E),f(E,L),f(E,O),ge(P,E,null),f(E,w),f(E,M),f(e,A),f(e,D),f(D,R);for(let Ae=0;Ae<ee.length;Ae+=1)ee[Ae]&&ee[Ae].m(R,null);K=!0,q||(fe=[x(l,"click",lo),x(y,"change",s[7])],q=!0)},p(te,[re]){const Ae={};re&524289&&(Ae.$$scope={dirty:re,ctx:te}),u.$set(Ae),(!K||re&1&&I!==(I=te[0].useCustom))&&(y.checked=I);const _e={};if(re&4&&(_e.checked=!te[2]),P.$set(_e),re&282){le=ae(te[1]);let ce;for(ce=0;ce<le.length;ce+=1){const Ve=Pl(te,le,ce);ee[ce]?(ee[ce].p(Ve,re),H(ee[ce],1)):(ee[ce]=Bl(Ve),ee[ce].c(),H(ee[ce],1),ee[ce].m(R,null))}for(xe(),ce=le.length;ce<ee.length;ce+=1)Ce(ce);ze()}(!K||re&1024&&G!==(G=me(`${te[10].class||""} relative`)+" svelte-12ix7fc"))&&h(e,"class",G)},i(te){if(!K){H(n.$$.fragment,te),H(u.$$.fragment,te),H(P.$$.fragment,te);for(let re=0;re<le.length;re+=1)H(ee[re]);K=!0}},o(te){z(n.$$.fragment,te),z(u.$$.fragment,te),z(P.$$.fragment,te),ee=ee.filter(Boolean);for(let re=0;re<ee.length;re+=1)z(ee[re]);K=!1},d(te){te&&m(e),be(n),be(u),be(P),Be(ee,te),q=!1,st(fe)}}}function lo(){}function no(s,e,t){let l,n,o,a,r,i;he(s,kt,g=>t(0,o=g)),he(s,Za,g=>t(1,a=g)),he(s,ds,g=>t(12,r=g)),he(s,wt,g=>t(4,i=g)),fn(async()=>{console.log(r);const g=await kn(["sw"]);console.log(g),window.layout=g});const c=Object.entries(As).map(([g,N])=>({key:g,value:N.name}));function d(g){return Pt.setLayout(g),!1}function u(g){Pt.setCustomLayout(g.currentTarget.checked)}function _(g){Pt.captureHotkeyRow(g)}function v(){Pt.toggleRows()}const p=g=>_(g);return s.$$set=g=>{t(10,e=Ee(Ee({},e),we(g)))},s.$$.update=()=>{s.$$.dirty&3&&t(3,l=a.map((g,N)=>o.kbdOpts.hotkeydRows==="middle-row"?N===1||N===2:!0)),s.$$.dirty&1&&t(2,n=o.kbdOpts.hotkeydRows==="middle-row")},e=we(e),[o,a,n,l,i,c,d,u,_,v,e,p]}class ao extends We{constructor(e){super(),qe(this,e,no,so,$e,{})}}function Gl(s){let e,t;return e=new ao({props:{class:"mt-4"}}),{c(){pe(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,n){ge(e,l,n),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){be(e,l)}}}function oo(s){let e,t,l,n,o="I/O",a,r,i,c,d="Device",u,_,v,p,g,N,y="Prompt",I,C,E="Disable",L,S,O,P,w="Sound",M,B,A,D,R,G,K="Fixed velocity",q,fe,le,ee,Ce,te,re="Keyboard",Ae,_e,ce,Ve,Ne,ne,De="Hotkeys",ke,$,ie,F,X,ye,Re="Auto-octave",Z,Le,rt,Xe,Ke,Ge,Pe,jt="Set hotkeys",It,Fe,mt,Rs="Fade timeout",hs,it,ms,_t,Ut,_s,pt,Ks="Reset all",ps,Rt,Ze,vs,Fs,Me=s[2]&&Gl();return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=o,a=V(),r=b("div"),i=b("div"),c=b("label"),c.textContent=d,u=V(),_=b("input"),p=V(),g=b("div"),N=b("button"),N.textContent=y,I=V(),C=b("button"),C.textContent=E,L=V(),S=b("div"),O=b("div"),P=b("label"),P.textContent=w,M=V(),B=b("input"),D=V(),R=b("div"),G=b("label"),G.textContent=K,q=V(),fe=b("input"),le=V(),ee=b("div"),Ce=b("div"),te=b("label"),te.textContent=re,Ae=V(),_e=b("input"),Ve=V(),Ne=b("div"),ne=b("label"),ne.textContent=De,ke=V(),$=b("input"),F=V(),X=b("div"),ye=b("label"),ye.textContent=Re,Z=V(),Le=b("input"),Xe=V(),Ke=b("div"),Ge=b("div"),Pe=b("button"),Pe.textContent=jt,It=V(),Fe=b("div"),mt=b("label"),mt.textContent=Rs,hs=V(),it=b("input"),ms=V(),_t=b("div"),Ut=b("div"),_s=V(),pt=b("button"),pt.textContent=Ks,ps=V(),Me&&Me.c(),this.h()},l(Oe){e=k(Oe,"DIV",{class:!0});var He=T(e);t=k(He,"FIELDSET",{class:!0});var ct=T(t);l=k(ct,"LEGEND",{class:!0});var Hs=T(l);n=k(Hs,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1jbbsti"&&(n.textContent=o),Hs.forEach(m),a=j(ct),r=k(ct,"DIV",{class:!0});var vt=T(r);i=k(vt,"DIV",{class:!0});var At=T(i);c=k(At,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(c)!=="svelte-crpa7y"&&(c.textContent=d),u=j(At),_=k(At,"INPUT",{class:!0,id:!0}),p=j(At),g=k(At,"DIV",{class:!0});var Kt=T(g);N=k(Kt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(N)!=="svelte-mj6mct"&&(N.textContent=y),I=j(Kt),C=k(Kt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(C)!=="svelte-1sl6oxh"&&(C.textContent=E),Kt.forEach(m),At.forEach(m),L=j(vt),S=k(vt,"DIV",{class:!0});var Ft=T(S);O=k(Ft,"DIV",{class:!0});var Ht=T(O);P=k(Ht,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(P)!=="svelte-wgxtkw"&&(P.textContent=w),M=j(Ht),B=k(Ht,"INPUT",{class:!0,id:!0,type:!0}),Ht.forEach(m),D=j(Ft),R=k(Ft,"DIV",{class:!0});var xt=T(R);G=k(xt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(G)!=="svelte-1tm2bth"&&(G.textContent=K),q=j(xt),fe=k(xt,"INPUT",{class:!0,id:!0,placeholder:!0}),xt.forEach(m),Ft.forEach(m),le=j(vt),ee=k(vt,"DIV",{class:!0});var St=T(ee);Ce=k(St,"DIV",{class:!0});var zt=T(Ce);te=k(zt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(te)!=="svelte-1js269u"&&(te.textContent=re),Ae=j(zt),_e=k(zt,"INPUT",{class:!0,id:!0,type:!0}),zt.forEach(m),Ve=j(St),Ne=k(St,"DIV",{class:!0});var Wt=T(Ne);ne=k(Wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(ne)!=="svelte-21h39k"&&(ne.textContent=De),ke=j(Wt),$=k(Wt,"INPUT",{class:!0,id:!0,type:!0}),Wt.forEach(m),F=j(St),X=k(St,"DIV",{class:!0});var qt=T(X);ye=k(qt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(ye)!=="svelte-33lczu"&&(ye.textContent=Re),Z=j(qt),Le=k(qt,"INPUT",{class:!0,id:!0,type:!0}),qt.forEach(m),St.forEach(m),Xe=j(vt),Ke=k(vt,"DIV",{class:!0});var Nt=T(Ke);Ge=k(Nt,"DIV",{class:!0});var xs=T(Ge);Pe=k(xs,"BUTTON",{class:!0,"data-svelte-h":!0}),se(Pe)!=="svelte-1v9okg9"&&(Pe.textContent=jt),xs.forEach(m),It=j(Nt),Fe=k(Nt,"DIV",{class:!0});var $t=T(Fe);mt=k($t,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(mt)!=="svelte-vd5i27"&&(mt.textContent=Rs),hs=j($t),it=k($t,"INPUT",{class:!0,id:!0}),$t.forEach(m),ms=j(Nt),_t=k(Nt,"DIV",{class:!0});var Jt=T(_t);Ut=k(Jt,"DIV",{}),T(Ut).forEach(m),_s=j(Jt),pt=k(Jt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(pt)!=="svelte-jjt0c3"&&(pt.textContent=Ks),Jt.forEach(m),Nt.forEach(m),vt.forEach(m),ps=j(ct),Me&&Me.l(ct),ct.forEach(m),He.forEach(m),this.h()},h(){var Oe;h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(c,"class","font-bold"),h(c,"for","device"),h(_,"class","px-1 my-1 rounded w-50"),h(_,"id","device"),_.disabled=!0,_.value=v=((Oe=s[5])==null?void 0:Oe.name)??"No device",h(N,"class","btn-sm primary mr-2"),h(C,"class","btn-sm primary"),h(g,"class","flex my-[auto]"),h(i,"class","h-full flex flex-col"),h(P,"class","font-bold"),h(P,"for","sound"),h(B,"class","h-[20px]"),h(B,"id","sound"),h(B,"type","checkbox"),B.checked=A=s[3].useSound,h(O,"class","my-1 flex justify-between mr-12"),h(G,"class","font-bold"),h(G,"for","fixed-velocity"),h(fe,"class","h-[20px] w-16"),h(fe,"id","fixed-velocity"),h(fe,"placeholder","0-127"),h(R,"class","flex justify-between"),h(S,"class","flex flex-col h-full"),h(te,"class","font-bold"),h(te,"for","keyboard"),h(_e,"class","h-[20px]"),h(_e,"id","keyboard"),h(_e,"type","checkbox"),_e.checked=ce=s[3].useKeyboard,h(Ce,"class","my-1 flex justify-between mr-12"),h(ne,"class","font-bold"),h(ne,"for","hotkeys"),h($,"class","h-[20px]"),h($,"id","hotkeys"),h($,"type","checkbox"),$.checked=ie=s[3].useHotkeys,h(Ne,"class","my-1 flex justify-between mr-12"),h(ye,"class","font-bold"),h(ye,"for","auto-octave"),h(Le,"class","h-[20px]"),h(Le,"id","auto-octave"),h(Le,"type","checkbox"),Le.checked=rt=s[3].useAutoOctave,h(X,"class","my-1 flex justify-between mr-12"),h(ee,"class","flex flex-col h-full"),h(Pe,"class","w-full btn-sm primary"),h(Ge,"class","flex justify-between"),h(mt,"class","font-bold"),h(mt,"for","fade-timeout"),h(it,"class","h-[20px] w-16"),h(it,"id","fade-timeout"),it.value=s[1],h(Fe,"class","flex justify-between"),h(pt,"class","btn-sm primary"),h(_t,"class","flex justify-between"),h(Ke,"class","flex flex-col justify-between h-full"),h(r,"class","body svelte-1bpw69s"),W(r,"hidden",s[4]),h(t,"class","flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-1bpw69s"),W(t,"collapsed",s[4]),h(e,"class",Rt=me(`${s[11].class||""}`)+" svelte-1bpw69s")},m(Oe,He){U(Oe,e,He),f(e,t),f(t,l),f(l,n),f(t,a),f(t,r),f(r,i),f(i,c),f(i,u),f(i,_),f(i,p),f(i,g),f(g,N),f(g,I),f(g,C),f(r,L),f(r,S),f(S,O),f(O,P),f(O,M),f(O,B),f(S,D),f(S,R),f(R,G),f(R,q),f(R,fe),Qe(fe,s[0]),f(r,le),f(r,ee),f(ee,Ce),f(Ce,te),f(Ce,Ae),f(Ce,_e),f(ee,Ve),f(ee,Ne),f(Ne,ne),f(Ne,ke),f(Ne,$),f(ee,F),f(ee,X),f(X,ye),f(X,Z),f(X,Le),f(r,Xe),f(r,Ke),f(Ke,Ge),f(Ge,Pe),f(Ke,It),f(Ke,Fe),f(Fe,mt),f(Fe,hs),f(Fe,it),f(Ke,ms),f(Ke,_t),f(_t,Ut),f(_t,_s),f(_t,pt),f(t,ps),Me&&Me.m(t,null),Ze=!0,vs||(Fs=[x(n,"click",s[7]),x(N,"click",Ye.openMidi),x(C,"click",Ye.disableMidi),x(B,"change",s[12]),x(fe,"input",s[13]),x(fe,"change",s[8]),x(_e,"change",s[14]),x($,"change",s[15]),x(Le,"change",s[16]),x(Pe,"click",s[17]),x(it,"input",s[9]),x(pt,"click",s[10])],vs=!0)},p(Oe,[He]){var ct;(!Ze||He&32&&v!==(v=((ct=Oe[5])==null?void 0:ct.name)??"No device")&&_.value!==v)&&(_.value=v),(!Ze||He&8&&A!==(A=Oe[3].useSound))&&(B.checked=A),He&1&&fe.value!==Oe[0]&&Qe(fe,Oe[0]),(!Ze||He&8&&ce!==(ce=Oe[3].useKeyboard))&&(_e.checked=ce),(!Ze||He&8&&ie!==(ie=Oe[3].useHotkeys))&&($.checked=ie),(!Ze||He&8&&rt!==(rt=Oe[3].useAutoOctave))&&(Le.checked=rt),(!Ze||He&2&&it.value!==Oe[1])&&(it.value=Oe[1]),(!Ze||He&16)&&W(r,"hidden",Oe[4]),Oe[2]?Me?He&4&&H(Me,1):(Me=Gl(),Me.c(),H(Me,1),Me.m(t,null)):Me&&(xe(),z(Me,1,1,()=>{Me=null}),ze()),(!Ze||He&16)&&W(t,"collapsed",Oe[4]),(!Ze||He&2048&&Rt!==(Rt=me(`${Oe[11].class||""}`)+" svelte-1bpw69s"))&&h(e,"class",Rt)},i(Oe){Ze||(H(Me),Ze=!0)},o(Oe){z(Me),Ze=!1},d(Oe){Oe&&m(e),Me&&Me.d(),vs=!1,st(Fs)}}}function ro(s,e,t){let l,n,o;he(s,ot,E=>t(3,l=E)),he(s,os,E=>t(5,o=E));const a=ht(Ue(!1),{key:"inputs-hidden"});he(s,a,E=>t(4,n=E));let r=l.fixedVelocity??"",i=l.keyFadeTimeout,c=!1;ot.subscribe(E=>{t(0,r=E.fixedVelocity??""),t(1,i=E.keyFadeTimeout)});function d(){a.update(E=>!E)}function u(E){const{value:L}=E.currentTarget;let S;if(L)try{S=parseInt(L)}catch{}S!==void 0&&S>=0&&S<=127?Ye.setInputValue("fixedVelocity",S):L?t(0,r=l.fixedVelocity||""):Ye.setInputValue("fixedVelocity",void 0)}function _(E){try{const L=parseInt(E.currentTarget.value);Ye.setInputValue("keyFadeTimeout",L)}catch{t(1,i=l.keyFadeTimeout)}}function v(){sa()}const p=E=>Ye.setInputValue("useSound",E.currentTarget.checked);function g(){r=this.value,t(0,r)}const N=E=>Ye.setInputValue("useKeyboard",E.currentTarget.checked),y=E=>Ye.setInputValue("useHotkeys",E.currentTarget.checked),I=E=>Ye.setInputValue("useAutoOctave",E.currentTarget.checked),C=()=>t(2,c=!c);return s.$$set=E=>{t(11,e=Ee(Ee({},e),we(E)))},e=we(e),[r,i,c,l,n,o,a,d,u,_,v,e,p,g,N,y,I,C]}class io extends We{constructor(e){super(),qe(this,e,ro,oo,$e,{})}}function co(s){let e;return{c(){e=Y(" ")},l(t){e=Q(t," ")},m(t,l){U(t,e,l)},p:ue,d(t){t&&m(e)}}}function uo(s){let e,t=s[1].note+"",l;return{c(){e=Y("Input: "),l=Y(t)},l(n){e=Q(n,"Input: "),l=Q(n,t)},m(n,o){U(n,e,o),U(n,l,o)},p(n,o){o&2&&t!==(t=n[1].note+"")&&oe(l,t)},d(n){n&&(m(e),m(l))}}}function fo(s){let e,t;return{c(){e=Y("Input: "),t=Y(s[0])},l(l){e=Q(l,"Input: "),t=Q(l,s[0])},m(l,n){U(l,e,n),U(l,t,n)},p(l,n){n&1&&oe(t,l[0])},d(l){l&&(m(e),m(t))}}}function ho(s){let e;return{c(){e=Y(Ss)},l(t){e=Q(t,Ss)},m(t,l){U(t,e,l)},p:ue,d(t){t&&m(e)}}}function mo(s){let e,t,l,n;function o(i,c){return i[2].useKeyboard&&Ss?ho:i[2].useKeyboard&&i[0]?fo:i[2].useKeyboard&&i[1]?uo:co}let a=o(s),r=a(s);return{c(){e=b("div"),r.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=T(e);r.l(c),c.forEach(m),this.h()},h(){h(e,"class",t=`${s[4].class||""}`)},m(i,c){U(i,e,c),r.m(e,null),l||(n=x(window,"keydown",s[3]),l=!0)},p(i,[c]){a===(a=o(i))&&r?r.p(i,c):(r.d(1),r=a(i),r&&(r.c(),r.m(e,null))),c&16&&t!==(t=`${i[4].class||""}`)&&h(e,"class",t)},i:ue,o:ue,d(i){i&&m(e),r.d(),l=!1,n()}}}let Ss="";function _o(s,e,t){let l;he(s,ot,c=>t(2,l=c));let{debounced:n}=e,o="",a;const r=In();function i(c){const d=c.target;if(n||!(d instanceof HTMLElement)||d.tagName==="INPUT")return;const u=Pt.handleInput(c.code,c.key,c.shiftKey);u&&u.e==="note"?t(1,a=u.data):u&&u.e==="string"?t(0,o=u.data):u&&(t(0,o=""),t(1,a=void 0),r(u.e,u.data))}return s.$$set=c=>{t(4,e=Ee(Ee({},e),we(c))),"debounced"in c&&t(5,n=c.debounced)},e=we(e),[o,a,l,i,e,n]}class po extends We{constructor(e){super(),qe(this,e,_o,mo,$e,{debounced:5})}}function vo(s){let e,t,l,n="Count",o,a,r,i,c,d="Duplicates",u,_,v,p,g,N,y="Autoplay",I,C,E,L,S,O,P="Wait seconds",w,M,B,A,D;return{c(){e=b("ul"),t=b("li"),l=b("label"),l.textContent=n,o=V(),a=b("input"),r=V(),i=b("li"),c=b("label"),c.textContent=d,u=V(),_=b("input"),p=V(),g=b("li"),N=b("label"),N.textContent=y,I=V(),C=b("input"),L=V(),S=b("li"),O=b("label"),O.textContent=P,w=V(),M=b("input"),this.h()},l(R){e=k(R,"UL",{class:!0});var G=T(e);t=k(G,"LI",{class:!0});var K=T(t);l=k(K,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(l)!=="svelte-wgq9fc"&&(l.textContent=n),o=j(K),a=k(K,"INPUT",{class:!0,id:!0,type:!0}),K.forEach(m),r=j(G),i=k(G,"LI",{class:!0});var q=T(i);c=k(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(c)!=="svelte-hcg9dq"&&(c.textContent=d),u=j(q),_=k(q,"INPUT",{class:!0,id:!0,type:!0}),q.forEach(m),p=j(G),g=k(G,"LI",{class:!0});var fe=T(g);N=k(fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(N)!=="svelte-lr68n2"&&(N.textContent=y),I=j(fe),C=k(fe,"INPUT",{class:!0,id:!0,type:!0}),fe.forEach(m),L=j(G),S=k(G,"LI",{class:!0});var le=T(S);O=k(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(O)!=="svelte-1qj2vcy"&&(O.textContent=P),w=j(le),M=k(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(m),G.forEach(m),this.h()},h(){h(l,"class","font-bold"),h(l,"for","guess-count"),h(a,"class","h-[20px] w-10"),h(a,"id","guess-count"),h(a,"type","number"),h(t,"class","flex items-center justify-between svelte-1elvih2"),h(c,"class","font-bold"),h(c,"for","duplicates"),h(_,"class","h-[20px]"),h(_,"id","duplicates"),h(_,"type","checkbox"),_.checked=v=s[2].duplicates,h(i,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(N,"class","font-bold"),h(N,"for","autoplay"),h(C,"class","h-[20px]"),h(C,"id","autoplay"),h(C,"type","checkbox"),C.checked=E=s[2].autoplay,h(g,"class","flex items-center justify-between mr-6 svelte-1elvih2"),h(O,"class","font-bold"),h(O,"for","wait-ms"),h(M,"class","h-[20px] w-10"),h(M,"id","wait-ms"),h(M,"type","number"),h(S,"class","flex items-center justify-between svelte-1elvih2"),h(e,"class",B=me(`${s[5].class||""}`)+" svelte-1elvih2")},m(R,G){U(R,e,G),f(e,t),f(t,l),f(t,o),f(t,a),Qe(a,s[0]),f(e,r),f(e,i),f(i,c),f(i,u),f(i,_),f(e,p),f(e,g),f(g,N),f(g,I),f(g,C),f(e,L),f(e,S),f(S,O),f(S,w),f(S,M),Qe(M,s[1]),A||(D=[x(a,"input",s[6]),x(a,"input",s[3]),x(_,"input",s[7]),x(C,"input",s[8]),x(M,"input",s[9]),x(M,"input",s[4])],A=!0)},p(R,[G]){G&1&&ls(a.value)!==R[0]&&Qe(a,R[0]),G&4&&v!==(v=R[2].duplicates)&&(_.checked=v),G&4&&E!==(E=R[2].autoplay)&&(C.checked=E),G&2&&ls(M.value)!==R[1]&&Qe(M,R[1]),G&32&&B!==(B=me(`${R[5].class||""}`)+" svelte-1elvih2")&&h(e,"class",B)},i:ue,o:ue,d(R){R&&m(e),A=!1,st(D)}}}function go(s,e,t){let l;he(s,dt,_=>t(2,l=_));let n=l.count||"",o=l.waitSeconds||"";dt.subscribe(_=>{t(0,n=_.count||""),t(1,o=_.waitSeconds||"")});function a({currentTarget:{value:_}}){let v;try{v=parseInt(_),v<=0&&(v=1),Se.setOptionValue("count",v)}catch{t(0,n=l.count)}}function r({currentTarget:{value:_}}){let v;try{v=parseInt(_),v<0&&(v=0),Se.setOptionValue("waitSeconds",v)}catch{t(1,o=l.waitSeconds)}}function i(){n=ls(this.value),t(0,n)}const c=_=>Se.setOptionValue("duplicates",_.currentTarget.checked),d=_=>Se.setOptionValue("autoplay",_.currentTarget.checked);function u(){o=ls(this.value),t(1,o)}return s.$$set=_=>{t(5,e=Ee(Ee({},e),we(_)))},e=we(e),[n,o,l,a,r,e,i,c,d,u]}class bo extends We{constructor(e){super(),qe(this,e,go,vo,$e,{})}}function Ml(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Ul(s,e,t){const l=s.slice();return l[20]=e[t].key,l[21]=e[t].value,l}function Rl(s){let e,t,l=s[21]+"",n,o,a,r,i,c,d,u;function _(){return s[13](s[20])}r=new et({props:{icon:Es,width:20}});function v(...p){return s[14](s[20],...p)}return{c(){e=b("li"),t=b("button"),n=Y(l),o=V(),a=b("button"),pe(r.$$.fragment),i=V(),this.h()},l(p){e=k(p,"LI",{class:!0});var g=T(e);t=k(g,"BUTTON",{class:!0});var N=T(t);n=Q(N,l),N.forEach(m),o=j(g),a=k(g,"BUTTON",{class:!0});var y=T(a);ve(r.$$.fragment,y),y.forEach(m),i=j(g),g.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),W(t,"selected",s[20]===s[0]),h(a,"class","px-1 py-1 flex items-center justify-center rounded text-[#222] hover:bg-blue-500 hover:text-white"),h(e,"class","flex svelte-1okhpct")},m(p,g){U(p,e,g),f(e,t),f(t,n),f(e,o),f(e,a),ge(r,a,null),f(e,i),c=!0,d||(u=[x(t,"click",_),x(a,"click",v)],d=!0)},p(p,g){s=p,(!c||g&17)&&W(t,"selected",s[20]===s[0])},i(p){c||(H(r.$$.fragment,p),c=!0)},o(p){z(r.$$.fragment,p),c=!1},d(p){p&&m(e),be(r),d=!1,st(u)}}}function Kl(s){let e,t=ae(s[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Fl(Ml(s,t,n));return{c(){e=b("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"UL",{class:!0});var o=T(e);for(let a=0;a<l.length;a+=1)l[a].l(o);o.forEach(m),this.h()},h(){h(e,"class","svelte-1okhpct")},m(n,o){U(n,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,o){if(o&518){t=ae(n[2]);let a;for(a=0;a<t.length;a+=1){const r=Ml(n,t,a);l[a]?l[a].p(r,o):(l[a]=Fl(r),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function Fl(s){let e,t,l=s[21]+"",n,o,a,r;function i(){return s[15](s[20])}return{c(){e=b("li"),t=b("button"),n=Y(l),o=V(),this.h()},l(c){e=k(c,"LI",{class:!0});var d=T(e);t=k(d,"BUTTON",{class:!0});var u=T(t);n=Q(u,l),u.forEach(m),o=j(d),d.forEach(m),this.h()},h(){h(t,"class","px-2 py-1 mr-1 flex items-center w-full h-full rounded hover:bg-[#eee] svelte-1okhpct"),W(t,"selected",s[20]===s[1]),h(e,"class","svelte-1okhpct")},m(c,d){U(c,e,d),f(e,t),f(t,n),f(e,o),a||(r=x(t,"click",i),a=!0)},p(c,d){s=c,d&4&&l!==(l=s[21]+"")&&oe(n,l),d&6&&W(t,"selected",s[20]===s[1])},d(c){c&&m(e),a=!1,r()}}}function ko(s){let e,t,l="Play",n,o,a,r,i,c,d,u,_,v,p="Reset",g,N,y,I,C=s[3]?"Quit":"Play",E,L,S,O,P,w=ae(s[4]),M=[];for(let D=0;D<w.length;D+=1)M[D]=Rl(Ul(s,w,D));const B=D=>z(M[D],1,1,()=>{M[D]=null});let A=(s[0]==="chords-write"||s[0]==="chords-play")&&Kl(s);return d=new bo({props:{class:"game-options"}}),y=new et({props:{class:"mr-1",icon:s[3]?qs:Es,width:20}}),{c(){e=b("fieldset"),t=b("legend"),t.textContent=l,n=V(),o=b("div"),a=b("ul");for(let D=0;D<M.length;D+=1)M[D].c();r=V(),i=b("div"),A&&A.c(),c=V(),pe(d.$$.fragment),u=V(),_=b("div"),v=b("button"),v.textContent=p,g=V(),N=b("button"),pe(y.$$.fragment),I=V(),E=Y(C),this.h()},l(D){e=k(D,"FIELDSET",{class:!0});var R=T(e);t=k(R,"LEGEND",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1409tnk"&&(t.textContent=l),n=j(R),o=k(R,"DIV",{class:!0});var G=T(o);a=k(G,"UL",{class:!0});var K=T(a);for(let ee=0;ee<M.length;ee+=1)M[ee].l(K);K.forEach(m),r=j(G),i=k(G,"DIV",{class:!0});var q=T(i);A&&A.l(q),q.forEach(m),c=j(G),ve(d.$$.fragment,G),u=j(G),_=k(G,"DIV",{class:!0});var fe=T(_);v=k(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),se(v)!=="svelte-10rv0bu"&&(v.textContent=p),g=j(fe),N=k(fe,"BUTTON",{class:!0});var le=T(N);ve(y.$$.fragment,le),I=j(le),E=Q(le,C),le.forEach(m),fe.forEach(m),G.forEach(m),R.forEach(m),this.h()},h(){h(t,"class","px-1 text-base"),h(a,"class","games svelte-1okhpct"),h(i,"class","options svelte-1okhpct"),h(v,"class","w-full btn hover:bg-gray-200"),h(N,"class","w-full mt-2 flex items-center justify-center btn primary"),h(_,"class","h-full flex flex-col justify-end"),h(o,"class","body pb-2 h-full svelte-1okhpct"),h(e,"class",L=me(`${s[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct")},m(D,R){U(D,e,R),f(e,t),f(e,n),f(e,o),f(o,a);for(let G=0;G<M.length;G+=1)M[G]&&M[G].m(a,null);f(o,r),f(o,i),A&&A.m(i,null),f(o,c),ge(d,o,null),f(o,u),f(o,_),f(_,v),f(_,g),f(_,N),ge(y,N,null),f(N,I),f(N,E),S=!0,O||(P=[x(v,"click",s[5]),x(N,"click",s[16])],O=!0)},p(D,[R]){if(R&401){w=ae(D[4]);let K;for(K=0;K<w.length;K+=1){const q=Ul(D,w,K);M[K]?(M[K].p(q,R),H(M[K],1)):(M[K]=Rl(q),M[K].c(),H(M[K],1),M[K].m(a,null))}for(xe(),K=w.length;K<M.length;K+=1)B(K);ze()}D[0]==="chords-write"||D[0]==="chords-play"?A?A.p(D,R):(A=Kl(D),A.c(),A.m(i,null)):A&&(A.d(1),A=null);const G={};R&8&&(G.icon=D[3]?qs:Es),y.$set(G),(!S||R&8)&&C!==(C=D[3]?"Quit":"Play")&&oe(E,C),(!S||R&1024&&L!==(L=me(`${D[10].class||""} flex flex-col rounded border-2 px-4 py-2 text-sm`)+" svelte-1okhpct"))&&h(e,"class",L)},i(D){if(!S){for(let R=0;R<w.length;R+=1)H(M[R]);H(d.$$.fragment,D),H(y.$$.fragment,D),S=!0}},o(D){M=M.filter(Boolean);for(let R=0;R<M.length;R+=1)z(M[R]);z(d.$$.fragment,D),z(y.$$.fragment,D),S=!1},d(D){D&&m(e),Be(M,D),A&&A.d(),be(d),be(y),O=!1,st(P)}}}function yo(s,e,t){let l,n,o,a,r;he(s,Gs,E=>t(12,o=E)),he(s,dt,E=>t(19,a=E)),he(s,Et,E=>t(3,r=E));const i=[{key:"notes",value:"Play Notes"},{key:"pitches",value:"Guess Pitches"},{key:"keys-major",value:"Guess Major Keys"},{key:"keys-minor",value:"Guess Minor Keys"},{key:"chords-write",value:"Write Chords"},{key:"chords-play",value:"Play Chords"},{key:"chords-diatonic",value:"Play Diatonic Triads"}];let c=i[4].key,d="maj-m";a.count,a.waitSeconds,dt.subscribe(E=>{E.count,E.waitSeconds});function u(){Se.clearGame(!0)}function _(E,L){if(L==="chords-write"||L==="chords-play"||L==="chords-diatonic"){let S=[];d==="selected"?S=o.filter(O=>O.selected):d==="all"?S=o:d==="maj-m"?S=o.filter(O=>O.suffixes[0]==="maj"||O.suffixes[0]==="m"):d==="seventh"&&(S=o.filter(O=>O.suffixes[0]==="maj7"||O.suffixes[0]==="m7"||O.suffixes[0]==="7"||O.suffixes[0]==="dim7"||O.suffixes[0]==="aug7")),Se.play(L,{chords:S})}else Se.play(L,void 0);E.currentTarget instanceof HTMLElement&&E.currentTarget.blur(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}function v(E){t(0,c=E)}function p(E,L){t(0,c=L),_(E,L)}function g(E){t(1,d=E)}const N=E=>v(E),y=(E,L)=>p(L,E),I=E=>g(E),C=E=>_(E,c);return s.$$set=E=>{t(10,e=Ee(Ee({},e),we(E)))},s.$$.update=()=>{s.$$.dirty&4096&&t(11,l=o.reduce((E,L)=>L.selected?E+1:E,0)),s.$$.dirty&2048&&t(2,n=[{key:"maj-m",value:"Major/Minor"},{key:"seventh",value:"Seventh"},{key:"selected",value:`Selected ${l} chords`},{key:"all",value:"All"}])},e=we(e),[c,d,n,r,i,u,_,v,p,g,e,l,o,N,y,I,C]}class Eo extends We{constructor(e){super(),qe(this,e,yo,ko,$e,{})}}function Hl(s,e,t){const l=s.slice();return l[7]=e[t],l}function xl(s,e,t){const l=s.slice();return l[4]=e[t],l}function wo(s){let e,t=ae(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=zl(Hl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o&2){t=ae(n[1]);let a;for(a=0;a<t.length;a+=1){const r=Hl(n,t,a);l[a]?l[a].p(r,o):(l[a]=zl(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function Co(s){let e,t=ae(s[0].scaleNotes||[]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Wl(xl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o&1){t=ae(n[0].scaleNotes||[]);let a;for(a=0;a<t.length;a+=1){const r=xl(n,t,a);l[a]?l[a].p(r,o):(l[a]=Wl(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function zl(s){let e,t=s[7].interval+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o&2&&t!==(t=n[7].interval+"")&&oe(l,t)},d(n){n&&m(e)}}}function Wl(s){let e,t=s[4].note+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-my4m0t")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o&1&&t!==(t=n[4].note+"")&&oe(l,t)},d(n){n&&m(e)}}}function To(s){let e,t,l,n,o,a;function r(d,u){return d[0]?Co:wo}let i=r(s),c=i(s);return{c(){e=b("div"),t=b("button"),c.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,title:!0});var u=T(e);t=k(u,"BUTTON",{class:!0});var _=T(t);c.l(_),_.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","intervals svelte-my4m0t"),h(e,"class",l=`${s[2].class||""} `),h(e,"title",n=s[1].map(ql).join("-"))},m(d,u){U(d,e,u),f(e,t),c.m(t,null),o||(a=x(t,"click",s[3]),o=!0)},p(d,[u]){i===(i=r(d))&&c?c.p(d,u):(c.d(1),c=i(d),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=`${d[2].class||""} `)&&h(e,"class",l),u&2&&n!==(n=d[1].map(ql).join("-"))&&h(e,"title",n)},i:ue,o:ue,d(d){d&&m(e),c.d(),o=!1,a()}}}const ql=s=>s.interval;function Io(s,e,t){let{scale:l,intervals:n}=e;function o(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ee(Ee({},e),we(a))),"scale"in a&&t(0,l=a.scale),"intervals"in a&&t(1,n=a.intervals)},e=we(e),[l,n,e,o]}class wn extends We{constructor(e){super(),qe(this,e,Io,To,$e,{scale:0,intervals:1})}}function $l(s,e,t){const l=s.slice();return l[7]=e[t],l}function Jl(s,e,t){const l=s.slice();return l[4]=e[t],l}function Ao(s){let e,t=ae(s[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Yl($l(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o&1){t=ae(n[0]);let a;for(a=0;a<t.length;a+=1){const r=$l(n,t,a);l[a]?l[a].p(r,o):(l[a]=Yl(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function So(s){let e,t=ae(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ql(Jl(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=je()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=je()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);U(n,e,o)},p(n,o){if(o&2){t=ae(n[1]);let a;for(a=0;a<t.length;a+=1){const r=Jl(n,t,a);l[a]?l[a].p(r,o):(l[a]=Ql(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function Yl(s){let e,t,l=s[7].roman+"",n,o,a,r=s[7].suffix+"",i,c;return{c(){e=b("span"),t=b("span"),n=Y(l),o=V(),a=b("sup"),i=Y(r),c=V(),this.h()},l(d){e=k(d,"SPAN",{class:!0});var u=T(e);t=k(u,"SPAN",{class:!0});var _=T(t);n=Q(_,l),_.forEach(m),o=j(u),a=k(u,"SUP",{class:!0});var v=T(a);i=Q(v,r),v.forEach(m),c=j(u),u.forEach(m),this.h()},h(){h(t,"class","block"),h(a,"class","block text-sm leading-none top-[-0.3rem] svelte-1roj1mi"),W(a,"super-text",s[7].suffix.length>2),h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(d,u){U(d,e,u),f(e,t),f(t,n),f(e,o),f(e,a),f(a,i),f(e,c)},p(d,u){u&1&&l!==(l=d[7].roman+"")&&oe(n,l),u&1&&r!==(r=d[7].suffix+"")&&oe(i,r),u&1&&W(a,"super-text",d[7].suffix.length>2)},d(d){d&&m(e)}}}function Ql(s){let e,t,l=s[4]+"",n,o;return{c(){e=b("span"),t=b("span"),n=Y(l),o=V(),this.h()},l(a){e=k(a,"SPAN",{class:!0});var r=T(e);t=k(r,"SPAN",{});var i=T(t);n=Q(i,l),i.forEach(m),o=j(r),r.forEach(m),this.h()},h(){h(e,"class","inline-flex items-baseline svelte-1roj1mi")},m(a,r){U(a,e,r),f(e,t),f(t,n),f(e,o)},p(a,r){r&2&&l!==(l=a[4]+"")&&oe(n,l)},d(a){a&&m(e)}}}function No(s){let e,t,l,n,o,a;function r(d,u){return d[1].length>0?So:Ao}let i=r(s),c=i(s);return{c(){e=b("div"),t=b("button"),c.c(),this.h()},l(d){e=k(d,"DIV",{class:!0,title:!0});var u=T(e);t=k(u,"BUTTON",{class:!0});var _=T(t);c.l(_),_.forEach(m),u.forEach(m),this.h()},h(){h(t,"class","triads flex flex-wrap svelte-1roj1mi"),h(e,"class",l=me(`${s[2].class||""} `)+" svelte-1roj1mi"),h(e,"title",n=s[0].map(Xl).join("-"))},m(d,u){U(d,e,u),f(e,t),c.m(t,null),o||(a=x(t,"click",s[3]),o=!0)},p(d,[u]){i===(i=r(d))&&c?c.p(d,u):(c.d(1),c=i(d),c&&(c.c(),c.m(t,null))),u&4&&l!==(l=me(`${d[2].class||""} `)+" svelte-1roj1mi")&&h(e,"class",l),u&1&&n!==(n=d[0].map(Xl).join("-"))&&h(e,"title",n)},i:ue,o:ue,d(d){d&&m(e),c.d(),o=!1,a()}}}const Xl=s=>s.roman+s.suffix;function Lo(s,e,t){let{triads:l,chords:n}=e;function o(a){cs.call(this,s,a)}return s.$$set=a=>{t(2,e=Ee(Ee({},e),we(a))),"triads"in a&&t(0,l=a.triads),"chords"in a&&t(1,n=a.chords)},e=we(e),[l,n,e,o]}class Cn extends We{constructor(e){super(),qe(this,e,Lo,No,$e,{triads:0,chords:1})}}function Zl(s,e,t){const l=s.slice();return l[23]=e[t],l}function en(s,e,t){const l=s.slice();return l[23]=e[t],l}function tn(s){let e,t,l=s[23].raw.names[0]+"",n,o,a,r,i,c,d;function u(){return s[11](s[23])}a=new wn({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function _(){return s[12](s[23])}return i=new Cn({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",_),{c(){e=b("li"),t=b("div"),n=Y(l),o=V(),pe(a.$$.fragment),r=V(),pe(i.$$.fragment),c=V(),this.h()},l(v){e=k(v,"LI",{class:!0});var p=T(e);t=k(p,"DIV",{class:!0});var g=T(t);n=Q(g,l),g.forEach(m),o=j(p),ve(a.$$.fragment,p),r=j(p),ve(i.$$.fragment,p),c=j(p),p.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(v,p){U(v,e,p),f(e,t),f(t,n),f(e,o),ge(a,e,null),f(e,r),ge(i,e,null),f(e,c),d=!0},p(v,p){s=v,(!d||p&4)&&l!==(l=s[23].raw.names[0]+"")&&oe(n,l);const g={};p&4&&(g.scale=s[23].scale),p&4&&(g.intervals=s[23].raw.intervals),a.$set(g);const N={};p&4&&(N.triads=s[23].triads),p&4&&(N.chords=s[23].triadChords),i.$set(N)},i(v){d||(H(a.$$.fragment,v),H(i.$$.fragment,v),d=!0)},o(v){z(a.$$.fragment,v),z(i.$$.fragment,v),d=!1},d(v){v&&m(e),be(a),be(i)}}}function sn(s){let e,t,l=s[23].raw.names[0]+"",n,o,a,r,i,c,d;function u(){return s[13](s[23])}a=new wn({props:{scale:s[23].scale,intervals:s[23].raw.intervals}}),a.$on("click",u);function _(){return s[14](s[23])}return i=new Cn({props:{triads:s[23].triads,chords:s[23].triadChords}}),i.$on("click",_),{c(){e=b("li"),t=b("div"),n=Y(l),o=V(),pe(a.$$.fragment),r=V(),pe(i.$$.fragment),c=V(),this.h()},l(v){e=k(v,"LI",{class:!0});var p=T(e);t=k(p,"DIV",{class:!0});var g=T(t);n=Q(g,l),g.forEach(m),o=j(p),ve(a.$$.fragment,p),r=j(p),ve(i.$$.fragment,p),c=j(p),p.forEach(m),this.h()},h(){h(t,"class","text-xs font-bold"),h(e,"class","svelte-4hctsl")},m(v,p){U(v,e,p),f(e,t),f(t,n),f(e,o),ge(a,e,null),f(e,r),ge(i,e,null),f(e,c),d=!0},p(v,p){s=v,(!d||p&2)&&l!==(l=s[23].raw.names[0]+"")&&oe(n,l);const g={};p&2&&(g.scale=s[23].scale),p&2&&(g.intervals=s[23].raw.intervals),a.$set(g);const N={};p&2&&(N.triads=s[23].triads),p&2&&(N.chords=s[23].triadChords),i.$set(N)},i(v){d||(H(a.$$.fragment,v),H(i.$$.fragment,v),d=!0)},o(v){z(a.$$.fragment,v),z(i.$$.fragment,v),d=!1},d(v){v&&m(e),be(a),be(i)}}}function Do(s){let e,t,l,n,o="Scales",a,r,i,c,d="Key",u,_,v,p,g,N,y,I,C,E,L=ae(s[2]),S=[];for(let B=0;B<L.length;B+=1)S[B]=tn(en(s,L,B));const O=B=>z(S[B],1,1,()=>{S[B]=null});let P=ae(s[1]),w=[];for(let B=0;B<P.length;B+=1)w[B]=sn(Zl(s,P,B));const M=B=>z(w[B],1,1,()=>{w[B]=null});return{c(){e=b("div"),t=b("fieldset"),l=b("legend"),n=b("button"),n.textContent=o,a=V(),r=b("div"),i=b("div"),c=b("label"),c.textContent=d,u=V(),_=b("input"),v=V(),p=b("ul");for(let B=0;B<S.length;B+=1)S[B].c();g=V(),N=b("ul");for(let B=0;B<w.length;B+=1)w[B].c();this.h()},l(B){e=k(B,"DIV",{class:!0});var A=T(e);t=k(A,"FIELDSET",{class:!0});var D=T(t);l=k(D,"LEGEND",{class:!0});var R=T(l);n=k(R,"BUTTON",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-lhx60e"&&(n.textContent=o),R.forEach(m),a=j(D),r=k(D,"DIV",{class:!0});var G=T(r);i=k(G,"DIV",{class:!0});var K=T(i);c=k(K,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(c)!=="svelte-14m38zf"&&(c.textContent=d),u=j(K),_=k(K,"INPUT",{class:!0,id:!0}),K.forEach(m),v=j(G),p=k(G,"UL",{class:!0});var q=T(p);for(let le=0;le<S.length;le+=1)S[le].l(q);q.forEach(m),g=j(G),N=k(G,"UL",{class:!0});var fe=T(N);for(let le=0;le<w.length;le+=1)w[le].l(fe);fe.forEach(m),G.forEach(m),D.forEach(m),A.forEach(m),this.h()},h(){h(n,"class","px-1 rounded hover:bg-gray-100"),h(l,"class","text-base"),h(c,"class","mr-4 font-bold"),h(c,"for","scale-key"),h(_,"class","bg-gray-100 w-16 px-1 rounded"),h(_,"id","scale-key"),_.value=s[0],h(i,"class","flex w-1/2 mb-2 input svelte-4hctsl"),h(p,"class","list odd w-full svelte-4hctsl"),h(N,"class","list even w-full svelte-4hctsl"),h(r,"class","body svelte-4hctsl"),W(r,"hidden",s[3]),h(t,"class","flex flex-col rounded border-2 px-4 pt-2 pb-4 my-4 text-sm svelte-4hctsl"),W(t,"collapsed",s[3]),h(e,"class",y=me(`${s[9].class||""}`)+" svelte-4hctsl")},m(B,A){U(B,e,A),f(e,t),f(t,l),f(l,n),f(t,a),f(t,r),f(r,i),f(i,c),f(i,u),f(i,_),f(r,v),f(r,p);for(let D=0;D<S.length;D+=1)S[D]&&S[D].m(p,null);f(r,g),f(r,N);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(N,null);I=!0,C||(E=[x(n,"click",s[5]),x(_,"input",s[6])],C=!0)},p(B,[A]){if((!I||A&1&&_.value!==B[0])&&(_.value=B[0]),A&388){L=ae(B[2]);let D;for(D=0;D<L.length;D+=1){const R=en(B,L,D);S[D]?(S[D].p(R,A),H(S[D],1)):(S[D]=tn(R),S[D].c(),H(S[D],1),S[D].m(p,null))}for(xe(),D=L.length;D<S.length;D+=1)O(D);ze()}if(A&386){P=ae(B[1]);let D;for(D=0;D<P.length;D+=1){const R=Zl(B,P,D);w[D]?(w[D].p(R,A),H(w[D],1)):(w[D]=sn(R),w[D].c(),H(w[D],1),w[D].m(N,null))}for(xe(),D=P.length;D<w.length;D+=1)M(D);ze()}(!I||A&8)&&W(r,"hidden",B[3]),(!I||A&8)&&W(t,"collapsed",B[3]),(!I||A&512&&y!==(y=me(`${B[9].class||""}`)+" svelte-4hctsl"))&&h(e,"class",y)},i(B){if(!I){for(let A=0;A<L.length;A+=1)H(S[A]);for(let A=0;A<P.length;A+=1)H(w[A]);I=!0}},o(B){S=S.filter(Boolean);for(let A=0;A<S.length;A+=1)z(S[A]);w=w.filter(Boolean);for(let A=0;A<w.length;A+=1)z(w[A]);I=!1},d(B){B&&m(e),Be(S,B),Be(w,B),C=!1,st(E)}}}function Po(s,e,t){let l,n,o,a,r,i,c;he(s,rs,w=>t(17,o=w)),he(s,Vt,w=>t(18,a=w)),he(s,ot,w=>t(19,r=w)),he(s,at,w=>t(20,i=w));let u=us().map(w=>({key:w.names[0],raw:w,scale:void 0,triads:w.triads,triadChords:[]})),_="",v=[a.key,a.scale],p;const g=ht(Ue(!0),{key:"scales-hidden"});he(s,g,w=>t(3,c=w));function N(){g.update(w=>!w)}function y({currentTarget:{value:w}}){t(0,_=`${w.charAt(0).toUpperCase()}${w.charAt(1).toLowerCase()}`),t(10,u=u.map(M=>{const B=Gt(_,M.key),A=_&&"data"in B?B.data:void 0;let D=[];return A&&(D=M.triads.map((R,G)=>`${A.scaleNotes[G].note}${!R.suffix.includes("°")&&R.minor?"m":""}${R.suffix}`)),{...M,scale:A,triadChords:D}}))}function I(w,M,B){if(w<M.length){const A=M[w++];Ie.setPlayed(A),i==null||i.playChord(A.map(D=>D.midi),r.fixedVelocity),p=setTimeout(()=>I(w,M,B),B)}else Ie.setPlayed([]),Ie.setKeyAndScale(v[0],v[1])}function C(w){clearTimeout(p);let M,B;w.scale?(B=w.scale,v=[a.key,a.scale],Ie.setKeyAndScale(w.scale.key,w.scale.scale)):B=a;const A=o[0].midi+B.scaleNotes[0].semitones;M=w.raw.intervals.map(D=>[{...B.notesMap.get(D.semitones%12),midi:A+D.semitones}]),M[0][0].semitones!==M[M.length-1][0].semitones&&M.push(M[0].map(D=>({...D,midi:D.midi+12}))),I(0,M,500)}function E(w){clearTimeout(p);const{intervals:M}=w.raw;let B,A;w.scale?(A=w.scale,v=[a.key,a.scale],Ie.setKeyAndScale(w.scale.key,w.scale.scale)):A=a;const D=o[0].midi+A.scaleNotes[0].semitones;B=_n(w.triads).map((G,K)=>ws(D+A.intervals[K].semitones,A,G.intervals)),M[M.length-1].interval_seq!==1&&B.push(B[0].map(G=>({...G,midi:G.midi+12}))),I(0,B,750)}const L=w=>C(w),S=w=>E(w),O=w=>C(w),P=w=>E(w);return s.$$set=w=>{t(9,e=Ee(Ee({},e),we(w)))},s.$$.update=()=>{s.$$.dirty&1024&&t(2,l=u.filter((w,M)=>M<u.length/2)),s.$$.dirty&1024&&t(1,n=u.filter((w,M)=>M>=u.length/2))},e=we(e),[_,n,l,c,g,N,y,C,E,e,u,L,S,O,P]}class Oo extends We{constructor(e){super(),qe(this,e,Po,Do,$e,{})}}function ln(s,e,t){const l=s.slice();return l[26]=e[t],l}function nn(s,e,t){const l=s.slice();return l[29]=e[t],l}function an(s){let e,t;return{c(){e=b("div"),t=Y(s[3]),this.h()},l(l){e=k(l,"DIV",{class:!0});var n=T(e);t=Q(n,s[3]),n.forEach(m),this.h()},h(){h(e,"class","error svelte-1u7ze7x")},m(l,n){U(l,e,n),f(e,t)},p(l,n){n[0]&8&&oe(t,l[3])},d(l){l&&m(e)}}}function Vo(s){let e,t;return{c(){e=b("div"),t=Y(s[0]),this.h()},l(l){e=k(l,"DIV",{slot:!0});var n=T(e);t=Q(n,s[0]),n.forEach(m),this.h()},h(){h(e,"slot","value")},m(l,n){U(l,e,n),f(e,t)},p(l,n){n[0]&1&&oe(t,l[0])},d(l){l&&m(e)}}}function on(s){let e,t=ae(s[5]),l=[];for(let n=0;n<t.length;n+=1)l[n]=rn(nn(s,t,n));return{c(){e=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var o=T(e);for(let a=0;a<l.length;a+=1)l[a].l(o);o.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,o){U(n,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,o){if(o[0]&32){t=ae(n[5]);let a;for(a=0;a<t.length;a+=1){const r=nn(n,t,a);l[a]?l[a].p(r,o):(l[a]=rn(r),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function rn(s){let e,t=s[29].interval+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&32&&t!==(t=n[29].interval+"")&&oe(l,t)},d(n){n&&m(e)}}}function cn(s){let e,t=ae(s[8].scaleNotes),l=[];for(let n=0;n<t.length;n+=1)l[n]=un(ln(s,t,n));return{c(){e=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var o=T(e);for(let a=0;a<l.length;a+=1)l[a].l(o);o.forEach(m),this.h()},h(){h(e,"class","intervals my-1 svelte-1u7ze7x")},m(n,o){U(n,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,o){if(o[0]&256){t=ae(n[8].scaleNotes);let a;for(a=0;a<t.length;a+=1){const r=ln(n,t,a);l[a]?l[a].p(r,o):(l[a]=un(r),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&m(e),Be(l,n)}}}function un(s){let e,t=s[26].note+"",l;return{c(){e=b("span"),l=Y(t),this.h()},l(n){e=k(n,"SPAN",{class:!0});var o=T(e);l=Q(o,t),o.forEach(m),this.h()},h(){h(e,"class","svelte-1u7ze7x")},m(n,o){U(n,e,o),f(e,l)},p(n,o){o[0]&256&&t!==(t=n[26].note+"")&&oe(l,t)},d(n){n&&m(e)}}}function jo(s){let e,t,l,n="Score",o,a,r,i,c,d,u,_="Range",v,p,g,N,y,I="—",C,E,L,S,O,P,w,M="Scale",B,A,D,R,G,K,q,fe="Key",le,ee,Ce,te,re,Ae,_e="",ce,Ve,Ne,ne;r=new et({props:{icon:Vs,width:16}});let De=s[3]&&an(s);D=new gn({props:{id:"scales",class:"p-1",options:s[10],onSelect:s[14],$$slots:{value:[Vo]},$$scope:{ctx:s}}});let ke=!s[7]&&on(s),$=!s[7]&&cn(s);return{c(){e=b("fieldset"),t=b("legend"),l=b("button"),l.textContent=n,o=V(),a=b("button"),pe(r.$$.fragment),i=V(),c=b("div"),d=b("div"),u=b("label"),u.textContent=_,v=V(),p=b("div"),g=b("input"),N=V(),y=b("span"),y.textContent=I,C=V(),E=b("input"),L=V(),S=b("div"),De&&De.c(),O=V(),P=b("div"),w=b("label"),w.textContent=M,B=V(),A=b("div"),pe(D.$$.fragment),R=V(),ke&&ke.c(),G=V(),K=b("div"),q=b("label"),q.textContent=fe,le=V(),ee=b("div"),Ce=b("input"),te=V(),$&&$.c(),re=V(),Ae=b("div"),Ae.innerHTML=_e,this.h()},l(ie){e=k(ie,"FIELDSET",{class:!0});var F=T(e);t=k(F,"LEGEND",{class:!0});var X=T(t);l=k(X,"BUTTON",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-lqyol"&&(l.textContent=n),X.forEach(m),o=j(F),a=k(F,"BUTTON",{class:!0});var ye=T(a);ve(r.$$.fragment,ye),ye.forEach(m),i=j(F),c=k(F,"DIV",{class:!0});var Re=T(c);d=k(Re,"DIV",{class:!0});var Z=T(d);u=k(Z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(u)!=="svelte-10u0679"&&(u.textContent=_),v=j(Z),p=k(Z,"DIV",{class:!0});var Le=T(p);g=k(Le,"INPUT",{class:!0,id:!0}),N=j(Le),y=k(Le,"SPAN",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-8q1xz4"&&(y.textContent=I),C=j(Le),E=k(Le,"INPUT",{class:!0,id:!0}),Le.forEach(m),L=j(Z),S=k(Z,"DIV",{class:!0});var rt=T(S);De&&De.l(rt),rt.forEach(m),Z.forEach(m),O=j(Re),P=k(Re,"DIV",{class:!0});var Xe=T(P);w=k(Xe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(w)!=="svelte-ld2d07"&&(w.textContent=M),B=j(Xe),A=k(Xe,"DIV",{class:!0});var Ke=T(A);ve(D.$$.fragment,Ke),Ke.forEach(m),R=j(Xe),ke&&ke.l(Xe),Xe.forEach(m),G=j(Re),K=k(Re,"DIV",{class:!0});var Ge=T(K);q=k(Ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),se(q)!=="svelte-17pcm6g"&&(q.textContent=fe),le=j(Ge),ee=k(Ge,"DIV",{class:!0});var Pe=T(ee);Ce=k(Pe,"INPUT",{class:!0,id:!0}),Pe.forEach(m),te=j(Ge),$&&$.l(Ge),Ge.forEach(m),re=j(Re),Ae=k(Re,"DIV",{class:!0,"data-svelte-h":!0}),se(Ae)!=="svelte-hp3bkp"&&(Ae.innerHTML=_e),Re.forEach(m),F.forEach(m),this.h()},h(){h(l,"class","px-1 rounded hover:bg-gray-100"),h(t,"class","px-1 text-base"),h(a,"class","absolute top-[-0.25rem] right-[0.5rem] flex items-center justify-center rounded px-1 py-1 hover:bg-gray-200"),W(a,"hidden",s[6]),h(u,"class","font-bold"),h(u,"for","range_min"),h(g,"class","h-[28px] w-full"),h(g,"id","range_min"),h(y,"class","mx-2 mt-1"),h(E,"class","h-[28px] w-full"),h(E,"id","range_max"),h(p,"class","my-1 flex w-full"),h(S,"class","flex justify-between my-1"),h(d,"class","flex flex-col h-full"),h(w,"class","font-bold"),h(w,"for","scales"),h(A,"class","my-1 w-full"),h(P,"class","flex flex-col h-full"),h(q,"class","font-bold"),h(q,"for","key"),h(Ce,"class","h-[28px]"),h(Ce,"id","key"),h(ee,"class","my-1 flex"),h(K,"class","flex flex-col h-full"),h(Ae,"class","h-full flex flex-col justify-between"),h(c,"class","options svelte-1u7ze7x"),W(c,"hidden",s[6]),h(e,"class",ce=me(`${s[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"),W(e,"collapsed",s[6])},m(ie,F){U(ie,e,F),f(e,t),f(t,l),f(e,o),f(e,a),ge(r,a,null),f(e,i),f(e,c),f(c,d),f(d,u),f(d,v),f(d,p),f(p,g),Qe(g,s[1]),f(p,N),f(p,y),f(p,C),f(p,E),Qe(E,s[2]),f(d,L),f(d,S),De&&De.m(S,null),f(c,O),f(c,P),f(P,w),f(P,B),f(P,A),ge(D,A,null),f(P,R),ke&&ke.m(P,null),f(c,G),f(c,K),f(K,q),f(K,le),f(K,ee),f(ee,Ce),Qe(Ce,s[4]),f(K,te),$&&$.m(K,null),f(c,re),f(c,Ae),Ve=!0,Ne||(ne=[x(l,"click",s[15]),x(a,"click",s[16]),x(g,"input",s[18]),x(g,"change",s[19]),x(g,"focus",s[12]),x(E,"input",s[20]),x(E,"change",s[21]),x(E,"focus",s[12]),x(Ce,"input",s[22]),x(Ce,"input",s[13])],Ne=!0)},p(ie,F){(!Ve||F[0]&64)&&W(a,"hidden",ie[6]),F[0]&2&&g.value!==ie[1]&&Qe(g,ie[1]),F[0]&4&&E.value!==ie[2]&&Qe(E,ie[2]),ie[3]?De?De.p(ie,F):(De=an(ie),De.c(),De.m(S,null)):De&&(De.d(1),De=null);const X={};F[0]&1|F[1]&2&&(X.$$scope={dirty:F,ctx:ie}),D.$set(X),ie[7]?ke&&(ke.d(1),ke=null):ke?ke.p(ie,F):(ke=on(ie),ke.c(),ke.m(P,null)),F[0]&16&&Ce.value!==ie[4]&&Qe(Ce,ie[4]),ie[7]?$&&($.d(1),$=null):$?$.p(ie,F):($=cn(ie),$.c(),$.m(K,null)),(!Ve||F[0]&64)&&W(c,"hidden",ie[6]),(!Ve||F[0]&131072&&ce!==(ce=me(`${ie[17].class||""} flex flex-col rounded border-2 px-4 py-2 w-[224px] relative text-sm`)+" svelte-1u7ze7x"))&&h(e,"class",ce),(!Ve||F[0]&131136)&&W(e,"collapsed",ie[6])},i(ie){Ve||(H(r.$$.fragment,ie),H(D.$$.fragment,ie),Ve=!0)},o(ie){z(r.$$.fragment,ie),z(D.$$.fragment,ie),Ve=!1},d(ie){ie&&m(e),be(r),De&&De.d(),be(D),ke&&ke.d(),$&&$.d(),Ne=!1,st(ne)}}}function Bo(s,e,t){let l,n,o,a,r,i;he(s,rs,A=>t(23,n=A)),he(s,Ct,A=>t(24,o=A)),he(s,Et,A=>t(7,r=A)),he(s,Vt,A=>t(8,i=A));let c=tt(n[0]),d=tt(n[1]),u="";const _=ht(Ue(!1),{key:"score-options-hidden"});he(s,_,A=>t(6,a=A));let v=o[0],p=o[1];const g=us(),N=g.map(A=>({key:A.names[0],value:A.names[0]}));rs.subscribe(A=>{t(1,c=tt(A[0])),t(2,d=tt(A[1]))}),Ct.subscribe(A=>{t(4,v=A[0]),t(0,p=A[1])});function y(A,D){const R=Yn(D.currentTarget.value,!0,!0);if("data"in R){const{midi:G}=R.data,K=n,q=[A==="min"?G:K[0].midi,A==="max"?G:K[1].midi];Ye.setMidiRange(q),t(3,u="")}else t(3,u=R.err),A==="min"?t(1,c=tt(n[0])):t(2,d=tt(n[1]))}function I(){t(3,u="")}function C({currentTarget:{value:A}}){t(4,v=`${A.charAt(0).toUpperCase()}${A.charAt(1).toLowerCase()}`),Ie.setKey(v)}function E(A){var D;return t(0,p=(D=N.find(R=>A===R.key))==null?void 0:D.value),Ie.setScale(p),!1}function L(){_.update(A=>!A)}function S(){Ie.clearScore(!0),Ye.setMidiRange([60,84])}function O(){c=this.value,t(1,c)}const P=A=>y("min",A);function w(){d=this.value,t(2,d)}const M=A=>y("max",A);function B(){v=this.value,t(4,v)}return s.$$set=A=>{t(17,e=Ee(Ee({},e),we(A)))},s.$$.update=()=>{var A;s.$$.dirty[0]&1&&t(5,l=((A=g.find(D=>D.names[0]===p))==null?void 0:A.intervals)||[])},e=we(e),[p,c,d,u,v,l,a,r,i,_,N,y,I,C,E,L,S,e,O,P,w,M,B]}class Go extends We{constructor(e){super(),qe(this,e,Bo,jo,$e,{},null,[-1,-1])}}function Mo(s){s[19]=s[20].default}function Uo(s){return{c:ue,l:ue,m:ue,i:ue,o:ue,d:ue}}function Ro(s){Mo(s);let e,t,l;var n=s[19];function o(a,r){return{props:{class:"px-4 md:px-0"}}}return n&&(e=Nn(n,o())),{c(){e&&pe(e.$$.fragment),t=je()},l(a){e&&ve(e.$$.fragment,a),t=je()},m(a,r){e&&ge(e,a,r),U(a,t,r),l=!0},i(a){l||(e&&H(e.$$.fragment,a),l=!0)},o(a){e&&z(e.$$.fragment,a),l=!1},d(a){a&&m(t),e&&be(e,a)}}}function Ko(s){let e;return{c(){e=Y(" ")},l(t){e=Q(t," ")},m(t,l){U(t,e,l)},i:ue,o:ue,d(t){t&&m(e)}}}function Fo(s){let e,t,l,n='<a class="hover:underline" href="https://github.com/TeemuKoivisto/midi-note-trainer">MIDI Note Trainer</a>',o,a,r,i,c,d,u,_,v,p,g,N,y,I,C,E,L,S,O;r=new io({}),c=new Oo({}),u=new ka({}),p=new Go({props:{class:"score-options mr-4"}}),N=new Eo({props:{class:"play-form"}});let P={ctx:s,current:null,token:null,hasCatch:!1,pending:Ko,then:Ro,catch:Uo,value:20,blocks:[,,,]};return An(de(()=>import("./Score.2c8bb8a0.js"),["./Score.2c8bb8a0.js","./vendor_svelte.687df11a.js","./vendor.13a9dfeb.js","./vendor_vexflow.2dfca40b.js","../assets/Score.04e240b8.css"],import.meta.url),P),E=new po({props:{class:"min-h-32",debounced:!!s[0]}}),E.$on("guessed-chord",s[2]),E.$on("guessed-key",s[3]),E.$on("guessed-note",s[4]),S=new Oa({props:{game:s[1]}}),{c(){e=b("meta"),t=V(),l=b("h1"),l.innerHTML=n,o=V(),a=b("section"),pe(r.$$.fragment),i=V(),pe(c.$$.fragment),d=V(),pe(u.$$.fragment),_=V(),v=b("div"),pe(p.$$.fragment),g=V(),pe(N.$$.fragment),y=V(),P.block.c(),I=V(),C=b("section"),pe(E.$$.fragment),L=V(),pe(S.$$.fragment),this.h()},l(w){const M=Sn("svelte-1w2oado",document.head);e=k(M,"META",{name:!0,content:!0}),M.forEach(m),t=j(w),l=k(w,"H1",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-1l8ebwf"&&(l.innerHTML=n),o=j(w),a=k(w,"SECTION",{class:!0});var B=T(a);ve(r.$$.fragment,B),i=j(B),ve(c.$$.fragment,B),d=j(B),ve(u.$$.fragment,B),_=j(B),v=k(B,"DIV",{class:!0});var A=T(v);ve(p.$$.fragment,A),g=j(A),ve(N.$$.fragment,A),A.forEach(m),B.forEach(m),y=j(w),P.block.l(w),I=j(w),C=k(w,"SECTION",{class:!0});var D=T(C);ve(E.$$.fragment,D),L=j(D),ve(S.$$.fragment,D),D.forEach(m),this.h()},h(){h(e,"name","description"),h(e,"content","App to practise music notation, scales and chords using MIDI"),h(l,"class","my-8 md:text-5xl mt-12 px-4 md:px-0 text-3xl font-cursive tracking-tight"),h(v,"class","play svelte-qjpqy3"),h(a,"class","px-4 md:px-0"),h(C,"class","mb-8 px-4 md:px-0 flex flex-col")},m(w,M){f(document.head,e),U(w,t,M),U(w,l,M),U(w,o,M),U(w,a,M),ge(r,a,null),f(a,i),ge(c,a,null),f(a,d),ge(u,a,null),f(a,_),f(a,v),ge(p,v,null),f(v,g),ge(N,v,null),U(w,y,M),P.block.m(w,P.anchor=M),P.mount=()=>I.parentNode,P.anchor=I,U(w,I,M),U(w,C,M),ge(E,C,null),f(C,L),ge(S,C,null),O=!0},p(w,[M]){s=w;const B={};M&1&&(B.debounced=!!s[0]),E.$set(B);const A={};M&2&&(A.game=s[1]),S.$set(A)},i(w){O||(H(r.$$.fragment,w),H(c.$$.fragment,w),H(u.$$.fragment,w),H(p.$$.fragment,w),H(N.$$.fragment,w),H(P.block),H(E.$$.fragment,w),H(S.$$.fragment,w),O=!0)},o(w){z(r.$$.fragment,w),z(c.$$.fragment,w),z(u.$$.fragment,w),z(p.$$.fragment,w),z(N.$$.fragment,w);for(let M=0;M<3;M+=1){const B=P.blocks[M];z(B)}z(E.$$.fragment,w),z(S.$$.fragment,w),O=!1},d(w){w&&(m(t),m(l),m(o),m(a),m(y),m(I),m(C)),m(e),be(r),be(c),be(u),be(p),be(N),P.block.d(w),P.token=null,P=null,be(E),be(S)}}}function Ho(s,e,t){let l,n,o,a,r,i;he(s,bt,L=>t(7,l=L)),he(s,Et,L=>t(1,n=L)),he(s,dt,L=>t(8,o=L)),he(s,ot,L=>t(9,a=L)),he(s,at,L=>t(10,r=L)),he(s,Ts,L=>t(11,i=L));let c,d;fn(()=>(i&&E(),window.addEventListener("keydown",u),window.addEventListener("mousedown",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)})),os.subscribe(L=>{L&&L.channels[1].addListener("noteon",_)});function u(){Ye.initAudio(),window.removeEventListener("keydown",u),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)}function _(L){if(c)return;const S=L.rawData;v(S[1],S[2])}function v(L,S){const O=n;O instanceof Ot&&!(O!=null&&O.ended)&&l==="waiting"?N(L):O instanceof ft&&!(O!=null&&O.ended)&&l==="waiting"?(O.addPlayedNote(L),d||(d=setTimeout(g,2e3))):O||Ie.pushPlayed(L),r&&r.noteOn(L,a.fixedVelocity??S)}function p(){o.autoplay&&o.waitSeconds>0?t(0,c=setTimeout(()=>{o.autoplay&&Se.nextGuess(),t(0,c=void 0)},o.waitSeconds*1e3)):o.autoplay?Se.nextGuess():t(0,c=void 0)}function g(){var S;const L=n;if(L instanceof ft){const O=L.guess();Ie.setPlayed(((S=L.latestGuess.guessed)==null?void 0:S.notes)||[],O,-1),Se.updateState(O?"correct":"wrong"),p()}d=void 0}function N(L){const S=n;if(S instanceof Ot&&l==="waiting"){Ie.setTarget([Ie.getNote(S.current)]);const O=S.guess(L);Se.updateState(O?"correct":"wrong"),Ie.pushPlayed(L,O,4e3),p()}}function y(L){const S=n;if(S instanceof ft&&l==="waiting"){const O=S.guessWrittenChord(L.detail);Se.updateState(O?"correct":"wrong"),p()}}function I(L){const S=n;if(S instanceof Mt&&l==="waiting"){const O=L.detail.replaceAll("♭","b").replaceAll("♯","#"),P=S.guess(O);Se.updateState(P?"correct":"wrong"),p()}}function C(L){v(L.detail,80)}async function E(){const L=await Ye.openMidi();"data"in L?L.data.name:(L.err,console.error(L.err))}return[c,n,y,I,C]}class qo extends We{constructor(e){super(),qe(this,e,Ho,Fo,$e,{})}}export{el as F,ft as G,qo as P,Kn as S,Ot as a,Se as b,Et as c,gt as d,js as e,bt as g,at as p,Vt as s,ll as t};
